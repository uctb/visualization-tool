var Xse=Object.create;var hd=Object.defineProperty;var Jse=Object.getOwnPropertyDescriptor;var Yse=Object.getOwnPropertyNames,dI=Object.getOwnPropertySymbols,vI=Object.getPrototypeOf,xI=Object.prototype.hasOwnProperty,Qse=Object.prototype.propertyIsEnumerable,eue=Reflect.get;var Wf=Math.pow,gI=(r,e,t)=>e in r?hd(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xa=(r,e)=>{for(var t in e||(e={}))xI.call(e,t)&&gI(r,t,e[t]);if(dI)for(var t of dI(e))Qse.call(e,t)&&gI(r,t,e[t]);return r};var g=(r,e)=>()=>(r&&(e=r(r=0)),e);var Re=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Is=(r,e)=>{for(var t in e)hd(r,t,{get:e[t],enumerable:!0})},tue=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Yse(e))!xI.call(r,i)&&i!==t&&hd(r,i,{get:()=>e[i],enumerable:!(n=Jse(e,i))||n.enumerable});return r};var Si=(r,e,t)=>(t=r!=null?Xse(vI(r)):{},tue(e||!r||!r.__esModule?hd(t,"default",{value:r,enumerable:!0}):t,r));var yI=(r,e,t)=>eue(vI(r),t,e);var Qt=(r,e,t)=>new Promise((n,i)=>{var o=u=>{try{s(t.next(u))}catch(c){i(c)}},a=u=>{try{s(t.throw(u))}catch(c){i(c)}},s=u=>u.done?n(u.value):Promise.resolve(u.value).then(o,a);s((t=t.apply(r,e)).next())});function rue(r){L0=r}function qe(){if(L0===null)throw Error(`
============================
Howdy \u{1F44B}\u{1F44B}. Looks like you are running scikit but you haven't set a Tensorflow backend. 
To do so, simply import (or require) your tensorflow library, and call setBackend like so,

import * as tf from '@tensorflow/tfjs'
import * as sk from 'scikitjs'
sk.setBackend(tf)

That will let scikit know you wish to use a tensorflow library to perform your calculations.
============================
    `);return L0}var L0,Pt=g(()=>{L0=null});function nue(r){return typeof r=="string"||r instanceof String}function iue(r){return typeof r=="boolean"}function oue(r){return typeof r=="number"}function Ge(r,e){if(!r)throw new Error(e)}function dd(r,e){let t=r;if(Hf(r))return e==="string"?[]:[r.length];if(!Array.isArray(r))return[];let n=[];for(;Array.isArray(t)||Hf(t)&&e!=="string";)n.push(t.length),t=t[0];return Array.isArray(r)&&bI(r,n,[]),n}function bI(r,e,t){if(t=t||[],!Array.isArray(r)&&!Hf(r)){Ge(e.length===0,`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Ge(e.length>0,`Element arr[${t.join("][")}] should be a primitive, but is an array of ${r.length} elements`),Ge(r.length===e[0],`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${r.length} elements`);let n=e.slice(1);for(let i=0;i<r.length;++i)bI(r[i],n,t.concat(i))}function q0(r){return Array.isArray(r)?q0(r[0]):r instanceof Float32Array?"float32":r instanceof Int32Array||r instanceof Uint8Array?"int32":oue(r)?"float32":nue(r)?"string":iue(r)?"bool":null}function Hf(r){return r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array}function aue(r){let e=dd(r),t=q0(r);return e.length===1&&t!==null}function sue(r){let e=dd(r),t=q0(r);return e.length===2&&t!==null}function ao(r){let e=qe();return r instanceof e.Tensor}function Ja(r){return typeof r!="object"?!1:!!(r&&r.iloc&&!r.applyMap)}function rn(r){return typeof r!="object"?!1:!!(r&&r.iloc&&r.applyMap)}function Ki(r){return Ja(r)?!0:ao(r)?r.rank===1:aue(r)}function dr(r){return rn(r)?!0:ao(r)?r.rank===2:sue(r)}function wI(r){return Ki(r)||dr(r)}var Dr=g(()=>{Pt();});function Go(r,e){let t=qe();if(Ja(r))return e?r.tensor.asType(e):r.tensor;if(ao(r)){if(r.shape.length===1)return!e||r.dtype==e?r:r.asType(e);throw new Error("ParamError: if data is a Tensor it must be a Tensor1D. If you really meant to reshape this tensor than use tf.reshape")}return e?t.tensor1d(r,e):t.tensor1d(r)}function Ya(r,e){let t=Go(r,e);if(t.dtype==="string")throw new Error("ParamError: data has string dtype, can't convert to numeric Tensor");return t}function Tc(r,e){let t=qe();if(rn(r))return e?r.tensor.asType(e):r.tensor;if(ao(r)){if(r.shape.length===2)return!e||r.dtype==e?r:r.asType(e);throw new Error("ParamError: if data is a Tensor it must be a Tensor2D. If you really meant to reshape this tensor than use tf.reshape")}if(Array.isArray(r)&&Hf(r[0])){let n=dd(r),i=r.map(o=>Array.from(o));return e?t.tensor2d(i,n,e):t.tensor2d(i,n)}return e?t.tensor2d(r,void 0,e):t.tensor2d(r,void 0)}function uue(r,e){try{return Go(r,e)}catch(t){try{return Tc(r,e)}catch(n){throw new Error('ParamError: Can"t convert data into 1D or 2D tensor')}}}function _t(r,e){let t=Tc(r,e);if(t.dtype==="string")throw new Error("ParamError: data has string dtype, can't convert to numeric Tensor");return t}function Cc(r,e){let t=uue(r,e);if(t.dtype==="string")throw new Error("ParamError: data has string dtype, can't convert to numeric Tensor");return t}function ya(r){return rn(r)?r.values:ao(r)?r.arraySync():r}function gd(r){return Ja(r)?r.values:ao(r)?r.arraySync():r}function gu(r){return Ge(wI(r),"X isn't a Scikit2D or Scikit1D object"),ao(r)?r.shape[0]:rn(r)||Ja(r)?r.size:r.length}function vd(r,e,t){let n=qe(),i=new Map,o=[],a=n.randomUniform([e],0,r,"float32",t).dataSync();for(let s=0;s<a.length;s++){a[s]=a[s]*(r-s)/r;let u=Math.floor(a[s]),c=r-s-1;i.get(u)===void 0&&i.set(u,u),i.get(c)===void 0&&i.set(c,c);let l=i.get(c);i.set(c,i.get(u)),i.set(u,l),o.push(i.get(c))}return o}var Kr=g(()=>{Dr();Pt();});var P0=Re((X2e,NI)=>{var cue=typeof global=="object"&&global&&global.Object===Object&&global;NI.exports=cue});var Ic=Re((J2e,SI)=>{var lue=P0(),fue=typeof self=="object"&&self&&self.Object===Object&&self,pue=lue||fue||Function("return this")();SI.exports=pue});var $0=Re((Y2e,AI)=>{var mue=Ic(),hue=mue.Symbol;AI.exports=hue});var TI=Re((Q2e,EI)=>{var MI=$0(),DI=Object.prototype,due=DI.hasOwnProperty,gue=DI.toString,Kf=MI?MI.toStringTag:void 0;function vue(r){var e=due.call(r,Kf),t=r[Kf];try{r[Kf]=void 0;var n=!0}catch{}var i=gue.call(r);return n&&(e?r[Kf]=t:delete r[Kf]),i}EI.exports=vue});var II=Re((eDe,CI)=>{var xue=Object.prototype,yue=xue.toString;function bue(r){return yue.call(r)}CI.exports=bue});var xd=Re((tDe,_I)=>{var kI=$0(),wue=TI(),Nue=II(),Sue="[object Null]",Aue="[object Undefined]",OI=kI?kI.toStringTag:void 0;function Mue(r){return r==null?r===void 0?Aue:Sue:OI&&OI in Object(r)?wue(r):Nue(r)}_I.exports=Mue});var U0=Re((rDe,FI)=>{function Due(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}FI.exports=Due});var G0=Re((nDe,BI)=>{var Eue=xd(),Tue=U0(),Cue="[object AsyncFunction]",Iue="[object Function]",kue="[object GeneratorFunction]",Oue="[object Proxy]";function _ue(r){if(!Tue(r))return!1;var e=Eue(r);return e==Iue||e==kue||e==Cue||e==Oue}BI.exports=_ue});var RI=Re((iDe,zI)=>{var Fue=Ic(),Bue=Fue["__core-js_shared__"];zI.exports=Bue});var PI=Re((oDe,qI)=>{var V0=RI(),LI=function(){var r=/[^.]+$/.exec(V0&&V0.keys&&V0.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function zue(r){return!!LI&&LI in r}qI.exports=zue});var UI=Re((aDe,$I)=>{var Rue=Function.prototype,Lue=Rue.toString;function que(r){if(r!=null){try{return Lue.call(r)}catch{}try{return r+""}catch{}}return""}$I.exports=que});var VI=Re((sDe,GI)=>{var Pue=G0(),$ue=PI(),Uue=U0(),Gue=UI(),Vue=/[\\^$.*+?()[\]{}|]/g,Wue=/^\[object .+?Constructor\]$/,Hue=Function.prototype,Kue=Object.prototype,jue=Hue.toString,Zue=Kue.hasOwnProperty,Xue=RegExp("^"+jue.call(Zue).replace(Vue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Jue(r){if(!Uue(r)||$ue(r))return!1;var e=Pue(r)?Xue:Wue;return e.test(Gue(r))}GI.exports=Jue});var HI=Re((uDe,WI)=>{function Yue(r,e){return r?.[e]}WI.exports=Yue});var yd=Re((cDe,KI)=>{var Que=VI(),ece=HI();function tce(r,e){var t=ece(r,e);return Que(t)?t:void 0}KI.exports=tce});var jf=Re((lDe,jI)=>{var rce=yd(),nce=rce(Object,"create");jI.exports=nce});var JI=Re((fDe,XI)=>{var ZI=jf();function ice(){this.__data__=ZI?ZI(null):{},this.size=0}XI.exports=ice});var QI=Re((pDe,YI)=>{function oce(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}YI.exports=oce});var tk=Re((mDe,ek)=>{var ace=jf(),sce="__lodash_hash_undefined__",uce=Object.prototype,cce=uce.hasOwnProperty;function lce(r){var e=this.__data__;if(ace){var t=e[r];return t===sce?void 0:t}return cce.call(e,r)?e[r]:void 0}ek.exports=lce});var nk=Re((hDe,rk)=>{var fce=jf(),pce=Object.prototype,mce=pce.hasOwnProperty;function hce(r){var e=this.__data__;return fce?e[r]!==void 0:mce.call(e,r)}rk.exports=hce});var ok=Re((dDe,ik)=>{var dce=jf(),gce="__lodash_hash_undefined__";function vce(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=dce&&e===void 0?gce:e,this}ik.exports=vce});var sk=Re((gDe,ak)=>{var xce=JI(),yce=QI(),bce=tk(),wce=nk(),Nce=ok();function kc(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}kc.prototype.clear=xce;kc.prototype.delete=yce;kc.prototype.get=bce;kc.prototype.has=wce;kc.prototype.set=Nce;ak.exports=kc});var ck=Re((vDe,uk)=>{function Sce(){this.__data__=[],this.size=0}uk.exports=Sce});var fk=Re((xDe,lk)=>{function Ace(r,e){return r===e||r!==r&&e!==e}lk.exports=Ace});var Zf=Re((yDe,pk)=>{var Mce=fk();function Dce(r,e){for(var t=r.length;t--;)if(Mce(r[t][0],e))return t;return-1}pk.exports=Dce});var hk=Re((bDe,mk)=>{var Ece=Zf(),Tce=Array.prototype,Cce=Tce.splice;function Ice(r){var e=this.__data__,t=Ece(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():Cce.call(e,t,1),--this.size,!0}mk.exports=Ice});var gk=Re((wDe,dk)=>{var kce=Zf();function Oce(r){var e=this.__data__,t=kce(e,r);return t<0?void 0:e[t][1]}dk.exports=Oce});var xk=Re((NDe,vk)=>{var _ce=Zf();function Fce(r){return _ce(this.__data__,r)>-1}vk.exports=Fce});var bk=Re((SDe,yk)=>{var Bce=Zf();function zce(r,e){var t=this.__data__,n=Bce(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}yk.exports=zce});var Nk=Re((ADe,wk)=>{var Rce=ck(),Lce=hk(),qce=gk(),Pce=xk(),$ce=bk();function Oc(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Oc.prototype.clear=Rce;Oc.prototype.delete=Lce;Oc.prototype.get=qce;Oc.prototype.has=Pce;Oc.prototype.set=$ce;wk.exports=Oc});var Ak=Re((MDe,Sk)=>{var Uce=yd(),Gce=Ic(),Vce=Uce(Gce,"Map");Sk.exports=Vce});var Ek=Re((DDe,Dk)=>{var Mk=sk(),Wce=Nk(),Hce=Ak();function Kce(){this.size=0,this.__data__={hash:new Mk,map:new(Hce||Wce),string:new Mk}}Dk.exports=Kce});var Ck=Re((EDe,Tk)=>{function jce(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}Tk.exports=jce});var Xf=Re((TDe,Ik)=>{var Zce=Ck();function Xce(r,e){var t=r.__data__;return Zce(e)?t[typeof e=="string"?"string":"hash"]:t.map}Ik.exports=Xce});var Ok=Re((CDe,kk)=>{var Jce=Xf();function Yce(r){var e=Jce(this,r).delete(r);return this.size-=e?1:0,e}kk.exports=Yce});var Fk=Re((IDe,_k)=>{var Qce=Xf();function ele(r){return Qce(this,r).get(r)}_k.exports=ele});var zk=Re((kDe,Bk)=>{var tle=Xf();function rle(r){return tle(this,r).has(r)}Bk.exports=rle});var Lk=Re((ODe,Rk)=>{var nle=Xf();function ile(r,e){var t=nle(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}Rk.exports=ile});var Pk=Re((_De,qk)=>{var ole=Ek(),ale=Ok(),sle=Fk(),ule=zk(),cle=Lk();function _c(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}_c.prototype.clear=ole;_c.prototype.delete=ale;_c.prototype.get=sle;_c.prototype.has=ule;_c.prototype.set=cle;qk.exports=_c});var Uk=Re((FDe,$k)=>{var lle="__lodash_hash_undefined__";function fle(r){return this.__data__.set(r,lle),this}$k.exports=fle});var Vk=Re((BDe,Gk)=>{function ple(r){return this.__data__.has(r)}Gk.exports=ple});var Hk=Re((zDe,Wk)=>{var mle=Pk(),hle=Uk(),dle=Vk();function bd(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new mle;++e<t;)this.add(r[e])}bd.prototype.add=bd.prototype.push=hle;bd.prototype.has=dle;Wk.exports=bd});var jk=Re((RDe,Kk)=>{function gle(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}Kk.exports=gle});var Xk=Re((LDe,Zk)=>{function vle(r){return r!==r}Zk.exports=vle});var Yk=Re((qDe,Jk)=>{function xle(r,e,t){for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}Jk.exports=xle});var e3=Re((PDe,Qk)=>{var yle=jk(),ble=Xk(),wle=Yk();function Nle(r,e,t){return e===e?wle(r,e,t):yle(r,ble,t)}Qk.exports=Nle});var r3=Re(($De,t3)=>{var Sle=e3();function Ale(r,e){var t=r==null?0:r.length;return!!t&&Sle(r,e,0)>-1}t3.exports=Ale});var i3=Re((UDe,n3)=>{function Mle(r,e,t){for(var n=-1,i=r==null?0:r.length;++n<i;)if(t(e,r[n]))return!0;return!1}n3.exports=Mle});var a3=Re((GDe,o3)=>{function Dle(r,e){return r.has(e)}o3.exports=Dle});var u3=Re((VDe,s3)=>{var Ele=yd(),Tle=Ic(),Cle=Ele(Tle,"Set");s3.exports=Cle});var l3=Re((WDe,c3)=>{function Ile(){}c3.exports=Ile});var W0=Re((HDe,f3)=>{function kle(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}f3.exports=kle});var m3=Re((KDe,p3)=>{var H0=u3(),Ole=l3(),_le=W0(),Fle=1/0,Ble=H0&&1/_le(new H0([,-0]))[1]==Fle?function(r){return new H0(r)}:Ole;p3.exports=Ble});var d3=Re((jDe,h3)=>{var zle=Hk(),Rle=r3(),Lle=i3(),qle=a3(),Ple=m3(),$le=W0(),Ule=200;function Gle(r,e,t){var n=-1,i=Rle,o=r.length,a=!0,s=[],u=s;if(t)a=!1,i=Lle;else if(o>=Ule){var c=e?null:Ple(r);if(c)return $le(c);a=!1,i=qle,u=new zle}else u=e?[]:s;e:for(;++n<o;){var l=r[n],f=e?e(l):l;if(l=t||l!==0?l:0,a&&f===f){for(var p=u.length;p--;)if(u[p]===f)continue e;e&&u.push(f),s.push(l)}else i(u,f,t)||(u!==s&&u.push(f),s.push(l))}return s}h3.exports=Gle});var K0=Re((ZDe,g3)=>{var Vle=d3();function Wle(r){return r&&r.length?Vle(r):[]}g3.exports=Wle});var j0={};Is(j0,{accuracyScore:()=>vu,confusionMatrix:()=>tfe,hingeLoss:()=>Jle,huberLoss:()=>Yle,logLoss:()=>Qle,meanAbsoluteError:()=>jle,meanSquaredError:()=>Zle,meanSquaredLogError:()=>Xle,precisionScore:()=>Hle,r2Score:()=>Jf,recallScore:()=>Kle,rocAucScore:()=>rfe,zeroOneLoss:()=>efe});function ji(r,e){Ge(Ki(r),"Labels can't be converted to a 1D Tensor"),Ge(Ki(e),"Predictions can't be converted to a 1D Tensor");let t=Ya(r),n=Ya(e);return Ge(t.size>0,"Must have 1 label or more"),Ge(n.size>0,"Must have 1 prediction or more"),Ge(t.size===n.size,"Not the same size arrays"),{labelsT:t,predictionsT:n}}function vu(r,e){let{labelsT:t,predictionsT:n}=ji(r,e);return t.equal(n).sum().div(t.size).dataSync()[0]}function Hle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.metrics.precision(n,i).dataSync()[0]}function Kle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.metrics.recall(n,i).dataSync()[0]}function Jf(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e),o=t.metrics.meanSquaredError(n,i),a=t.metrics.meanSquaredError(n,n.mean());return t.sub(1,o.div(a)).dataSync()[0]}function jle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.metrics.meanAbsoluteError(n,i).dataSync()[0]}function Zle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.metrics.meanSquaredError(n,i).dataSync()[0]}function Xle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.square(n.log1p().sub(i.log1p())).sum().div(n.size).dataSync()[0]}function Jle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.losses.hingeLoss(n,i).dataSync()[0]}function Yle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.losses.huberLoss(n,i).dataSync()[0]}function Qle(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.losses.logLoss(n,i).dataSync()[0]}function efe(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e);return t.sub(1,vu(n,i)).dataSync()[0]}function tfe(r,e){let t=qe(),{labelsT:n,predictionsT:i}=ji(r,e),o=(0,v3.default)(n.dataSync());return t.math.confusionMatrix(n,i,o.length).arraySync()}function rfe(r,e){let{labelsT:t,predictionsT:n}=ji(r,e),i=t.arraySync(),o=n.arraySync();i.push(1),o.push(1);let a=0;for(let s=0;s<i.length-1;s++)a+=i[s]*o[s+1]-i[s+1]*o[s];return a-=1,Math.abs(a)/2}var v3,wd=g(()=>{Kr();Dr();v3=Si(K0());Pt();});var Fc,Qf,Yf,x3,y3,b3=g(()=>{Fc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Yf=0;Yf<Fc.length;Yf++)Qf[Fc.charCodeAt(Yf)]=Yf;x3=function(r){var e=new Uint8Array(r),t,n=e.length,i="";for(t=0;t<n;t+=3)i+=Fc[e[t]>>2],i+=Fc[(e[t]&3)<<4|e[t+1]>>4],i+=Fc[(e[t+1]&15)<<2|e[t+2]>>6],i+=Fc[e[t+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i},y3=function(r){var e=r.length*.75,t=r.length,n,i=0,o,a,s,u;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var c=new ArrayBuffer(e),l=new Uint8Array(c);for(n=0;n<t;n+=4)o=Qf[r.charCodeAt(n)],a=Qf[r.charCodeAt(n+1)],s=Qf[r.charCodeAt(n+2)],u=Qf[r.charCodeAt(n+3)],l[i++]=o<<2|a>>4,l[i++]=(a&15)<<4|s>>2,l[i++]=(s&3)<<6|u&63;return c}});function ife(r){let e="";for(let t=0;t<r;t++){let n=Math.floor(Math.random()*w3.length);e+=w3[n]}return e}function Z0(t){return Qt(this,arguments,function*(r,e=[]){let n=qe();if(["number","string","undefined","boolean"].includes(typeof r))return r;if(typeof r=="function"&&(console.warn(`warning: Serializing function ${r}. Not going to be able to deserialize this later.`),r.name))return r.name;if(typeof r=="object"){if(r===null)return null;if(Array.isArray(r))return yield Promise.all(r.map(o=>Qt(this,null,function*(){return yield Z0(o,e)})));if(r instanceof n.Tensor)return{name:"Tensor",value:r.arraySync()};if(r instanceof Int32Array)return{name:"Int32Array",value:Array.from(r)};if(r instanceof Float32Array)return{name:"Float32Array",value:Array.from(r)};if(r instanceof n.Sequential){let o=new Nd;return yield r.save(o),{name:"Sequential",artifacts:o.savedArtifacts}}if(r.ENV&&r.AdadeltaOptimizer&&r.version)return{name:"TF",version:r.version.tfjs};let i={};for(let o of Object.keys(r))e.includes(o)||(i[o]=yield Z0(r[o],e));return i}})}function X0(r){return Qt(this,null,function*(){let e=qe();if(typeof r!="object")return r;if(r===null)return null;if(r.name==="Tensor")return e.tensor(r.value);if(r.name==="Sequential"){let t=new Nd(r.artifacts);return yield e.loadLayersModel(t)}if(r.name==="Int32Array")return new Int32Array(r.value);if(r.name==="Float32Array")return new Float32Array(r.value);if(r.name==="TF")return e;if(Array.isArray(r))return yield Promise.all(r.map(t=>Qt(this,null,function*(){return yield X0(t)})));for(let t of Object.keys(r))r[t]=yield X0(r[t]);if(nfe.includes(r.name)){let n=(yield Promise.resolve().then(()=>(U2e(),M8t)))[r.name],i=new n(r);for(let o of Object.keys(r))i[o]=r[o];return i}return r})}function N3(r){return Qt(this,null,function*(){try{return yield X0(r)}catch(e){console.error(e)}})}function ofe(r){return Qt(this,null,function*(){return yield N3(JSON.parse(r))})}var nfe,w3,Nd,afe,qr,so=g(()=>{b3();Pt();nfe=["KNeighborsRegressor","LinearRegression","LassoRegression","RidgeRegression","ElasticNet","LogisticRegression","DummyRegressor","DummyClassifier","MinMaxScaler","StandardScaler","MaxAbsScaler","SimpleImputer","OneHotEncoder","LabelEncoder","OrdinalEncoder","Normalizer","Pipeline","ColumnTransformer","RobustScaler","KMeans","VotingRegressor","VotingClassifier","LinearSVC","LinearSVR","GaussianNB","DecisionTreeClassifier","DecisionTreeRegressor","ClassificationCriterion","RegressionCriterion","Splitter","DecisionTreeBase","DecisionTree"],w3="abcdefghijklmnopqrstuvwxy";Nd=class{constructor(e){this.savedArtifacts=e||null}save(e){return Qt(this,null,function*(){e.weightData=x3(e.weightData);let t={};for(let n=0;n<e.modelTopology.config.layers.length;n++){let i=e.modelTopology.config.layers[n],o=ife(6);t[i.config.name]=o,i.config.name=o}for(let n=0;n<e.weightSpecs.length;n++){let i=e.weightSpecs[n];Object.keys(t).forEach(a=>{i.name.includes(a)&&(i.name=i.name.replace(a,t[a]))})}return this.savedArtifacts=e,{modelArtifactsInfo:{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:JSON.stringify(e.modelTopology).length,weightSpecsBytes:JSON.stringify(e.weightSpecs).length,weightDataBytes:e.weightData.byteLength}}})}load(){return Qt(this,null,function*(){return this.savedArtifacts.weightData=y3(this.savedArtifacts.weightData),this.savedArtifacts})}};afe=["modelCompileArgs","modelFitArgs","denseLayerArgs"],qr=class{toObject(){return Qt(this,null,function*(){return yield Z0(this,afe)})}toJSON(){return Qt(this,null,function*(){return JSON.stringify(yield this.toObject())})}}});var Rn,ks,Os,Ai=g(()=>{wd();so();Dr();Kr();Rn=class extends qr{fitTransform(e){return this.fit(e).transform(e)}},ks=class extends qr{constructor(){super(...arguments);this.EstimatorType="regressor"}score(t,n){let i=this.predict(t);return Jf(n,i)}},Os=class extends qr{constructor(){super(...arguments);this.EstimatorType="classifier"}score(t,n){let i=this.predict(t),o=Cc(n);return Ge(i.shape.length===o.shape.length,"The shape of the model output doesn't match the shape of the actual y values"),dr(n)?vu(o.argMax(1),i.argMax(1)):vu(n,i)}}});var uo,Bc=g(()=>{Kr();Ai();Pt();uo=class extends ks{constructor({modelFitArgs:t,modelCompileArgs:n,denseLayerArgs:i,optimizerType:o,lossType:a}){super();this.tf=qe(),this.model=this.tf.sequential(),this.modelFitArgs=t,this.modelCompileArgs=n,this.denseLayerArgs=i,this.isMultiOutput=!1,this.optimizerType=o,this.lossType=a}initializeModel(t,n,i=[]){this.denseLayerArgs.units=n.shape.length===1?1:n.shape[1];let o=this.tf.sequential();o.add(this.tf.layers.dense(xa({inputShape:[t.shape[1]]},this.denseLayerArgs))),o.compile(this.modelCompileArgs),i!=null&&i.length&&o.setWeights(i),this.model=o}fit(t,n){return Qt(this,null,function*(){let i=_t(t),o=Cc(n);return o.shape.length>1&&(this.isMultiOutput=!0),this.model.layers.length===0&&this.initializeModel(i,o),yield this.model.fit(i,o,xa({},this.modelFitArgs)),this})}importModel(t){let n=this.tf.tensor2d(t.coef,[t.coef.length,1],"float32"),i=this.tf.tensor1d([t.intercept],"float32");return this.initializeModel(n,i,[n,i]),this}getParams(){return{modelFitArgs:this.modelFitArgs,modelCompileArgs:this.modelCompileArgs,denseLayerArgs:this.denseLayerArgs,optimizerType:this.optimizerType,lossType:this.lossType}}setParams(t){return this.modelCompileArgs=t.modelCompileArgs,this.modelFitArgs=t.modelFitArgs,this.denseLayerArgs=t.denseLayerArgs,this}predict(t){let n=_t(t);if(this.model.layers.length===0)throw new RangeError('Need to call "fit" before "predict"');let i=this.model.predict(n);return this.isMultiOutput?i:i.reshape([-1])}get coef(){let t=this.model.getWeights();if(t.length===0)return this.tf.tensor2d([]);let n=t[0];return n.shape[1]===1?n.reshape([n.shape[0]]):n}get intercept(){let t=this.model.getWeights();if(t.length<2)return 0;let n=t[1];return n.size===1?n.arraySync()[0]:n}}});var J0,S3=g(()=>{Bc();Pt();J0=class extends uo{constructor({fitIntercept:e=!0,modelFitOptions:t}={}){let n=qe();super({modelCompileArgs:{optimizer:n.train.adam(.1),loss:n.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:xa({batchSize:32,epochs:1e3,verbose:0,callbacks:[n.callbacks.earlyStopping({monitor:"mse",patience:30})]},t),denseLayerArgs:{units:1,useBias:Boolean(e)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="LinearRegression"}}});var Y0,A3=g(()=>{Bc();Pt();Y0=class extends uo{constructor({fitIntercept:e=!0,alpha:t=1}={}){let n=qe();super({modelCompileArgs:{optimizer:n.train.adam(.1),loss:n.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[n.callbacks.earlyStopping({monitor:"mse",patience:50})]},denseLayerArgs:{units:1,kernelRegularizer:n.regularizers.l1({l1:t}),useBias:Boolean(e)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="LassoRegression"}}});var Q0,M3=g(()=>{Bc();Pt();Q0=class extends uo{constructor({fitIntercept:e=!0,alpha:t=.01}={}){let n=qe();super({modelCompileArgs:{optimizer:n.train.adam(.1),loss:n.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[n.callbacks.earlyStopping({monitor:"mse",patience:50})]},denseLayerArgs:{units:1,kernelRegularizer:n.regularizers.l2({l2:t}),useBias:Boolean(e)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="RidgeRegression"}}});var eb,D3=g(()=>{Bc();Pt();eb=class extends uo{constructor({alpha:e=1,l1Ratio:t=.5,fitIntercept:n=!0}={}){let i=qe();super({modelCompileArgs:{optimizer:i.train.adam(.1),loss:i.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[i.callbacks.earlyStopping({monitor:"mse",patience:50})]},denseLayerArgs:{units:1,kernelRegularizer:i.regularizers.l1l2({l1:e*t,l2:.5*e*(1-t)}),useBias:Boolean(n)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="ElasticNet"}}});var ep,tb=g(()=>{Kr();Ai();Pt();Dr();ep=class extends Rn{constructor({categories:t="auto",handleUnknown:n="error",drop:i}={}){super();this.name="OneHotEncoder";this.tf=qe(),this.categoriesParam=t,this.categories=[],this.handleUnknown=n,this.nFeaturesIn=0,this.featureNamesIn=[],this.drop=i}classesToMapping(t){let n=new Map;return t.forEach((i,o)=>{n.set(i,o)}),n}loopOver2DArrayToSetLabels(t){for(let n=0;n<t[0].length;n++){let i=new Set;for(let a=0;a<t.length;a++)i.add(t[a][n]);let o=Array.from(i);this.categories.push(o)}}fit(t,n){let i=ya(t);return this.categoriesParam==="auto"?(this.loopOver2DArrayToSetLabels(i),this):(this.categories=this.categoriesParam,this.nFeaturesIn=i.length===0?0:i[0].length||0,rn(t)&&(this.featureNamesIn=[...t.columns]),this)}loopOver2DArrayToUseLabels(t){let n=this.categories.map(o=>this.classesToMapping(o)),i=[];for(let o=0;o<t.length;o++){let a=[];for(let s=0;s<t[0].length;s++){let u=t[o][s],c=n[s].get(u);if(c===void 0){if(this.handleUnknown==="error")throw new Error(`Unknown value ${u} encountered while transforming. Not encountered in training data`);c=-1}this.drop==="first"&&(c-=1),a.push(c)}i.push(a)}return i}convertToOneHot(t,n){return n>=2?this.tf.oneHot(t,n):n===1?(t=this.tf.where(t.equal(0),this.tf.ones(t.shape,"int32"),this.tf.zeros(t.shape,"int32")),t.reshape([-1,1])):this.tf.tensor2d([])}transform(t,n){let i=ya(t),o=this.loopOver2DArrayToUseLabels(i),a=this.tf.tensor2d(o,void 0,"int32");return this.tf.concat(a.unstack(1).map((s,u)=>{let c=this.categories[u].length,l=this.drop==="first"?c-1:c;return this.convertToOneHot(s,l)}),1)}inverseTransform(t){let n=this.classesToMapping(this.categories[0]),i=t.argMax(1),o=new Map(Array.from(n,s=>s.reverse()));return i.arraySync().map(s=>o.get(s)===void 0?null:o.get(s))}}});var zc,rb=g(()=>{Kr();tb();Dr();Ai();Pt();zc=class extends Os{constructor({modelFitArgs:t,modelCompileArgs:n,denseLayerArgs:i,optimizerType:o,lossType:a}){super();this.tf=qe(),this.model=this.tf.sequential(),this.modelFitArgs=t,this.modelCompileArgs=n,this.denseLayerArgs=i,this.optimizerType=o,this.lossType=a,this.isMultiOutput=!1,this.oneHot=new ep}initializeModelForClassification(t){let n=t.toInt();if(n.shape.length===2)return this.modelCompileArgs.loss=this.tf.losses.softmaxCrossEntropy,n;{let i=t.reshape([-1,1]),o=this.oneHot.fitTransform(i);return this.oneHot.categories[0].length>2?this.modelCompileArgs.loss=this.tf.losses.softmaxCrossEntropy:this.modelCompileArgs.loss=this.tf.losses.sigmoidCrossEntropy,o}}initializeModel(t,n,i=[]){this.denseLayerArgs.units=n.shape.length===1?1:n.shape[1];let o=this.tf.sequential();o.add(this.tf.layers.dense(xa({inputShape:[t.shape[1]]},this.denseLayerArgs))),o.compile(this.modelCompileArgs),i!=null&&i.length&&o.setWeights(i),this.model=o}fit(t,n){return Qt(this,null,function*(){let i=_t(t),o=Cc(n),a=this.initializeModelForClassification(o);return o.shape.length>1&&(this.isMultiOutput=!0),this.model.layers.length===0&&this.initializeModel(i,a),yield this.model.fit(i,a,xa({},this.modelFitArgs)),this})}importModel(t){let n=this.tf.tensor2d(t.coef,[t.coef.length,1],"float32"),i=this.tf.tensor1d([t.intercept],"float32");return this.initializeModel(n,i,[n,i]),this}getParams(){return{modelFitArgs:this.modelFitArgs,modelCompileArgs:this.modelCompileArgs,denseLayerArgs:this.denseLayerArgs,optimizerType:this.optimizerType,lossType:this.lossType}}setParams(t){return this.modelCompileArgs=t.modelCompileArgs,this.modelFitArgs=t.modelFitArgs,this.denseLayerArgs=t.denseLayerArgs,this}predictProba(t){Ge(this.model.layers.length>0,'Need to call "fit" before "predict"');let n=_t(t);return this.model.predict(n)}predict(t){Ge(this.model.layers.length>0,'Need to call "fit" before "predict"');let n=this.predictProba(t);return this.isMultiOutput?this.tf.oneHot(n.argMax(1),n.shape[1]):this.tf.tensor1d(this.oneHot.inverseTransform(n))}get coef(){let t=this.model.getWeights();if(t.length===0)return this.tf.tensor2d([]);let n=t[0];return n.shape[1]===1?n.reshape([n.shape[0]]):n}get intercept(){let t=this.model.getWeights();if(t.length<2)return 0;let n=t[1];return n.size===1?n.arraySync()[0]:n}}});var nb,E3=g(()=>{rb();Pt();nb=class extends zc{constructor({penalty:e="l2",C:t=1,fitIntercept:n=!0,modelFitOptions:i}={}){let o=qe();super({modelCompileArgs:{optimizer:o.train.adam(.1),loss:o.losses.softmaxCrossEntropy,metrics:["accuracy"]},modelFitArgs:xa({batchSize:32,epochs:1e3,verbose:0,callbacks:[o.callbacks.earlyStopping({monitor:"loss",patience:50})]},i),denseLayerArgs:{units:1,useBias:Boolean(n),activation:"softmax",kernelInitializer:o.initializers.zeros(),biasInitializer:o.initializers.zeros(),kernelRegularizer:e==="l2"?o.regularizers.l2({l2:t}):e==="l1"?o.regularizers.l1({l1:t}):void 0},isClassification:!0,optimizerType:"adam",lossType:"softmaxCrossEntropy"}),this.name="LogisticRegression"}}});function un(){return un=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},un.apply(this,arguments)}var Rc=g(()=>{});var ib,T3=g(()=>{ib={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null}});function kt(r){return typeof r=="number"}function lt(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function _i(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function ba(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function Qa(r){return r&&r.constructor.prototype.isUnit===!0||!1}function On(r){return typeof r=="string"}function ut(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function wa(r){return Array.isArray(r)||ut(r)}function xu(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Vo(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function yu(r){return r&&r.constructor.prototype.isRange===!0||!1}function es(r){return r&&r.constructor.prototype.isIndex===!0||!1}function C3(r){return typeof r=="boolean"}function ob(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function tp(r){return r&&r.constructor.prototype.isHelp===!0||!1}function I3(r){return typeof r=="function"}function k3(r){return r instanceof Date}function O3(r){return r instanceof RegExp}function rp(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!_i(r)&&!ba(r))}function _3(r){return r===null}function F3(r){return r===void 0}function Wo(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function bu(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function B3(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function z3(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function R3(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function sr(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function Na(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Sa(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function _s(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ot(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function Sd(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function gn(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function co(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ad(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function lr(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function np(r){return r&&r.constructor.prototype.isChain===!0||!1}function Gt(r){var e=typeof r;return e==="object"?r===null?"null":Array.isArray(r)?"Array":r instanceof Date?"Date":r instanceof RegExp?"RegExp":lt(r)?"BigNumber":_i(r)?"Complex":ba(r)?"Fraction":ut(r)?"Matrix":Qa(r)?"Unit":es(r)?"Index":yu(r)?"Range":ob(r)?"ResultSet":Ot(r)?r.type:np(r)?"Chain":tp(r)?"Help":"Object":e==="function"?"Function":e}var Xt,Je=g(()=>{Xt=Array.isArray});function at(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return at(t)});if(r instanceof Date)return new Date(r.valueOf());if(lt(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return sfe(r,at)}function sfe(r,e){var t={};for(var n in r)ot(r,n)&&(t[n]=e(r[n]));return t}function Lc(r,e){for(var t in e)ot(e,t)&&(r[t]=e[t]);return r}function Fs(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!Fs(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!Fs(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function L3(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(a){i=a,n=!1},configurable:!0,enumerable:!0})}function ot(r,e){return r&&Object.hasOwnProperty.call(r,e)}function q3(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=r[i];o!==void 0&&(t[i]=o)}return t}var Ht=g(()=>{Je()});var P3,$3,U3=g(()=>{P3=["Matrix","Array"],$3=["number","BigNumber","Fraction"]});var Be,ab=g(()=>{Rc();T3();U3();Be=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(ib)};un(Be,ib,{MATRIX_OPTIONS:P3,NUMBER_OPTIONS:$3})});var V3=Re((sb,G3)=>{"use strict";(function(r,e){typeof define=="function"&&define.amd?define([],e):typeof sb=="object"?G3.exports=e():r.typed=e()})(sb,function(){function r(){return!0}function e(){return!1}function t(){}function n(){var i=[{name:"number",test:function(G){return typeof G=="number"}},{name:"string",test:function(G){return typeof G=="string"}},{name:"boolean",test:function(G){return typeof G=="boolean"}},{name:"Function",test:function(G){return typeof G=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(G){return G instanceof Date}},{name:"RegExp",test:function(G){return G instanceof RegExp}},{name:"Object",test:function(G){return typeof G=="object"&&G!==null&&G.constructor===Object}},{name:"null",test:function(G){return G===null}},{name:"undefined",test:function(G){return G===void 0}}],o={name:"any",test:r},a=[],s=[],u={types:i,conversions:s,ignore:a};function c(G){var X=Ye(u.types,function(se){return se.name===G});if(X)return X;if(G==="any")return o;var le=Ye(u.types,function(se){return se.name.toLowerCase()===G.toLowerCase()});throw new TypeError('Unknown type "'+G+'"'+(le?'. Did you mean "'+le.name+'"?':""))}function l(G){return G===o?999:u.types.indexOf(G)}function f(G){var X=Ye(u.types,function(le){return le.test(G)});if(X)return X.name;throw new TypeError("Value has unknown type. Value: "+G)}function p(G,X){if(!G.signatures)throw new TypeError("Function is no typed-function");var le;if(typeof X=="string"){le=X.split(",");for(var se=0;se<le.length;se++)le[se]=le[se].trim()}else if(Array.isArray(X))le=X;else throw new TypeError("String array or a comma separated string expected");var Ae=le.join(","),ze=G.signatures[Ae];if(ze)return ze;throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+le.join(", ")+"))")}function m(G,X){var le=f(G);if(X===le)return G;for(var se=0;se<u.conversions.length;se++){var Ae=u.conversions[se];if(Ae.from===le&&Ae.to===X)return Ae.convert(G)}throw new Error("Cannot convert from "+le+" to "+X)}function d(G){return G.map(function(X){var le=X.types.map(E);return(X.restParam?"...":"")+le.join("|")}).join(",")}function h(G,X){var le=G.indexOf("...")===0,se=le?G.length>3?G.slice(3):"any":G,Ae=se.split("|").map(Y).filter(ve).filter(Ne),ze=K(X,Ae),We=Ae.map(function(Ke){var ft=c(Ke);return{name:Ke,typeIndex:l(ft),test:ft.test,conversion:null,conversionIndex:-1}}),Ve=ze.map(function(Ke){var ft=c(Ke.from);return{name:Ke.from,typeIndex:l(ft),test:ft.test,conversion:Ke,conversionIndex:X.indexOf(Ke)}});return{types:We.concat(Ve),restParam:le}}function x(G,X,le){var se=[];return G.trim()!==""&&(se=G.split(",").map(Y).map(function(Ae,ze,We){var Ve=h(Ae,le);if(Ve.restParam&&ze!==We.length-1)throw new SyntaxError('Unexpected rest parameter "'+Ae+'": only allowed for the last parameter');return Ve})),se.some(ne)?null:{params:se,fn:X}}function y(G){var X=xe(G);return X?X.restParam:!1}function N(G){return G.types.some(function(X){return X.conversion!=null})}function v(G){if(!G||G.types.length===0)return r;if(G.types.length===1)return c(G.types[0].name).test;if(G.types.length===2){var X=c(G.types[0].name).test,le=c(G.types[1].name).test;return function(ze){return X(ze)||le(ze)}}else{var se=G.types.map(function(Ae){return c(Ae.name).test});return function(ze){for(var We=0;We<se.length;We++)if(se[We](ze))return!0;return!1}}}function w(G){var X,le,se;if(y(G)){X=ge(G).map(v);var Ae=X.length,ze=v(xe(G)),We=function(Ve){for(var Ke=Ae;Ke<Ve.length;Ke++)if(!ze(Ve[Ke]))return!1;return!0};return function(Ke){for(var ft=0;ft<X.length;ft++)if(!X[ft](Ke[ft]))return!1;return We(Ke)&&Ke.length>=Ae+1}}else return G.length===0?function(Ke){return Ke.length===0}:G.length===1?(le=v(G[0]),function(Ke){return le(Ke[0])&&Ke.length===1}):G.length===2?(le=v(G[0]),se=v(G[1]),function(Ke){return le(Ke[0])&&se(Ke[1])&&Ke.length===2}):(X=G.map(v),function(Ke){for(var ft=0;ft<X.length;ft++)if(!X[ft](Ke[ft]))return!1;return Ke.length===X.length})}function S(G,X){return X<G.params.length?G.params[X]:y(G.params)?xe(G.params):null}function b(G,X,le){var se=S(G,X),Ae=se?le?se.types.filter(M):se.types:[];return Ae.map(E)}function E(G){return G.name}function M(G){return G.conversion===null||G.conversion===void 0}function D(G,X){var le=Ue(st(G,function(se){return b(se,X,!1)}));return le.indexOf("any")!==-1?["any"]:le}function A(G,X,le){var se,Ae,ze=G||"unnamed",We=le,Ve;for(Ve=0;Ve<X.length;Ve++){var Ke=We.filter(function(sn){var Oi=v(S(sn,Ve));return(Ve<sn.params.length||y(sn.params))&&Oi(X[Ve])});if(Ke.length===0){if(Ae=D(We,Ve),Ae.length>0){var ft=f(X[Ve]);return se=new TypeError("Unexpected type of argument in function "+ze+" (expected: "+Ae.join(" or ")+", actual: "+ft+", index: "+Ve+")"),se.data={category:"wrongType",fn:ze,index:Ve,actual:ft,expected:Ae},se}}else We=Ke}var or=We.map(function(sn){return y(sn.params)?1/0:sn.params.length});if(X.length<Math.min.apply(null,or))return Ae=D(We,Ve),se=new TypeError("Too few arguments in function "+ze+" (expected: "+Ae.join(" or ")+", index: "+X.length+")"),se.data={category:"tooFewArgs",fn:ze,index:X.length,expected:Ae},se;var en=Math.max.apply(null,or);return X.length>en?(se=new TypeError("Too many arguments in function "+ze+" (expected: "+en+", actual: "+X.length+")"),se.data={category:"tooManyArgs",fn:ze,index:X.length,expectedLength:en},se):(se=new TypeError('Arguments of type "'+X.join(", ")+'" do not match any of the defined signatures of function '+ze+"."),se.data={category:"mismatch",actual:X.map(f)},se)}function k(G){for(var X=999,le=0;le<G.types.length;le++)M(G.types[le])&&(X=Math.min(X,G.types[le].typeIndex));return X}function T(G){for(var X=999,le=0;le<G.types.length;le++)M(G.types[le])||(X=Math.min(X,G.types[le].conversionIndex));return X}function L(G,X){var le;return le=G.restParam-X.restParam,le!==0||(le=N(G)-N(X),le!==0)||(le=k(G)-k(X),le!==0)?le:T(G)-T(X)}function $(G,X){var le=Math.min(G.params.length,X.params.length),se,Ae;if(Ae=G.params.some(N)-X.params.some(N),Ae!==0)return Ae;for(se=0;se<le;se++)if(Ae=N(G.params[se])-N(X.params[se]),Ae!==0)return Ae;for(se=0;se<le;se++)if(Ae=L(G.params[se],X.params[se]),Ae!==0)return Ae;return G.params.length-X.params.length}function K(G,X){var le={};return G.forEach(function(se){X.indexOf(se.from)===-1&&X.indexOf(se.to)!==-1&&!le[se.from]&&(le[se.from]=se)}),Object.keys(le).map(function(se){return le[se]})}function V(G,X){var le=X;if(G.some(N)){var se=y(G),Ae=G.map(z);le=function(){for(var Ke=[],ft=se?arguments.length-1:arguments.length,or=0;or<ft;or++)Ke[or]=Ae[or](arguments[or]);return se&&(Ke[ft]=arguments[ft].map(Ae[ft])),X.apply(this,Ke)}}var ze=le;if(y(G)){var We=G.length-1;ze=function(){return le.apply(this,Se(arguments,0,We).concat([Se(arguments,We)]))}}return ze}function z(G){var X,le,se,Ae,ze=[],We=[];switch(G.types.forEach(function(Ve){Ve.conversion&&(ze.push(c(Ve.conversion.from).test),We.push(Ve.conversion.convert))}),We.length){case 0:return function(Ke){return Ke};case 1:return X=ze[0],se=We[0],function(Ke){return X(Ke)?se(Ke):Ke};case 2:return X=ze[0],le=ze[1],se=We[0],Ae=We[1],function(Ke){return X(Ke)?se(Ke):le(Ke)?Ae(Ke):Ke};default:return function(Ke){for(var ft=0;ft<We.length;ft++)if(ze[ft](Ke))return We[ft](Ke);return Ke}}}function Q(G){var X={};return G.forEach(function(le){le.params.some(N)||_(le.params,!0).forEach(function(se){X[d(se)]=le.fn})}),X}function _(G,X){function le(se,Ae,ze){if(Ae<se.length){var We=se[Ae],Ve=X?We.types.filter(M):We.types,Ke;if(We.restParam){var ft=Ve.filter(M);Ke=ft.length<Ve.length?[ft,Ve]:[Ve]}else Ke=Ve.map(function(en){return[en]});return st(Ke,function(en){return le(se,Ae+1,ze.concat([en]))})}else{var or=ze.map(function(en,sn){return{types:en,restParam:sn===se.length-1&&y(se)}});return[or]}}return le(G,0,[])}function te(G,X){for(var le=Math.max(G.params.length,X.params.length),se=0;se<le;se++){var Ae=b(G,se,!0),ze=b(X,se,!0);if(!et(Ae,ze))return!1}var We=G.params.length,Ve=X.params.length,Ke=y(G.params),ft=y(X.params);return Ke?ft?We===Ve:Ve>=We:ft?We>=Ve:We===Ve}function he(G,X){if(Object.keys(X).length===0)throw new SyntaxError("No signatures provided");var le=[];Object.keys(X).map(function(Or){return x(Or,X[Or],u.conversions)}).filter(re).forEach(function(Or){var zn=Ye(le,function(oo){return te(oo,Or)});if(zn)throw new TypeError('Conflicting signatures "'+d(zn.params)+'" and "'+d(Or.params)+'".');le.push(Or)});var se=st(le,function(Or){var zn=Or?_(Or.params,!1):[];return zn.map(function(oo){return{params:oo,fn:Or.fn}})}).filter(re);se.sort($);var Ae=se[0]&&se[0].params.length<=2&&!y(se[0].params),ze=se[1]&&se[1].params.length<=2&&!y(se[1].params),We=se[2]&&se[2].params.length<=2&&!y(se[2].params),Ve=se[3]&&se[3].params.length<=2&&!y(se[3].params),Ke=se[4]&&se[4].params.length<=2&&!y(se[4].params),ft=se[5]&&se[5].params.length<=2&&!y(se[5].params),or=Ae&&ze&&We&&Ve&&Ke&&ft,en=se.map(function(Or){return w(Or.params)}),sn=Ae?v(se[0].params[0]):e,Oi=ze?v(se[1].params[0]):e,ja=We?v(se[2].params[0]):e,da=Ve?v(se[3].params[0]):e,Cs=Ke?v(se[4].params[0]):e,Za=ft?v(se[5].params[0]):e,ga=Ae?v(se[0].params[1]):e,Mr=ze?v(se[1].params[1]):e,va=We?v(se[2].params[1]):e,O=Ve?v(se[3].params[1]):e,ae=Ke?v(se[4].params[1]):e,Me=ft?v(se[5].params[1]):e,He=se.map(function(Or){return V(Or.params,Or.fn)}),Bt=Ae?He[0]:t,Wt=ze?He[1]:t,wi=We?He[2]:t,Uf=Ve?He[3]:t,A0=Ke?He[4]:t,M0=ft?He[5]:t,D0=Ae?se[0].params.length:-1,E0=ze?se[1].params.length:-1,T0=We?se[2].params.length:-1,C0=Ve?se[3].params.length:-1,I0=Ke?se[4].params.length:-1,k0=ft?se[5].params.length:-1,O0=or?6:0,_0=se.length,F0=function(){"use strict";for(var zn=O0;zn<_0;zn++)if(en[zn](arguments))return He[zn].apply(this,arguments);throw A(G,arguments,se)},Gf=function Or(zn,oo){"use strict";return arguments.length===D0&&sn(zn)&&ga(oo)?Bt.apply(Or,arguments):arguments.length===E0&&Oi(zn)&&Mr(oo)?Wt.apply(Or,arguments):arguments.length===T0&&ja(zn)&&va(oo)?wi.apply(Or,arguments):arguments.length===C0&&da(zn)&&O(oo)?Uf.apply(Or,arguments):arguments.length===I0&&Cs(zn)&&ae(oo)?A0.apply(Or,arguments):arguments.length===k0&&Za(zn)&&Me(oo)?M0.apply(Or,arguments):F0.apply(Or,arguments)};try{Object.defineProperty(Gf,"name",{value:G})}catch{}return Gf.signatures=Q(se),Gf}function Ne(G){return u.ignore.indexOf(G)===-1}function Y(G){return G.trim()}function ve(G){return!!G}function re(G){return G!==null}function ne(G){return G.types.length===0}function ge(G){return G.slice(0,G.length-1)}function xe(G){return G[G.length-1]}function Se(G,X,le){return Array.prototype.slice.call(G,X,le)}function we(G,X){return G.indexOf(X)!==-1}function et(G,X){for(var le=0;le<G.length;le++)if(we(X,G[le]))return!0;return!1}function Ye(G,X){for(var le=0;le<G.length;le++)if(X(G[le]))return G[le]}function Ue(G){for(var X={},le=0;le<G.length;le++)X[G[le]]=!0;return Object.keys(X)}function st(G,X){return Array.prototype.concat.apply([],G.map(X))}function Z(G){for(var X="",le=0;le<G.length;le++){var se=G[le];if((typeof se.signatures=="object"||typeof se.signature=="string")&&se.name!==""){if(X==="")X=se.name;else if(X!==se.name){var Ae=new Error("Function names do not match (expected: "+X+", actual: "+se.name+")");throw Ae.data={actual:se.name,expected:X},Ae}}}return X}function ie(G){var X,le={};function se(Ve,Ke){if(le.hasOwnProperty(Ve)&&Ke!==le[Ve])throw X=new Error('Signature "'+Ve+'" is defined twice'),X.data={signature:Ve},X}for(var Ae=0;Ae<G.length;Ae++){var ze=G[Ae];if(typeof ze.signatures=="object")for(var We in ze.signatures)ze.signatures.hasOwnProperty(We)&&(se(We,ze.signatures[We]),le[We]=ze.signatures[We]);else if(typeof ze.signature=="string")se(ze.signature,ze),le[ze.signature]=ze;else throw X=new TypeError("Function is no typed-function (index: "+Ae+")"),X.data={index:Ae},X}return le}return u=he("typed",{"string, Object":he,Object:function(G){var X=[];for(var le in G)G.hasOwnProperty(le)&&X.push(G[le]);var se=Z(X);return he(se,G)},"...Function":function(G){return he(Z(G),ie(G))},"string, ...Function":function(G,X){return he(G,ie(X))}}),u.create=n,u.types=i,u.conversions=s,u.ignore=a,u.convert=m,u.find=p,u.addType=function(G,X){if(!G||typeof G.name!="string"||typeof G.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(X!==!1){for(var le=0;le<u.types.length;le++)if(u.types[le].name==="Object"){u.types.splice(le,0,G);return}}u.types.push(G)},u.addConversion=function(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(G)},u}return n()})});function Ze(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function ub(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ze(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Ze(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),o="i".concat(t)}var a="";return r<0&&(r=-r,a="-"),"".concat(a).concat(i).concat(r.toString(e)).concat(o)}function Ho(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var t="auto",n,i;if(e&&(e.notation&&(t=e.notation),kt(e)?n=e:kt(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return cb(r,n);case"exponential":return Z3(r,n);case"engineering":return ufe(r,n);case"bin":return ub(r,2,i);case"oct":return ub(r,8,i);case"hex":return ub(r,16,i);case"auto":return cfe(r,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return o!=="."?o+a:a});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Dd(r){var e=String(r).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),o=n.indexOf(".");i+=o!==-1?o-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return a.length===0&&(a.push(0),i++),{sign:t,coefficients:a,exponent:i}}function ufe(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Dd(r),n=Ed(t,e),i=n.exponent,o=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(kt(e))for(;e>o.length||i-a+1>o.length;)o.push(0);else for(var s=Math.abs(i-a)-(o.length-1),u=0;u<s;u++)o.push(0);for(var c=Math.abs(i-a),l=1;c>0;)l++,c--;var f=o.slice(l).join(""),p=kt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",m=o.slice(0,l).join("")+p+"e"+(i>=0?"+":"")+a.toString();return n.sign+m}function cb(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Dd(r),n=typeof e=="number"?Ed(t,t.exponent+1+e):t,i=n.coefficients,o=n.exponent+1,a=o+(e||0);return i.length<a&&(i=i.concat(qc(a-i.length))),o<0&&(i=qc(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),n.sign+i.join("")}function Z3(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Dd(r),n=e?Ed(t,e):t,i=n.coefficients,o=n.exponent;i.length<e&&(i=i.concat(qc(e-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function cfe(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=t&&t.lowerExp!==void 0?t.lowerExp:-3,i=t&&t.upperExp!==void 0?t.upperExp:5,o=Dd(r),a=e?Ed(o,e):o;if(a.exponent<n||a.exponent>=i)return Z3(r,e);var s=a.coefficients,u=a.exponent;s.length<e&&(s=s.concat(qc(e-s.length))),s=s.concat(qc(u-s.length+1+(s.length<e?e-s.length:0))),s=qc(-u).concat(s);var c=u>0?u:0;return c<s.length-1&&s.splice(c+1,0,"."),a.sign+s.join("")}function Ed(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var o=e-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),t.exponent++,o++),o--,n[o]++}}return t}function qc(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function X3(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function cn(r,e,t){if(t==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var n=Math.abs(r-e);return n<lfe?!0:n<=Math.max(Math.abs(r),Math.abs(e))*t}return!1}var lo,W3,H3,Md,K3,j3,lfe,J3,Y3,Q3,Td,eO,Cd,Rt=g(()=>{Je();lo=Math.sign||function(r){return r>0?1:r<0?-1:0},W3=Math.log2||function(e){return Math.log(e)/Math.LN2},H3=Math.log10||function(e){return Math.log(e)/Math.LN10},Md=Math.log1p||function(r){return Math.log(r+1)},K3=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},j3=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};lfe=Number.EPSILON||2220446049250313e-31;J3=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},Y3=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},Q3=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},Td=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},eO=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},Cd=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)}});function lb(r,e,t){var n=r.constructor,i=new n(2),o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ze(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),o="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(o);case 8:return"".concat(r.toOctal()).concat(o);case 16:return"".concat(r.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function rO(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var t="auto",n,i;if(e!==void 0&&(e.notation&&(t=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return pfe(r,n);case"exponential":return tO(r,n);case"engineering":return ffe(r,n);case"bin":return lb(r,2,i);case"oct":return lb(r,8,i);case"hex":return lb(r,16,i);case"auto":{var o=e&&e.lowerExp!==void 0?e.lowerExp:-3,a=e&&e.upperExp!==void 0?e.upperExp:5;if(r.isZero())return"0";var s,u=r.toSignificantDigits(n),c=u.e;return c>=o&&c<a?s=u.toFixed():s=tO(r,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var l=arguments[2],f=arguments[4];return l!=="."?l+f:f})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ffe(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),o=i.toPrecision(e);return o.indexOf("e")!==-1&&(o=i.toString()),o+"e"+(t>=0?"+":"")+n.toString()}function tO(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function pfe(r,e){return r.toFixed(e)}var nO=g(()=>{Rt()});function iO(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function gt(r,e){if(typeof r=="number")return Ho(r,e);if(lt(r))return rO(r,e);if(mfe(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return oO(r,e);if(On(r))return'"'+r+'"';if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>'"'+n+'": '+gt(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function ip(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);i==="\\"?(t+=i,n++,i=e.charAt(n),(i===""||'"\\/bfnrtu'.indexOf(i)===-1)&&(t+="\\"),t+=i):i==='"'?t+='\\"':t+=i,n++}return'"'+t+'"'}function _n(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function oO(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=oO(r[i],e);return t+="]",t}else return gt(r,e)}function mfe(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function wu(r,e){if(!On(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Gt(r)+", index: 0)");if(!On(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Gt(e)+", index: 1)");return r===e?0:r>e?1:-1}var Fr=g(()=>{Je();Rt();nO()});function ht(r,e,t){if(!(this instanceof ht))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}var Ln=g(()=>{ht.prototype=new RangeError;ht.prototype.constructor=RangeError;ht.prototype.name="DimensionError";ht.prototype.isDimensionError=!0});function Mi(r,e,t){if(!(this instanceof Mi))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}var Pc=g(()=>{Mi.prototype=new RangeError;Mi.prototype.constructor=RangeError;Mi.prototype.name="IndexError";Mi.prototype.isIndexError=!0});function Et(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function aO(r,e,t){var n,i=r.length;if(i!==e[t])throw new ht(i,e[t]);if(t<e.length-1){var o=t+1;for(n=0;n<i;n++){var a=r[n];if(!Array.isArray(a))throw new ht(e.length-1,e.length,"<");aO(r[n],e,o)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new ht(e.length+1,e.length,">")}function pb(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new ht(r.length,0)}else aO(r,e,0)}function gr(r,e){if(!kt(r)||!Ze(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Mi(r,e)}function Ko(r,e,t){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!kt(i)||!Ze(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+gt(e)+")")});var n=t!==void 0?t:0;return fb(r,e,0,n),r}function fb(r,e,t,n){var i,o,a=r.length,s=e[t],u=Math.min(a,s);if(r.length=s,t<e.length-1){var c=t+1;for(i=0;i<u;i++)o=r[i],Array.isArray(o)||(o=[o],r[i]=o),fb(o,e,c,n);for(i=u;i<s;i++)o=[],r[i]=o,fb(o,e,c,n)}else{for(i=0;i<u;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=u;i<s;i++)r[i]=n}}function Id(r,e){var t=At(r),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new ht(0,n,"!=");e=op(e,n);var i=sO(e);if(n!==i)throw new ht(i,n,"!=");try{return hfe(t,e)}catch(o){throw o instanceof ht?new ht(i,n,"!="):o}}function op(r,e){var t=sO(r),n=r.slice(),i=-1,o=r.indexOf(i),a=r.indexOf(i,o+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var s=o>=0,u=e%t===0;if(s)if(u)n[o]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function sO(r){return r.reduce((e,t)=>e*t,1)}function hfe(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var a=t.length/o,s=0;s<a;s++)n.push(t.slice(s*o,(s+1)*o));t=n}return t}function $c(r,e){for(var t=e||Et(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=uO(r,n,0),t.length=n),r}function uO(r,e,t){var n,i;if(t<e){var o=t+1;for(n=0,i=r.length;n<i;n++)r[n]=uO(r[n],e,o)}else for(;Array.isArray(r);)r=r[0];return r}function kd(r,e,t,n){var i=n||Et(r);if(t)for(var o=0;o<t;o++)r=[r],i.unshift(1);for(r=cO(r,e,0);i.length<e;)i.push(1);return r}function cO(r,e,t){var n,i;if(Array.isArray(r)){var o=t+1;for(n=0,i=r.length;n<i;n++)r[n]=cO(r[n],e,o)}else for(var a=t;a<e;a++)r=[r];return r}function At(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}function Fi(r,e){return Array.prototype.map.call(r,e)}function Bs(r,e){Array.prototype.forEach.call(r,e)}function Od(r,e){if(Et(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function Uc(r,e){if(Et(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function mb(r,e){return Array.prototype.join.call(r,e)}function ts(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function Gc(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function zs(r,e){for(var t,n=0,i=0;i<r.length;i++){var o=r[i],a=Array.isArray(o);if(i===0&&a&&(n=o.length),a&&o.length!==n)return;var s=a?zs(o,e):e(o);if(t===void 0)t=s;else if(t!==s)return"mixed"}return t}var Nt=g(()=>{Rt();Je();Fr();Ln();Pc()});function I(r,e,t,n){function i(o){var a=q3(o,e.map(vfe));return dfe(r,e,o),t(a)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function dfe(r,e,t){var n=e.filter(o=>!gfe(o)).every(o=>t[o]!==void 0);if(!n){var i=e.filter(o=>t[o]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function gfe(r){return r&&r[0]==="?"}function vfe(r){return r&&r[0]==="?"?r.slice(1):r}var j=g(()=>{Ht()});function nn(r,e){if(pO(r)&&_d(r,e))return r[e];throw typeof r[e]=="function"&&Fd(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Aa(r,e,t){if(pO(r)&&_d(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function lO(r,e){return e in r}function _d(r,e){return!r||typeof r!="object"?!1:ot(xfe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function fO(r,e){if(!Fd(r,e))throw new Error('No access to method "'+e+'"')}function Fd(r,e){return r==null||typeof r[e]!="function"||ot(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:ot(yfe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function pO(r){return typeof r=="object"&&r&&r.constructor===Object}var xfe,yfe,Bi=g(()=>{Ht();xfe={length:!0,name:!0},yfe={toString:!0,valueOf:!0,toLocaleString:!0}});function Zi(){return new Map}function Vc(r){if(!r)return Zi();if(Wc(r))return r;if(rp(r))return new ap(r);throw new Error("createMap can create maps from objects or Maps")}function mO(r){if(r instanceof ap)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);Aa(e,t,n)}return e}function Wc(r){return r?r instanceof Map||r instanceof ap||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function hb(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];for(var i of t)if(!!i){if(Wc(i))for(var o of i.keys())r.set(o,i.get(o));else if(rp(i))for(var a of Object.keys(i))r.set(a,i[a])}return r}var ap,Rs=g(()=>{Bi();Je();ap=class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return nn(this.wrappedObject,e)}set(e,t){return Aa(this.wrappedObject,e,t),this}has(e){return lO(this.wrappedObject,e)}}});function db(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function Bd(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function wfe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function gb(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var vb,hO,bfe,xb,dO=g(()=>{Je();vb=Si(V3(),1);Rt();j();Rs();hO=function(){return hO=vb.default.create,vb.default},bfe=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],xb=I("typed",bfe,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:o}=e,a=hO();return a.types=[{name:"number",test:kt},{name:"Complex",test:_i},{name:"BigNumber",test:lt},{name:"Fraction",test:ba},{name:"Unit",test:Qa},{name:"string",test:On},{name:"Chain",test:np},{name:"Array",test:Xt},{name:"Matrix",test:ut},{name:"DenseMatrix",test:xu},{name:"SparseMatrix",test:Vo},{name:"Range",test:yu},{name:"Index",test:es},{name:"boolean",test:C3},{name:"ResultSet",test:ob},{name:"Help",test:tp},{name:"function",test:I3},{name:"Date",test:k3},{name:"RegExp",test:O3},{name:"null",test:_3},{name:"undefined",test:F3},{name:"AccessorNode",test:Wo},{name:"ArrayNode",test:bu},{name:"AssignmentNode",test:B3},{name:"BlockNode",test:z3},{name:"ConditionalNode",test:R3},{name:"ConstantNode",test:sr},{name:"FunctionNode",test:Sa},{name:"FunctionAssignmentNode",test:Na},{name:"IndexNode",test:_s},{name:"Node",test:Ot},{name:"ObjectNode",test:Sd},{name:"OperatorNode",test:gn},{name:"ParenthesisNode",test:co},{name:"RangeNode",test:Ad},{name:"SymbolNode",test:lr},{name:"Map",test:Wc},{name:"Object",test:rp}],a.conversions=[{from:"number",to:"BigNumber",convert:function(u){if(t||db(u),X3(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new t(u)}},{from:"number",to:"Complex",convert:function(u){return n||Bd(u),new n(u,0)}},{from:"number",to:"string",convert:function(u){return u+""}},{from:"BigNumber",to:"Complex",convert:function(u){return n||Bd(u),new n(u.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return n||Bd(u),new n(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){o||gb(u);var c=new o(u);if(c.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(u){var c=Number(u);if(isNaN(c))throw new Error('Cannot convert "'+u+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(u){t||db(u);try{return new t(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(u){o||gb(u);try{return new o(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){n||Bd(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return t||db(u),new t(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return o||gb(u),new o(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||wfe(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}],a})});var Nfe,Sfe,yb,gO=g(()=>{j();Nfe="ResultSet",Sfe=[],yb=I(Nfe,Sfe,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0})});var Rd=Re((vO,zd)=>{(function(r){"use strict";var e=9e15,t=1e9,n="0123456789abcdef",i="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",o="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",a={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-e,maxE:e,crypto:!1},s,u,c,l,f=!0,p="[DecimalError] ",m=p+"Invalid argument: ",d=p+"Precision limit exceeded",h=p+"crypto unavailable",x="[object Decimal]",y=Math.floor,N=Math.pow,v=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,b=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,M=7,D=9007199254740991,A=i.length-1,k=o.length-1,T={toStringTag:x};T.absoluteValue=T.abs=function(){var C=new this.constructor(this);return C.s<0&&(C.s=1),_(C)},T.ceil=function(){return _(new this.constructor(this),this.e+1,2)},T.clampedTo=T.clamp=function(C,F){var B,R=this,q=R.constructor;if(C=new q(C),F=new q(F),!C.s||!F.s)return new q(NaN);if(C.gt(F))throw Error(m+F);return B=R.cmp(C),B<0?C:R.cmp(F)>0?F:new q(R)},T.comparedTo=T.cmp=function(C){var F,B,R,q,P=this,oe=P.d,me=(C=new P.constructor(C)).d,be=P.s,de=C.s;if(!oe||!me)return!be||!de?NaN:be!==de?be:oe===me?0:!oe^be<0?1:-1;if(!oe[0]||!me[0])return oe[0]?be:me[0]?-de:0;if(be!==de)return be;if(P.e!==C.e)return P.e>C.e^be<0?1:-1;for(R=oe.length,q=me.length,F=0,B=R<q?R:q;F<B;++F)if(oe[F]!==me[F])return oe[F]>me[F]^be<0?1:-1;return R===q?0:R>q^be<0?1:-1},T.cosine=T.cos=function(){var C,F,B=this,R=B.constructor;return B.d?B.d[0]?(C=R.precision,F=R.rounding,R.precision=C+Math.max(B.e,B.sd())+M,R.rounding=1,B=z(R,G(R,B)),R.precision=C,R.rounding=F,_(l==2||l==3?B.neg():B,C,F,!0)):new R(1):new R(NaN)},T.cubeRoot=T.cbrt=function(){var C,F,B,R,q,P,oe,me,be,de,De=this,_e=De.constructor;if(!De.isFinite()||De.isZero())return new _e(De);for(f=!1,P=De.s*N(De.s*De,1/3),!P||Math.abs(P)==1/0?(B=L(De.d),C=De.e,(P=(C-B.length+1)%3)&&(B+=P==1||P==-2?"0":"00"),P=N(B,1/3),C=y((C+1)/3)-(C%3==(C<0?-1:2)),P==1/0?B="5e"+C:(B=P.toExponential(),B=B.slice(0,B.indexOf("e")+1)+C),R=new _e(B),R.s=De.s):R=new _e(P.toString()),oe=(C=_e.precision)+3;;)if(me=R,be=me.times(me).times(me),de=be.plus(De),R=Q(de.plus(De).times(me),de.plus(be),oe+2,1),L(me.d).slice(0,oe)===(B=L(R.d)).slice(0,oe))if(B=B.slice(oe-3,oe+1),B=="9999"||!q&&B=="4999"){if(!q&&(_(me,C+1,0),me.times(me).times(me).eq(De))){R=me;break}oe+=4,q=1}else{(!+B||!+B.slice(1)&&B.charAt(0)=="5")&&(_(R,C+1,1),F=!R.times(R).times(R).eq(De));break}return f=!0,_(R,C,_e.rounding,F)},T.decimalPlaces=T.dp=function(){var C,F=this.d,B=NaN;if(F){if(C=F.length-1,B=(C-y(this.e/M))*M,C=F[C],C)for(;C%10==0;C/=10)B--;B<0&&(B=0)}return B},T.dividedBy=T.div=function(C){return Q(this,new this.constructor(C))},T.dividedToIntegerBy=T.divToInt=function(C){var F=this,B=F.constructor;return _(Q(F,new B(C),0,1,1),B.precision,B.rounding)},T.equals=T.eq=function(C){return this.cmp(C)===0},T.floor=function(){return _(new this.constructor(this),this.e+1,3)},T.greaterThan=T.gt=function(C){return this.cmp(C)>0},T.greaterThanOrEqualTo=T.gte=function(C){var F=this.cmp(C);return F==1||F===0},T.hyperbolicCosine=T.cosh=function(){var C,F,B,R,q,P=this,oe=P.constructor,me=new oe(1);if(!P.isFinite())return new oe(P.s?1/0:NaN);if(P.isZero())return me;B=oe.precision,R=oe.rounding,oe.precision=B+Math.max(P.e,P.sd())+4,oe.rounding=1,q=P.d.length,q<32?(C=Math.ceil(q/3),F=(1/ie(4,C)).toString()):(C=16,F="2.3283064365386962890625e-10"),P=Z(oe,1,P.times(F),new oe(1),!0);for(var be,de=C,De=new oe(8);de--;)be=P.times(P),P=me.minus(be.times(De.minus(be.times(De))));return _(P,oe.precision=B,oe.rounding=R,!0)},T.hyperbolicSine=T.sinh=function(){var C,F,B,R,q=this,P=q.constructor;if(!q.isFinite()||q.isZero())return new P(q);if(F=P.precision,B=P.rounding,P.precision=F+Math.max(q.e,q.sd())+4,P.rounding=1,R=q.d.length,R<3)q=Z(P,2,q,q,!0);else{C=1.4*Math.sqrt(R),C=C>16?16:C|0,q=q.times(1/ie(5,C)),q=Z(P,2,q,q,!0);for(var oe,me=new P(5),be=new P(16),de=new P(20);C--;)oe=q.times(q),q=q.times(me.plus(oe.times(be.times(oe).plus(de))))}return P.precision=F,P.rounding=B,_(q,F,B,!0)},T.hyperbolicTangent=T.tanh=function(){var C,F,B=this,R=B.constructor;return B.isFinite()?B.isZero()?new R(B):(C=R.precision,F=R.rounding,R.precision=C+7,R.rounding=1,Q(B.sinh(),B.cosh(),R.precision=C,R.rounding=F)):new R(B.s)},T.inverseCosine=T.acos=function(){var C,F=this,B=F.constructor,R=F.abs().cmp(1),q=B.precision,P=B.rounding;return R!==-1?R===0?F.isNeg()?Y(B,q,P):new B(0):new B(NaN):F.isZero()?Y(B,q+4,P).times(.5):(B.precision=q+6,B.rounding=1,F=F.asin(),C=Y(B,q+4,P).times(.5),B.precision=q,B.rounding=P,C.minus(F))},T.inverseHyperbolicCosine=T.acosh=function(){var C,F,B=this,R=B.constructor;return B.lte(1)?new R(B.eq(1)?0:NaN):B.isFinite()?(C=R.precision,F=R.rounding,R.precision=C+Math.max(Math.abs(B.e),B.sd())+4,R.rounding=1,f=!1,B=B.times(B).minus(1).sqrt().plus(B),f=!0,R.precision=C,R.rounding=F,B.ln()):new R(B)},T.inverseHyperbolicSine=T.asinh=function(){var C,F,B=this,R=B.constructor;return!B.isFinite()||B.isZero()?new R(B):(C=R.precision,F=R.rounding,R.precision=C+2*Math.max(Math.abs(B.e),B.sd())+6,R.rounding=1,f=!1,B=B.times(B).plus(1).sqrt().plus(B),f=!0,R.precision=C,R.rounding=F,B.ln())},T.inverseHyperbolicTangent=T.atanh=function(){var C,F,B,R,q=this,P=q.constructor;return q.isFinite()?q.e>=0?new P(q.abs().eq(1)?q.s/0:q.isZero()?q:NaN):(C=P.precision,F=P.rounding,R=q.sd(),Math.max(R,C)<2*-q.e-1?_(new P(q),C,F,!0):(P.precision=B=R-q.e,q=Q(q.plus(1),new P(1).minus(q),B+C,1),P.precision=C+4,P.rounding=1,q=q.ln(),P.precision=C,P.rounding=F,q.times(.5))):new P(NaN)},T.inverseSine=T.asin=function(){var C,F,B,R,q=this,P=q.constructor;return q.isZero()?new P(q):(F=q.abs().cmp(1),B=P.precision,R=P.rounding,F!==-1?F===0?(C=Y(P,B+4,R).times(.5),C.s=q.s,C):new P(NaN):(P.precision=B+6,P.rounding=1,q=q.div(new P(1).minus(q.times(q)).sqrt().plus(1)).atan(),P.precision=B,P.rounding=R,q.times(2)))},T.inverseTangent=T.atan=function(){var C,F,B,R,q,P,oe,me,be,de=this,De=de.constructor,_e=De.precision,Pe=De.rounding;if(de.isFinite()){if(de.isZero())return new De(de);if(de.abs().eq(1)&&_e+4<=k)return oe=Y(De,_e+4,Pe).times(.25),oe.s=de.s,oe}else{if(!de.s)return new De(NaN);if(_e+4<=k)return oe=Y(De,_e+4,Pe).times(.5),oe.s=de.s,oe}for(De.precision=me=_e+10,De.rounding=1,B=Math.min(28,me/M+2|0),C=B;C;--C)de=de.div(de.times(de).plus(1).sqrt().plus(1));for(f=!1,F=Math.ceil(me/M),R=1,be=de.times(de),oe=new De(de),q=de;C!==-1;)if(q=q.times(be),P=oe.minus(q.div(R+=2)),q=q.times(be),oe=P.plus(q.div(R+=2)),oe.d[F]!==void 0)for(C=F;oe.d[C]===P.d[C]&&C--;);return B&&(oe=oe.times(2<<B-1)),f=!0,_(oe,De.precision=_e,De.rounding=Pe,!0)},T.isFinite=function(){return!!this.d},T.isInteger=T.isInt=function(){return!!this.d&&y(this.e/M)>this.d.length-2},T.isNaN=function(){return!this.s},T.isNegative=T.isNeg=function(){return this.s<0},T.isPositive=T.isPos=function(){return this.s>0},T.isZero=function(){return!!this.d&&this.d[0]===0},T.lessThan=T.lt=function(C){return this.cmp(C)<0},T.lessThanOrEqualTo=T.lte=function(C){return this.cmp(C)<1},T.logarithm=T.log=function(C){var F,B,R,q,P,oe,me,be,de=this,De=de.constructor,_e=De.precision,Pe=De.rounding,wt=5;if(C==null)C=new De(10),F=!0;else{if(C=new De(C),B=C.d,C.s<0||!B||!B[0]||C.eq(1))return new De(NaN);F=C.eq(10)}if(B=de.d,de.s<0||!B||!B[0]||de.eq(1))return new De(B&&!B[0]?-1/0:de.s!=1?NaN:B?0:1/0);if(F)if(B.length>1)P=!0;else{for(q=B[0];q%10===0;)q/=10;P=q!==1}if(f=!1,me=_e+wt,oe=we(de,me),R=F?Ne(De,me+10):we(C,me),be=Q(oe,R,me,1),K(be.d,q=_e,Pe))do if(me+=10,oe=we(de,me),R=F?Ne(De,me+10):we(C,me),be=Q(oe,R,me,1),!P){+L(be.d).slice(q+1,q+15)+1==1e14&&(be=_(be,_e+1,0));break}while(K(be.d,q+=10,Pe));return f=!0,_(be,_e,Pe)},T.minus=T.sub=function(C){var F,B,R,q,P,oe,me,be,de,De,_e,Pe,wt=this,ar=wt.constructor;if(C=new ar(C),!wt.d||!C.d)return!wt.s||!C.s?C=new ar(NaN):wt.d?C.s=-C.s:C=new ar(C.d||wt.s!==C.s?wt:NaN),C;if(wt.s!=C.s)return C.s=-C.s,wt.plus(C);if(de=wt.d,Pe=C.d,me=ar.precision,be=ar.rounding,!de[0]||!Pe[0]){if(Pe[0])C.s=-C.s;else if(de[0])C=new ar(wt);else return new ar(be===3?-0:0);return f?_(C,me,be):C}if(B=y(C.e/M),De=y(wt.e/M),de=de.slice(),P=De-B,P){for(_e=P<0,_e?(F=de,P=-P,oe=Pe.length):(F=Pe,B=De,oe=de.length),R=Math.max(Math.ceil(me/M),oe)+2,P>R&&(P=R,F.length=1),F.reverse(),R=P;R--;)F.push(0);F.reverse()}else{for(R=de.length,oe=Pe.length,_e=R<oe,_e&&(oe=R),R=0;R<oe;R++)if(de[R]!=Pe[R]){_e=de[R]<Pe[R];break}P=0}for(_e&&(F=de,de=Pe,Pe=F,C.s=-C.s),oe=de.length,R=Pe.length-oe;R>0;--R)de[oe++]=0;for(R=Pe.length;R>P;){if(de[--R]<Pe[R]){for(q=R;q&&de[--q]===0;)de[q]=E-1;--de[q],de[R]+=E}de[R]-=Pe[R]}for(;de[--oe]===0;)de.pop();for(;de[0]===0;de.shift())--B;return de[0]?(C.d=de,C.e=he(de,B),f?_(C,me,be):C):new ar(be===3?-0:0)},T.modulo=T.mod=function(C){var F,B=this,R=B.constructor;return C=new R(C),!B.d||!C.s||C.d&&!C.d[0]?new R(NaN):!C.d||B.d&&!B.d[0]?_(new R(B),R.precision,R.rounding):(f=!1,R.modulo==9?(F=Q(B,C.abs(),0,3,1),F.s*=C.s):F=Q(B,C,0,R.modulo,1),F=F.times(C),f=!0,B.minus(F))},T.naturalExponential=T.exp=function(){return Se(this)},T.naturalLogarithm=T.ln=function(){return we(this)},T.negated=T.neg=function(){var C=new this.constructor(this);return C.s=-C.s,_(C)},T.plus=T.add=function(C){var F,B,R,q,P,oe,me,be,de,De,_e=this,Pe=_e.constructor;if(C=new Pe(C),!_e.d||!C.d)return!_e.s||!C.s?C=new Pe(NaN):_e.d||(C=new Pe(C.d||_e.s===C.s?_e:NaN)),C;if(_e.s!=C.s)return C.s=-C.s,_e.minus(C);if(de=_e.d,De=C.d,me=Pe.precision,be=Pe.rounding,!de[0]||!De[0])return De[0]||(C=new Pe(_e)),f?_(C,me,be):C;if(P=y(_e.e/M),R=y(C.e/M),de=de.slice(),q=P-R,q){for(q<0?(B=de,q=-q,oe=De.length):(B=De,R=P,oe=de.length),P=Math.ceil(me/M),oe=P>oe?P+1:oe+1,q>oe&&(q=oe,B.length=1),B.reverse();q--;)B.push(0);B.reverse()}for(oe=de.length,q=De.length,oe-q<0&&(q=oe,B=De,De=de,de=B),F=0;q;)F=(de[--q]=de[q]+De[q]+F)/E|0,de[q]%=E;for(F&&(de.unshift(F),++R),oe=de.length;de[--oe]==0;)de.pop();return C.d=de,C.e=he(de,R),f?_(C,me,be):C},T.precision=T.sd=function(C){var F,B=this;if(C!==void 0&&C!==!!C&&C!==1&&C!==0)throw Error(m+C);return B.d?(F=ve(B.d),C&&B.e+1>F&&(F=B.e+1)):F=NaN,F},T.round=function(){var C=this,F=C.constructor;return _(new F(C),C.e+1,F.rounding)},T.sine=T.sin=function(){var C,F,B=this,R=B.constructor;return B.isFinite()?B.isZero()?new R(B):(C=R.precision,F=R.rounding,R.precision=C+Math.max(B.e,B.sd())+M,R.rounding=1,B=st(R,G(R,B)),R.precision=C,R.rounding=F,_(l>2?B.neg():B,C,F,!0)):new R(NaN)},T.squareRoot=T.sqrt=function(){var C,F,B,R,q,P,oe=this,me=oe.d,be=oe.e,de=oe.s,De=oe.constructor;if(de!==1||!me||!me[0])return new De(!de||de<0&&(!me||me[0])?NaN:me?oe:1/0);for(f=!1,de=Math.sqrt(+oe),de==0||de==1/0?(F=L(me),(F.length+be)%2==0&&(F+="0"),de=Math.sqrt(F),be=y((be+1)/2)-(be<0||be%2),de==1/0?F="5e"+be:(F=de.toExponential(),F=F.slice(0,F.indexOf("e")+1)+be),R=new De(F)):R=new De(de.toString()),B=(be=De.precision)+3;;)if(P=R,R=P.plus(Q(oe,P,B+2,1)).times(.5),L(P.d).slice(0,B)===(F=L(R.d)).slice(0,B))if(F=F.slice(B-3,B+1),F=="9999"||!q&&F=="4999"){if(!q&&(_(P,be+1,0),P.times(P).eq(oe))){R=P;break}B+=4,q=1}else{(!+F||!+F.slice(1)&&F.charAt(0)=="5")&&(_(R,be+1,1),C=!R.times(R).eq(oe));break}return f=!0,_(R,be,De.rounding,C)},T.tangent=T.tan=function(){var C,F,B=this,R=B.constructor;return B.isFinite()?B.isZero()?new R(B):(C=R.precision,F=R.rounding,R.precision=C+10,R.rounding=1,B=B.sin(),B.s=1,B=Q(B,new R(1).minus(B.times(B)).sqrt(),C+10,0),R.precision=C,R.rounding=F,_(l==2||l==4?B.neg():B,C,F,!0)):new R(NaN)},T.times=T.mul=function(C){var F,B,R,q,P,oe,me,be,de,De=this,_e=De.constructor,Pe=De.d,wt=(C=new _e(C)).d;if(C.s*=De.s,!Pe||!Pe[0]||!wt||!wt[0])return new _e(!C.s||Pe&&!Pe[0]&&!wt||wt&&!wt[0]&&!Pe?NaN:!Pe||!wt?C.s/0:C.s*0);for(B=y(De.e/M)+y(C.e/M),be=Pe.length,de=wt.length,be<de&&(P=Pe,Pe=wt,wt=P,oe=be,be=de,de=oe),P=[],oe=be+de,R=oe;R--;)P.push(0);for(R=de;--R>=0;){for(F=0,q=be+R;q>R;)me=P[q]+wt[R]*Pe[q-R-1]+F,P[q--]=me%E|0,F=me/E|0;P[q]=(P[q]+F)%E|0}for(;!P[--oe];)P.pop();return F?++B:P.shift(),C.d=P,C.e=he(P,B),f?_(C,_e.precision,_e.rounding):C},T.toBinary=function(C,F){return X(this,2,C,F)},T.toDecimalPlaces=T.toDP=function(C,F){var B=this,R=B.constructor;return B=new R(B),C===void 0?B:($(C,0,t),F===void 0?F=R.rounding:$(F,0,8),_(B,C+B.e+1,F))},T.toExponential=function(C,F){var B,R=this,q=R.constructor;return C===void 0?B=te(R,!0):($(C,0,t),F===void 0?F=q.rounding:$(F,0,8),R=_(new q(R),C+1,F),B=te(R,!0,C+1)),R.isNeg()&&!R.isZero()?"-"+B:B},T.toFixed=function(C,F){var B,R,q=this,P=q.constructor;return C===void 0?B=te(q):($(C,0,t),F===void 0?F=P.rounding:$(F,0,8),R=_(new P(q),C+q.e+1,F),B=te(R,!1,C+R.e+1)),q.isNeg()&&!q.isZero()?"-"+B:B},T.toFraction=function(C){var F,B,R,q,P,oe,me,be,de,De,_e,Pe,wt=this,ar=wt.d,qt=wt.constructor;if(!ar)return new qt(wt);if(de=B=new qt(1),R=be=new qt(0),F=new qt(R),P=F.e=ve(ar)-wt.e-1,oe=P%M,F.d[0]=N(10,oe<0?M+oe:oe),C==null)C=P>0?F:de;else{if(me=new qt(C),!me.isInt()||me.lt(de))throw Error(m+me);C=me.gt(F)?P>0?F:de:me}for(f=!1,me=new qt(L(ar)),De=qt.precision,qt.precision=P=ar.length*M*2;_e=Q(me,F,0,1,1),q=B.plus(_e.times(R)),q.cmp(C)!=1;)B=R,R=q,q=de,de=be.plus(_e.times(q)),be=q,q=F,F=me.minus(_e.times(q)),me=q;return q=Q(C.minus(B),R,0,1,1),be=be.plus(q.times(de)),B=B.plus(q.times(R)),be.s=de.s=wt.s,Pe=Q(de,R,P,1).minus(wt).abs().cmp(Q(be,B,P,1).minus(wt).abs())<1?[de,R]:[be,B],qt.precision=De,f=!0,Pe},T.toHexadecimal=T.toHex=function(C,F){return X(this,16,C,F)},T.toNearest=function(C,F){var B=this,R=B.constructor;if(B=new R(B),C==null){if(!B.d)return B;C=new R(1),F=R.rounding}else{if(C=new R(C),F===void 0?F=R.rounding:$(F,0,8),!B.d)return C.s?B:C;if(!C.d)return C.s&&(C.s=B.s),C}return C.d[0]?(f=!1,B=Q(B,C,0,F,1).times(C),f=!0,_(B)):(C.s=B.s,B=C),B},T.toNumber=function(){return+this},T.toOctal=function(C,F){return X(this,8,C,F)},T.toPower=T.pow=function(C){var F,B,R,q,P,oe,me=this,be=me.constructor,de=+(C=new be(C));if(!me.d||!C.d||!me.d[0]||!C.d[0])return new be(N(+me,de));if(me=new be(me),me.eq(1))return me;if(R=be.precision,P=be.rounding,C.eq(1))return _(me,R,P);if(F=y(C.e/M),F>=C.d.length-1&&(B=de<0?-de:de)<=D)return q=ne(be,me,B,R),C.s<0?new be(1).div(q):_(q,R,P);if(oe=me.s,oe<0){if(F<C.d.length-1)return new be(NaN);if((C.d[F]&1)==0&&(oe=1),me.e==0&&me.d[0]==1&&me.d.length==1)return me.s=oe,me}return B=N(+me,de),F=B==0||!isFinite(B)?y(de*(Math.log("0."+L(me.d))/Math.LN10+me.e+1)):new be(B+"").e,F>be.maxE+1||F<be.minE-1?new be(F>0?oe/0:0):(f=!1,be.rounding=me.s=1,B=Math.min(12,(F+"").length),q=Se(C.times(we(me,R+B)),R),q.d&&(q=_(q,R+5,1),K(q.d,R,P)&&(F=R+10,q=_(Se(C.times(we(me,F+B)),F),F+5,1),+L(q.d).slice(R+1,R+15)+1==1e14&&(q=_(q,R+1,0)))),q.s=oe,f=!0,be.rounding=P,_(q,R,P))},T.toPrecision=function(C,F){var B,R=this,q=R.constructor;return C===void 0?B=te(R,R.e<=q.toExpNeg||R.e>=q.toExpPos):($(C,1,t),F===void 0?F=q.rounding:$(F,0,8),R=_(new q(R),C,F),B=te(R,C<=R.e||R.e<=q.toExpNeg,C)),R.isNeg()&&!R.isZero()?"-"+B:B},T.toSignificantDigits=T.toSD=function(C,F){var B=this,R=B.constructor;return C===void 0?(C=R.precision,F=R.rounding):($(C,1,t),F===void 0?F=R.rounding:$(F,0,8)),_(new R(B),C,F)},T.toString=function(){var C=this,F=C.constructor,B=te(C,C.e<=F.toExpNeg||C.e>=F.toExpPos);return C.isNeg()&&!C.isZero()?"-"+B:B},T.truncated=T.trunc=function(){return _(new this.constructor(this),this.e+1,1)},T.valueOf=T.toJSON=function(){var C=this,F=C.constructor,B=te(C,C.e<=F.toExpNeg||C.e>=F.toExpPos);return C.isNeg()?"-"+B:B};function L(C){var F,B,R,q=C.length-1,P="",oe=C[0];if(q>0){for(P+=oe,F=1;F<q;F++)R=C[F]+"",B=M-R.length,B&&(P+=re(B)),P+=R;oe=C[F],R=oe+"",B=M-R.length,B&&(P+=re(B))}else if(oe===0)return"0";for(;oe%10===0;)oe/=10;return P+oe}function $(C,F,B){if(C!==~~C||C<F||C>B)throw Error(m+C)}function K(C,F,B,R){var q,P,oe,me;for(P=C[0];P>=10;P/=10)--F;return--F<0?(F+=M,q=0):(q=Math.ceil((F+1)/M),F%=M),P=N(10,M-F),me=C[q]%P|0,R==null?F<3?(F==0?me=me/100|0:F==1&&(me=me/10|0),oe=B<4&&me==99999||B>3&&me==49999||me==5e4||me==0):oe=(B<4&&me+1==P||B>3&&me+1==P/2)&&(C[q+1]/P/100|0)==N(10,F-2)-1||(me==P/2||me==0)&&(C[q+1]/P/100|0)==0:F<4?(F==0?me=me/1e3|0:F==1?me=me/100|0:F==2&&(me=me/10|0),oe=(R||B<4)&&me==9999||!R&&B>3&&me==4999):oe=((R||B<4)&&me+1==P||!R&&B>3&&me+1==P/2)&&(C[q+1]/P/1e3|0)==N(10,F-3)-1,oe}function V(C,F,B){for(var R,q=[0],P,oe=0,me=C.length;oe<me;){for(P=q.length;P--;)q[P]*=F;for(q[0]+=n.indexOf(C.charAt(oe++)),R=0;R<q.length;R++)q[R]>B-1&&(q[R+1]===void 0&&(q[R+1]=0),q[R+1]+=q[R]/B|0,q[R]%=B)}return q.reverse()}function z(C,F){var B,R,q;if(F.isZero())return F;R=F.d.length,R<32?(B=Math.ceil(R/3),q=(1/ie(4,B)).toString()):(B=16,q="2.3283064365386962890625e-10"),C.precision+=B,F=Z(C,1,F.times(q),new C(1));for(var P=B;P--;){var oe=F.times(F);F=oe.times(oe).minus(oe).times(8).plus(1)}return C.precision-=B,F}var Q=function(){function C(R,q,P){var oe,me=0,be=R.length;for(R=R.slice();be--;)oe=R[be]*q+me,R[be]=oe%P|0,me=oe/P|0;return me&&R.unshift(me),R}function F(R,q,P,oe){var me,be;if(P!=oe)be=P>oe?1:-1;else for(me=be=0;me<P;me++)if(R[me]!=q[me]){be=R[me]>q[me]?1:-1;break}return be}function B(R,q,P,oe){for(var me=0;P--;)R[P]-=me,me=R[P]<q[P]?1:0,R[P]=me*oe+R[P]-q[P];for(;!R[0]&&R.length>1;)R.shift()}return function(R,q,P,oe,me,be){var de,De,_e,Pe,wt,ar,qt,Ni,tn,$o,_r,ii,ld,Xa,B0,fd,Vf,z0,Uo,pd,md=R.constructor,R0=R.s==q.s?1:-1,oi=R.d,Lr=q.d;if(!oi||!oi[0]||!Lr||!Lr[0])return new md(!R.s||!q.s||(oi?Lr&&oi[0]==Lr[0]:!Lr)?NaN:oi&&oi[0]==0||!Lr?R0*0:R0/0);for(be?(wt=1,De=R.e-q.e):(be=E,wt=M,De=y(R.e/wt)-y(q.e/wt)),Uo=Lr.length,Vf=oi.length,tn=new md(R0),$o=tn.d=[],_e=0;Lr[_e]==(oi[_e]||0);_e++);if(Lr[_e]>(oi[_e]||0)&&De--,P==null?(Xa=P=md.precision,oe=md.rounding):me?Xa=P+(R.e-q.e)+1:Xa=P,Xa<0)$o.push(1),ar=!0;else{if(Xa=Xa/wt+2|0,_e=0,Uo==1){for(Pe=0,Lr=Lr[0],Xa++;(_e<Vf||Pe)&&Xa--;_e++)B0=Pe*be+(oi[_e]||0),$o[_e]=B0/Lr|0,Pe=B0%Lr|0;ar=Pe||_e<Vf}else{for(Pe=be/(Lr[0]+1)|0,Pe>1&&(Lr=C(Lr,Pe,be),oi=C(oi,Pe,be),Uo=Lr.length,Vf=oi.length),fd=Uo,_r=oi.slice(0,Uo),ii=_r.length;ii<Uo;)_r[ii++]=0;pd=Lr.slice(),pd.unshift(0),z0=Lr[0],Lr[1]>=be/2&&++z0;do Pe=0,de=F(Lr,_r,Uo,ii),de<0?(ld=_r[0],Uo!=ii&&(ld=ld*be+(_r[1]||0)),Pe=ld/z0|0,Pe>1?(Pe>=be&&(Pe=be-1),qt=C(Lr,Pe,be),Ni=qt.length,ii=_r.length,de=F(qt,_r,Ni,ii),de==1&&(Pe--,B(qt,Uo<Ni?pd:Lr,Ni,be))):(Pe==0&&(de=Pe=1),qt=Lr.slice()),Ni=qt.length,Ni<ii&&qt.unshift(0),B(_r,qt,ii,be),de==-1&&(ii=_r.length,de=F(Lr,_r,Uo,ii),de<1&&(Pe++,B(_r,Uo<ii?pd:Lr,ii,be))),ii=_r.length):de===0&&(Pe++,_r=[0]),$o[_e++]=Pe,de&&_r[0]?_r[ii++]=oi[fd]||0:(_r=[oi[fd]],ii=1);while((fd++<Vf||_r[0]!==void 0)&&Xa--);ar=_r[0]!==void 0}$o[0]||$o.shift()}if(wt==1)tn.e=De,u=ar;else{for(_e=1,Pe=$o[0];Pe>=10;Pe/=10)_e++;tn.e=_e+De*wt-1,_(tn,me?P+tn.e+1:P,oe,ar)}return tn}}();function _(C,F,B,R){var q,P,oe,me,be,de,De,_e,Pe,wt=C.constructor;e:if(F!=null){if(_e=C.d,!_e)return C;for(q=1,me=_e[0];me>=10;me/=10)q++;if(P=F-q,P<0)P+=M,oe=F,De=_e[Pe=0],be=De/N(10,q-oe-1)%10|0;else if(Pe=Math.ceil((P+1)/M),me=_e.length,Pe>=me)if(R){for(;me++<=Pe;)_e.push(0);De=be=0,q=1,P%=M,oe=P-M+1}else break e;else{for(De=me=_e[Pe],q=1;me>=10;me/=10)q++;P%=M,oe=P-M+q,be=oe<0?0:De/N(10,q-oe-1)%10|0}if(R=R||F<0||_e[Pe+1]!==void 0||(oe<0?De:De%N(10,q-oe-1)),de=B<4?(be||R)&&(B==0||B==(C.s<0?3:2)):be>5||be==5&&(B==4||R||B==6&&(P>0?oe>0?De/N(10,q-oe):0:_e[Pe-1])%10&1||B==(C.s<0?8:7)),F<1||!_e[0])return _e.length=0,de?(F-=C.e+1,_e[0]=N(10,(M-F%M)%M),C.e=-F||0):_e[0]=C.e=0,C;if(P==0?(_e.length=Pe,me=1,Pe--):(_e.length=Pe+1,me=N(10,M-P),_e[Pe]=oe>0?(De/N(10,q-oe)%N(10,oe)|0)*me:0),de)for(;;)if(Pe==0){for(P=1,oe=_e[0];oe>=10;oe/=10)P++;for(oe=_e[0]+=me,me=1;oe>=10;oe/=10)me++;P!=me&&(C.e++,_e[0]==E&&(_e[0]=1));break}else{if(_e[Pe]+=me,_e[Pe]!=E)break;_e[Pe--]=0,me=1}for(P=_e.length;_e[--P]===0;)_e.pop()}return f&&(C.e>wt.maxE?(C.d=null,C.e=NaN):C.e<wt.minE&&(C.e=0,C.d=[0])),C}function te(C,F,B){if(!C.isFinite())return et(C);var R,q=C.e,P=L(C.d),oe=P.length;return F?(B&&(R=B-oe)>0?P=P.charAt(0)+"."+P.slice(1)+re(R):oe>1&&(P=P.charAt(0)+"."+P.slice(1)),P=P+(C.e<0?"e":"e+")+C.e):q<0?(P="0."+re(-q-1)+P,B&&(R=B-oe)>0&&(P+=re(R))):q>=oe?(P+=re(q+1-oe),B&&(R=B-q-1)>0&&(P=P+"."+re(R))):((R=q+1)<oe&&(P=P.slice(0,R)+"."+P.slice(R)),B&&(R=B-oe)>0&&(q+1===oe&&(P+="."),P+=re(R))),P}function he(C,F){var B=C[0];for(F*=M;B>=10;B/=10)F++;return F}function Ne(C,F,B){if(F>A)throw f=!0,B&&(C.precision=B),Error(d);return _(new C(i),F,1,!0)}function Y(C,F,B){if(F>k)throw Error(d);return _(new C(o),F,B,!0)}function ve(C){var F=C.length-1,B=F*M+1;if(F=C[F],F){for(;F%10==0;F/=10)B--;for(F=C[0];F>=10;F/=10)B++}return B}function re(C){for(var F="";C--;)F+="0";return F}function ne(C,F,B,R){var q,P=new C(1),oe=Math.ceil(R/M+4);for(f=!1;;){if(B%2&&(P=P.times(F),le(P.d,oe)&&(q=!0)),B=y(B/2),B===0){B=P.d.length-1,q&&P.d[B]===0&&++P.d[B];break}F=F.times(F),le(F.d,oe)}return f=!0,P}function ge(C){return C.d[C.d.length-1]&1}function xe(C,F,B){for(var R,q=new C(F[0]),P=0;++P<F.length;)if(R=new C(F[P]),R.s)q[B](R)&&(q=R);else{q=R;break}return q}function Se(C,F){var B,R,q,P,oe,me,be,de=0,De=0,_e=0,Pe=C.constructor,wt=Pe.rounding,ar=Pe.precision;if(!C.d||!C.d[0]||C.e>17)return new Pe(C.d?C.d[0]?C.s<0?0:1/0:1:C.s?C.s<0?0:C:0/0);for(F==null?(f=!1,be=ar):be=F,me=new Pe(.03125);C.e>-2;)C=C.times(me),_e+=5;for(R=Math.log(N(2,_e))/Math.LN10*2+5|0,be+=R,B=P=oe=new Pe(1),Pe.precision=be;;){if(P=_(P.times(C),be,1),B=B.times(++De),me=oe.plus(Q(P,B,be,1)),L(me.d).slice(0,be)===L(oe.d).slice(0,be)){for(q=_e;q--;)oe=_(oe.times(oe),be,1);if(F==null)if(de<3&&K(oe.d,be-R,wt,de))Pe.precision=be+=10,B=P=me=new Pe(1),De=0,de++;else return _(oe,Pe.precision=ar,wt,f=!0);else return Pe.precision=ar,oe}oe=me}}function we(C,F){var B,R,q,P,oe,me,be,de,De,_e,Pe,wt=1,ar=10,qt=C,Ni=qt.d,tn=qt.constructor,$o=tn.rounding,_r=tn.precision;if(qt.s<0||!Ni||!Ni[0]||!qt.e&&Ni[0]==1&&Ni.length==1)return new tn(Ni&&!Ni[0]?-1/0:qt.s!=1?NaN:Ni?0:qt);if(F==null?(f=!1,De=_r):De=F,tn.precision=De+=ar,B=L(Ni),R=B.charAt(0),Math.abs(P=qt.e)<15e14){for(;R<7&&R!=1||R==1&&B.charAt(1)>3;)qt=qt.times(C),B=L(qt.d),R=B.charAt(0),wt++;P=qt.e,R>1?(qt=new tn("0."+B),P++):qt=new tn(R+"."+B.slice(1))}else return de=Ne(tn,De+2,_r).times(P+""),qt=we(new tn(R+"."+B.slice(1)),De-ar).plus(de),tn.precision=_r,F==null?_(qt,_r,$o,f=!0):qt;for(_e=qt,be=oe=qt=Q(qt.minus(1),qt.plus(1),De,1),Pe=_(qt.times(qt),De,1),q=3;;){if(oe=_(oe.times(Pe),De,1),de=be.plus(Q(oe,new tn(q),De,1)),L(de.d).slice(0,De)===L(be.d).slice(0,De))if(be=be.times(2),P!==0&&(be=be.plus(Ne(tn,De+2,_r).times(P+""))),be=Q(be,new tn(wt),De,1),F==null)if(K(be.d,De-ar,$o,me))tn.precision=De+=ar,de=oe=qt=Q(_e.minus(1),_e.plus(1),De,1),Pe=_(qt.times(qt),De,1),q=me=1;else return _(be,tn.precision=_r,$o,f=!0);else return tn.precision=_r,be;be=de,q+=2}}function et(C){return String(C.s*C.s/0)}function Ye(C,F){var B,R,q;for((B=F.indexOf("."))>-1&&(F=F.replace(".","")),(R=F.search(/e/i))>0?(B<0&&(B=R),B+=+F.slice(R+1),F=F.substring(0,R)):B<0&&(B=F.length),R=0;F.charCodeAt(R)===48;R++);for(q=F.length;F.charCodeAt(q-1)===48;--q);if(F=F.slice(R,q),F){if(q-=R,C.e=B=B-R-1,C.d=[],R=(B+1)%M,B<0&&(R+=M),R<q){for(R&&C.d.push(+F.slice(0,R)),q-=M;R<q;)C.d.push(+F.slice(R,R+=M));F=F.slice(R),R=M-F.length}else R-=q;for(;R--;)F+="0";C.d.push(+F),f&&(C.e>C.constructor.maxE?(C.d=null,C.e=NaN):C.e<C.constructor.minE&&(C.e=0,C.d=[0]))}else C.e=0,C.d=[0];return C}function Ue(C,F){var B,R,q,P,oe,me,be,de,De;if(F.indexOf("_")>-1){if(F=F.replace(/(\d)_(?=\d)/g,"$1"),b.test(F))return Ye(C,F)}else if(F==="Infinity"||F==="NaN")return+F||(C.s=NaN),C.e=NaN,C.d=null,C;if(w.test(F))B=16,F=F.toLowerCase();else if(v.test(F))B=2;else if(S.test(F))B=8;else throw Error(m+F);for(P=F.search(/p/i),P>0?(be=+F.slice(P+1),F=F.substring(2,P)):F=F.slice(2),P=F.indexOf("."),oe=P>=0,R=C.constructor,oe&&(F=F.replace(".",""),me=F.length,P=me-P,q=ne(R,new R(B),P,P*2)),de=V(F,B,E),De=de.length-1,P=De;de[P]===0;--P)de.pop();return P<0?new R(C.s*0):(C.e=he(de,De),C.d=de,f=!1,oe&&(C=Q(C,q,me*4)),be&&(C=C.times(Math.abs(be)<54?N(2,be):s.pow(2,be))),f=!0,C)}function st(C,F){var B,R=F.d.length;if(R<3)return F.isZero()?F:Z(C,2,F,F);B=1.4*Math.sqrt(R),B=B>16?16:B|0,F=F.times(1/ie(5,B)),F=Z(C,2,F,F);for(var q,P=new C(5),oe=new C(16),me=new C(20);B--;)q=F.times(F),F=F.times(P.plus(q.times(oe.times(q).minus(me))));return F}function Z(C,F,B,R,q){var P,oe,me,be,de=1,De=C.precision,_e=Math.ceil(De/M);for(f=!1,be=B.times(B),me=new C(R);;){if(oe=Q(me.times(be),new C(F++*F++),De,1),me=q?R.plus(oe):R.minus(oe),R=Q(oe.times(be),new C(F++*F++),De,1),oe=me.plus(R),oe.d[_e]!==void 0){for(P=_e;oe.d[P]===me.d[P]&&P--;);if(P==-1)break}P=me,me=R,R=oe,oe=P,de++}return f=!0,oe.d.length=_e+1,oe}function ie(C,F){for(var B=C;--F;)B*=C;return B}function G(C,F){var B,R=F.s<0,q=Y(C,C.precision,1),P=q.times(.5);if(F=F.abs(),F.lte(P))return l=R?4:1,F;if(B=F.divToInt(q),B.isZero())l=R?3:2;else{if(F=F.minus(B.times(q)),F.lte(P))return l=ge(B)?R?2:3:R?4:1,F;l=ge(B)?R?1:4:R?3:2}return F.minus(q).abs()}function X(C,F,B,R){var q,P,oe,me,be,de,De,_e,Pe,wt=C.constructor,ar=B!==void 0;if(ar?($(B,1,t),R===void 0?R=wt.rounding:$(R,0,8)):(B=wt.precision,R=wt.rounding),!C.isFinite())De=et(C);else{for(De=te(C),oe=De.indexOf("."),ar?(q=2,F==16?B=B*4-3:F==8&&(B=B*3-2)):q=F,oe>=0&&(De=De.replace(".",""),Pe=new wt(1),Pe.e=De.length-oe,Pe.d=V(te(Pe),10,q),Pe.e=Pe.d.length),_e=V(De,10,q),P=be=_e.length;_e[--be]==0;)_e.pop();if(!_e[0])De=ar?"0p+0":"0";else{if(oe<0?P--:(C=new wt(C),C.d=_e,C.e=P,C=Q(C,Pe,B,R,0,q),_e=C.d,P=C.e,de=u),oe=_e[B],me=q/2,de=de||_e[B+1]!==void 0,de=R<4?(oe!==void 0||de)&&(R===0||R===(C.s<0?3:2)):oe>me||oe===me&&(R===4||de||R===6&&_e[B-1]&1||R===(C.s<0?8:7)),_e.length=B,de)for(;++_e[--B]>q-1;)_e[B]=0,B||(++P,_e.unshift(1));for(be=_e.length;!_e[be-1];--be);for(oe=0,De="";oe<be;oe++)De+=n.charAt(_e[oe]);if(ar){if(be>1)if(F==16||F==8){for(oe=F==16?4:3,--be;be%oe;be++)De+="0";for(_e=V(De,q,F),be=_e.length;!_e[be-1];--be);for(oe=1,De="1.";oe<be;oe++)De+=n.charAt(_e[oe])}else De=De.charAt(0)+"."+De.slice(1);De=De+(P<0?"p":"p+")+P}else if(P<0){for(;++P;)De="0"+De;De="0."+De}else if(++P>be)for(P-=be;P--;)De+="0";else P<be&&(De=De.slice(0,P)+"."+De.slice(P))}De=(F==16?"0x":F==2?"0b":F==8?"0o":"")+De}return C.s<0?"-"+De:De}function le(C,F){if(C.length>F)return C.length=F,!0}function se(C){return new this(C).abs()}function Ae(C){return new this(C).acos()}function ze(C){return new this(C).acosh()}function We(C,F){return new this(C).plus(F)}function Ve(C){return new this(C).asin()}function Ke(C){return new this(C).asinh()}function ft(C){return new this(C).atan()}function or(C){return new this(C).atanh()}function en(C,F){C=new this(C),F=new this(F);var B,R=this.precision,q=this.rounding,P=R+4;return!C.s||!F.s?B=new this(NaN):!C.d&&!F.d?(B=Y(this,P,1).times(F.s>0?.25:.75),B.s=C.s):!F.d||C.isZero()?(B=F.s<0?Y(this,R,q):new this(0),B.s=C.s):!C.d||F.isZero()?(B=Y(this,P,1).times(.5),B.s=C.s):F.s<0?(this.precision=P,this.rounding=1,B=this.atan(Q(C,F,P,1)),F=Y(this,P,1),this.precision=R,this.rounding=q,B=C.s<0?B.minus(F):B.plus(F)):B=this.atan(Q(C,F,P,1)),B}function sn(C){return new this(C).cbrt()}function Oi(C){return _(C=new this(C),C.e+1,2)}function ja(C,F,B){return new this(C).clamp(F,B)}function da(C){if(!C||typeof C!="object")throw Error(p+"Object expected");var F,B,R,q=C.defaults===!0,P=["precision",1,t,"rounding",0,8,"toExpNeg",-e,0,"toExpPos",0,e,"maxE",0,e,"minE",-e,0,"modulo",0,9];for(F=0;F<P.length;F+=3)if(B=P[F],q&&(this[B]=a[B]),(R=C[B])!==void 0)if(y(R)===R&&R>=P[F+1]&&R<=P[F+2])this[B]=R;else throw Error(m+B+": "+R);if(B="crypto",q&&(this[B]=a[B]),(R=C[B])!==void 0)if(R===!0||R===!1||R===0||R===1)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[B]=!0;else throw Error(h);else this[B]=!1;else throw Error(m+B+": "+R);return this}function Cs(C){return new this(C).cos()}function Za(C){return new this(C).cosh()}function ga(C){var F,B,R;function q(P){var oe,me,be,de=this;if(!(de instanceof q))return new q(P);if(de.constructor=q,Me(P)){de.s=P.s,f?!P.d||P.e>q.maxE?(de.e=NaN,de.d=null):P.e<q.minE?(de.e=0,de.d=[0]):(de.e=P.e,de.d=P.d.slice()):(de.e=P.e,de.d=P.d?P.d.slice():P.d);return}if(be=typeof P,be==="number"){if(P===0){de.s=1/P<0?-1:1,de.e=0,de.d=[0];return}if(P<0?(P=-P,de.s=-1):de.s=1,P===~~P&&P<1e7){for(oe=0,me=P;me>=10;me/=10)oe++;f?oe>q.maxE?(de.e=NaN,de.d=null):oe<q.minE?(de.e=0,de.d=[0]):(de.e=oe,de.d=[P]):(de.e=oe,de.d=[P]);return}else if(P*0!==0){P||(de.s=NaN),de.e=NaN,de.d=null;return}return Ye(de,P.toString())}else if(be!=="string")throw Error(m+P);return(me=P.charCodeAt(0))===45?(P=P.slice(1),de.s=-1):(me===43&&(P=P.slice(1)),de.s=1),b.test(P)?Ye(de,P):Ue(de,P)}if(q.prototype=T,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=da,q.clone=ga,q.isDecimal=Me,q.abs=se,q.acos=Ae,q.acosh=ze,q.add=We,q.asin=Ve,q.asinh=Ke,q.atan=ft,q.atanh=or,q.atan2=en,q.cbrt=sn,q.ceil=Oi,q.clamp=ja,q.cos=Cs,q.cosh=Za,q.div=Mr,q.exp=va,q.floor=O,q.hypot=ae,q.ln=He,q.log=Bt,q.log10=wi,q.log2=Wt,q.max=Uf,q.min=A0,q.mod=M0,q.mul=D0,q.pow=E0,q.random=T0,q.round=C0,q.sign=I0,q.sin=k0,q.sinh=O0,q.sqrt=_0,q.sub=F0,q.sum=Gf,q.tan=Or,q.tanh=zn,q.trunc=oo,C===void 0&&(C={}),C&&C.defaults!==!0)for(R=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],F=0;F<R.length;)C.hasOwnProperty(B=R[F++])||(C[B]=this[B]);return q.config(C),q}function Mr(C,F){return new this(C).div(F)}function va(C){return new this(C).exp()}function O(C){return _(C=new this(C),C.e+1,3)}function ae(){var C,F,B=new this(0);for(f=!1,C=0;C<arguments.length;)if(F=new this(arguments[C++]),F.d)B.d&&(B=B.plus(F.times(F)));else{if(F.s)return f=!0,new this(1/0);B=F}return f=!0,B.sqrt()}function Me(C){return C instanceof s||C&&C.toStringTag===x||!1}function He(C){return new this(C).ln()}function Bt(C,F){return new this(C).log(F)}function Wt(C){return new this(C).log(2)}function wi(C){return new this(C).log(10)}function Uf(){return xe(this,arguments,"lt")}function A0(){return xe(this,arguments,"gt")}function M0(C,F){return new this(C).mod(F)}function D0(C,F){return new this(C).mul(F)}function E0(C,F){return new this(C).pow(F)}function T0(C){var F,B,R,q,P=0,oe=new this(1),me=[];if(C===void 0?C=this.precision:$(C,1,t),R=Math.ceil(C/M),this.crypto)if(crypto.getRandomValues)for(F=crypto.getRandomValues(new Uint32Array(R));P<R;)q=F[P],q>=429e7?F[P]=crypto.getRandomValues(new Uint32Array(1))[0]:me[P++]=q%1e7;else if(crypto.randomBytes){for(F=crypto.randomBytes(R*=4);P<R;)q=F[P]+(F[P+1]<<8)+(F[P+2]<<16)+((F[P+3]&127)<<24),q>=214e7?crypto.randomBytes(4).copy(F,P):(me.push(q%1e7),P+=4);P=R/4}else throw Error(h);else for(;P<R;)me[P++]=Math.random()*1e7|0;for(R=me[--P],C%=M,R&&C&&(q=N(10,M-C),me[P]=(R/q|0)*q);me[P]===0;P--)me.pop();if(P<0)B=0,me=[0];else{for(B=-1;me[0]===0;B-=M)me.shift();for(R=1,q=me[0];q>=10;q/=10)R++;R<M&&(B-=M-R)}return oe.e=B,oe.d=me,oe}function C0(C){return _(C=new this(C),C.e+1,this.rounding)}function I0(C){return C=new this(C),C.d?C.d[0]?C.s:0*C.s:C.s||NaN}function k0(C){return new this(C).sin()}function O0(C){return new this(C).sinh()}function _0(C){return new this(C).sqrt()}function F0(C,F){return new this(C).sub(F)}function Gf(){var C=0,F=arguments,B=new this(F[C]);for(f=!1;B.s&&++C<F.length;)B=B.plus(F[C]);return f=!0,_(B,this.precision,this.rounding)}function Or(C){return new this(C).tan()}function zn(C){return new this(C).tanh()}function oo(C){return _(C=new this(C),C.e+1,1)}s=ga(a),s.prototype.constructor=s,s.default=s.Decimal=s,i=new s(i),o=new s(o),typeof define=="function"&&define.amd?define(function(){return s}):typeof zd<"u"&&zd.exports?(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(T[Symbol.for("nodejs.util.inspect.custom")]=T.toString,T[Symbol.toStringTag]="Decimal"),zd.exports=s):(r||(r=typeof self<"u"&&self&&self.self==self?self:window),c=r.Decimal,s.noConflict=function(){return r.Decimal=c,s},r.Decimal=s)})(vO)});var bb,Afe,Mfe,wb,xO=g(()=>{bb=Si(Rd(),1);j();Afe="BigNumber",Mfe=["?on","config"],wb=I(Afe,Mfe,r=>{var{on:e,config:t}=r,n=bb.default.clone({precision:t.precision,modulo:bb.default.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&n.config({precision:i.precision})}),n},{isClass:!0})});var bO=Re((Nb,yO)=>{(function(r){"use strict";var e=function(c){return(Math.exp(c)+Math.exp(-c))*.5},t=function(c){return(Math.exp(c)-Math.exp(-c))*.5},n=function(c){var l=Math.PI/4;if(-l>c||c>l)return Math.cos(c)-1;var f=c*c;return f*(f*(f*(f*(f*(f*(f*(f/20922789888e3-11470745597729725e-27)+208767569878681e-23)-2755731922398589e-22)+248015873015873e-19)-.001388888888888889)+.041666666666666664)-.5)},i=function(c,l){var f=Math.abs(c),p=Math.abs(l);return f<3e3&&p<3e3?Math.sqrt(f*f+p*p):(f<p?(f=p,p=c/l):p=l/c,f*Math.sqrt(1+p*p))},o=function(){throw SyntaxError("Invalid Param")};function a(c,l){var f=Math.abs(c),p=Math.abs(l);return c===0?Math.log(p):l===0?Math.log(f):f<3e3&&p<3e3?Math.log(c*c+l*l)*.5:Math.log(c/Math.cos(Math.atan2(l,c)))}var s=function(c,l){var f={re:0,im:0};if(c==null)f.re=f.im=0;else if(l!==void 0)f.re=c,f.im=l;else switch(typeof c){case"object":if("im"in c&&"re"in c)f.re=c.re,f.im=c.im;else if("abs"in c&&"arg"in c){if(!Number.isFinite(c.abs)&&Number.isFinite(c.arg))return u.INFINITY;f.re=c.abs*Math.cos(c.arg),f.im=c.abs*Math.sin(c.arg)}else if("r"in c&&"phi"in c){if(!Number.isFinite(c.r)&&Number.isFinite(c.phi))return u.INFINITY;f.re=c.r*Math.cos(c.phi),f.im=c.r*Math.sin(c.phi)}else c.length===2?(f.re=c[0],f.im=c[1]):o();break;case"string":f.im=f.re=0;var p=c.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,d=0;p===null&&o();for(var h=0;h<p.length;h++){var x=p[h];x===" "||x==="	"||x===`
`||(x==="+"?m++:x==="-"?d++:x==="i"||x==="I"?(m+d===0&&o(),p[h+1]!==" "&&!isNaN(p[h+1])?(f.im+=parseFloat((d%2?"-":"")+p[h+1]),h++):f.im+=parseFloat((d%2?"-":"")+"1"),m=d=0):((m+d===0||isNaN(x))&&o(),p[h+1]==="i"||p[h+1]==="I"?(f.im+=parseFloat((d%2?"-":"")+x),h++):f.re+=parseFloat((d%2?"-":"")+x),m=d=0))}m+d>0&&o();break;case"number":f.im=0,f.re=c;break;default:o()}return isNaN(f.re)||isNaN(f.im),f};function u(c,l){if(!(this instanceof u))return new u(c,l);var f=s(c,l);this.re=f.re,this.im=f.im}u.prototype={re:0,im:0,sign:function(){var c=this.abs();return new u(this.re/c,this.im/c)},add:function(c,l){var f=new u(c,l);return this.isInfinite()&&f.isInfinite()?u.NAN:this.isInfinite()||f.isInfinite()?u.INFINITY:new u(this.re+f.re,this.im+f.im)},sub:function(c,l){var f=new u(c,l);return this.isInfinite()&&f.isInfinite()?u.NAN:this.isInfinite()||f.isInfinite()?u.INFINITY:new u(this.re-f.re,this.im-f.im)},mul:function(c,l){var f=new u(c,l);return this.isInfinite()&&f.isZero()||this.isZero()&&f.isInfinite()?u.NAN:this.isInfinite()||f.isInfinite()?u.INFINITY:f.im===0&&this.im===0?new u(this.re*f.re,0):new u(this.re*f.re-this.im*f.im,this.re*f.im+this.im*f.re)},div:function(c,l){var f=new u(c,l);if(this.isZero()&&f.isZero()||this.isInfinite()&&f.isInfinite())return u.NAN;if(this.isInfinite()||f.isZero())return u.INFINITY;if(this.isZero()||f.isInfinite())return u.ZERO;c=this.re,l=this.im;var p=f.re,m=f.im,d,h;return m===0?new u(c/p,l/p):Math.abs(p)<Math.abs(m)?(h=p/m,d=p*h+m,new u((c*h+l)/d,(l*h-c)/d)):(h=m/p,d=m*h+p,new u((c+l*h)/d,(l-c*h)/d))},pow:function(c,l){var f=new u(c,l);if(c=this.re,l=this.im,f.isZero())return u.ONE;if(f.im===0){if(l===0&&c>0)return new u(Math.pow(c,f.re),0);if(c===0)switch((f.re%4+4)%4){case 0:return new u(Math.pow(l,f.re),0);case 1:return new u(0,Math.pow(l,f.re));case 2:return new u(-Math.pow(l,f.re),0);case 3:return new u(0,-Math.pow(l,f.re))}}if(c===0&&l===0&&f.re>0&&f.im>=0)return u.ZERO;var p=Math.atan2(l,c),m=a(c,l);return c=Math.exp(f.re*m-f.im*p),l=f.im*m+f.re*p,new u(c*Math.cos(l),c*Math.sin(l))},sqrt:function(){var c=this.re,l=this.im,f=this.abs(),p,m;if(c>=0){if(l===0)return new u(Math.sqrt(c),0);p=.5*Math.sqrt(2*(f+c))}else p=Math.abs(l)/Math.sqrt(2*(f-c));return c<=0?m=.5*Math.sqrt(2*(f-c)):m=Math.abs(l)/Math.sqrt(2*(f+c)),new u(p,l<0?-m:m)},exp:function(){var c=Math.exp(this.re);return this.im,new u(c*Math.cos(this.im),c*Math.sin(this.im))},expm1:function(){var c=this.re,l=this.im;return new u(Math.expm1(c)*Math.cos(l)+n(l),Math.exp(c)*Math.sin(l))},log:function(){var c=this.re,l=this.im;return l===0&&c>0,new u(a(c,l),Math.atan2(l,c))},abs:function(){return i(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var c=this.re,l=this.im;return new u(Math.sin(c)*e(l),Math.cos(c)*t(l))},cos:function(){var c=this.re,l=this.im;return new u(Math.cos(c)*e(l),-Math.sin(c)*t(l))},tan:function(){var c=2*this.re,l=2*this.im,f=Math.cos(c)+e(l);return new u(Math.sin(c)/f,t(l)/f)},cot:function(){var c=2*this.re,l=2*this.im,f=Math.cos(c)-e(l);return new u(-Math.sin(c)/f,t(l)/f)},sec:function(){var c=this.re,l=this.im,f=.5*e(2*l)+.5*Math.cos(2*c);return new u(Math.cos(c)*e(l)/f,Math.sin(c)*t(l)/f)},csc:function(){var c=this.re,l=this.im,f=.5*e(2*l)-.5*Math.cos(2*c);return new u(Math.sin(c)*e(l)/f,-Math.cos(c)*t(l)/f)},asin:function(){var c=this.re,l=this.im,f=new u(l*l-c*c+1,-2*c*l).sqrt(),p=new u(f.re-l,f.im+c).log();return new u(p.im,-p.re)},acos:function(){var c=this.re,l=this.im,f=new u(l*l-c*c+1,-2*c*l).sqrt(),p=new u(f.re-l,f.im+c).log();return new u(Math.PI/2-p.im,p.re)},atan:function(){var c=this.re,l=this.im;if(c===0){if(l===1)return new u(0,1/0);if(l===-1)return new u(0,-1/0)}var f=c*c+(1-l)*(1-l),p=new u((1-l*l-c*c)/f,-2*c/f).log();return new u(-.5*p.im,.5*p.re)},acot:function(){var c=this.re,l=this.im;if(l===0)return new u(Math.atan2(1,c),0);var f=c*c+l*l;return f!==0?new u(c/f,-l/f).atan():new u(c!==0?c/0:0,l!==0?-l/0:0).atan()},asec:function(){var c=this.re,l=this.im;if(c===0&&l===0)return new u(0,1/0);var f=c*c+l*l;return f!==0?new u(c/f,-l/f).acos():new u(c!==0?c/0:0,l!==0?-l/0:0).acos()},acsc:function(){var c=this.re,l=this.im;if(c===0&&l===0)return new u(Math.PI/2,1/0);var f=c*c+l*l;return f!==0?new u(c/f,-l/f).asin():new u(c!==0?c/0:0,l!==0?-l/0:0).asin()},sinh:function(){var c=this.re,l=this.im;return new u(t(c)*Math.cos(l),e(c)*Math.sin(l))},cosh:function(){var c=this.re,l=this.im;return new u(e(c)*Math.cos(l),t(c)*Math.sin(l))},tanh:function(){var c=2*this.re,l=2*this.im,f=e(c)+Math.cos(l);return new u(t(c)/f,Math.sin(l)/f)},coth:function(){var c=2*this.re,l=2*this.im,f=e(c)-Math.cos(l);return new u(t(c)/f,-Math.sin(l)/f)},csch:function(){var c=this.re,l=this.im,f=Math.cos(2*l)-e(2*c);return new u(-2*t(c)*Math.cos(l)/f,2*e(c)*Math.sin(l)/f)},sech:function(){var c=this.re,l=this.im,f=Math.cos(2*l)+e(2*c);return new u(2*e(c)*Math.cos(l)/f,-2*t(c)*Math.sin(l)/f)},asinh:function(){var c=this.im;this.im=-this.re,this.re=c;var l=this.asin();return this.re=-this.im,this.im=c,c=l.re,l.re=-l.im,l.im=c,l},acosh:function(){var c=this.acos();if(c.im<=0){var l=c.re;c.re=-c.im,c.im=l}else{var l=c.im;c.im=-c.re,c.re=l}return c},atanh:function(){var c=this.re,l=this.im,f=c>1&&l===0,p=1-c,m=1+c,d=p*p+l*l,h=d!==0?new u((m*p-l*l)/d,(l*p+m*l)/d):new u(c!==-1?c/0:0,l!==0?l/0:0),x=h.re;return h.re=a(h.re,h.im)/2,h.im=Math.atan2(h.im,x)/2,f&&(h.im=-h.im),h},acoth:function(){var c=this.re,l=this.im;if(c===0&&l===0)return new u(0,Math.PI/2);var f=c*c+l*l;return f!==0?new u(c/f,-l/f).atanh():new u(c!==0?c/0:0,l!==0?-l/0:0).atanh()},acsch:function(){var c=this.re,l=this.im;if(l===0)return new u(c!==0?Math.log(c+Math.sqrt(c*c+1)):1/0,0);var f=c*c+l*l;return f!==0?new u(c/f,-l/f).asinh():new u(c!==0?c/0:0,l!==0?-l/0:0).asinh()},asech:function(){var c=this.re,l=this.im;if(this.isZero())return u.INFINITY;var f=c*c+l*l;return f!==0?new u(c/f,-l/f).acosh():new u(c!==0?c/0:0,l!==0?-l/0:0).acosh()},inverse:function(){if(this.isZero())return u.INFINITY;if(this.isInfinite())return u.ZERO;var c=this.re,l=this.im,f=c*c+l*l;return new u(c/f,-l/f)},conjugate:function(){return new u(this.re,-this.im)},neg:function(){return new u(-this.re,-this.im)},ceil:function(c){return c=Math.pow(10,c||0),new u(Math.ceil(this.re*c)/c,Math.ceil(this.im*c)/c)},floor:function(c){return c=Math.pow(10,c||0),new u(Math.floor(this.re*c)/c,Math.floor(this.im*c)/c)},round:function(c){return c=Math.pow(10,c||0),new u(Math.round(this.re*c)/c,Math.round(this.im*c)/c)},equals:function(c,l){var f=new u(c,l);return Math.abs(f.re-this.re)<=u.EPSILON&&Math.abs(f.im-this.im)<=u.EPSILON},clone:function(){return new u(this.re,this.im)},toString:function(){var c=this.re,l=this.im,f="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(c)<u.EPSILON&&(c=0),Math.abs(l)<u.EPSILON&&(l=0),l===0?f+c:(c!==0?(f+=c,f+=" ",l<0?(l=-l,f+="-"):f+="+",f+=" "):l<0&&(l=-l,f+="-"),l!==1&&(f+=l),f+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.INFINITY=new u(1/0,1/0),u.NAN=new u(NaN,NaN),u.EPSILON=1e-15,typeof define=="function"&&define.amd?define([],function(){return u}):typeof Nb=="object"?(Object.defineProperty(u,"__esModule",{value:!0}),u.default=u,u.Complex=u,yO.exports=u):r.Complex=u})(Nb)});var Di,Dfe,Efe,Sb,wO=g(()=>{Di=Si(bO(),1);Rt();Je();j();Dfe="Complex",Efe=[],Sb=I(Dfe,Efe,()=>(Di.default.prototype.type="Complex",Di.default.prototype.isComplex=!0,Di.default.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Di.default.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Di.default.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Ho(this.re,r),o=Ho(this.im,r),a=kt(r)?r:r?r.precision:null;if(a!==null){var s=Math.pow(10,-a);Math.abs(n/t)<s&&(n=0),Math.abs(t/n)<s&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=o+"i":t<0?t===-1?e=i+" - i":e=i+" - "+o.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+o+"i",e},Di.default.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return(0,Di.default)(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(kt(t)){if(Qa(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),kt(n))return new Di.default({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Di.default.prototype.valueOf=Di.default.prototype.toString,Di.default.fromJSON=function(r){return new Di.default(r)},Di.default.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Di.default),{isClass:!0})});var SO=Re((Ab,NO)=>{(function(r){"use strict";var e=2e3,t={s:1,n:0,d:1};function n(h){function x(){var N=Error.apply(this,arguments);N.name=this.name=h,this.stack=N.stack,this.message=N.message}function y(){}return y.prototype=Error.prototype,x.prototype=new y,x}var i=d.DivisionByZero=n("DivisionByZero"),o=d.InvalidParameter=n("InvalidParameter");function a(h,x){return isNaN(h=parseInt(h,10))&&s(),h*x}function s(){throw new o}function u(h){for(var x={},y=h,N=2,v=4;v<=y;){for(;y%N===0;)y/=N,x[N]=(x[N]||0)+1;v+=1+2*N++}return y!==h?y>1&&(x[y]=(x[y]||0)+1):x[h]=(x[h]||0)+1,x}var c=function(h,x){var y=0,N=1,v=1,w=0,S=0,b=0,E=1,M=1,D=0,A=1,k=1,T=1,L=1e7,$;if(h!=null)if(x!==void 0)y=h,N=x,v=y*N;else switch(typeof h){case"object":{"d"in h&&"n"in h?(y=h.n,N=h.d,"s"in h&&(y*=h.s)):0 in h?(y=h[0],1 in h&&(N=h[1])):s(),v=y*N;break}case"number":{if(h<0&&(v=h,h=-h),h%1===0)y=h;else if(h>0){for(h>=1&&(M=Math.pow(10,Math.floor(1+Math.log(h)/Math.LN10)),h/=M);A<=L&&T<=L;)if($=(D+k)/(A+T),h===$){A+T<=L?(y=D+k,N=A+T):T>A?(y=k,N=T):(y=D,N=A);break}else h>$?(D+=k,A+=T):(k+=D,T+=A),A>L?(y=k,N=T):(y=D,N=A);y*=M}else(isNaN(h)||isNaN(x))&&(N=y=NaN);break}case"string":if(A=h.match(/\d+|./g),A===null&&s(),A[D]==="-"?(v=-1,D++):A[D]==="+"&&D++,A.length===D+1?S=a(A[D++],v):A[D+1]==="."||A[D]==="."?(A[D]!=="."&&(w=a(A[D++],v)),D++,(D+1===A.length||A[D+1]==="("&&A[D+3]===")"||A[D+1]==="'"&&A[D+3]==="'")&&(S=a(A[D],v),E=Math.pow(10,A[D].length),D++),(A[D]==="("&&A[D+2]===")"||A[D]==="'"&&A[D+2]==="'")&&(b=a(A[D+1],v),M=Math.pow(10,A[D+1].length)-1,D+=3)):A[D+1]==="/"||A[D+1]===":"?(S=a(A[D],v),E=a(A[D+2],1),D+=3):A[D+3]==="/"&&A[D+1]===" "&&(w=a(A[D],v),S=a(A[D+2],v),E=a(A[D+4],1),D+=5),A.length<=D){N=E*M,v=y=b+N*w+M*S;break}default:s()}if(N===0)throw new i;t.s=v<0?-1:1,t.n=Math.abs(y),t.d=Math.abs(N)};function l(h,x,y){for(var N=1;x>0;h=h*h%y,x>>=1)x&1&&(N=N*h%y);return N}function f(h,x){for(;x%2===0;x/=2);for(;x%5===0;x/=5);if(x===1)return 0;for(var y=10%x,N=1;y!==1;N++)if(y=y*10%x,N>e)return 0;return N}function p(h,x,y){for(var N=1,v=l(10,y,x),w=0;w<300;w++){if(N===v)return w;N=N*10%x,v=v*10%x}return 0}function m(h,x){if(!h)return x;if(!x)return h;for(;;){if(h%=x,!h)return x;if(x%=h,!x)return h}}function d(h,x){if(!(this instanceof d))return new d(h,x);c(h,x),h=m(t.d,t.n),this.s=t.s,this.n=t.n/h,this.d=t.d/h}d.prototype={s:1,n:0,d:1,abs:function(){return new d(this.n,this.d)},neg:function(){return new d(-this.s*this.n,this.d)},add:function(h,x){return c(h,x),new d(this.s*this.n*t.d+t.s*this.d*t.n,this.d*t.d)},sub:function(h,x){return c(h,x),new d(this.s*this.n*t.d-t.s*this.d*t.n,this.d*t.d)},mul:function(h,x){return c(h,x),new d(this.s*t.s*this.n*t.n,this.d*t.d)},div:function(h,x){return c(h,x),new d(this.s*t.s*this.n*t.d,this.d*t.n)},clone:function(){return new d(this)},mod:function(h,x){return isNaN(this.n)||isNaN(this.d)?new d(NaN):h===void 0?new d(this.s*this.n%this.d,1):(c(h,x),t.n===0&&this.d===0&&d(0,0),new d(this.s*(t.d*this.n)%(t.n*this.d),t.d*this.d))},gcd:function(h,x){return c(h,x),new d(m(t.n,this.n)*m(t.d,this.d),t.d*this.d)},lcm:function(h,x){return c(h,x),t.n===0&&this.n===0?new d:new d(t.n*this.n,m(t.n,this.n)*m(t.d,this.d))},ceil:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.ceil(h*this.s*this.n/this.d),h)},floor:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.floor(h*this.s*this.n/this.d),h)},round:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.round(h*this.s*this.n/this.d),h)},inverse:function(){return new d(this.s*this.d,this.n)},pow:function(h,x){if(c(h,x),t.d===1)return t.s<0?new d(Math.pow(this.s*this.d,t.n),Math.pow(this.n,t.n)):new d(Math.pow(this.s*this.n,t.n),Math.pow(this.d,t.n));if(this.s<0)return null;var y=u(this.n),N=u(this.d),v=1,w=1;for(var S in y)if(S!=="1"){if(S==="0"){v=0;break}if(y[S]*=t.n,y[S]%t.d===0)y[S]/=t.d;else return null;v*=Math.pow(S,y[S])}for(var S in N)if(S!=="1"){if(N[S]*=t.n,N[S]%t.d===0)N[S]/=t.d;else return null;w*=Math.pow(S,N[S])}return t.s<0?new d(w,v):new d(v,w)},equals:function(h,x){return c(h,x),this.s*this.n*t.d===t.s*t.n*this.d},compare:function(h,x){c(h,x);var y=this.s*this.n*t.d-t.s*t.n*this.d;return(0<y)-(y<0)},simplify:function(h){if(isNaN(this.n)||isNaN(this.d))return this;var x=this.abs().toContinued();h=h||.001;function y(w){return w.length===1?new d(w[0]):y(w.slice(1)).inverse().add(w[0])}for(var N=0;N<x.length;N++){var v=y(x.slice(0,N+1));if(v.sub(this.abs()).abs().valueOf()<h)return v.mul(this.s)}return this},divisible:function(h,x){return c(h,x),!(!(t.n*this.d)||this.n*t.d%(t.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(h){var x,y="",N=this.n,v=this.d;return this.s<0&&(y+="-"),v===1?y+=N:(h&&(x=Math.floor(N/v))>0&&(y+=x,y+=" ",N%=v),y+=N,y+="/",y+=v),y},toLatex:function(h){var x,y="",N=this.n,v=this.d;return this.s<0&&(y+="-"),v===1?y+=N:(h&&(x=Math.floor(N/v))>0&&(y+=x,N%=v),y+="\\frac{",y+=N,y+="}{",y+=v,y+="}"),y},toContinued:function(){var h,x=this.n,y=this.d,N=[];if(isNaN(x)||isNaN(y))return N;do N.push(Math.floor(x/y)),h=x%y,x=y,y=h;while(x!==1);return N},toString:function(h){var x,y=this.n,N=this.d;if(isNaN(y)||isNaN(N))return"NaN";h=h||15;var v=f(y,N),w=p(y,N,v),S=this.s===-1?"-":"";if(S+=y/N|0,y%=N,y*=10,y&&(S+="."),v){for(var b=w;b--;)S+=y/N|0,y%=N,y*=10;S+="(";for(var b=v;b--;)S+=y/N|0,y%=N,y*=10;S+=")"}else for(var b=h;y&&b--;)S+=y/N|0,y%=N,y*=10;return S}},typeof define=="function"&&define.amd?define([],function(){return d}):typeof Ab=="object"?(Object.defineProperty(d,"__esModule",{value:!0}),d.default=d,d.Fraction=d,NO.exports=d):r.Fraction=d})(Ab)});var Nu,Tfe,Cfe,Mb,AO=g(()=>{Nu=Si(SO(),1);j();Tfe="Fraction",Cfe=[],Mb=I(Tfe,Cfe,()=>(Nu.default.prototype.type="Fraction",Nu.default.prototype.isFraction=!0,Nu.default.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Nu.default.fromJSON=function(r){return new Nu.default(r)},Nu.default),{isClass:!0})});var Ife,kfe,Db,MO=g(()=>{Je();Rt();j();Ife="Range",kfe=[],Db=I(Ife,kfe,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,o=t!=null,a=n!=null;if(i){if(lt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(o){if(lt(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(a){if(lt(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=o?parseFloat(t):0,this.step=a?parseFloat(n):1}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(o){return parseFloat(o)}),i=n.some(function(o){return isNaN(o)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,o=i-t;return lo(n)===lo(o)?e=Math.ceil(o/n):o===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,o=0;if(n>0)for(;t<i;)e(t,[o],this),t+=n,o++;else if(n<0)for(;t>i;)e(t,[o],this),t+=n,o++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,o){t[i[0]]=e(n,i,o)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Ho(this.start,e);return this.step!==1&&(t+=":"+Ho(this.step,e)),t+=":"+Ho(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0})});var Ofe,_fe,Eb,DO=g(()=>{j();Ofe="Matrix",_fe=[],Eb=I(Ofe,_fe,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0})});var Ffe,Bfe,Tb,EO=g(()=>{Je();Nt();Fr();Rt();Ht();Ln();j();Ffe="DenseMatrix",Bfe=["Matrix"],Tb=I(Ffe,Bfe,r=>{var{Matrix:e}=r;function t(l,f){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!On(f))throw new Error("Invalid datatype: "+f);if(ut(l))l.type==="DenseMatrix"?(this._data=at(l._data),this._size=at(l._size),this._datatype=f||l._datatype):(this._data=l.toArray(),this._size=l.size(),this._datatype=f||l._datatype);else if(l&&Xt(l.data)&&Xt(l.size))this._data=l.data,this._size=l.size,pb(this._data,this._size),this._datatype=f||l.datatype;else if(Xt(l))this._data=c(l),this._size=Et(this._data),pb(this._data,this._size),this._datatype=f;else{if(l)throw new TypeError("Unsupported type of data ("+Gt(l)+")");this._data=[],this._size=[0],this._datatype=f}}t.prototype=new e,t.prototype.createDenseMatrix=function(l,f){return new t(l,f)},t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return zs(this._data,Gt)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(l,f){return new t(l,f)},t.prototype.subset=function(l,f,p){switch(arguments.length){case 1:return n(this,l);case 2:case 3:return o(this,l,f,p);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(l){if(!Xt(l))throw new TypeError("Array expected");if(l.length!==this._size.length)throw new ht(l.length,this._size.length);for(var f=0;f<l.length;f++)gr(l[f],this._size[f]);for(var p=this._data,m=0,d=l.length;m<d;m++){var h=l[m];gr(h,p.length),p=p[h]}return p},t.prototype.set=function(l,f,p){if(!Xt(l))throw new TypeError("Array expected");if(l.length<this._size.length)throw new ht(l.length,this._size.length,"<");var m,d,h,x=l.map(function(N){return N+1});u(this,x,p);var y=this._data;for(m=0,d=l.length-1;m<d;m++)h=l[m],gr(h,y.length),y=y[h];return h=l[l.length-1],gr(h,y.length),y[h]=f,this};function n(l,f){if(!es(f))throw new TypeError("Invalid index");var p=f.isScalar();if(p)return l.get(f.min());var m=f.size();if(m.length!==l._size.length)throw new ht(m.length,l._size.length);for(var d=f.min(),h=f.max(),x=0,y=l._size.length;x<y;x++)gr(d[x],l._size[x]),gr(h[x],l._size[x]);return new t(i(l._data,f,m.length,0),l._datatype)}function i(l,f,p,m){var d=m===p-1,h=f.dimension(m);return d?h.map(function(x){return gr(x,l.length),l[x]}).valueOf():h.map(function(x){gr(x,l.length);var y=l[x];return i(y,f,p,m+1)}).valueOf()}function o(l,f,p,m){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var d=f.size(),h=f.isScalar(),x;if(ut(p)?(x=p.size(),p=p.valueOf()):x=Et(p),h){if(x.length!==0)throw new TypeError("Scalar expected");l.set(f.min(),p,m)}else{if(d.length<l._size.length)throw new ht(d.length,l._size.length,"<");if(x.length<d.length){for(var y=0,N=0;d[y]===1&&x[y]===1;)y++;for(;d[y]===1;)N++,y++;p=kd(p,d.length,N,x)}if(!Fs(d,x))throw new ht(d,x,">");var v=f.max().map(function(b){return b+1});u(l,v,m);var w=d.length,S=0;a(l._data,f,p,w,S)}return l}function a(l,f,p,m,d){var h=d===m-1,x=f.dimension(d);h?x.forEach(function(y,N){gr(y),l[y]=p[N[0]]}):x.forEach(function(y,N){gr(y),a(l[y],f,p[N[0]],m,d+1)})}t.prototype.resize=function(l,f,p){if(!wa(l))throw new TypeError("Array or Matrix expected");var m=l.valueOf().map(h=>Array.isArray(h)&&h.length===1?h[0]:h),d=p?this.clone():this;return s(d,m,f)};function s(l,f,p){if(f.length===0){for(var m=l._data;Xt(m);)m=m[0];return m}return l._size=f.slice(0),l._data=Ko(l._data,l._size,p),l}t.prototype.reshape=function(l,f){var p=f?this.clone():this;p._data=Id(p._data,l);var m=p._size.reduce((d,h)=>d*h);return p._size=op(l,m),p};function u(l,f,p){for(var m=l._size.slice(0),d=!1;m.length<f.length;)m.push(0),d=!0;for(var h=0,x=f.length;h<x;h++)f[h]>m[h]&&(m[h]=f[h],d=!0);d&&s(l,m,p)}t.prototype.clone=function(){var l=new t({data:at(this._data),size:at(this._size),datatype:this._datatype});return l},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(l){var f=this,p=function h(x,y){return Xt(x)?x.map(function(N,v){return h(N,y.concat(v))}):l(x,y,f)},m=p(this._data,[]),d=this._datatype!==void 0?zs(m,Gt):void 0;return new t(m,d)},t.prototype.forEach=function(l){var f=this,p=function m(d,h){Xt(d)?d.forEach(function(x,y){m(x,h.concat(y))}):l(d,h,f)};p(this._data,[])},t.prototype[Symbol.iterator]=function*(){var l=function*f(p,m){if(Xt(p))for(var d=0;d<p.length;d++)yield*f(p[d],m.concat(d));else yield{value:p,index:m}};yield*l(this._data,[])},t.prototype.rows=function(){var l=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var m of p)l.push(new t([m],this._datatype));return l},t.prototype.columns=function(){var l=this,f=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,d=function(y){var N=m.map(v=>[v[y]]);f.push(new t(N,l._datatype))},h=0;h<p[1];h++)d(h);return f},t.prototype.toArray=function(){return at(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(l){return gt(this._data,l)},t.prototype.toString=function(){return gt(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(l){if(l){if(lt(l)&&(l=l.toNumber()),!kt(l)||!Ze(l))throw new TypeError("The parameter k must be an integer number")}else l=0;for(var f=l>0?l:0,p=l<0?-l:0,m=this._size[0],d=this._size[1],h=Math.min(m-p,d-f),x=[],y=0;y<h;y++)x[y]=this._data[y+p][y+f];return new t({data:x,size:[h],datatype:this._datatype})},t.diagonal=function(l,f,p,m){if(!Xt(l))throw new TypeError("Array expected, size parameter");if(l.length!==2)throw new Error("Only two dimensions matrix are supported");if(l=l.map(function(E){if(lt(E)&&(E=E.toNumber()),!kt(E)||!Ze(E)||E<1)throw new Error("Size values must be positive integers");return E}),p){if(lt(p)&&(p=p.toNumber()),!kt(p)||!Ze(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var d=p>0?p:0,h=p<0?-p:0,x=l[0],y=l[1],N=Math.min(x-h,y-d),v;if(Xt(f)){if(f.length!==N)throw new Error("Invalid value array length");v=function(M){return f[M]}}else if(ut(f)){var w=f.size();if(w.length!==1||w[0]!==N)throw new Error("Invalid matrix length");v=function(M){return f.get([M])}}else v=function(){return f};m||(m=lt(v(0))?v(0).mul(0):0);var S=[];if(l.length>0){S=Ko(S,l,m);for(var b=0;b<N;b++)S[b+h][b+d]=v(b)}return new t({data:S,size:[x,y]})},t.fromJSON=function(l){return new t(l)},t.prototype.swapRows=function(l,f){if(!kt(l)||!Ze(l)||!kt(f)||!Ze(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return gr(l,this._size[0]),gr(f,this._size[0]),t._swapRows(l,f,this._data),this},t._swapRows=function(l,f,p){var m=p[l];p[l]=p[f],p[f]=m};function c(l){for(var f=0,p=l.length;f<p;f++){var m=l[f];Xt(m)?l[f]=c(m):m&&m.isMatrix===!0&&(l[f]=c(m.valueOf()))}return l}return t},{isClass:!0})});var TO,zfe,Cb,CO=g(()=>{Ht();j();TO="clone",zfe=["typed"],Cb=I(TO,zfe,r=>{var{typed:e}=r;return e(TO,{any:at})})});function Ma(r){for(var e=0;e<r.length;e++)if(wa(r[e]))return!0;return!1}function ai(r,e){ut(r)&&(r=r.valueOf());for(var t=0,n=r.length;t<n;t++){var i=r[t];Array.isArray(i)?ai(i,e):e(i)}}function Ee(r,e,t){return r&&typeof r.map=="function"?r.map(function(n){return Ee(n,e,t)}):e(r)}function Ls(r,e,t){var n=Array.isArray(r)?Et(r):r.size();if(e<0||e>=n.length)throw new Mi(e,n.length);return ut(r)?r.create(Ld(r.valueOf(),e,t)):Ld(r,e,t)}function Ld(r,e,t){var n,i,o,a;if(e<=0)if(Array.isArray(r[0])){for(a=Rfe(r),i=[],n=0;n<a.length;n++)i[n]=Ld(a[n],e-1,t);return i}else{for(o=r[0],n=1;n<r.length;n++)o=t(o,r[n]);return o}else{for(i=[],n=0;n<r.length;n++)i[n]=Ld(r[n],e-1,t);return i}}function Rfe(r){var e=r.length,t=r[0].length,n,i,o=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);o.push(a)}return o}function Ib(r,e,t,n,i,o,a,s,u,c,l){var f=r._values,p=r._index,m=r._ptr,d,h,x,y;if(n)for(h=m[e],x=m[e+1],d=h;d<x;d++)y=p[d],t[y]!==o?(t[y]=o,a.push(y),c?(n[y]=u?s(f[d],l):s(l,f[d]),i[y]=o):n[y]=f[d]):(n[y]=u?s(f[d],n[y]):s(n[y],f[d]),i[y]=o);else for(h=m[e],x=m[e+1],d=h;d<x;d++)y=p[d],t[y]!==o?(t[y]=o,a.push(y)):i[y]=o}var nt=g(()=>{Je();Pc();Nt()});var IO,Lfe,kb,kO=g(()=>{nt();Rt();j();IO="isInteger",Lfe=["typed"],kb=I(IO,Lfe,r=>{var{typed:e}=r;return e(IO,{number:Ze,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":function(n){return Ee(n,this)}})})});function Ob(r){return Math.abs(r)}function _b(r,e){return r+e}function qfe(r,e){return r-e}function Fb(r,e){return r*e}function Pfe(r,e){return r/e}function Bb(r){return-r}function zb(r){return r}function Hc(r){return K3(r)}function Rb(r){return Math.ceil(r)}function Lb(r){return r*r*r}function qb(r){return Math.exp(r)}function Pb(r){return j3(r)}function $fe(r){return r>0?Math.floor(r):Math.ceil(r)}function Ufe(r){return Math.floor(r)}function $b(r,e){if(!Ze(r)||!Ze(e))throw new Error("Parameters in function gcd must be integer numbers");for(var t;e!==0;)t=r%e,r=e,e=t;return r<0?-r:r}function Ub(r,e){if(!Ze(r)||!Ze(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}function Gb(r){return Math.log(r)}function Vb(r){return H3(r)}function Wb(r){return W3(r)}function Gfe(r){return Md(r)}function Hb(r,e){if(e>0)return r-e*Math.floor(r/e);if(e===0)return r;throw new Error("Cannot calculate mod for a negative divisor")}function qd(r,e){var t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function Pd(r){return lo(r)}function Vfe(r){return Math.sqrt(r)}function Kb(r){return r*r}function jb(r,e){var t,n,i,o=0,a=1,s=1,u=0;if(!Ze(r)||!Ze(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=o,o=a-n*o,a=t,t=s,s=u-n*s,u=t,r=e,e=i;var c;return r<0?c=[-r,-a,-u]:c=[r,r?a:0,u],c}function Zb(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}function $d(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return parseFloat(cb(r,e))}function Wfe(r){return Math.abs(r)}var qn,jo,OO=g(()=>{Rt();qn="number",jo="number, number";Ob.signature=qn;_b.signature=jo;qfe.signature=jo;Fb.signature=jo;Pfe.signature=jo;Bb.signature=qn;zb.signature=qn;Hc.signature=qn;Rb.signature=qn;Lb.signature=qn;qb.signature=qn;Pb.signature=qn;$fe.signature=qn;Ufe.signature=qn;$b.signature=jo;Ub.signature=jo;Gb.signature=qn;Vb.signature=qn;Wb.signature=qn;Gfe.signature=qn;Hb.signature=jo;qd.signature=jo;Pd.signature=qn;Vfe.signature=qn;Kb.signature=qn;jb.signature=jo;Zb.signature=jo;$d.signature=jo;Wfe.signature=qn});function Xb(r,e){if(!Ze(r)||!Ze(e))throw new Error("Integers expected in function bitAnd");return r&e}function Jb(r){if(!Ze(r))throw new Error("Integer expected in function bitNot");return~r}function Yb(r,e){if(!Ze(r)||!Ze(e))throw new Error("Integers expected in function bitOr");return r|e}function Qb(r,e){if(!Ze(r)||!Ze(e))throw new Error("Integers expected in function bitXor");return r^e}function e1(r,e){if(!Ze(r)||!Ze(e))throw new Error("Integers expected in function leftShift");return r<<e}function t1(r,e){if(!Ze(r)||!Ze(e))throw new Error("Integers expected in function rightArithShift");return r>>e}function r1(r,e){if(!Ze(r)||!Ze(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}var Hfe,Kc,_O=g(()=>{Rt();Hfe="number",Kc="number, number";Xb.signature=Kc;Jb.signature=Hfe;Yb.signature=Kc;Qb.signature=Kc;e1.signature=Kc;t1.signature=Kc;r1.signature=Kc});function si(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return si(r,t)*si(t+1,e)}var sp=g(()=>{});function n1(r,e){if(!Ze(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!Ze(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");var t=r-e,n;return e<t?(n=si(t+1,r),n/si(1,e)):(n=si(e+1,r),n/si(1,t))}var i1=g(()=>{Rt();sp();n1.signature="number, number"});var FO,BO,zO,RO,LO=g(()=>{FO=Math.PI,BO=2*Math.PI,zO=Math.E,RO=1.618033988749895});function a1(r){return!r}function s1(r,e){return!!(r||e)}function u1(r,e){return!!r!=!!e}function c1(r,e){return!!(r&&e)}var Kfe,o1,qO=g(()=>{Kfe="number",o1="number, number";a1.signature=Kfe;s1.signature=o1;u1.signature=o1;c1.signature=o1});var PO=g(()=>{});function Ud(r){var e;if(Ze(r))return r<=0?isFinite(r)?1/0:NaN:r>171?1/0:si(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*Ud(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,o=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*o)+5246819/(75246796800*o*r))}--r,e=Su[0];for(var a=1;a<Su.length;++a)e+=Su[a]/(r+a);var s=r+l1+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,r+.5)*Math.exp(-s)*e}var l1,Su,$O=g(()=>{Rt();sp();Ud.signature="number";l1=4.7421875,Su=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22]});function Zfe(r){return Math.acos(r)}function f1(r){return J3(r)}function p1(r){return Math.atan(1/r)}function m1(r){return isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}function h1(r){return Math.asin(1/r)}function d1(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}function g1(r){return Math.acos(1/r)}function v1(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}function Xfe(r){return Math.asin(r)}function x1(r){return Y3(r)}function Jfe(r){return Math.atan(r)}function Yfe(r,e){return Math.atan2(r,e)}function y1(r){return Q3(r)}function Qfe(r){return Math.cos(r)}function epe(r){return Td(r)}function b1(r){return 1/Math.tan(r)}function w1(r){var e=Math.exp(2*r);return(e+1)/(e-1)}function N1(r){return 1/Math.sin(r)}function S1(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*lo(r)}function A1(r){return 1/Math.cos(r)}function M1(r){return 2/(Math.exp(r)+Math.exp(-r))}function tpe(r){return Math.sin(r)}function D1(r){return eO(r)}function rpe(r){return Math.tan(r)}function npe(r){return Cd(r)}var Jr,jfe,UO=g(()=>{Rt();Jr="number",jfe="number, number";Zfe.signature=Jr;f1.signature=Jr;p1.signature=Jr;m1.signature=Jr;h1.signature=Jr;d1.signature=Jr;g1.signature=Jr;v1.signature=Jr;Xfe.signature=Jr;x1.signature=Jr;Jfe.signature=Jr;Yfe.signature=jfe;y1.signature=Jr;Qfe.signature=Jr;epe.signature=Jr;b1.signature=Jr;w1.signature=Jr;N1.signature=Jr;S1.signature=Jr;A1.signature=Jr;M1.signature=Jr;tpe.signature=Jr;D1.signature=Jr;rpe.signature=Jr;npe.signature=Jr});function ipe(r){return Ze(r)}function E1(r){return r<0}function T1(r){return r>0}function C1(r){return r===0}function I1(r){return Number.isNaN(r)}var up,GO=g(()=>{Rt();up="number";ipe.signature=up;E1.signature=up;T1.signature=up;C1.signature=up;I1.signature=up});var vt=g(()=>{OO();_O();i1();LO();qO();PO();$O();UO();GO()});var VO,ope,k1,WO=g(()=>{nt();j();vt();VO="isNegative",ope=["typed"],k1=I(VO,ope,r=>{var{typed:e}=r;return e(VO,{number:E1,BigNumber:function(n){return n.isNeg()&&!n.isZero()&&!n.isNaN()},Fraction:function(n){return n.s<0},Unit:function(n){return this(n.value)},"Array | Matrix":function(n){return Ee(n,this)}})})});var HO,ape,O1,KO=g(()=>{nt();j();HO="isNumeric",ape=["typed"],O1=I(HO,ape,r=>{var{typed:e}=r;return e(HO,{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(n){return Ee(n,this)}})})});var jO,spe,_1,ZO=g(()=>{j();jO="hasNumericValue",spe=["typed","isNumeric"],_1=I(jO,spe,r=>{var{typed:e,isNumeric:t}=r;return e(jO,{string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})})});var XO,upe,F1,JO=g(()=>{nt();j();vt();XO="isPositive",upe=["typed"],F1=I(XO,upe,r=>{var{typed:e}=r;return e(XO,{number:T1,BigNumber:function(n){return!n.isNeg()&&!n.isZero()&&!n.isNaN()},Fraction:function(n){return n.s>0&&n.n>0},Unit:function(n){return this(n.value)},"Array | Matrix":function(n){return Ee(n,this)}})})});var YO,cpe,B1,QO=g(()=>{nt();j();vt();YO="isZero",cpe=["typed"],B1=I(YO,cpe,r=>{var{typed:e}=r;return e(YO,{number:C1,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:function(n){return this(n.value)},"Array | Matrix":function(n){return Ee(n,this)}})})});var e_,lpe,z1,t_=g(()=>{nt();j();vt();e_="isNaN",lpe=["typed"],z1=I(e_,lpe,r=>{var{typed:e}=r;return e(e_,{number:I1,BigNumber:function(n){return n.isNaN()},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":function(n){return Ee(n,Number.isNaN)}})})});var r_,fpe,R1,n_=g(()=>{j();Je();r_="typeOf",fpe=["typed"],R1=I(r_,fpe,r=>{var{typed:e}=r;return e(r_,{any:Gt})})});function Pn(r,e,t){if(t==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var n=r.minus(e).abs();if(n.isZero())return!0;var i=r.constructor.max(r.abs(),e.abs());return n.lte(i.times(t))}return!1}var rs=g(()=>{});function i_(r,e,t){return cn(r.re,e.re,t)&&cn(r.im,e.im,t)}var o_=g(()=>{Rt()});var Gd,ppe,L1,sIe,a_=g(()=>{rs();Rt();j();o_();Gd="equalScalar",ppe=["typed","config"],L1=I(Gd,ppe,r=>{var{typed:e,config:t}=r;return e(Gd,{"boolean, boolean":function(i,o){return i===o},"number, number":function(i,o){return cn(i,o,t.epsilon)},"BigNumber, BigNumber":function(i,o){return i.eq(o)||Pn(i,o,t.epsilon)},"Fraction, Fraction":function(i,o){return i.equals(o)},"Complex, Complex":function(i,o){return i_(i,o,t.epsilon)},"Unit, Unit":function(i,o){if(!i.equalBase(o))throw new Error("Cannot compare units with different base");return this(i.value,o.value)}})}),sIe=I(Gd,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Gd,{"number, number":function(i,o){return cn(i,o,t.epsilon)}})})});var mpe,hpe,q1,s_=g(()=>{Je();Rt();Fr();Ht();Nt();j();Ln();mpe="SparseMatrix",hpe=["typed","equalScalar","Matrix"],q1=I(mpe,hpe,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(h,x){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(x&&!On(x))throw new Error("Invalid datatype: "+x);if(ut(h))o(this,h,x);else if(h&&Xt(h.index)&&Xt(h.ptr)&&Xt(h.size))this._values=h.values,this._index=h.index,this._ptr=h.ptr,this._size=h.size,this._datatype=x||h.datatype;else if(Xt(h))a(this,h,x);else{if(h)throw new TypeError("Unsupported type of data ("+Gt(h)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=x}}function o(h,x,y){x.type==="SparseMatrix"?(h._values=x._values?at(x._values):void 0,h._index=at(x._index),h._ptr=at(x._ptr),h._size=at(x._size),h._datatype=y||x._datatype):a(h,x.valueOf(),y||x._datatype)}function a(h,x,y){h._values=[],h._index=[],h._ptr=[],h._datatype=y;var N=x.length,v=0,w=t,S=0;if(On(y)&&(w=e.find(t,[y,y])||t,S=e.convert(0,y)),N>0){var b=0;do{h._ptr.push(h._index.length);for(var E=0;E<N;E++){var M=x[E];if(Xt(M)){if(b===0&&v<M.length&&(v=M.length),b<M.length){var D=M[b];w(D,S)||(h._values.push(D),h._index.push(E))}}else b===0&&v<1&&(v=1),w(M,S)||(h._values.push(M),h._index.push(E))}b++}while(b<v)}h._ptr.push(h._index.length),h._size=[N,v]}i.prototype=new n,i.prototype.createSparseMatrix=function(h,x){return new i(h,x)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return zs(this._values,Gt)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(h,x){return new i(h,x)},i.prototype.density=function(){var h=this._size[0],x=this._size[1];return h!==0&&x!==0?this._index.length/(h*x):0},i.prototype.subset=function(h,x,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,h);case 2:case 3:return u(this,h,x,y);default:throw new SyntaxError("Wrong number of arguments")}};function s(h,x){if(!es(x))throw new TypeError("Invalid index");var y=x.isScalar();if(y)return h.get(x.min());var N=x.size();if(N.length!==h._size.length)throw new ht(N.length,h._size.length);var v,w,S,b,E=x.min(),M=x.max();for(v=0,w=h._size.length;v<w;v++)gr(E[v],h._size[v]),gr(M[v],h._size[v]);var D=h._values,A=h._index,k=h._ptr,T=x.dimension(0),L=x.dimension(1),$=[],K=[];T.forEach(function(_,te){K[_]=te[0],$[_]=!0});var V=D?[]:void 0,z=[],Q=[];return L.forEach(function(_){for(Q.push(z.length),S=k[_],b=k[_+1];S<b;S++)v=A[S],$[v]===!0&&(z.push(K[v]),V&&V.push(D[S]))}),Q.push(z.length),new i({values:V,index:z,ptr:Q,size:N,datatype:h._datatype})}function u(h,x,y,N){if(!x||x.isIndex!==!0)throw new TypeError("Invalid index");var v=x.size(),w=x.isScalar(),S;if(ut(y)?(S=y.size(),y=y.toArray()):S=Et(y),w){if(S.length!==0)throw new TypeError("Scalar expected");h.set(x.min(),y,N)}else{if(v.length!==1&&v.length!==2)throw new ht(v.length,h._size.length,"<");if(S.length<v.length){for(var b=0,E=0;v[b]===1&&S[b]===1;)b++;for(;v[b]===1;)E++,b++;y=kd(y,v.length,E,S)}if(!Fs(v,S))throw new ht(v,S,">");for(var M=x.min()[0],D=x.min()[1],A=S[0],k=S[1],T=0;T<A;T++)for(var L=0;L<k;L++){var $=y[T][L];h.set([T+M,L+D],$,N)}}return h}i.prototype.get=function(h){if(!Xt(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new ht(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var x=h[0],y=h[1];gr(x,this._size[0]),gr(y,this._size[1]);var N=c(x,this._ptr[y],this._ptr[y+1],this._index);return N<this._ptr[y+1]&&this._index[N]===x?this._values[N]:0},i.prototype.set=function(h,x,y){if(!Xt(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new ht(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var N=h[0],v=h[1],w=this._size[0],S=this._size[1],b=t,E=0;On(this._datatype)&&(b=e.find(t,[this._datatype,this._datatype])||t,E=e.convert(0,this._datatype)),(N>w-1||v>S-1)&&(p(this,Math.max(N+1,w),Math.max(v+1,S),y),w=this._size[0],S=this._size[1]),gr(N,w),gr(v,S);var M=c(N,this._ptr[v],this._ptr[v+1],this._index);return M<this._ptr[v+1]&&this._index[M]===N?b(x,E)?l(M,v,this._values,this._index,this._ptr):this._values[M]=x:f(M,N,v,x,this._values,this._index,this._ptr),this};function c(h,x,y,N){if(y-x===0)return y;for(var v=x;v<y;v++)if(N[v]===h)return v;return x}function l(h,x,y,N,v){y.splice(h,1),N.splice(h,1);for(var w=x+1;w<v.length;w++)v[w]--}function f(h,x,y,N,v,w,S){v.splice(h,0,N),w.splice(h,0,x);for(var b=y+1;b<S.length;b++)S[b]++}i.prototype.resize=function(h,x,y){if(!wa(h))throw new TypeError("Array or Matrix expected");var N=h.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(N.length!==2)throw new Error("Only two dimensions matrix are supported");N.forEach(function(w){if(!kt(w)||!Ze(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+gt(N)+")")});var v=y?this.clone():this;return p(v,N[0],N[1],x)};function p(h,x,y,N){var v=N||0,w=t,S=0;On(h._datatype)&&(w=e.find(t,[h._datatype,h._datatype])||t,S=e.convert(0,h._datatype),v=e.convert(v,h._datatype));var b=!w(v,S),E=h._size[0],M=h._size[1],D,A,k;if(y>M){for(A=M;A<y;A++)if(h._ptr[A]=h._values.length,b)for(D=0;D<E;D++)h._values.push(v),h._index.push(D);h._ptr[y]=h._values.length}else y<M&&(h._ptr.splice(y+1,M-y),h._values.splice(h._ptr[y],h._values.length),h._index.splice(h._ptr[y],h._index.length));if(M=y,x>E){if(b){var T=0;for(A=0;A<M;A++){h._ptr[A]=h._ptr[A]+T,k=h._ptr[A+1]+T;var L=0;for(D=E;D<x;D++,L++)h._values.splice(k+L,0,v),h._index.splice(k+L,0,D),T++}h._ptr[M]=h._values.length}}else if(x<E){var $=0;for(A=0;A<M;A++){h._ptr[A]=h._ptr[A]-$;var K=h._ptr[A],V=h._ptr[A+1]-$;for(k=K;k<V;k++)D=h._index[k],D>x-1&&(h._values.splice(k,1),h._index.splice(k,1),$++)}h._ptr[A]=h._values.length}return h._size[0]=x,h._size[1]=y,h}i.prototype.reshape=function(h,x){if(!Xt(h))throw new TypeError("Array expected");if(h.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");h.forEach(function(_){if(!kt(_)||!Ze(_)||_<=-2||_===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+gt(h)+")")});var y=this._size[0]*this._size[1];h=op(h,y);var N=h[0]*h[1];if(y!==N)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var v=x?this.clone():this;if(this._size[0]===h[0]&&this._size[1]===h[1])return v;for(var w=[],S=0;S<v._ptr.length;S++)for(var b=0;b<v._ptr[S+1]-v._ptr[S];b++)w.push(S);for(var E=v._values.slice(),M=v._index.slice(),D=0;D<v._index.length;D++){var A=M[D],k=w[D],T=A*v._size[1]+k;w[D]=T%h[1],M[D]=Math.floor(T/h[1])}v._values.length=0,v._index.length=0,v._ptr.length=h[1]+1,v._size=h.slice();for(var L=0;L<v._ptr.length;L++)v._ptr[L]=0;for(var $=0;$<E.length;$++){var K=M[$],V=w[$],z=E[$],Q=c(K,v._ptr[V],v._ptr[V+1],v._index);f(Q,K,V,z,v._values,v._index,v._ptr)}return v},i.prototype.clone=function(){var h=new i({values:this._values?at(this._values):void 0,index:at(this._index),ptr:at(this._ptr),size:at(this._size),datatype:this._datatype});return h},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(h,x){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,N=this._size[0],v=this._size[1],w=function(b,E,M){return h(b,[E,M],y)};return m(this,0,N-1,0,v-1,w,x)};function m(h,x,y,N,v,w,S){var b=[],E=[],M=[],D=t,A=0;On(h._datatype)&&(D=e.find(t,[h._datatype,h._datatype])||t,A=e.convert(0,h._datatype));for(var k=function(Y,ve,re){Y=w(Y,ve,re),D(Y,A)||(b.push(Y),E.push(ve))},T=N;T<=v;T++){M.push(b.length);var L=h._ptr[T],$=h._ptr[T+1];if(S)for(var K=L;K<$;K++){var V=h._index[K];V>=x&&V<=y&&k(h._values[K],V-x,T-N)}else{for(var z={},Q=L;Q<$;Q++){var _=h._index[Q];z[_]=h._values[Q]}for(var te=x;te<=y;te++){var he=te in z?z[te]:0;k(he,te-x,T-N)}}}return M.push(b.length),new i({values:b,index:E,ptr:M,size:[y-x+1,v-N+1]})}i.prototype.forEach=function(h,x){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,N=this._size[0],v=this._size[1],w=0;w<v;w++){var S=this._ptr[w],b=this._ptr[w+1];if(x)for(var E=S;E<b;E++){var M=this._index[E];h(this._values[E],[M,w],y)}else{for(var D={},A=S;A<b;A++){var k=this._index[A];D[k]=this._values[A]}for(var T=0;T<N;T++){var L=T in D?D[T]:0;h(L,[T,w],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var h=this._size[1],x=0;x<h;x++)for(var y=this._ptr[x],N=this._ptr[x+1],v=y;v<N;v++){var w=this._index[v];yield{value:this._values[v],index:[w,x]}}},i.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(h,x,y,N,v){var w=N[0],S=N[1],b=[],E,M;for(E=0;E<w;E++)for(b[E]=[],M=0;M<S;M++)b[E][M]=0;for(M=0;M<S;M++)for(var D=y[M],A=y[M+1],k=D;k<A;k++)E=x[k],b[E][M]=h?v?at(h[k]):h[k]:1;return b}return i.prototype.format=function(h){for(var x=this._size[0],y=this._size[1],N=this.density(),v="Sparse Matrix ["+gt(x,h)+" x "+gt(y,h)+"] density: "+gt(N,h)+`
`,w=0;w<y;w++)for(var S=this._ptr[w],b=this._ptr[w+1],E=S;E<b;E++){var M=this._index[E];v+=`
    (`+gt(M,h)+", "+gt(w,h)+") ==> "+(this._values?gt(this._values[E],h):"X")}return v},i.prototype.toString=function(){return gt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(h){if(h){if(lt(h)&&(h=h.toNumber()),!kt(h)||!Ze(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var x=h>0?h:0,y=h<0?-h:0,N=this._size[0],v=this._size[1],w=Math.min(N-y,v-x),S=[],b=[],E=[];E[0]=0;for(var M=x;M<v&&S.length<w;M++)for(var D=this._ptr[M],A=this._ptr[M+1],k=D;k<A;k++){var T=this._index[k];if(T===M-x+y){S.push(this._values[k]),b[S.length-1]=T-y;break}}return E.push(S.length),new i({values:S,index:b,ptr:E,size:[w,1]})},i.fromJSON=function(h){return new i(h)},i.diagonal=function(h,x,y,N,v){if(!Xt(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(_){if(lt(_)&&(_=_.toNumber()),!kt(_)||!Ze(_)||_<1)throw new Error("Size values must be positive integers");return _}),y){if(lt(y)&&(y=y.toNumber()),!kt(y)||!Ze(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var w=t,S=0;On(v)&&(w=e.find(t,[v,v])||t,S=e.convert(0,v));var b=y>0?y:0,E=y<0?-y:0,M=h[0],D=h[1],A=Math.min(M-E,D-b),k;if(Xt(x)){if(x.length!==A)throw new Error("Invalid value array length");k=function(te){return x[te]}}else if(ut(x)){var T=x.size();if(T.length!==1||T[0]!==A)throw new Error("Invalid matrix length");k=function(te){return x.get([te])}}else k=function(){return x};for(var L=[],$=[],K=[],V=0;V<D;V++){K.push(L.length);var z=V-b;if(z>=0&&z<A){var Q=k(z);w(Q,S)||($.push(z+E),L.push(Q))}}return K.push(L.length),new i({values:L,index:$,ptr:K,size:[M,D]})},i.prototype.swapRows=function(h,x){if(!kt(h)||!Ze(h)||!kt(x)||!Ze(x))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return gr(h,this._size[0]),gr(x,this._size[0]),i._swapRows(h,x,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(h,x,y,N,v){for(var w=N[h],S=N[h+1],b=w;b<S;b++)v(y[b],x[b])},i._swapRows=function(h,x,y,N,v,w){for(var S=0;S<y;S++){var b=w[S],E=w[S+1],M=c(h,b,E,v),D=c(x,b,E,v);if(M<E&&D<E&&v[M]===h&&v[D]===x){if(N){var A=N[M];N[M]=N[D],N[D]=A}continue}if(M<E&&v[M]===h&&(D>=E||v[D]!==x)){var k=N?N[M]:void 0;v.splice(D,0,x),N&&N.splice(D,0,k),v.splice(D<=M?M+1:M,1),N&&N.splice(D<=M?M+1:M,1);continue}if(D<E&&v[D]===x&&(M>=E||v[M]!==h)){var T=N?N[D]:void 0;v.splice(M,0,h),N&&N.splice(M,0,T),v.splice(M<=D?D+1:D,1),N&&N.splice(M<=D?D+1:D,1)}}},i},{isClass:!0})});function vpe(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function xpe(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var o=e+t;if(isNaN(o))throw new SyntaxError('String "'+r.input+'" is no valid number');return o}var dpe,gpe,P1,u_=g(()=>{j();nt();dpe="number",gpe=["typed"];P1=I(dpe,gpe,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=vpe(i);if(o)return xpe(o);var a=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(a=Number(s[2]),i=s[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is no valid number');if(s){if(u>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(a-1)&&(u=u-2**a)}return u},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":function(i){return Ee(i,this)}});return t.fromJSON=function(n){return parseFloat(n.value)},t})});var c_,ype,$1,l_=g(()=>{j();nt();Rt();c_="string",ype=["typed"],$1=I(c_,ype,r=>{var{typed:e}=r;return e(c_,{"":function(){return""},number:Ho,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":function(n){return Ee(n,this)},any:function(n){return String(n)}})})});var f_,bpe,U1,p_=g(()=>{j();nt();f_="boolean",bpe=["typed"],U1=I(f_,bpe,r=>{var{typed:e}=r;return e(f_,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var o=Number(n);if(n!==""&&!isNaN(o))return!!o;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":function(n){return Ee(n,this)}})})});var wpe,Npe,G1,m_=g(()=>{j();nt();wpe="bignumber",Npe=["typed","BigNumber"],G1=I(wpe,Npe,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var a=o[2],s=t(o[1]),u=new t(2).pow(Number(a));if(s.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var c=new t(2).pow(Number(a)-1);return s.gte(c)?s.sub(u):s}return new t(i)},BigNumber:function(i){return i},Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":function(i){return Ee(i,this)}})})});var Spe,Ape,V1,h_=g(()=>{j();nt();Spe="complex",Ape=["typed","Complex"],V1=I(Spe,Ape,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,o){return new t(i,o)},"BigNumber, BigNumber":function(i,o){return new t(i.toNumber(),o.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(i){return Ee(i,this)}})})});var Mpe,Dpe,W1,d_=g(()=>{j();nt();Mpe="fraction",Dpe=["typed","Fraction"],W1=I(Mpe,Dpe,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,o){return new t(i,o)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Object:function(i){return new t(i)},"Array | Matrix":function(i){return Ee(i,this)}})})});var g_,Epe,H1,v_=g(()=>{j();g_="matrix",Epe=["typed","Matrix","DenseMatrix","SparseMatrix"],H1=I(g_,Epe,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(g_,{"":function(){return o([])},string:function(s){return o([],s)},"string, string":function(s,u){return o([],s,u)},Array:function(s){return o(s)},Matrix:function(s){return o(s,s.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(a,s,u){if(s==="dense"||s==="default"||s===void 0)return new n(a,u);if(s==="sparse")return new i(a,u);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}})});var x_,Tpe,K1,y_=g(()=>{j();x_="matrixFromFunction",Tpe=["typed","matrix","isZero"],K1=I(x_,Tpe,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(x_,{"Array | Matrix, function, string, string":function(a,s,u,c){return i(a,s,u,c)},"Array | Matrix, function, string":function(a,s,u){return i(a,s,u)},"Matrix, function":function(a,s){return i(a,s,"dense")},"Array, function":function(a,s){return i(a,s,"dense").toArray()},"Array | Matrix, string, function":function(a,s,u){return i(a,u,s)},"Array | Matrix, string, string, function":function(a,s,u,c){return i(a,c,s,u)}});function i(o,a,s,u){var c;return u!==void 0?c=t(s,u):c=t(s),c.resize(o),c.forEach(function(l,f){var p=a(f);n(p)||c.set(f,p)}),c}})});var b_,Cpe,j1,w_=g(()=>{j();b_="matrixFromRows",Cpe=["typed","matrix","flatten","size"],j1=I(b_,Cpe,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(b_,{"...Array":function(u){return o(u)},"...Matrix":function(u){return t(o(u.map(c=>c.toArray())))}});function o(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=a(s[0]),c=[];for(var l of s){var f=a(l);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+" \u2260 "+(f|0));c.push(n(l))}return c}function a(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}})});var N_,Ipe,Z1,S_=g(()=>{j();N_="matrixFromColumns",Ipe=["typed","matrix","flatten","size"],Z1=I(N_,Ipe,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(N_,{"...Array":function(u){return o(u)},"...Matrix":function(u){return t(o(u.map(c=>c.toArray())))}});function o(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=a(s[0]),c=[],l=0;l<u;l++)c[l]=[];for(var f of s){var p=a(f);if(p!==u)throw new TypeError("The vectors had different length: "+(u|0)+" \u2260 "+(p|0));for(var m=n(f),d=0;d<u;d++)c[d].push(m[d])}return c}function a(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}})});var A_,kpe,X1,M_=g(()=>{j();A_="splitUnit",kpe=["typed"],X1=I(A_,kpe,r=>{var{typed:e}=r;return e(A_,{"Unit, Array":function(n,i){return n.splitUnit(i)}})})});var D_,Ope,J1,E_=g(()=>{j();nt();vt();D_="unaryMinus",Ope=["typed"],J1=I(D_,Ope,r=>{var{typed:e}=r;return e(D_,{number:Bb,Complex:function(n){return n.neg()},BigNumber:function(n){return n.neg()},Fraction:function(n){return n.neg()},Unit:function(n){var i=n.clone();return i.value=this(n.value),i},"Array | Matrix":function(n){return Ee(n,this,!0)}})})});var T_,_pe,Y1,C_=g(()=>{j();nt();vt();T_="unaryPlus",_pe=["typed","config","BigNumber"],Y1=I(T_,_pe,r=>{var{typed:e,config:t,BigNumber:n}=r;return e(T_,{number:zb,Complex:function(o){return o},BigNumber:function(o){return o},Fraction:function(o){return o},Unit:function(o){return o.clone()},"Array | Matrix":function(o){return Ee(o,this,!0)},"boolean | string":function(o){return t.number==="BigNumber"?new n(+o):+o}})})});var I_,Fpe,Q1,k_=g(()=>{j();nt();vt();I_="abs",Fpe=["typed"],Q1=I(I_,Fpe,r=>{var{typed:e}=r;return e(I_,{number:Ob,Complex:function(n){return n.abs()},BigNumber:function(n){return n.abs()},Fraction:function(n){return n.abs()},"Array | Matrix":function(n){return Ee(n,this,!0)},Unit:function(n){return n.abs()}})})});function Vd(r,e,t){var n,i,o;if(e<=0)if(Array.isArray(r[0])){for(o=zpe(r),i=[],n=0;n<o.length;n++)i[n]=Vd(o[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=Vd(r[n],e-1,t);return i}}function zpe(r){var e=r.length,t=r[0].length,n,i,o=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);o.push(a)}return o}var O_,Bpe,cp,ew=g(()=>{j();Nt();Je();Pc();O_="apply",Bpe=["typed","isInteger"],cp=I(O_,Bpe,r=>{var{typed:e,isInteger:t}=r;return e(O_,{"Array | Matrix, number | BigNumber, function":function(i,o,a){if(!t(o))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?Et(i):i.size();if(o<0||o>=s.length)throw new Mi(o,s.length);return ut(i)?i.create(Vd(i.valueOf(),o,a)):Vd(i,o,a)}})})});var __,Rpe,tw,F_=g(()=>{j();vt();__="addScalar",Rpe=["typed"],tw=I(__,Rpe,r=>{var{typed:e}=r;return e(__,{"number, number":_b,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":function(n,i){if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=this(o.value,i.value),o.fixPrefix=!1,o}})})});var B_,Lpe,rw,z_=g(()=>{j();Je();nt();vt();B_="cbrt",Lpe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],rw=I(B_,Lpe,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:o,Complex:a,BigNumber:s,Fraction:u}=r;return t(B_,{number:Hc,Complex:c,"Complex, boolean":c,BigNumber:function(p){return p.cbrt()},Unit:l,"Array | Matrix":function(p){return Ee(p,this,!0)}});function c(f,p){var m=f.arg()/3,d=f.abs(),h=new a(Hc(d),0).mul(new a(0,m).exp());if(p){var x=[h,new a(Hc(d),0).mul(new a(0,m+Math.PI*2/3).exp()),new a(Hc(d),0).mul(new a(0,m-Math.PI*2/3).exp())];return e.matrix==="Array"?x:o(x)}else return h}function l(f){if(f.value&&_i(f.value)){var p=f.clone();return p.value=1,p=p.pow(1/3),p.value=c(f.value),p}else{var m=n(f.value);m&&(f.value=i(f.value));var d;lt(f.value)?d=new s(1).div(3):ba(f.value)?d=new u(1,3):d=1/3;var h=f.pow(d);return m&&(h.value=i(h.value)),h}}})});var qpe,Ppe,nr,$n=g(()=>{j();qpe="algorithm11",Ppe=["typed","equalScalar"],nr=I(qpe,Ppe,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a,s){var u=i._values,c=i._index,l=i._ptr,f=i._size,p=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],d=f[1],h,x=t,y=0,N=a;typeof p=="string"&&(h=p,x=e.find(t,[h,h]),y=e.convert(0,h),o=e.convert(o,h),N=e.find(a,[h,h]));for(var v=[],w=[],S=[],b=0;b<d;b++){S[b]=w.length;for(var E=l[b],M=l[b+1],D=E;D<M;D++){var A=c[D],k=s?N(o,u[D]):N(u[D],o);x(k,y)||(w.push(A),v.push(k))}}return S[d]=w.length,i.createSparseMatrix({values:v,index:w,ptr:S,size:[m,d],datatype:h})}})});var $pe,Upe,ct,er=g(()=>{j();Ht();$pe="algorithm14",Upe=["typed"],ct=I($pe,Upe,r=>{var{typed:e}=r;return function(i,o,a,s){var u=i._data,c=i._size,l=i._datatype,f,p=a;typeof l=="string"&&(f=l,o=e.convert(o,f),p=e.find(a,[f,f]));var m=c.length>0?t(p,0,c,c[0],u,o,s):[];return i.createDenseMatrix({data:m,size:at(c),datatype:f})};function t(n,i,o,a,s,u,c){var l=[];if(i===o.length-1)for(var f=0;f<a;f++)l[f]=c?n(u,s[f]):n(s[f],u);else for(var p=0;p<a;p++)l[p]=t(n,i+1,o,o[i+1],s[p],u,c);return l}})});var R_,Gpe,Vpe,nw,L_=g(()=>{R_=Si(Rd(),1);j();nt();Rt();rs();vt();$n();er();Gpe="ceil",Vpe=["typed","config","round","matrix","equalScalar"],nw=I(Gpe,Vpe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:o}=r,a=nr({typed:e,equalScalar:o}),s=ct({typed:e});return e("ceil",{number:function(c){return cn(c,n(c),t.epsilon)?n(c):Rb(c)},"number, number":function(c,l){if(cn(c,n(c,l),t.epsilon))return n(c,l);var[f,p]="".concat(c,"e").split("e"),m=Math.ceil(Number("".concat(f,"e").concat(Number(p)+l)));return[f,p]="".concat(m,"e").split("e"),Number("".concat(f,"e").concat(Number(p)-l))},Complex:function(c){return c.ceil()},"Complex, number":function(c,l){return c.ceil(l)},BigNumber:function(c){return Pn(c,n(c),t.epsilon)?n(c):c.ceil()},"BigNumber, BigNumber":function(c,l){return Pn(c,n(c,l),t.epsilon)?n(c,l):c.toDecimalPlaces(l.toNumber(),R_.default.ROUND_CEIL)},Fraction:function(c){return c.ceil()},"Fraction, number":function(c,l){return c.ceil(l)},"Array | Matrix":function(c){return Ee(c,this,!0)},"Array | Matrix, number":function(c,l){return Ee(c,f=>this(f,l),!0)},"SparseMatrix, number | BigNumber":function(c,l){return a(c,l,this,!1)},"DenseMatrix, number | BigNumber":function(c,l){return s(c,l,this,!1)},"number | Complex | BigNumber, Array":function(c,l){return s(i(l),c,this,!0).valueOf()}})})});var q_,Wpe,iw,P_=g(()=>{j();nt();vt();q_="cube",Wpe=["typed"],iw=I(q_,Wpe,r=>{var{typed:e}=r;return e(q_,{number:Lb,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},Fraction:function(n){return n.pow(3)},"Array | Matrix":function(n){return Ee(n,this,!0)},Unit:function(n){return n.pow(3)}})})});var $_,Hpe,ow,U_=g(()=>{j();nt();vt();$_="exp",Hpe=["typed"],ow=I($_,Hpe,r=>{var{typed:e}=r;return e($_,{number:qb,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()},"Array | Matrix":function(n){return Ee(n,this)}})})});var G_,Kpe,aw,V_=g(()=>{j();nt();vt();G_="expm1",Kpe=["typed","Complex"],aw=I(G_,Kpe,r=>{var{typed:e,Complex:t}=r;return e(G_,{number:Pb,Complex:function(i){var o=Math.exp(i.re);return new t(o*Math.cos(i.im)-1,o*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)},"Array | Matrix":function(i){return Ee(i,this)}})})});var jpe,Zpe,sw,W_=g(()=>{j();nt();er();jpe="fix",Zpe=["typed","Complex","matrix","ceil","floor"],sw=I(jpe,Zpe,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:o}=r,a=ct({typed:e});return e("fix",{number:function(u){return u>0?o(u):i(u)},"number, number | BigNumber":function(u,c){return u>0?o(u,c):i(u,c)},Complex:function(u){return new t(u.re>0?Math.floor(u.re):Math.ceil(u.re),u.im>0?Math.floor(u.im):Math.ceil(u.im))},"Complex, number | BigNumber":function(u,c){return new t(u.re>0?o(u.re,c):i(u.re,c),u.im>0?o(u.im,c):i(u.im,c))},BigNumber:function(u){return u.isNegative()?i(u):o(u)},"BigNumber, number | BigNumber":function(u,c){return u.isNegative()?i(u,c):o(u,c)},Fraction:function(u){return u.s<0?u.ceil():u.floor()},"Fraction, number | BigNumber":function(u,c){return u.s<0?u.ceil(c):u.floor(c)},"Array | Matrix":function(u){return Ee(u,this,!0)},"Array | Matrix, number | BigNumber":function(u,c){return Ee(u,l=>this(l,c),!0)},"number | Complex | BigNumber, Array":function(u,c){return a(n(c),u,this,!0).valueOf()}})})});var H_,Xpe,Jpe,uw,K_=g(()=>{H_=Si(Rd(),1);j();nt();Rt();rs();$n();er();Xpe="floor",Jpe=["typed","config","round","matrix","equalScalar"],uw=I(Xpe,Jpe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:o}=r,a=nr({typed:e,equalScalar:o}),s=ct({typed:e});return e("floor",{number:function(c){return cn(c,n(c),t.epsilon)?n(c):Math.floor(c)},"number, number":function(c,l){if(cn(c,n(c,l),t.epsilon))return n(c,l);var[f,p]="".concat(c,"e").split("e"),m=Math.floor(Number("".concat(f,"e").concat(Number(p)+l)));return[f,p]="".concat(m,"e").split("e"),Number("".concat(f,"e").concat(Number(p)-l))},Complex:function(c){return c.floor()},"Complex, number":function(c,l){return c.floor(l)},BigNumber:function(c){return Pn(c,n(c),t.epsilon)?n(c):c.floor()},"BigNumber, BigNumber":function(c,l){return Pn(c,n(c,l),t.epsilon)?n(c,l):c.toDecimalPlaces(l.toNumber(),H_.default.ROUND_FLOOR)},Fraction:function(c){return c.floor()},"Fraction, number":function(c,l){return c.floor(l)},"Array | Matrix":function(c){return Ee(c,this,!0)},"Array | Matrix, number":function(c,l){return Ee(c,f=>this(f,l),!0)},"SparseMatrix, number | BigNumber":function(c,l){return a(c,l,this,!1)},"DenseMatrix, number | BigNumber":function(c,l){return s(c,l,this,!1)},"number | Complex | BigNumber, Array":function(c,l){return s(i(l),c,this,!0).valueOf()}})})});var Ype,Qpe,ui,ns=g(()=>{j();Ln();Ype="algorithm01",Qpe=["typed"],ui=I(Ype,Qpe,r=>{var{typed:e}=r;return function(n,i,o,a){var s=n._data,u=n._size,c=n._datatype,l=i._values,f=i._index,p=i._ptr,m=i._size,d=i._datatype;if(u.length!==m.length)throw new ht(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=u[0],x=u[1],y=typeof c=="string"&&c===d?c:void 0,N=y?e.find(o,[y,y]):o,v,w,S=[];for(v=0;v<h;v++)S[v]=[];var b=[],E=[];for(w=0;w<x;w++){for(var M=w+1,D=p[w],A=p[w+1],k=D;k<A;k++)v=f[k],b[v]=a?N(l[k],s[v][w]):N(s[v][w],l[k]),E[v]=M;for(v=0;v<h;v++)E[v]===M?S[v][w]=b[v]:S[v][w]=s[v][w]}return n.createDenseMatrix({data:S,size:[h,x],datatype:y})}})});var eme,tme,jc,Wd=g(()=>{j();Ln();eme="algorithm04",tme=["typed","equalScalar"],jc=I(eme,tme,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,u=i._index,c=i._ptr,l=i._size,f=i._datatype,p=o._values,m=o._index,d=o._ptr,h=o._size,x=o._datatype;if(l.length!==h.length)throw new ht(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var y=l[0],N=l[1],v,w=t,S=0,b=a;typeof f=="string"&&f===x&&(v=f,w=e.find(t,[v,v]),S=e.convert(0,v),b=e.find(a,[v,v]));var E=s&&p?[]:void 0,M=[],D=[],A=s&&p?[]:void 0,k=s&&p?[]:void 0,T=[],L=[],$,K,V,z,Q;for(K=0;K<N;K++){D[K]=M.length;var _=K+1;for(z=c[K],Q=c[K+1],V=z;V<Q;V++)$=u[V],M.push($),T[$]=_,A&&(A[$]=s[V]);for(z=d[K],Q=d[K+1],V=z;V<Q;V++)if($=m[V],T[$]===_){if(A){var te=b(A[$],p[V]);w(te,S)?T[$]=null:A[$]=te}}else M.push($),L[$]=_,k&&(k[$]=p[V]);if(A&&k)for(V=D[K];V<M.length;)$=M[V],T[$]===_?(E[V]=A[$],V++):L[$]===_?(E[V]=k[$],V++):M.splice(V,1)}return D[N]=M.length,i.createSparseMatrix({values:E,index:M,ptr:D,size:[y,N],datatype:v})}})});var rme,nme,zi,qs=g(()=>{j();rme="algorithm10",nme=["typed","DenseMatrix"],zi=I(rme,nme,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,o,a,s){var u=i._values,c=i._index,l=i._ptr,f=i._size,p=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],d=f[1],h,x=a;typeof p=="string"&&(h=p,o=e.convert(o,h),x=e.find(a,[h,h]));for(var y=[],N=[],v=[],w=0;w<d;w++){for(var S=w+1,b=l[w],E=l[w+1],M=b;M<E;M++){var D=c[M];N[D]=u[M],v[D]=S}for(var A=0;A<m;A++)w===0&&(y[A]=[]),v[A]===S?y[A][w]=s?x(o,N[A]):x(N[A],o):y[A][w]=o}return new t({data:y,size:[m,d],datatype:h})}})});var ime,ome,xt,Er=g(()=>{j();Ln();ime="algorithm13",ome=["typed"],xt=I(ime,ome,r=>{var{typed:e}=r;return function(i,o,a){var s=i._data,u=i._size,c=i._datatype,l=o._data,f=o._size,p=o._datatype,m=[];if(u.length!==f.length)throw new ht(u.length,f.length);for(var d=0;d<u.length;d++){if(u[d]!==f[d])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");m[d]=u[d]}var h,x=a;typeof c=="string"&&c===p&&(h=c,x=e.find(a,[h,h]));var y=m.length>0?t(x,0,m,m[0],s,l):[];return i.createDenseMatrix({data:y,size:m,datatype:h})};function t(n,i,o,a,s,u){var c=[];if(i===o.length-1)for(var l=0;l<a;l++)c[l]=n(s[l],u[l]);else for(var f=0;f<a;f++)c[f]=t(n,i+1,o,o[i+1],s[f],u[f]);return c}})});var j_,ame,cw,Z_=g(()=>{j();ns();Wd();qs();Er();er();vt();j_="gcd",ame=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],cw=I(j_,ame,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:o}=r,a=ui({typed:e}),s=jc({typed:e,equalScalar:n}),u=zi({typed:e,DenseMatrix:o}),c=xt({typed:e}),l=ct({typed:e});return e(j_,{"number, number":$b,"BigNumber, BigNumber":f,"Fraction, Fraction":function(m,d){return m.gcd(d)},"SparseMatrix, SparseMatrix":function(m,d){return s(m,d,this)},"SparseMatrix, DenseMatrix":function(m,d){return a(d,m,this,!0)},"DenseMatrix, SparseMatrix":function(m,d){return a(m,d,this,!1)},"DenseMatrix, DenseMatrix":function(m,d){return c(m,d,this)},"Array, Array":function(m,d){return this(t(m),t(d)).valueOf()},"Array, Matrix":function(m,d){return this(t(m),d)},"Matrix, Array":function(m,d){return this(m,t(d))},"SparseMatrix, number | BigNumber":function(m,d){return u(m,d,this,!1)},"DenseMatrix, number | BigNumber":function(m,d){return l(m,d,this,!1)},"number | BigNumber, SparseMatrix":function(m,d){return u(d,m,this,!0)},"number | BigNumber, DenseMatrix":function(m,d){return l(d,m,this,!0)},"Array, number | BigNumber":function(m,d){return l(t(m),d,this,!1).valueOf()},"number | BigNumber, Array":function(m,d){return l(t(d),m,this,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(m,d,h){for(var x=this(m,d),y=0;y<h.length;y++)x=this(x,h[y]);return x}});function f(p,m){if(!p.isInt()||!m.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var d=new i(0);!m.isZero();){var h=p.mod(m);p=m,m=h}return p.lt(d)?p.neg():p}})});var sme,ume,ln,fo=g(()=>{j();Ln();sme="algorithm02",ume=["typed","equalScalar"],ln=I(sme,ume,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a,s){var u=i._data,c=i._size,l=i._datatype,f=o._values,p=o._index,m=o._ptr,d=o._size,h=o._datatype;if(c.length!==d.length)throw new ht(c.length,d.length);if(c[0]!==d[0]||c[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var x=c[0],y=c[1],N,v=t,w=0,S=a;typeof l=="string"&&l===h&&(N=l,v=e.find(t,[N,N]),w=e.convert(0,N),S=e.find(a,[N,N]));for(var b=[],E=[],M=[],D=0;D<y;D++){M[D]=E.length;for(var A=m[D],k=m[D+1],T=A;T<k;T++){var L=p[T],$=s?S(f[T],u[L][D]):S(u[L][D],f[T]);v($,w)||(E.push(L),b.push($))}}return M[y]=E.length,o.createSparseMatrix({values:b,index:E,ptr:M,size:[x,y],datatype:N})}})});var cme,lme,Ps,lp=g(()=>{j();Ln();nt();cme="algorithm06",lme=["typed","equalScalar"],Ps=I(cme,lme,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,u=i._size,c=i._datatype,l=o._values,f=o._size,p=o._datatype;if(u.length!==f.length)throw new ht(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var m=u[0],d=u[1],h,x=t,y=0,N=a;typeof c=="string"&&c===p&&(h=c,x=e.find(t,[h,h]),y=e.convert(0,h),N=e.find(a,[h,h]));for(var v=s&&l?[]:void 0,w=[],S=[],b=v?[]:void 0,E=[],M=[],D=0;D<d;D++){S[D]=w.length;var A=D+1;if(Ib(i,D,E,b,M,A,w,N),Ib(o,D,E,b,M,A,w,N),b)for(var k=S[D];k<w.length;){var T=w[k];if(M[T]===A){var L=b[T];x(L,y)?w.splice(k,1):(v.push(L),k++)}else w.splice(k,1)}else for(var $=S[D];$<w.length;){var K=w[$];M[K]!==A?w.splice($,1):$++}}return S[d]=w.length,i.createSparseMatrix({values:v,index:w,ptr:S,size:[m,d],datatype:h})}})});var X_,fme,lw,J_=g(()=>{j();fo();lp();$n();Er();er();vt();X_="lcm",fme=["typed","matrix","equalScalar"],lw=I(X_,fme,r=>{var{typed:e,matrix:t,equalScalar:n}=r,i=ln({typed:e,equalScalar:n}),o=Ps({typed:e,equalScalar:n}),a=nr({typed:e,equalScalar:n}),s=xt({typed:e}),u=ct({typed:e});return e(X_,{"number, number":Ub,"BigNumber, BigNumber":c,"Fraction, Fraction":function(f,p){return f.lcm(p)},"SparseMatrix, SparseMatrix":function(f,p){return o(f,p,this)},"SparseMatrix, DenseMatrix":function(f,p){return i(p,f,this,!0)},"DenseMatrix, SparseMatrix":function(f,p){return i(f,p,this,!1)},"DenseMatrix, DenseMatrix":function(f,p){return s(f,p,this)},"Array, Array":function(f,p){return this(t(f),t(p)).valueOf()},"Array, Matrix":function(f,p){return this(t(f),p)},"Matrix, Array":function(f,p){return this(f,t(p))},"SparseMatrix, number | BigNumber":function(f,p){return a(f,p,this,!1)},"DenseMatrix, number | BigNumber":function(f,p){return u(f,p,this,!1)},"number | BigNumber, SparseMatrix":function(f,p){return a(p,f,this,!0)},"number | BigNumber, DenseMatrix":function(f,p){return u(p,f,this,!0)},"Array, number | BigNumber":function(f,p){return u(t(f),p,this,!1).valueOf()},"number | BigNumber, Array":function(f,p){return u(t(p),f,this,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(f,p,m){for(var d=this(f,p),h=0;h<m.length;h++)d=this(d,m[h]);return d}});function c(l,f){if(!l.isInt()||!f.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(l.isZero())return l;if(f.isZero())return f;for(var p=l.times(f);!f.isZero();){var m=f;f=l.mod(m),l=m}return p.div(l).abs()}})});var Y_,pme,fw,Q_=g(()=>{j();nt();vt();Y_="log10",pme=["typed","config","Complex"],fw=I(Y_,pme,r=>{var{typed:e,config:t,Complex:n}=r;return e(Y_,{number:function(o){return o>=0||t.predictable?Vb(o):new n(o,0).log().div(Math.LN10)},Complex:function(o){return new n(o).log().div(Math.LN10)},BigNumber:function(o){return!o.isNegative()||t.predictable?o.log():new n(o.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(o){return Ee(o,this)}})})});var eF,mme,pw,tF=g(()=>{j();nt();vt();eF="log2",mme=["typed","config","Complex"],pw=I(eF,mme,r=>{var{typed:e,config:t,Complex:n}=r;return e(eF,{number:function(a){return a>=0||t.predictable?Wb(a):i(new n(a,0))},Complex:i,BigNumber:function(a){return!a.isNegative()||t.predictable?a.log(2):i(new n(a.toNumber(),0))},"Array | Matrix":function(a){return Ee(a,this)}});function i(o){var a=Math.sqrt(o.re*o.re+o.im*o.im);return new n(Math.log2?Math.log2(a):Math.log(a)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}})});var hme,dme,Nr,ci=g(()=>{j();Ln();hme="algorithm03",dme=["typed"],Nr=I(hme,dme,r=>{var{typed:e}=r;return function(n,i,o,a){var s=n._data,u=n._size,c=n._datatype,l=i._values,f=i._index,p=i._ptr,m=i._size,d=i._datatype;if(u.length!==m.length)throw new ht(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=u[0],x=u[1],y,N=0,v=o;typeof c=="string"&&c===d&&(y=c,N=e.convert(0,y),v=e.find(o,[y,y]));for(var w=[],S=0;S<h;S++)w[S]=[];for(var b=[],E=[],M=0;M<x;M++){for(var D=M+1,A=p[M],k=p[M+1],T=A;T<k;T++){var L=f[T];b[L]=a?v(l[T],s[L][M]):v(s[L][M],l[T]),E[L]=D}for(var $=0;$<h;$++)E[$]===D?w[$][M]=b[$]:w[$][M]=a?v(N,s[$][M]):v(s[$][M],N)}return n.createDenseMatrix({data:w,size:[h,x],datatype:y})}})});var gme,vme,$s,fp=g(()=>{j();Ln();gme="algorithm05",vme=["typed","equalScalar"],$s=I(gme,vme,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,u=i._index,c=i._ptr,l=i._size,f=i._datatype,p=o._values,m=o._index,d=o._ptr,h=o._size,x=o._datatype;if(l.length!==h.length)throw new ht(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var y=l[0],N=l[1],v,w=t,S=0,b=a;typeof f=="string"&&f===x&&(v=f,w=e.find(t,[v,v]),S=e.convert(0,v),b=e.find(a,[v,v]));var E=s&&p?[]:void 0,M=[],D=[],A=E?[]:void 0,k=E?[]:void 0,T=[],L=[],$,K,V,z;for(K=0;K<N;K++){D[K]=M.length;var Q=K+1;for(V=c[K],z=c[K+1];V<z;V++)$=u[V],M.push($),T[$]=Q,A&&(A[$]=s[V]);for(V=d[K],z=d[K+1];V<z;V++)$=m[V],T[$]!==Q&&M.push($),L[$]=Q,k&&(k[$]=p[V]);if(E)for(V=D[K];V<M.length;){$=M[V];var _=T[$],te=L[$];if(_===Q||te===Q){var he=_===Q?A[$]:S,Ne=te===Q?k[$]:S,Y=b(he,Ne);w(Y,S)?M.splice(V,1):(E.push(Y),V++)}}}return D[N]=M.length,i.createSparseMatrix({values:E,index:M,ptr:D,size:[y,N],datatype:v})}})});var xme,yme,Sr,li=g(()=>{j();xme="algorithm12",yme=["typed","DenseMatrix"],Sr=I(xme,yme,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,o,a,s){var u=i._values,c=i._index,l=i._ptr,f=i._size,p=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],d=f[1],h,x=a;typeof p=="string"&&(h=p,o=e.convert(o,h),x=e.find(a,[h,h]));for(var y=[],N=[],v=[],w=0;w<d;w++){for(var S=w+1,b=l[w],E=l[w+1],M=b;M<E;M++){var D=c[M];N[D]=u[M],v[D]=S}for(var A=0;A<m;A++)w===0&&(y[A]=[]),v[A]===S?y[A][w]=s?x(o,N[A]):x(N[A],o):y[A][w]=s?x(o,0):x(0,o)}return new t({data:y,size:[m,d],datatype:h})}})});var rF,bme,mw,nF=g(()=>{j();fo();ci();fp();$n();li();Er();er();vt();rF="mod",bme=["typed","matrix","equalScalar","DenseMatrix"],mw=I(rF,bme,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i}=r,o=ln({typed:e,equalScalar:n}),a=Nr({typed:e}),s=$s({typed:e,equalScalar:n}),u=nr({typed:e,equalScalar:n}),c=Sr({typed:e,DenseMatrix:i}),l=xt({typed:e}),f=ct({typed:e});return e(rF,{"number, number":Hb,"BigNumber, BigNumber":function(m,d){if(d.isNeg())throw new Error("Cannot calculate mod for a negative divisor");return d.isZero()?m:m.mod(d)},"Fraction, Fraction":function(m,d){if(d.compare(0)<0)throw new Error("Cannot calculate mod for a negative divisor");return m.compare(0)>=0?m.mod(d):m.mod(d).add(d).mod(d)},"SparseMatrix, SparseMatrix":function(m,d){return s(m,d,this,!1)},"SparseMatrix, DenseMatrix":function(m,d){return o(d,m,this,!0)},"DenseMatrix, SparseMatrix":function(m,d){return a(m,d,this,!1)},"DenseMatrix, DenseMatrix":function(m,d){return l(m,d,this)},"Array, Array":function(m,d){return this(t(m),t(d)).valueOf()},"Array, Matrix":function(m,d){return this(t(m),d)},"Matrix, Array":function(m,d){return this(m,t(d))},"SparseMatrix, any":function(m,d){return u(m,d,this,!1)},"DenseMatrix, any":function(m,d){return f(m,d,this,!1)},"any, SparseMatrix":function(m,d){return c(d,m,this,!0)},"any, DenseMatrix":function(m,d){return f(d,m,this,!0)},"Array, any":function(m,d){return f(t(m),d,this,!1).valueOf()},"any, Array":function(m,d){return f(t(d),m,this,!0).valueOf()}})})});var wme,Nme,hw,iF=g(()=>{j();vt();wme="multiplyScalar",Nme=["typed"],hw=I(wme,Nme,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":Fb,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":function(n,i){var o=i.clone();return o.value=o.value===null?o._normalize(n):this(o.value,n),o},"Unit, number | Fraction | BigNumber | Complex":function(n,i){var o=n.clone();return o.value=o.value===null?o._normalize(i):this(o.value,i),o},"Unit, Unit":function(n,i){return n.multiply(i)}})})});var oF,Sme,dw,aF=g(()=>{j();Je();Ht();Nt();$n();er();oF="multiply",Sme=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],dw=I(oF,Sme,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:o,dot:a}=r,s=nr({typed:e,equalScalar:o}),u=ct({typed:e});function c(S,b){switch(S.length){case 1:switch(b.length){case 1:if(S[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(S[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+S[0]+") must match Matrix rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;case 2:switch(b.length){case 1:if(S[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+S[1]+") must match Vector length ("+b[0]+")");break;case 2:if(S[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+S[1]+") must match Matrix B rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+S.length+" dimensions)")}}function l(S,b,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return a(S,b)}function f(S,b){if(b.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(S,b)}function p(S,b){var E=S._data,M=S._size,D=S._datatype,A=b._data,k=b._size,T=b._datatype,L=M[0],$=k[1],K,V=n,z=i;D&&T&&D===T&&typeof D=="string"&&(K=D,V=e.find(n,[K,K]),z=e.find(i,[K,K]));for(var Q=[],_=0;_<$;_++){for(var te=z(E[0],A[0][_]),he=1;he<L;he++)te=V(te,z(E[he],A[he][_]));Q[_]=te}return S.createDenseMatrix({data:Q,size:[$],datatype:K})}var m=e("_multiplyMatrixVector",{"DenseMatrix, any":h,"SparseMatrix, any":N}),d=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":x,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":v,"SparseMatrix, SparseMatrix":w});function h(S,b){var E=S._data,M=S._size,D=S._datatype,A=b._data,k=b._datatype,T=M[0],L=M[1],$,K=n,V=i;D&&k&&D===k&&typeof D=="string"&&($=D,K=e.find(n,[$,$]),V=e.find(i,[$,$]));for(var z=[],Q=0;Q<T;Q++){for(var _=E[Q],te=V(_[0],A[0]),he=1;he<L;he++)te=K(te,V(_[he],A[he]));z[Q]=te}return S.createDenseMatrix({data:z,size:[T],datatype:$})}function x(S,b){var E=S._data,M=S._size,D=S._datatype,A=b._data,k=b._size,T=b._datatype,L=M[0],$=M[1],K=k[1],V,z=n,Q=i;D&&T&&D===T&&typeof D=="string"&&(V=D,z=e.find(n,[V,V]),Q=e.find(i,[V,V]));for(var _=[],te=0;te<L;te++){var he=E[te];_[te]=[];for(var Ne=0;Ne<K;Ne++){for(var Y=Q(he[0],A[0][Ne]),ve=1;ve<$;ve++)Y=z(Y,Q(he[ve],A[ve][Ne]));_[te][Ne]=Y}}return S.createDenseMatrix({data:_,size:[L,K],datatype:V})}function y(S,b){var E=S._data,M=S._size,D=S._datatype,A=b._values,k=b._index,T=b._ptr,L=b._size,$=b._datatype;if(!A)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var K=M[0],V=L[1],z,Q=n,_=i,te=o,he=0;D&&$&&D===$&&typeof D=="string"&&(z=D,Q=e.find(n,[z,z]),_=e.find(i,[z,z]),te=e.find(o,[z,z]),he=e.convert(0,z));for(var Ne=[],Y=[],ve=[],re=b.createSparseMatrix({values:Ne,index:Y,ptr:ve,size:[K,V],datatype:z}),ne=0;ne<V;ne++){ve[ne]=Y.length;var ge=T[ne],xe=T[ne+1];if(xe>ge)for(var Se=0,we=0;we<K;we++){for(var et=we+1,Ye=void 0,Ue=ge;Ue<xe;Ue++){var st=k[Ue];Se!==et?(Ye=_(E[we][st],A[Ue]),Se=et):Ye=Q(Ye,_(E[we][st],A[Ue]))}Se===et&&!te(Ye,he)&&(Y.push(we),Ne.push(Ye))}}return ve[V]=Y.length,re}function N(S,b){var E=S._values,M=S._index,D=S._ptr,A=S._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var k=b._data,T=b._datatype,L=S._size[0],$=b._size[0],K=[],V=[],z=[],Q,_=n,te=i,he=o,Ne=0;A&&T&&A===T&&typeof A=="string"&&(Q=A,_=e.find(n,[Q,Q]),te=e.find(i,[Q,Q]),he=e.find(o,[Q,Q]),Ne=e.convert(0,Q));var Y=[],ve=[];z[0]=0;for(var re=0;re<$;re++){var ne=k[re];if(!he(ne,Ne))for(var ge=D[re],xe=D[re+1],Se=ge;Se<xe;Se++){var we=M[Se];ve[we]?Y[we]=_(Y[we],te(ne,E[Se])):(ve[we]=!0,V.push(we),Y[we]=te(ne,E[Se]))}}for(var et=V.length,Ye=0;Ye<et;Ye++){var Ue=V[Ye];K[Ye]=Y[Ue]}return z[1]=V.length,S.createSparseMatrix({values:K,index:V,ptr:z,size:[L,1],datatype:Q})}function v(S,b){var E=S._values,M=S._index,D=S._ptr,A=S._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var k=b._data,T=b._datatype,L=S._size[0],$=b._size[0],K=b._size[1],V,z=n,Q=i,_=o,te=0;A&&T&&A===T&&typeof A=="string"&&(V=A,z=e.find(n,[V,V]),Q=e.find(i,[V,V]),_=e.find(o,[V,V]),te=e.convert(0,V));for(var he=[],Ne=[],Y=[],ve=S.createSparseMatrix({values:he,index:Ne,ptr:Y,size:[L,K],datatype:V}),re=[],ne=[],ge=0;ge<K;ge++){Y[ge]=Ne.length;for(var xe=ge+1,Se=0;Se<$;Se++){var we=k[Se][ge];if(!_(we,te))for(var et=D[Se],Ye=D[Se+1],Ue=et;Ue<Ye;Ue++){var st=M[Ue];ne[st]!==xe?(ne[st]=xe,Ne.push(st),re[st]=Q(we,E[Ue])):re[st]=z(re[st],Q(we,E[Ue]))}}for(var Z=Y[ge],ie=Ne.length,G=Z;G<ie;G++){var X=Ne[G];he[G]=re[X]}}return Y[K]=Ne.length,ve}function w(S,b){var E=S._values,M=S._index,D=S._ptr,A=S._datatype,k=b._values,T=b._index,L=b._ptr,$=b._datatype,K=S._size[0],V=b._size[1],z=E&&k,Q,_=n,te=i;A&&$&&A===$&&typeof A=="string"&&(Q=A,_=e.find(n,[Q,Q]),te=e.find(i,[Q,Q]));for(var he=z?[]:void 0,Ne=[],Y=[],ve=S.createSparseMatrix({values:he,index:Ne,ptr:Y,size:[K,V],datatype:Q}),re=z?[]:void 0,ne=[],ge,xe,Se,we,et,Ye,Ue,st,Z=0;Z<V;Z++){Y[Z]=Ne.length;var ie=Z+1;for(et=L[Z],Ye=L[Z+1],we=et;we<Ye;we++)if(st=T[we],z)for(xe=D[st],Se=D[st+1],ge=xe;ge<Se;ge++)Ue=M[ge],ne[Ue]!==ie?(ne[Ue]=ie,Ne.push(Ue),re[Ue]=te(k[we],E[ge])):re[Ue]=_(re[Ue],te(k[we],E[ge]));else for(xe=D[st],Se=D[st+1],ge=xe;ge<Se;ge++)Ue=M[ge],ne[Ue]!==ie&&(ne[Ue]=ie,Ne.push(Ue));if(z)for(var G=Y[Z],X=Ne.length,le=G;le<X;le++){var se=Ne[le];he[le]=re[se]}}return Y[V]=Ne.length,ve}return e(oF,Lc({"Array, Array":function(b,E){c(Et(b),Et(E));var M=this(t(b),t(E));return ut(M)?M.valueOf():M},"Matrix, Matrix":function(b,E){var M=b.size(),D=E.size();return c(M,D),M.length===1?D.length===1?l(b,E,M[0]):f(b,E):D.length===1?m(b,E):d(b,E)},"Matrix, Array":function(b,E){return this(b,t(E))},"Array, Matrix":function(b,E){return this(t(b,E.storage()),E)},"SparseMatrix, any":function(b,E){return s(b,E,i,!1)},"DenseMatrix, any":function(b,E){return u(b,E,i,!1)},"any, SparseMatrix":function(b,E){return s(E,b,i,!0)},"any, DenseMatrix":function(b,E){return u(E,b,i,!0)},"Array, any":function(b,E){return u(t(b),E,i,!1).valueOf()},"any, Array":function(b,E){return u(t(E),b,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(b,E,M){for(var D=this(b,E),A=0;A<M.length;A++)D=this(D,M[A]);return D}},i.signatures))})});var sF,Ame,gw,uF=g(()=>{j();ns();fo();lp();$n();Er();er();vt();sF="nthRoot",Ame=["typed","matrix","equalScalar","BigNumber"],gw=I(sF,Ame,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i}=r,o=ui({typed:e}),a=ln({typed:e,equalScalar:n}),s=Ps({typed:e,equalScalar:n}),u=nr({typed:e,equalScalar:n}),c=xt({typed:e}),l=ct({typed:e}),f="Complex number not supported in function nthRoot. Use nthRoots instead.";return e(sF,{number:function(d){return qd(d,2)},"number, number":qd,BigNumber:function(d){return p(d,new i(2))},Complex:function(d){throw new Error(f)},"Complex, number":function(d,h){throw new Error(f)},"BigNumber, BigNumber":p,"Array | Matrix":function(d){return this(d,2)},"SparseMatrix, SparseMatrix":function(d,h){if(h.density()===1)return s(d,h,this);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(d,h){return a(h,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,h){if(h.density()===1)return o(d,h,this,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(d,h){return c(d,h,this)},"Array, Array":function(d,h){return this(t(d),t(h)).valueOf()},"Array, Matrix":function(d,h){return this(t(d),h)},"Matrix, Array":function(d,h){return this(d,t(h))},"SparseMatrix, number | BigNumber":function(d,h){return u(d,h,this,!1)},"DenseMatrix, number | BigNumber":function(d,h){return l(d,h,this,!1)},"number | BigNumber, SparseMatrix":function(d,h){if(h.density()===1)return u(h,d,this,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(d,h){return l(h,d,this,!0)},"Array, number | BigNumber":function(d,h){return this(t(d),h).valueOf()},"number | BigNumber, Array":function(d,h){return this(d,t(h)).valueOf()}});function p(m,d){var h=i.precision,x=i.clone({precision:h+2}),y=new i(0),N=new x(1),v=d.isNegative();if(v&&(d=d.neg()),d.isZero())throw new Error("Root must be non-zero");if(m.isNegative()&&!d.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(m.isZero())return v?new x(1/0):0;if(!m.isFinite())return v?y:m;var w=m.abs().pow(N.div(d));return w=m.isNeg()?w.neg():w,new i((v?N.div(w):w).toPrecision(h))}})});var cF,Mme,vw,lF=g(()=>{j();nt();vt();cF="sign",Mme=["typed","BigNumber","Fraction","complex"],vw=I(cF,Mme,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(cF,{number:Pd,Complex:function(a){return a.im===0?n(Pd(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},Fraction:function(a){return new i(a.s,1)},"Array | Matrix":function(a){return Ee(a,this,!0)},Unit:function(a){return this(a.value)}})})});var Dme,Eme,xw,fF=g(()=>{j();nt();Dme="sqrt",Eme=["config","typed","Complex"],xw=I(Dme,Eme,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},"Array | Matrix":function(a){return Ee(a,this,!0)},Unit:function(a){return a.pow(.5)}});function i(o){return isNaN(o)?NaN:o>=0||e.predictable?Math.sqrt(o):new n(o,0).sqrt()}})});var pF,Tme,yw,mF=g(()=>{j();nt();vt();pF="square",Tme=["typed"],yw=I(pF,Tme,r=>{var{typed:e}=r;return e(pF,{number:Kb,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},Fraction:function(n){return n.mul(n)},"Array | Matrix":function(n){return Ee(n,this,!0)},Unit:function(n){return n.pow(2)}})})});function Hd(r,e){var t=r.size(),n=e.size();if(t.length!==n.length)throw new ht(t.length,n.length)}var hF,Cme,bw,dF=g(()=>{j();Ln();ns();ci();fp();qs();Er();er();hF="subtract",Cme=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],bw=I(hF,Cme,r=>{var{typed:e,matrix:t,equalScalar:n,addScalar:i,unaryMinus:o,DenseMatrix:a}=r,s=ui({typed:e}),u=Nr({typed:e}),c=$s({typed:e,equalScalar:n}),l=zi({typed:e,DenseMatrix:a}),f=xt({typed:e}),p=ct({typed:e});return e(hF,{"number, number":function(d,h){return d-h},"Complex, Complex":function(d,h){return d.sub(h)},"BigNumber, BigNumber":function(d,h){return d.minus(h)},"Fraction, Fraction":function(d,h){return d.sub(h)},"Unit, Unit":function(d,h){if(d.value===null)throw new Error("Parameter x contains a unit with undefined value");if(h.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!d.equalBase(h))throw new Error("Units do not match");var x=d.clone();return x.value=this(x.value,h.value),x.fixPrefix=!1,x},"SparseMatrix, SparseMatrix":function(d,h){return Hd(d,h),c(d,h,this)},"SparseMatrix, DenseMatrix":function(d,h){return Hd(d,h),u(h,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,h){return Hd(d,h),s(d,h,this,!1)},"DenseMatrix, DenseMatrix":function(d,h){return Hd(d,h),f(d,h,this)},"Array, Array":function(d,h){return this(t(d),t(h)).valueOf()},"Array, Matrix":function(d,h){return this(t(d),h)},"Matrix, Array":function(d,h){return this(d,t(h))},"SparseMatrix, any":function(d,h){return l(d,o(h),i)},"DenseMatrix, any":function(d,h){return p(d,h,this)},"any, SparseMatrix":function(d,h){return l(h,d,this,!0)},"any, DenseMatrix":function(d,h){return p(h,d,this,!0)},"Array, any":function(d,h){return p(t(d),h,this,!1).valueOf()},"any, Array":function(d,h){return p(t(h),d,this,!0).valueOf()}})})});var gF,Ime,ww,vF=g(()=>{j();vt();gF="xgcd",Ime=["typed","config","matrix","BigNumber"],ww=I(gF,Ime,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(gF,{"number, number":function(s,u){var c=jb(s,u);return t.matrix==="Array"?c:n(c)},"BigNumber, BigNumber":o});function o(a,s){var u,c,l,f=new i(0),p=new i(1),m=f,d=p,h=p,x=f;if(!a.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)c=a.div(s).floor(),l=a.mod(s),u=m,m=d.minus(c.times(m)),d=u,u=h,h=x.minus(c.times(h)),x=u,a=s,s=l;var y;return a.lt(f)?y=[a.neg(),d.neg(),x.neg()]:y=[a,a.isZero()?0:d,x],t.matrix==="Array"?y:n(y)}})});var kme,Ome,Kd,Nw=g(()=>{j();Ln();kme="algorithm09",Ome=["typed","equalScalar"],Kd=I(kme,Ome,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,u=i._index,c=i._ptr,l=i._size,f=i._datatype,p=o._values,m=o._index,d=o._ptr,h=o._size,x=o._datatype;if(l.length!==h.length)throw new ht(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var y=l[0],N=l[1],v,w=t,S=0,b=a;typeof f=="string"&&f===x&&(v=f,w=e.find(t,[v,v]),S=e.convert(0,v),b=e.find(a,[v,v]));var E=s&&p?[]:void 0,M=[],D=[],A=E?[]:void 0,k=[],T,L,$,K,V;for(L=0;L<N;L++){D[L]=M.length;var z=L+1;if(A)for(K=d[L],V=d[L+1],$=K;$<V;$++)T=m[$],k[T]=z,A[T]=p[$];for(K=c[L],V=c[L+1],$=K;$<V;$++)if(T=u[$],A){var Q=k[T]===z?A[T]:S,_=b(s[$],Q);w(_,S)||(M.push(T),E.push(_))}else M.push(T)}return D[N]=M.length,i.createSparseMatrix({values:E,index:M,ptr:D,size:[y,N],datatype:v})}})});var xF,_me,Sw,yF=g(()=>{j();fo();Nw();$n();Er();er();xF="dotMultiply",_me=["typed","matrix","equalScalar","multiplyScalar"],Sw=I(xF,_me,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i}=r,o=ln({typed:e,equalScalar:n}),a=Kd({typed:e,equalScalar:n}),s=nr({typed:e,equalScalar:n}),u=xt({typed:e}),c=ct({typed:e});return e(xF,{"any, any":i,"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,i,!1)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,i,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,i,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,i)},"Array, Array":function(f,p){return this(t(f),t(p)).valueOf()},"Array, Matrix":function(f,p){return this(t(f),p)},"Matrix, Array":function(f,p){return this(f,t(p))},"SparseMatrix, any":function(f,p){return s(f,p,i,!1)},"DenseMatrix, any":function(f,p){return c(f,p,i,!1)},"any, SparseMatrix":function(f,p){return s(p,f,i,!0)},"any, DenseMatrix":function(f,p){return c(p,f,i,!0)},"Array, any":function(f,p){return c(t(f),p,i,!1).valueOf()},"any, Array":function(f,p){return c(t(p),f,i,!0).valueOf()}})})});function bF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return Aw(r,e,function(n,i){return n&i})}function Zc(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function wF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:Aw(r,e,function(i,o){return i|o})}function Aw(r,e,t){var n=r.constructor,i,o,a=+(r.s<0),s=+(e.s<0);if(a){i=jd(Zc(r));for(var u=0;u<i.length;++u)i[u]^=1}else i=jd(r);if(s){o=jd(Zc(e));for(var c=0;c<o.length;++c)o[c]^=1}else o=jd(e);var l,f,p;i.length<=o.length?(l=i,f=o,p=a):(l=o,f=i,p=s);var m=l.length,d=f.length,h=t(a,s)^1,x=new n(h^1),y=new n(1),N=new n(2),v=n.precision;for(n.config({precision:1e9});m>0;)t(l[--m],f[--d])===h&&(x=x.plus(y)),y=y.times(N);for(;d>0;)t(p,f[--d])===h&&(x=x.plus(y)),y=y.times(N);return n.config({precision:v}),h===0&&(x.s=-x.s),x}function jd(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",o=7-i.length;o--;)i="0"+i;t+=i}for(var a=t.length;t.charAt(a)==="0";)a--;var s=r.e,u=t.slice(0,a+1||1),c=u.length;if(s>0)if(++s>c)for(s-=c;s--;)u+="0";else s<c&&(u=u.slice(0,s)+"."+u.slice(s));for(var l=[0],f=0;f<u.length;){for(var p=l.length;p--;)l[p]*=10;l[0]+=parseInt(u.charAt(f++));for(var m=0;m<l.length;++m)l[m]>1&&((l[m+1]===null||l[m+1]===void 0)&&(l[m+1]=0),l[m+1]+=l[m]>>1,l[m]&=1)}return l.reverse()}function NF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?Zc(e):e.eq(n)?Zc(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):Aw(r,e,function(i,o){return i^o})}function SF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function AF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var Au=g(()=>{});var MF,Fme,Mw,DF=g(()=>{Au();fo();$n();Er();er();lp();j();vt();MF="bitAnd",Fme=["typed","matrix","equalScalar"],Mw=I(MF,Fme,r=>{var{typed:e,matrix:t,equalScalar:n}=r,i=ln({typed:e,equalScalar:n}),o=Ps({typed:e,equalScalar:n}),a=nr({typed:e,equalScalar:n}),s=xt({typed:e}),u=ct({typed:e});return e(MF,{"number, number":Xb,"BigNumber, BigNumber":bF,"SparseMatrix, SparseMatrix":function(l,f){return o(l,f,this,!1)},"SparseMatrix, DenseMatrix":function(l,f){return i(f,l,this,!0)},"DenseMatrix, SparseMatrix":function(l,f){return i(l,f,this,!1)},"DenseMatrix, DenseMatrix":function(l,f){return s(l,f,this)},"Array, Array":function(l,f){return this(t(l),t(f)).valueOf()},"Array, Matrix":function(l,f){return this(t(l),f)},"Matrix, Array":function(l,f){return this(l,t(f))},"SparseMatrix, any":function(l,f){return a(l,f,this,!1)},"DenseMatrix, any":function(l,f){return u(l,f,this,!1)},"any, SparseMatrix":function(l,f){return a(f,l,this,!0)},"any, DenseMatrix":function(l,f){return u(f,l,this,!0)},"Array, any":function(l,f){return u(t(l),f,this,!1).valueOf()},"any, Array":function(l,f){return u(t(f),l,this,!0).valueOf()}})})});var EF,Bme,Dw,TF=g(()=>{Au();nt();j();vt();EF="bitNot",Bme=["typed"],Dw=I(EF,Bme,r=>{var{typed:e}=r;return e(EF,{number:Jb,BigNumber:Zc,"Array | Matrix":function(n){return Ee(n,this)}})})});var CF,zme,Ew,IF=g(()=>{Au();j();er();Er();qs();Wd();ns();vt();CF="bitOr",zme=["typed","matrix","equalScalar","DenseMatrix"],Ew=I(CF,zme,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i}=r,o=ui({typed:e}),a=jc({typed:e,equalScalar:n}),s=zi({typed:e,DenseMatrix:i}),u=xt({typed:e}),c=ct({typed:e});return e(CF,{"number, number":Yb,"BigNumber, BigNumber":wF,"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,this)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,this,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,this,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,this)},"Array, Array":function(f,p){return this(t(f),t(p)).valueOf()},"Array, Matrix":function(f,p){return this(t(f),p)},"Matrix, Array":function(f,p){return this(f,t(p))},"SparseMatrix, any":function(f,p){return s(f,p,this,!1)},"DenseMatrix, any":function(f,p){return c(f,p,this,!1)},"any, SparseMatrix":function(f,p){return s(p,f,this,!0)},"any, DenseMatrix":function(f,p){return c(p,f,this,!0)},"Array, any":function(f,p){return c(t(f),p,this,!1).valueOf()},"any, Array":function(f,p){return c(t(p),f,this,!0).valueOf()}})})});var Rme,Lme,An,Zo=g(()=>{j();Ln();Rme="algorithm07",Lme=["typed","DenseMatrix"],An=I(Rme,Lme,r=>{var{typed:e,DenseMatrix:t}=r;return function(o,a,s){var u=o._size,c=o._datatype,l=a._size,f=a._datatype;if(u.length!==l.length)throw new ht(u.length,l.length);if(u[0]!==l[0]||u[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+l+")");var p=u[0],m=u[1],d,h=0,x=s;typeof c=="string"&&c===f&&(d=c,h=e.convert(0,d),x=e.find(s,[d,d]));var y,N,v=[];for(y=0;y<p;y++)v[y]=[];var w=[],S=[],b=[],E=[];for(N=0;N<m;N++){var M=N+1;for(n(o,N,b,w,M),n(a,N,E,S,M),y=0;y<p;y++){var D=b[y]===M?w[y]:h,A=E[y]===M?S[y]:h;v[y][N]=x(D,A)}}return new t({data:v,size:[p,m],datatype:d})};function n(i,o,a,s,u){for(var c=i._values,l=i._index,f=i._ptr,p=f[o],m=f[o+1];p<m;p++){var d=l[p];a[d]=u,s[d]=c[p]}}})});var kF,qme,Tw,OF=g(()=>{Au();ci();Zo();li();Er();er();j();vt();kF="bitXor",qme=["typed","matrix","DenseMatrix"],Tw=I(kF,qme,r=>{var{typed:e,matrix:t,DenseMatrix:n}=r,i=Nr({typed:e}),o=An({typed:e,DenseMatrix:n}),a=Sr({typed:e,DenseMatrix:n}),s=xt({typed:e}),u=ct({typed:e});return e(kF,{"number, number":Qb,"BigNumber, BigNumber":NF,"SparseMatrix, SparseMatrix":function(l,f){return o(l,f,this)},"SparseMatrix, DenseMatrix":function(l,f){return i(f,l,this,!0)},"DenseMatrix, SparseMatrix":function(l,f){return i(l,f,this,!1)},"DenseMatrix, DenseMatrix":function(l,f){return s(l,f,this)},"Array, Array":function(l,f){return this(t(l),t(f)).valueOf()},"Array, Matrix":function(l,f){return this(t(l),f)},"Matrix, Array":function(l,f){return this(l,t(f))},"SparseMatrix, any":function(l,f){return a(l,f,this,!1)},"DenseMatrix, any":function(l,f){return u(l,f,this,!1)},"any, SparseMatrix":function(l,f){return a(f,l,this,!0)},"any, DenseMatrix":function(l,f){return u(f,l,this,!0)},"Array, any":function(l,f){return u(t(l),f,this,!1).valueOf()},"any, Array":function(l,f){return u(t(f),l,this,!0).valueOf()}})})});var _F,Pme,Cw,FF=g(()=>{j();nt();_F="arg",Pme=["typed"],Cw=I(_F,Pme,r=>{var{typed:e}=r;return e(_F,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":function(n){return Ee(n,this)}})})});var BF,$me,Iw,zF=g(()=>{j();nt();BF="conj",$me=["typed"],Iw=I(BF,$me,r=>{var{typed:e}=r;return e(BF,{number:function(n){return n},BigNumber:function(n){return n},Complex:function(n){return n.conjugate()},"Array | Matrix":function(n){return Ee(n,this)}})})});var RF,Ume,kw,LF=g(()=>{j();nt();RF="im",Ume=["typed"],kw=I(RF,Ume,r=>{var{typed:e}=r;return e(RF,{number:function(n){return 0},BigNumber:function(n){return n.mul(0)},Fraction:function(n){return n.mul(0)},Complex:function(n){return n.im},"Array | Matrix":function(n){return Ee(n,this)}})})});var qF,Gme,Ow,PF=g(()=>{j();nt();qF="re",Gme=["typed"],Ow=I(qF,Gme,r=>{var{typed:e}=r;return e(qF,{number:function(n){return n},BigNumber:function(n){return n},Fraction:function(n){return n},Complex:function(n){return n.re},"Array | Matrix":function(n){return Ee(n,this)}})})});var $F,Vme,_w,UF=g(()=>{nt();j();vt();$F="not",Vme=["typed"],_w=I($F,Vme,r=>{var{typed:e}=r;return e($F,{number:a1,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},Unit:function(n){return n.value!==null?this(n.value):!0},"Array | Matrix":function(n){return Ee(n,this)}})})});var GF,Wme,Fw,VF=g(()=>{ci();li();Er();er();fp();j();vt();GF="or",Wme=["typed","matrix","equalScalar","DenseMatrix"],Fw=I(GF,Wme,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i}=r,o=Nr({typed:e}),a=$s({typed:e,equalScalar:n}),s=Sr({typed:e,DenseMatrix:i}),u=xt({typed:e}),c=ct({typed:e});return e(GF,{"number, number":s1,"Complex, Complex":function(f,p){return f.re!==0||f.im!==0||p.re!==0||p.im!==0},"BigNumber, BigNumber":function(f,p){return!f.isZero()&&!f.isNaN()||!p.isZero()&&!p.isNaN()},"Unit, Unit":function(f,p){return this(f.value||0,p.value||0)},"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,this)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,this,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,this,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,this)},"Array, Array":function(f,p){return this(t(f),t(p)).valueOf()},"Array, Matrix":function(f,p){return this(t(f),p)},"Matrix, Array":function(f,p){return this(f,t(p))},"SparseMatrix, any":function(f,p){return s(f,p,this,!1)},"DenseMatrix, any":function(f,p){return c(f,p,this,!1)},"any, SparseMatrix":function(f,p){return s(p,f,this,!0)},"any, DenseMatrix":function(f,p){return c(p,f,this,!0)},"Array, any":function(f,p){return c(t(f),p,this,!1).valueOf()},"any, Array":function(f,p){return c(t(p),f,this,!0).valueOf()}})})});var WF,Hme,Bw,HF=g(()=>{ci();Zo();li();Er();er();j();vt();WF="xor",Hme=["typed","matrix","DenseMatrix"],Bw=I(WF,Hme,r=>{var{typed:e,matrix:t,DenseMatrix:n}=r,i=Nr({typed:e}),o=An({typed:e,DenseMatrix:n}),a=Sr({typed:e,DenseMatrix:n}),s=xt({typed:e}),u=ct({typed:e});return e(WF,{"number, number":u1,"Complex, Complex":function(l,f){return(l.re!==0||l.im!==0)!=(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(l,f){return(!l.isZero()&&!l.isNaN())!=(!f.isZero()&&!f.isNaN())},"Unit, Unit":function(l,f){return this(l.value||0,f.value||0)},"SparseMatrix, SparseMatrix":function(l,f){return o(l,f,this)},"SparseMatrix, DenseMatrix":function(l,f){return i(f,l,this,!0)},"DenseMatrix, SparseMatrix":function(l,f){return i(l,f,this,!1)},"DenseMatrix, DenseMatrix":function(l,f){return s(l,f,this)},"Array, Array":function(l,f){return this(t(l),t(f)).valueOf()},"Array, Matrix":function(l,f){return this(t(l),f)},"Matrix, Array":function(l,f){return this(l,t(f))},"SparseMatrix, any":function(l,f){return a(l,f,this,!1)},"DenseMatrix, any":function(l,f){return u(l,f,this,!1)},"any, SparseMatrix":function(l,f){return a(f,l,this,!0)},"any, DenseMatrix":function(l,f){return u(f,l,this,!0)},"Array, any":function(l,f){return u(t(l),f,this,!1).valueOf()},"any, Array":function(l,f){return u(t(f),l,this,!0).valueOf()}})})});function jF(r,e,t,n){if(n<t){if(r.length!==e.length)throw new ht(r.length,e.length);for(var i=[],o=0;o<r.length;o++)i[o]=jF(r[o],e[o],t,n+1);return i}else return r.concat(e)}var KF,Kme,pp,zw=g(()=>{Je();Ht();Nt();Pc();Ln();j();KF="concat",Kme=["typed","matrix","isInteger"],pp=I(KF,Kme,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(KF,{"...Array | Matrix | number | BigNumber":function(o){var a,s=o.length,u=-1,c,l=!1,f=[];for(a=0;a<s;a++){var p=o[a];if(ut(p)&&(l=!0),kt(p)||lt(p)){if(a!==s-1)throw new Error("Dimension must be specified as last argument");if(c=u,u=p.valueOf(),!n(u))throw new TypeError("Integer number expected for dimension");if(u<0||a>0&&u>c)throw new Mi(u,c+1)}else{var m=at(p).valueOf(),d=Et(m);if(f[a]=m,c=u,u=d.length-1,a>0&&u!==c)throw new ht(c+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var h=f.shift();f.length;)h=jF(h,f.shift(),u,0);return l?t(h):h},"...string":function(o){return o.join("")}})})});var ZF,jme,mp,Rw=g(()=>{j();Ht();Nt();ZF="column",jme=["typed","Index","matrix","range"],mp=I(ZF,jme,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(ZF,{"Matrix, number":o,"Array, number":function(s,u){return o(n(at(s)),u).valueOf()}});function o(a,s){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");gr(s,a.size()[1]);var u=i(0,a.size()[0]),c=new t(u,s);return a.subset(c)}})});var XF,Zme,Lw,JF=g(()=>{j();XF="count",Zme=["typed","size","prod"],Lw=I(XF,Zme,r=>{var{typed:e,size:t,prod:n}=r;return e(XF,{string:function(o){return o.length},"Matrix | Array":function(o){return n(t(o))}})})});var YF,Xme,qw,QF=g(()=>{Nt();j();YF="cross",Xme=["typed","matrix","subtract","multiply"],qw=I(YF,Xme,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(YF,{"Matrix, Matrix":function(s,u){return t(o(s.toArray(),u.toArray()))},"Matrix, Array":function(s,u){return t(o(s.toArray(),u))},"Array, Matrix":function(s,u){return t(o(s,u.toArray()))},"Array, Array":o});function o(a,s){var u=Math.max(Et(a).length,Et(s).length);a=$c(a),s=$c(s);var c=Et(a),l=Et(s);if(c.length!==1||l.length!==1||c[0]!==3||l[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+c.join(", ")+"], B = ["+l.join(", ")+"])");var f=[n(i(a[1],s[2]),i(a[2],s[1])),n(i(a[2],s[0]),i(a[0],s[2])),n(i(a[0],s[1]),i(a[1],s[0]))];return u>1?[f]:f}})});var eB,Jme,Pw,tB=g(()=>{Je();Nt();Rt();j();eB="diag",Jme=["typed","matrix","DenseMatrix","SparseMatrix"],Pw=I(eB,Jme,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(eB,{Array:function(c){return o(c,0,Et(c),null)},"Array, number":function(c,l){return o(c,l,Et(c),null)},"Array, BigNumber":function(c,l){return o(c,l.toNumber(),Et(c),null)},"Array, string":function(c,l){return o(c,0,Et(c),l)},"Array, number, string":function(c,l,f){return o(c,l,Et(c),f)},"Array, BigNumber, string":function(c,l,f){return o(c,l.toNumber(),Et(c),f)},Matrix:function(c){return o(c,0,c.size(),c.storage())},"Matrix, number":function(c,l){return o(c,l,c.size(),c.storage())},"Matrix, BigNumber":function(c,l){return o(c,l.toNumber(),c.size(),c.storage())},"Matrix, string":function(c,l){return o(c,0,c.size(),l)},"Matrix, number, string":function(c,l,f){return o(c,l,c.size(),f)},"Matrix, BigNumber, string":function(c,l,f){return o(c,l.toNumber(),c.size(),f)}});function o(u,c,l,f){if(!Ze(c))throw new TypeError("Second parameter in function diag must be an integer");var p=c>0?c:0,m=c<0?-c:0;switch(l.length){case 1:return a(u,c,f,l[0],m,p);case 2:return s(u,c,f,l,m,p)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(u,c,l,f,p,m){var d=[f+p,f+m];if(l&&l!=="sparse"&&l!=="dense")throw new TypeError("Unknown matrix type ".concat(l,'"'));var h=l==="sparse"?i.diagonal(d,u,c):n.diagonal(d,u,c);return l!==null?h:h.valueOf()}function s(u,c,l,f,p,m){if(ut(u)){var d=u.diagonal(c);return l!==null?l!==d.storage()?t(d,l):d:d.valueOf()}for(var h=Math.min(f[0]-p,f[1]-m),x=[],y=0;y<h;y++)x[y]=u[y+p][y+m];return l!==null?t(x):x}})});function rB(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),o=0,a=function(u){var c=i[u];if(!!c&&(delete n[c],delete i[u],--e,t===c)){if(!e){o=0,t=1;return}for(;!hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(u){var c=i[u],l=++o;if(n[l]=u,i[u]=l,!c)return++e,e<=r?void 0:(u=n[t],a(u),u);if(delete n[c],t===c)for(;!hasOwnProperty.call(n,++t););},delete:a,clear:function(){e=o=0,t=1,n=Object.create(null),i=Object.create(null)}}}var nB=g(()=>{});function Mu(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:rB(t||Number.POSITIVE_INFINITY)});for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e(i);if(n.cache.values.has(a))return n.cache.lru.hit(a),n.cache.values.get(a);var s=r.apply(r,i);return n.cache.values.set(a,s),n.cache.values.delete(n.cache.lru.hit(a)),s}}function po(r){return Object.keys(r.signatures||{}).reduce(function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var is=g(()=>{nB()});function iB(r,e){var t=po(e);return Od(r,function(n,i,o){return t===1?e(n):t===2?e(n,[i]):e(n,[i],o)})}var Yme,Qme,$w,oB=g(()=>{Nt();is();j();Yme="filter",Qme=["typed"],$w=I(Yme,Qme,r=>{var{typed:e}=r;return e("filter",{"Array, function":iB,"Matrix, function":function(n,i){return n.create(iB(n.toArray(),i))},"Array, RegExp":Uc,"Matrix, RegExp":function(n,i){return n.create(Uc(n.toArray(),i))}})})});var aB,ehe,Uw,sB=g(()=>{Ht();Nt();j();aB="flatten",ehe=["typed","matrix"],Uw=I(aB,ehe,r=>{var{typed:e,matrix:t}=r;return e(aB,{Array:function(i){return At(at(i))},Matrix:function(i){var o=At(at(i.toArray()));return t(o)}})})});function rhe(r,e){var t=po(e),n=function i(o,a){Array.isArray(o)?Bs(o,function(s,u){i(s,a.concat(u))}):t===1?e(o):t===2?e(o,a):e(o,a,r)};n(r,[])}var uB,the,Gw,cB=g(()=>{is();Nt();j();uB="forEach",the=["typed"],Gw=I(uB,the,r=>{var{typed:e}=r;return e(uB,{"Array, function":rhe,"Matrix, function":function(n,i){return n.forEach(i)}})})});var lB,nhe,Vw,fB=g(()=>{j();Nt();Je();lB="getMatrixDataType",nhe=["typed"],Vw=I(lB,nhe,r=>{var{typed:e}=r;return e(lB,{Array:function(n){return zs(n,Gt)},Matrix:function(n){return n.getDataType()}})})});var pB,ihe,Ww,mB=g(()=>{Je();Nt();Rt();j();pB="identity",ihe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Ww=I(pB,ihe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:o,SparseMatrix:a}=r;return e(pB,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(l){return n(l)},"number | BigNumber":function(l){return u(l,l,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(l,f){return u(l,l,f)},"number | BigNumber, number | BigNumber":function(l,f){return u(l,f,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(l,f,p){return u(l,f,p)},Array:function(l){return s(l)},"Array, string":function(l,f){return s(l,f)},Matrix:function(l){return s(l.valueOf(),l.storage())},"Matrix, string":function(l,f){return s(l.valueOf(),f)}});function s(c,l){switch(c.length){case 0:return l?n(l):[];case 1:return u(c[0],c[0],l);case 2:return u(c[0],c[1],l);default:throw new Error("Vector containing two values expected")}}function u(c,l,f){var p=lt(c)||lt(l)?i:null;if(lt(c)&&(c=c.toNumber()),lt(l)&&(l=l.toNumber()),!Ze(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!Ze(l)||l<1)throw new Error("Parameters in function identity must be positive integers");var m=p?new i(1):1,d=p?new p(0):0,h=[c,l];if(f){if(f==="sparse")return a.diagonal(h,m,0,d);if(f==="dense")return o.diagonal(h,m,0,d);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var x=Ko([],h,d),y=c<l?c:l,N=0;N<y;N++)x[N][N]=m;return x}})});var hB,ohe,Hw,dB=g(()=>{Nt();j();hB="kron",ohe=["typed","matrix","multiplyScalar"],Hw=I(hB,ohe,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(hB,{"Matrix, Matrix":function(a,s){return t(i(a.toArray(),s.toArray()))},"Matrix, Array":function(a,s){return t(i(a.toArray(),s))},"Array, Matrix":function(a,s){return t(i(a,s.toArray()))},"Array, Array":i});function i(o,a){if(Et(o).length===1&&(o=[o]),Et(a).length===1&&(a=[a]),Et(o).length>2||Et(a).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(o.length)+", y = "+JSON.stringify(a.length)+")");var s=[],u=[];return o.map(function(c){return a.map(function(l){return u=[],s.push(u),c.map(function(f){return l.map(function(p){return u.push(n(f,p))})})})})&&s}})});function she(r,e){var t=po(e),n=function i(o,a){return Array.isArray(o)?o.map(function(s,u){return i(s,a.concat(u))}):t===1?e(o):t===2?e(o,a):e(o,a,r)};return n(r,[])}var gB,ahe,Kw,vB=g(()=>{is();j();gB="map",ahe=["typed"],Kw=I(gB,ahe,r=>{var{typed:e}=r;return e(gB,{"Array, function":she,"Matrix, function":function(n,i){return n.map(i)}})})});var xB,uhe,hp,jw=g(()=>{j();Rt();Je();xB="diff",uhe=["typed","matrix","subtract","number"],hp=I(xB,uhe,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(xB,{"Array | Matrix":function(l){return ut(l)?t(a(l.toArray())):a(l)},"Array | Matrix, number":function(l,f){if(!Ze(f))throw new RangeError("Dimension must be a whole number");return ut(l)?t(o(l.toArray(),f)):o(l,f)},"Array | Matrix, BigNumber":function(l,f){return this(l,i(f))}});function o(c,l){if(ut(c)&&(c=c.toArray()),!Array.isArray(c))throw RangeError("Array/Matrix does not have that many dimensions");if(l>0){var f=[];return c.forEach(p=>{f.push(o(p,l-1))}),f}else{if(l===0)return a(c);throw RangeError("Cannot have negative dimension")}}function a(c){var l=[],f=c.length;if(f<2)return c;for(var p=1;p<f;p++)l.push(s(c[p-1],c[p]));return l}function s(c,l){ut(c)&&(c=c.toArray()),ut(l)&&(l=l.toArray());var f=Array.isArray(c),p=Array.isArray(l);if(f&&p)return u(c,l);if(!f&&!p)return n(l,c);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(c,l){if(c.length!==l.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],p=c.length,m=0;m<p;m++)f.push(s(c[m],l[m]));return f}})});var che,lhe,Zw,yB=g(()=>{Je();Rt();Nt();j();che="ones",lhe=["typed","config","matrix","BigNumber"],Zw=I(che,lhe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(c){var l=c[c.length-1];if(typeof l=="string"){var f=c.pop();return o(c,f)}else return t.matrix==="Array"?o(c):o(c,"default")},Array:o,Matrix:function(c){var l=c.storage();return o(c.valueOf(),l)},"Array | Matrix, string":function(c,l){return o(c.valueOf(),l)}});function o(u,c){var l=a(u),f=l?new i(1):1;if(s(u),c){var p=n(c);return u.length>0?p.resize(u,f):p}else{var m=[];return u.length>0?Ko(m,u,f):m}}function a(u){var c=!1;return u.forEach(function(l,f,p){lt(l)&&(c=!0,p[f]=l.toNumber())}),c}function s(u){u.forEach(function(c){if(typeof c!="number"||!Ze(c)||c<0)throw new Error("Parameters in function ones must be positive integers")})}})});function Xc(){throw new Error('No "bignumber" implementation available')}function Zd(){throw new Error('No "fraction" implementation available')}function Xd(){throw new Error('No "matrix" implementation available')}var dp=g(()=>{});var bB,fhe,gp,Xw=g(()=>{j();dp();bB="range",fhe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],gp=I(bB,fhe,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:u}=r;return e(bB,{string:l,"string, boolean":l,"number, number":function(y,N){return c(f(y,N,1))},"number, number, number":function(y,N,v){return c(f(y,N,v))},"number, number, boolean":function(y,N,v){return c(v?p(y,N,1):f(y,N,1))},"number, number, number, boolean":function(y,N,v,w){return c(w?p(y,N,v):f(y,N,v))},"BigNumber, BigNumber":function(y,N){var v=y.constructor;return c(m(y,N,new v(1)))},"BigNumber, BigNumber, BigNumber":function(y,N,v){return c(m(y,N,v))},"BigNumber, BigNumber, boolean":function(y,N,v){var w=y.constructor;return c(v?d(y,N,new w(1)):m(y,N,new w(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(y,N,v,w){return c(w?d(y,N,v):m(y,N,v))}});function c(x){return t.matrix==="Matrix"?n?n(x):Xd():x}function l(x,y){var N=h(x);if(!N)throw new SyntaxError('String "'+x+'" is no valid range');var v;return t.number==="BigNumber"?(i===void 0&&Xc(),v=y?d:m,c(v(i(N.start),i(N.end),i(N.step)))):(v=y?p:f,c(v(N.start,N.end,N.step)))}function f(x,y,N){var v=[],w=x;if(N>0)for(;o(w,y);)v.push(w),w+=N;else if(N<0)for(;s(w,y);)v.push(w),w+=N;return v}function p(x,y,N){var v=[],w=x;if(N>0)for(;a(w,y);)v.push(w),w+=N;else if(N<0)for(;u(w,y);)v.push(w),w+=N;return v}function m(x,y,N){var v=i(0),w=[],S=x;if(N.gt(v))for(;o(S,y);)w.push(S),S=S.plus(N);else if(N.lt(v))for(;s(S,y);)w.push(S),S=S.plus(N);return w}function d(x,y,N){var v=i(0),w=[],S=x;if(N.gt(v))for(;a(S,y);)w.push(S),S=S.plus(N);else if(N.lt(v))for(;u(S,y);)w.push(S),S=S.plus(N);return w}function h(x){var y=x.split(":"),N=y.map(function(w){return Number(w)}),v=N.some(function(w){return isNaN(w)});if(v)return null;switch(N.length){case 2:return{start:N[0],end:N[1],step:1};case 3:return{start:N[0],end:N[2],step:N[1]};default:return null}}})});var wB,phe,Jw,NB=g(()=>{Nt();j();wB="reshape",phe=["typed","isInteger","matrix"],Jw=I(wB,phe,r=>{var{typed:e,isInteger:t}=r;return e(wB,{"Matrix, Array":function(i,o){return i.reshape(o)},"Array, Array":function(i,o){return o.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),Id(i,o)}})})});function Du(r,e,t,n){if(!(this instanceof Du))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}var SB=g(()=>{Du.prototype=new Error;Du.prototype.constructor=Error;Du.prototype.name="ArgumentsError";Du.prototype.isArgumentsError=!0});var mhe,hhe,Yw,AB=g(()=>{Je();Ln();SB();Rt();Fr();Ht();Nt();j();mhe="resize",hhe=["config","matrix"],Yw=I(mhe,hhe,r=>{var{config:e,matrix:t}=r;return function(o,a,s){if(arguments.length!==2&&arguments.length!==3)throw new Du("resize",arguments.length,2,3);if(ut(a)&&(a=a.valueOf()),lt(a[0])&&(a=a.map(function(l){return lt(l)?l.toNumber():l})),ut(o))return o.resize(a,s,!0);if(typeof o=="string")return n(o,a,s);var u=Array.isArray(o)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(o);)o=o[0];return at(o)}else{Array.isArray(o)||(o=[o]),o=at(o);var c=Ko(o,a,s);return u?t(c):c}};function n(i,o,a){if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";if(o.length!==1)throw new ht(o.length,1);var s=o[0];if(typeof s!="number"||!Ze(s))throw new TypeError("Invalid size, must contain positive integers (size: "+gt(o)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var u=i,c=0,l=s-i.length;c<l;c++)u+=a;return u}else return i}})});var MB,dhe,Qw,DB=g(()=>{j();Nt();MB="rotate",dhe=["typed","multiply","rotationMatrix"],Qw=I(MB,dhe,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(MB,{"Array , number | BigNumber | Complex | Unit":function(a,s){i(a,2);var u=t(n(s),a);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,s){return i(a,2),t(n(s),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,s,u){i(a,3);var c=t(n(s,u),a);return c},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,s,u){return i(a,3),t(n(s,u),a)}});function i(o,a){var s=Array.isArray(o)?Et(o):o.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(s[0]!==a)throw new RangeError("Vector must be of dimensions 1x".concat(a))}})});var EB,ghe,eN,TB=g(()=>{Je();j();EB="rotationMatrix",ghe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],eN=I(EB,ghe,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:o,norm:a,BigNumber:s,matrix:u,DenseMatrix:c,SparseMatrix:l,cos:f,sin:p}=r;return e(EB,{"":function(){return t.matrix==="Matrix"?u([]):[]},string:function(v){return u(v)},"number | BigNumber | Complex | Unit":function(v){return m(v,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(v,w){return m(v,w)},"number | BigNumber | Complex | Unit, Array":function(v,w){var S=u(w);return d(S),y(v,S,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(v,w){d(w);var S=w.storage()||(t.matrix==="Matrix"?"dense":void 0);return y(v,w,S)},"number | BigNumber | Complex | Unit, Array, string":function(v,w,S){var b=u(w);return d(b),y(v,b,S)},"number | BigNumber | Complex | Unit, Matrix, string":function(v,w,S){return d(w),y(v,w,S)}});function m(N,v){var w=lt(N),S=w?new s(-1):-1,b=f(N),E=p(N),M=[[b,n(S,E)],[E,b]];return x(M,v)}function d(N){var v=N.size();if(v.length<1||v[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function h(N){return N.reduce((v,w)=>n(v,w))}function x(N,v){if(v){if(v==="sparse")return new l(N);if(v==="dense")return new c(N);throw new TypeError('Unknown matrix type "'.concat(v,'"'))}return N}function y(N,v,w){var S=a(v);if(S===0)throw new RangeError("Rotation around zero vector");var b=lt(N)?s:null,E=b?new b(1):1,M=b?new b(-1):-1,D=b?new b(v.get([0])/S):v.get([0])/S,A=b?new b(v.get([1])/S):v.get([1])/S,k=b?new b(v.get([2])/S):v.get([2])/S,T=f(N),L=i(E,o(T)),$=p(N),K=i(T,h([D,D,L])),V=i(h([D,A,L]),h([M,k,$])),z=i(h([D,k,L]),h([A,$])),Q=i(h([D,A,L]),h([k,$])),_=i(T,h([A,A,L])),te=i(h([A,k,L]),h([M,D,$])),he=i(h([D,k,L]),h([M,A,$])),Ne=i(h([A,k,L]),h([D,$])),Y=i(T,h([k,k,L])),ve=[[K,V,z],[Q,_,te],[he,Ne,Y]];return x(ve,w)}})});var CB,vhe,vp,tN=g(()=>{j();Ht();Nt();CB="row",vhe=["typed","Index","matrix","range"],vp=I(CB,vhe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(CB,{"Matrix, number":o,"Array, number":function(s,u){return o(n(at(s)),u).valueOf()}});function o(a,s){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");gr(s,a.size()[0]);var u=i(0,a.size()[1]),c=new t(s,u);return a.subset(c)}})});var IB,xhe,rN,kB=g(()=>{Nt();j();dp();IB="size",xhe=["typed","config","?matrix"],rN=I(IB,xhe,r=>{var{typed:e,config:t,matrix:n}=r;return e(IB,{Matrix:function(o){return o.create(o.size())},Array:Et,string:function(o){return t.matrix==="Array"?[o.length]:n([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return t.matrix==="Array"?[]:n?n([]):Xd()}})})});var OB,yhe,nN,_B=g(()=>{Ht();Nt();j();OB="squeeze",yhe=["typed","matrix"],nN=I(OB,yhe,r=>{var{typed:e,matrix:t}=r;return e(OB,{Array:function(i){return $c(at(i))},Matrix:function(i){var o=$c(i.toArray());return Array.isArray(o)?t(o):o},any:function(i){return at(i)}})})});function whe(r,e){if(!es(e))throw new TypeError("Index expected");if(e.size().length!==1)throw new ht(e.size().length,1);var t=r.length;gr(e.min()[0],t),gr(e.max()[0],t);var n=e.dimension(0),i="";return n.forEach(function(o){i+=r.charAt(o)}),i}function BB(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(e.size().length!==1)throw new ht(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),o=i.size()[0];if(o!==t.length)throw new ht(i.size()[0],t.length);var a=r.length;gr(e.min()[0]),gr(e.max()[0]);for(var s=[],u=0;u<a;u++)s[u]=r.charAt(u);if(i.forEach(function(f,p){s[f]=t.charAt(p[0])}),s.length>a)for(var c=a-1,l=s.length;c<l;c++)s[c]||(s[c]=n);return s.join("")}function Nhe(r,e){if(e.size().length!==1)throw new ht(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return nn(r,t)}function She(r,e,t){if(e.size().length!==1)throw new ht(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=at(r);return Aa(i,n,t),i}var FB,bhe,xp,iN=g(()=>{Je();Ht();Nt();Bi();Ln();j();FB="subset",bhe=["typed","matrix"],xp=I(FB,bhe,r=>{var{typed:e,matrix:t}=r;return e(FB,{"Array, Index":function(i,o){var a=t(i),s=a.subset(o);return o.isScalar()?s:s.valueOf()},"Matrix, Index":function(i,o){return i.subset(o)},"Object, Index":Nhe,"string, Index":whe,"Array, Index, any":function(i,o,a){return t(at(i)).subset(o,a,void 0).valueOf()},"Array, Index, any, any":function(i,o,a,s){return t(at(i)).subset(o,a,s).valueOf()},"Matrix, Index, any":function(i,o,a){return i.clone().subset(o,a)},"Matrix, Index, any, any":function(i,o,a,s){return i.clone().subset(o,a,s)},"string, Index, string":BB,"string, Index, string, string":BB,"Object, Index, any":She})})});var Ahe,Mhe,oN,zB=g(()=>{Ht();Fr();j();Ahe="transpose",Mhe=["typed","matrix"],oN=I(Ahe,Mhe,r=>{var{typed:e,matrix:t}=r;return e("transpose",{Array:function(a){return this(t(a)).valueOf()},Matrix:function(a){var s=a.size(),u;switch(s.length){case 1:u=a.clone();break;case 2:{var c=s[0],l=s[1];if(l===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+gt(s)+")");switch(a.storage()){case"dense":u=n(a,c,l);break;case"sparse":u=i(a,c,l);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+gt(this._size)+")")}return u},any:function(a){return at(a)}});function n(o,a,s){for(var u=o._data,c=[],l,f=0;f<s;f++){l=c[f]=[];for(var p=0;p<a;p++)l[p]=at(u[p][f])}return o.createDenseMatrix({data:c,size:[s,a],datatype:o._datatype})}function i(o,a,s){for(var u=o._values,c=o._index,l=o._ptr,f=u?[]:void 0,p=[],m=[],d=[],h=0;h<a;h++)d[h]=0;var x,y,N;for(x=0,y=c.length;x<y;x++)d[c[x]]++;for(var v=0,w=0;w<a;w++)m.push(v),v+=d[w],d[w]=m[w];for(m.push(v),N=0;N<s;N++)for(var S=l[N],b=l[N+1],E=S;E<b;E++){var M=d[c[E]]++;p[M]=N,u&&(f[M]=at(u[E]))}return o.createSparseMatrix({values:f,index:p,ptr:m,size:[s,a],datatype:o._datatype})}})});var RB,Dhe,aN,LB=g(()=>{j();RB="ctranspose",Dhe=["typed","transpose","conj"],aN=I(RB,Dhe,r=>{var{typed:e,transpose:t,conj:n}=r;return e(RB,{any:function(o){return n(t(o))}})})});var qB,Ehe,sN,PB=g(()=>{Je();Rt();Nt();j();qB="zeros",Ehe=["typed","config","matrix","BigNumber"],sN=I(qB,Ehe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(qB,{"":function(){return t.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(c){var l=c[c.length-1];if(typeof l=="string"){var f=c.pop();return o(c,f)}else return t.matrix==="Array"?o(c):o(c,"default")},Array:o,Matrix:function(c){var l=c.storage();return o(c.valueOf(),l)},"Array | Matrix, string":function(c,l){return o(c.valueOf(),l)}});function o(u,c){var l=a(u),f=l?new i(0):0;if(s(u),c){var p=n(c);return u.length>0?p.resize(u,f):p}else{var m=[];return u.length>0?Ko(m,u,f):m}}function a(u){var c=!1;return u.forEach(function(l,f,p){lt(l)&&(c=!0,p[f]=l.toNumber())}),c}function s(u){u.forEach(function(c){if(typeof c!="number"||!Ze(c)||c<0)throw new Error("Parameters in function zeros must be positive integers")})}})});var The,Che,uN,Ihe,khe,os,Jc,Ohe,$B=g(()=>{nt();Rt();j();The="erf",Che=["typed"],uN=I(The,Che,r=>{var{typed:e}=r;return e("name",{number:function(a){var s=Math.abs(a);return s>=Ohe?lo(a):s<=Ihe?lo(a)*t(s):s<=4?lo(a)*(1-n(s)):lo(a)*(1-i(s))},"Array | Matrix":function(a){return Ee(a,this)}});function t(o){var a=o*o,s=os[0][4]*a,u=a,c;for(c=0;c<3;c+=1)s=(s+os[0][c])*a,u=(u+Jc[0][c])*a;return o*(s+os[0][3])/(u+Jc[0][3])}function n(o){var a=os[1][8]*o,s=o,u;for(u=0;u<7;u+=1)a=(a+os[1][u])*o,s=(s+Jc[1][u])*o;var c=(a+os[1][7])/(s+Jc[1][7]),l=parseInt(o*16)/16,f=(o-l)*(o+l);return Math.exp(-l*l)*Math.exp(-f)*c}function i(o){var a=1/(o*o),s=os[2][5]*a,u=a,c;for(c=0;c<4;c+=1)s=(s+os[2][c])*a,u=(u+Jc[2][c])*a;var l=a*(s+os[2][4])/(u+Jc[2][4]);l=(khe-l)/o,a=parseInt(o*16)/16;var f=(o-a)*(o+a);return Math.exp(-a*a)*Math.exp(-f)*l}}),Ihe=.46875,khe=.5641895835477563,os=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Jc=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Ohe=Math.pow(2,53)});var UB,_he,cN,GB=g(()=>{Nt();j();UB="mode",_he=["typed","isNaN","isNumeric"],cN=I(UB,_he,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(UB,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(o){o=At(o.valueOf());var a=o.length;if(a===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},u=[],c=0,l=0;l<o.length;l++){var f=o[l];if(n(f)&&t(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in s||(s[f]=0),s[f]++,s[f]===c?u.push(f):s[f]>c&&(c=s[f],u=[f])}return u}})});function vn(r,e,t){var n;return String(r).indexOf("Unexpected type")!==-1?(n=arguments.length>2?" (type: "+Gt(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).indexOf("complex numbers")!==-1?(n=arguments.length>2?" (type: "+Gt(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var as=g(()=>{Je()});var VB,Fhe,lN,WB=g(()=>{nt();j();as();VB="prod",Fhe=["typed","config","multiplyScalar","numeric"],lN=I(VB,Fhe,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(VB,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(s,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(s){return o(s)}});function o(a){var s;if(ai(a,function(u){try{s=s===void 0?u:n(s,u)}catch(c){throw vn(c,"prod",u)}}),typeof s=="string"&&(s=i(s,t.number)),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}})});var HB,Bhe,fN,KB=g(()=>{Fr();j();HB="format",Bhe=["typed"],fN=I(HB,Bhe,r=>{var{typed:e}=r;return e(HB,{any:gt,"any, Object | function | number":gt})})});var jB,zhe,pN,ZB=g(()=>{j();jB="bin",zhe=["typed","format"],pN=I(jB,zhe,r=>{var{typed:e,format:t}=r;return e(jB,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number":function(i,o){return t(i,{notation:"bin",wordSize:o})}})})});var XB,Rhe,mN,JB=g(()=>{j();XB="oct",Rhe=["typed","format"],mN=I(XB,Rhe,r=>{var{typed:e,format:t}=r;return e(XB,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number":function(i,o){return t(i,{notation:"oct",wordSize:o})}})})});var YB,Lhe,hN,QB=g(()=>{j();YB="hex",Lhe=["typed","format"],hN=I(YB,Lhe,r=>{var{typed:e,format:t}=r;return e(YB,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number":function(i,o){return t(i,{notation:"hex",wordSize:o})}})})});function tz(r,e,t){return r.replace(/\$([\w.]+)/g,function(n,i){for(var o=i.split("."),a=e[o.shift()];o.length&&a!==void 0;){var s=o.shift();a=s?a[s]:a+"."}return a!==void 0?On(a)?a:gt(a,t):n})}var ez,qhe,dN,rz=g(()=>{Fr();Je();j();ez="print",qhe=["typed"],dN=I(ez,qhe,r=>{var{typed:e}=r;return e(ez,{"string, Object | Array":tz,"string, Object | Array, number | Object":tz})})});var nz,Phe,gN,iz=g(()=>{j();Er();er();nz="to",Phe=["typed","matrix"],gN=I(nz,Phe,r=>{var{typed:e,matrix:t}=r,n=xt({typed:e}),i=ct({typed:e});return e(nz,{"Unit, Unit | string":function(a,s){return a.to(s)},"Matrix, Matrix":function(a,s){return n(a,s,this)},"Array, Array":function(a,s){return this(t(a),t(s)).valueOf()},"Array, Matrix":function(a,s){return this(t(a),s)},"Matrix, Array":function(a,s){return this(a,t(s))},"Matrix, any":function(a,s){return i(a,s,this,!1)},"any, Matrix":function(a,s){return i(s,a,this,!0)},"Array, any":function(a,s){return i(t(a),s,this,!1).valueOf()},"any, Array":function(a,s){return i(t(s),a,this,!0).valueOf()}})})});var oz,$he,vN,az=g(()=>{nt();j();oz="isPrime",$he=["typed"],vN=I(oz,$he,r=>{var{typed:e}=r;return e(oz,{number:function(n){if(n*0!==0)return!1;if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},BigNumber:function(n){if(n.toNumber()*0!==0)return!1;if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),o=5;o*o<=i;o+=6)if(i%o===0||i%(o+2)===0)return!1;return!0}function a(N,v,w){for(var S=1;!v.eq(0);)v.mod(2).eq(0)?(v=v.div(2),N=N.mul(N).mod(w)):(v=v.sub(1),S=N.mul(S).mod(w));return S}var s=n.constructor.clone({precision:n.toFixed(0).length*2});n=new s(n);for(var u=0,c=n.sub(1);c.mod(2).eq(0);)c=c.div(2),u+=1;var l=null;if(n.lt("3317044064679887385961981"))l=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(N=>N<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));l=[];for(var p=2;p<=f;p+=1)l.push(f)}for(var m=0;m<l.length;m+=1){var d=l[m],h=a(n.sub(n).add(d),c,n);if(!h.eq(1)){for(var x=0,y=h;!y.eq(n.sub(1));x+=1,y=y.mul(y).mod(n))if(x===u-1)return!1}}return!0},"Array | Matrix":function(n){return Ee(n,this)}})})});var Uhe,Ghe,xN,sz=g(()=>{Je();j();dp();Uhe="numeric",Ghe=["number","?bignumber","?fraction"],xN=I(Uhe,Ghe,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:a=>e(a),BigNumber:t?a=>t(a):Xc,Fraction:n?a=>n(a):Zd};return function(s,u){var c=Gt(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in o))throw new TypeError("Cannot convert "+s+' to type "'+u+'"; valid output types are '+Object.keys(o).join(", "));return u===c?s:o[u](s)}})});var uz,Vhe,yN,cz=g(()=>{j();Je();uz="divideScalar",Vhe=["typed","numeric"],yN=I(uz,Vhe,r=>{var{typed:e,numeric:t}=r;return e(uz,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Fraction | BigNumber":function(i,o){var a=i.clone(),s=t(1,Gt(o));return a.value=this(a.value===null?a._normalize(s):a.value,o),a},"number | Fraction | BigNumber, Unit":function(i,o){var a=o.clone();a=a.pow(-1);var s=t(1,Gt(i));return a.value=this(i,o.value===null?o._normalize(s):o.value),a},"Unit, Unit":function(i,o){return i.divide(o)}})})});var lz,Whe,bN,fz=g(()=>{j();Rt();Nt();vt();lz="pow",Whe=["typed","config","identity","multiply","matrix","fraction","number","Complex"],bN=I(lz,Whe,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:o,number:a,fraction:s,Complex:u}=r;return e(lz,{"number, number":c,"Complex, Complex":function(m,d){return m.pow(d)},"BigNumber, BigNumber":function(m,d){return d.isInteger()||m>=0||t.predictable?m.pow(d):new u(m.toNumber(),0).pow(d.toNumber(),0)},"Fraction, Fraction":function(m,d){var h=m.pow(d);if(h!=null)return h;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),d.valueOf())},"Array, number":l,"Array, BigNumber":function(m,d){return l(m,d.toNumber())},"Matrix, number":f,"Matrix, BigNumber":function(m,d){return f(m,d.toNumber())},"Unit, number | BigNumber":function(m,d){return m.pow(d)}});function c(p,m){if(t.predictable&&!Ze(m)&&p<0)try{var d=s(m),h=a(d);if((m===h||Math.abs((m-h)/m)<1e-14)&&d.d%2===1)return(d.n%2===0?1:-1)*Math.pow(-p,m)}catch{}return t.predictable&&(p<-1&&m===1/0||p>-1&&p<0&&m===-1/0)?NaN:Ze(m)||p>=0||t.predictable?Zb(p,m):p*p<1&&m===1/0||p*p>1&&m===-1/0?0:new u(p,0).pow(m,0)}function l(p,m){if(!Ze(m)||m<0)throw new TypeError("For A^b, b must be a positive integer (value is "+m+")");var d=Et(p);if(d.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+d.length+" dimensions)");if(d[0]!==d[1])throw new Error("For A^b, A must be square (size is "+d[0]+"x"+d[1]+")");for(var h=n(d[0]).valueOf(),x=p;m>=1;)(m&1)===1&&(h=i(x,h)),m>>=1,x=i(x,x);return h}function f(p,m){return o(l(p.valueOf(),m))}})});function yp(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var wN=g(()=>{});function pz(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function mz(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(t),!0).forEach(function(n){yp(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pz(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Yc,hz,Hhe,NN,Khe,dz=g(()=>{wN();j();nt();Rt();$n();li();er();vt();Yc="Number of decimals in function round must be an integer",hz="round",Hhe=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],NN=I(hz,Hhe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,BigNumber:o,DenseMatrix:a}=r,s=nr({typed:e,equalScalar:n}),u=Sr({typed:e,DenseMatrix:a}),c=ct({typed:e});return e(hz,mz(mz({},Khe),{},{Complex:function(f){return f.round()},"Complex, number":function(f,p){if(p%1)throw new TypeError(Yc);return f.round(p)},"Complex, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(Yc);var m=p.toNumber();return f.round(m)},"number, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(Yc);return new o(f).toDecimalPlaces(p.toNumber())},BigNumber:function(f){return f.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(Yc);return f.toDecimalPlaces(p.toNumber())},Fraction:function(f){return f.round()},"Fraction, number":function(f,p){if(p%1)throw new TypeError(Yc);return f.round(p)},"Array | Matrix":function(f){return Ee(f,this,!0)},"SparseMatrix, number | BigNumber":function(f,p){return s(f,p,this,!1)},"DenseMatrix, number | BigNumber":function(f,p){return c(f,p,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(f,p){return n(f,0)?i(p.size(),p.storage()):u(p,f,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(f,p){return n(f,0)?i(p.size(),p.storage()):c(p,f,this,!0)},"Array, number | BigNumber":function(f,p){return c(t(f),p,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(f,p){return c(t(p),f,this,!0).valueOf()}}))}),Khe={number:$d,"number, number":function(e,t){if(!Ze(t))throw new TypeError(Yc);if(t<0||t>15)throw new Error("Number of decimals in function round must be in the range of 0-15");return $d(e,t)}}});var gz,jhe,SN,vz=g(()=>{j();nt();vt();gz="log",jhe=["config","typed","divideScalar","Complex"],SN=I(gz,jhe,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r;return e(gz,{number:function(a){return a>=0||t.predictable?Gb(a):new i(a,0).log()},Complex:function(a){return a.log()},BigNumber:function(a){return!a.isNegative()||t.predictable?a.ln():new i(a.toNumber(),0).log()},"Array | Matrix":function(a){return Ee(a,this)},"any, any":function(a,s){return n(this(a),this(s))}})})});var xz,Zhe,AN,yz=g(()=>{j();nt();Rt();xz="log1p",Zhe=["typed","config","divideScalar","log","Complex"],AN=I(xz,Zhe,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:o}=r;return e(xz,{number:function(u){return u>=-1||t.predictable?Md(u):a(new o(u,0))},Complex:a,BigNumber:function(u){var c=u.plus(1);return!c.isNegative()||t.predictable?c.ln():a(new o(u.toNumber(),0))},"Array | Matrix":function(u){return Ee(u,this)},"any, any":function(u,c){return n(this(u),i(c))}});function a(s){var u=s.re+1;return new o(Math.log(Math.sqrt(u*u+s.im*s.im)),Math.atan2(s.im,u))}})});var bz,Xhe,MN,wz=g(()=>{j();bz="nthRoots",Xhe=["config","typed","divideScalar","Complex"],MN=I(bz,Xhe,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,o=[function(u){return new i(u,0)},function(u){return new i(0,u)},function(u){return new i(-u,0)},function(u){return new i(0,-u)}];function a(s,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var c=typeof s=="number",l;(c||s.re===0||s.im===0)&&(c?l=2*+(s<0):s.im===0?l=2*+(s.re<0):l=2*+(s.im<0)+1);for(var f=s.arg(),p=s.abs(),m=[],d=Math.pow(p,1/u),h=0;h<u;h++){var x=(l+4*h)/u;if(x===Math.round(x)){m.push(o[x%4](d));continue}m.push(new i({r:d,phi:(f+2*Math.PI*h)/u}))}return m}return e(bz,{Complex:function(u){return a(u,2)},"Complex, number":a})})});var Nz,Jhe,DN,Sz=g(()=>{j();ci();Zo();$n();li();Er();er();Nz="dotPow",Jhe=["typed","equalScalar","matrix","pow","DenseMatrix"],DN=I(Nz,Jhe,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:o}=r,a=Nr({typed:e}),s=An({typed:e,DenseMatrix:o}),u=nr({typed:e,equalScalar:t}),c=Sr({typed:e,DenseMatrix:o}),l=xt({typed:e}),f=ct({typed:e});return e(Nz,{"any, any":i,"SparseMatrix, SparseMatrix":function(m,d){return s(m,d,i,!1)},"SparseMatrix, DenseMatrix":function(m,d){return a(d,m,i,!0)},"DenseMatrix, SparseMatrix":function(m,d){return a(m,d,i,!1)},"DenseMatrix, DenseMatrix":function(m,d){return l(m,d,i)},"Array, Array":function(m,d){return this(n(m),n(d)).valueOf()},"Array, Matrix":function(m,d){return this(n(m),d)},"Matrix, Array":function(m,d){return this(m,n(d))},"SparseMatrix, any":function(m,d){return u(m,d,this,!1)},"DenseMatrix, any":function(m,d){return f(m,d,this,!1)},"any, SparseMatrix":function(m,d){return c(d,m,this,!0)},"any, DenseMatrix":function(m,d){return f(d,m,this,!0)},"Array, any":function(m,d){return f(n(m),d,this,!1).valueOf()},"any, Array":function(m,d){return f(n(d),m,this,!0).valueOf()}})})});var Az,Yhe,EN,Mz=g(()=>{j();fo();ci();Zo();$n();li();Er();er();Az="dotDivide",Yhe=["typed","matrix","equalScalar","divideScalar","DenseMatrix"],EN=I(Az,Yhe,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:o}=r,a=ln({typed:e,equalScalar:n}),s=Nr({typed:e}),u=An({typed:e,DenseMatrix:o}),c=nr({typed:e,equalScalar:n}),l=Sr({typed:e,DenseMatrix:o}),f=xt({typed:e}),p=ct({typed:e});return e(Az,{"any, any":i,"SparseMatrix, SparseMatrix":function(d,h){return u(d,h,i,!1)},"SparseMatrix, DenseMatrix":function(d,h){return a(h,d,i,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,i,!1)},"DenseMatrix, DenseMatrix":function(d,h){return f(d,h,i)},"Array, Array":function(d,h){return this(t(d),t(h)).valueOf()},"Array, Matrix":function(d,h){return this(t(d),h)},"Matrix, Array":function(d,h){return this(d,t(h))},"SparseMatrix, any":function(d,h){return c(d,h,i,!1)},"DenseMatrix, any":function(d,h){return p(d,h,i,!1)},"any, SparseMatrix":function(d,h){return l(h,d,i,!0)},"any, DenseMatrix":function(d,h){return p(h,d,i,!0)},"Array, any":function(d,h){return p(t(d),h,i,!1).valueOf()},"any, Array":function(d,h){return p(t(h),d,i,!0).valueOf()}})})});function Da(r){var{DenseMatrix:e}=r;return function(n,i,o){var a=n.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+gt(a)+")");var s=a[0],u=a[1];if(s!==u)throw new RangeError("Matrix must be square (size: "+gt(a)+")");var c=[];if(ut(i)){var l=i.size(),f=i._data;if(l.length===1){if(l[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var p=0;p<s;p++)c[p]=[f[p]];return new e({data:c,size:[s,1],datatype:i._datatype})}if(l.length===2){if(l[0]!==s||l[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(xu(i)){if(o){c=[];for(var m=0;m<s;m++)c[m]=[f[m][0]];return new e({data:c,size:[s,1],datatype:i._datatype})}return i}if(Vo(i)){for(var d=0;d<s;d++)c[d]=[0];for(var h=i._values,x=i._index,y=i._ptr,N=y[1],v=y[0];v<N;v++){var w=x[v];c[w][0]=h[v]}return new e({data:c,size:[s,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Xt(i)){var S=Et(i);if(S.length===1){if(S[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<s;b++)c[b]=[i[b]];return new e({data:c,size:[s,1]})}if(S.length===2){if(S[0]!==s||S[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<s;E++)c[E]=[i[E][0]];return new e({data:c,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var Qc=g(()=>{Je();Nt();Fr()});var Dz,Qhe,TN,Ez=g(()=>{j();Qc();Dz="lsolve",Qhe=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],TN=I(Dz,Qhe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:a,DenseMatrix:s}=r,u=Da({DenseMatrix:s});return e(Dz,{"SparseMatrix, Array | Matrix":function(p,m){return l(p,m)},"DenseMatrix, Array | Matrix":function(p,m){return c(p,m)},"Array, Array | Matrix":function(p,m){var d=t(p),h=c(d,m);return h.valueOf()}});function c(f,p){p=u(f,p,!0);for(var m=p._data,d=f._size[0],h=f._size[1],x=[],y=f._data,N=0;N<h;N++){var v=m[N][0]||0,w=void 0;if(a(v,0))w=0;else{var S=y[N][N];if(a(S,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(v,S);for(var b=N+1;b<d;b++)m[b]=[o(m[b][0]||0,i(w,y[b][N]))]}x[N]=[w]}return new s({data:x,size:[d,1]})}function l(f,p){p=u(f,p,!0);for(var m=p._data,d=f._size[0],h=f._size[1],x=f._values,y=f._index,N=f._ptr,v=[],w=0;w<h;w++){var S=m[w][0]||0;if(a(S,0))v[w]=[0];else{for(var b=0,E=[],M=[],D=N[w],A=N[w+1],k=D;k<A;k++){var T=y[k];T===w?b=x[k]:T>w&&(E.push(x[k]),M.push(T))}if(a(b,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var L=n(S,b),$=0,K=M.length;$<K;$++){var V=M[$];m[V]=[o(m[V][0]||0,i(L,E[$]))]}v[w]=[L]}}return new s({data:v,size:[d,1]})}})});var Tz,ede,CN,Cz=g(()=>{j();Qc();Tz="usolve",ede=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],CN=I(Tz,ede,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:a,DenseMatrix:s}=r,u=Da({DenseMatrix:s});return e(Tz,{"SparseMatrix, Array | Matrix":function(p,m){return l(p,m)},"DenseMatrix, Array | Matrix":function(p,m){return c(p,m)},"Array, Array | Matrix":function(p,m){var d=t(p),h=c(d,m);return h.valueOf()}});function c(f,p){p=u(f,p,!0);for(var m=p._data,d=f._size[0],h=f._size[1],x=[],y=f._data,N=h-1;N>=0;N--){var v=m[N][0]||0,w=void 0;if(a(v,0))w=0;else{var S=y[N][N];if(a(S,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(v,S);for(var b=N-1;b>=0;b--)m[b]=[o(m[b][0]||0,i(w,y[b][N]))]}x[N]=[w]}return new s({data:x,size:[d,1]})}function l(f,p){p=u(f,p,!0);for(var m=p._data,d=f._size[0],h=f._size[1],x=f._values,y=f._index,N=f._ptr,v=[],w=h-1;w>=0;w--){var S=m[w][0]||0;if(a(S,0))v[w]=[0];else{for(var b=0,E=[],M=[],D=N[w],A=N[w+1],k=A-1;k>=D;k--){var T=y[k];T===w?b=x[k]:T<w&&(E.push(x[k]),M.push(T))}if(a(b,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var L=n(S,b),$=0,K=M.length;$<K;$++){var V=M[$];m[V]=[o(m[V][0],i(L,E[$]))]}v[w]=[L]}}return new s({data:v,size:[d,1]})}})});var Iz,tde,IN,kz=g(()=>{j();Qc();Iz="lsolveAll",tde=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],IN=I(Iz,tde,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:a,DenseMatrix:s}=r,u=Da({DenseMatrix:s});return e(Iz,{"SparseMatrix, Array | Matrix":function(p,m){return l(p,m)},"DenseMatrix, Array | Matrix":function(p,m){return c(p,m)},"Array, Array | Matrix":function(p,m){var d=t(p),h=c(d,m);return h.map(x=>x.valueOf())}});function c(f,p){for(var m=[u(f,p,!0)._data.map(M=>M[0])],d=f._data,h=f._size[0],x=f._size[1],y=0;y<x;y++)for(var N=m.length,v=0;v<N;v++){var w=m[v];if(a(d[y][y],0))if(a(w[y],0)){if(v===0){var b=[...w];b[y]=1;for(var E=y+1;E<x;E++)b[E]=o(b[E],d[E][y]);m.push(b)}}else{if(v===0)return[];m.splice(v,1),v-=1,N-=1}else{w[y]=n(w[y],d[y][y]);for(var S=y+1;S<x;S++)w[S]=o(w[S],i(w[y],d[S][y]))}}return m.map(M=>new s({data:M.map(D=>[D]),size:[h,1]}))}function l(f,p){for(var m=[u(f,p,!0)._data.map(he=>he[0])],d=f._size[0],h=f._size[1],x=f._values,y=f._index,N=f._ptr,v=0;v<h;v++)for(var w=m.length,S=0;S<w;S++){for(var b=m[S],E=[],M=[],D=N[v],A=N[v+1],k=0,T=D;T<A;T++){var L=y[T];L===v?k=x[T]:L>v&&(E.push(x[T]),M.push(L))}if(a(k,0))if(a(b[v],0)){if(S===0){var z=[...b];z[v]=1;for(var Q=0,_=M.length;Q<_;Q++){var te=M[Q];z[te]=o(z[te],E[Q])}m.push(z)}}else{if(S===0)return[];m.splice(S,1),S-=1,w-=1}else{b[v]=n(b[v],k);for(var $=0,K=M.length;$<K;$++){var V=M[$];b[V]=o(b[V],i(b[v],E[$]))}}}return m.map(he=>new s({data:he.map(Ne=>[Ne]),size:[d,1]}))}})});var Oz,rde,kN,_z=g(()=>{j();Qc();Oz="usolveAll",rde=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],kN=I(Oz,rde,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:a,DenseMatrix:s}=r,u=Da({DenseMatrix:s});return e(Oz,{"SparseMatrix, Array | Matrix":function(p,m){return l(p,m)},"DenseMatrix, Array | Matrix":function(p,m){return c(p,m)},"Array, Array | Matrix":function(p,m){var d=t(p),h=c(d,m);return h.map(x=>x.valueOf())}});function c(f,p){for(var m=[u(f,p,!0)._data.map(M=>M[0])],d=f._data,h=f._size[0],x=f._size[1],y=x-1;y>=0;y--)for(var N=m.length,v=0;v<N;v++){var w=m[v];if(a(d[y][y],0))if(a(w[y],0)){if(v===0){var b=[...w];b[y]=1;for(var E=y-1;E>=0;E--)b[E]=o(b[E],d[E][y]);m.push(b)}}else{if(v===0)return[];m.splice(v,1),v-=1,N-=1}else{w[y]=n(w[y],d[y][y]);for(var S=y-1;S>=0;S--)w[S]=o(w[S],i(w[y],d[S][y]))}}return m.map(M=>new s({data:M.map(D=>[D]),size:[h,1]}))}function l(f,p){for(var m=[u(f,p,!0)._data.map(he=>he[0])],d=f._size[0],h=f._size[1],x=f._values,y=f._index,N=f._ptr,v=h-1;v>=0;v--)for(var w=m.length,S=0;S<w;S++){for(var b=m[S],E=[],M=[],D=N[v],A=N[v+1],k=0,T=A-1;T>=D;T--){var L=y[T];L===v?k=x[T]:L<v&&(E.push(x[T]),M.push(L))}if(a(k,0))if(a(b[v],0)){if(S===0){var z=[...b];z[v]=1;for(var Q=0,_=M.length;Q<_;Q++){var te=M[Q];z[te]=o(z[te],E[Q])}m.push(z)}}else{if(S===0)return[];m.splice(S,1),S-=1,w-=1}else{b[v]=n(b[v],k);for(var $=0,K=M.length;$<K;$++){var V=M[$];b[V]=o(b[V],i(b[v],E[$]))}}}return m.map(he=>new s({data:he.map(Ne=>[Ne]),size:[d,1]}))}})});var nde,ide,el,Jd=g(()=>{j();Ln();nde="algorithm08",ide=["typed","equalScalar"],el=I(nde,ide,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,u=i._index,c=i._ptr,l=i._size,f=i._datatype,p=o._values,m=o._index,d=o._ptr,h=o._size,x=o._datatype;if(l.length!==h.length)throw new ht(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!s||!p)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=l[0],N=l[1],v,w=t,S=0,b=a;typeof f=="string"&&f===x&&(v=f,w=e.find(t,[v,v]),S=e.convert(0,v),b=e.find(a,[v,v]));for(var E=[],M=[],D=[],A=[],k=[],T,L,$,K,V=0;V<N;V++){D[V]=M.length;var z=V+1;for(L=c[V],$=c[V+1],T=L;T<$;T++)K=u[T],k[K]=z,A[K]=s[T],M.push(K);for(L=d[V],$=d[V+1],T=L;T<$;T++)K=m[T],k[K]===z&&(A[K]=b(A[K],p[T]));for(T=D[V];T<M.length;){K=M[T];var Q=A[K];w(Q,S)?M.splice(T,1):(E.push(Q),T++)}}return D[N]=M.length,i.createSparseMatrix({values:E,index:M,ptr:D,size:[y,N],datatype:v})}})});var Fz,ode,ON,Bz=g(()=>{fo();$n();Er();er();ns();qs();Jd();j();vt();Au();Fz="leftShift",ode=["typed","matrix","equalScalar","zeros","DenseMatrix"],ON=I(Fz,ode,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:o}=r,a=ui({typed:e}),s=ln({typed:e,equalScalar:n}),u=el({typed:e,equalScalar:n}),c=zi({typed:e,DenseMatrix:o}),l=nr({typed:e,equalScalar:n}),f=xt({typed:e}),p=ct({typed:e});return e(Fz,{"number, number":e1,"BigNumber, BigNumber":SF,"SparseMatrix, SparseMatrix":function(d,h){return u(d,h,this,!1)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,h){return a(d,h,this,!1)},"DenseMatrix, DenseMatrix":function(d,h){return f(d,h,this)},"Array, Array":function(d,h){return this(t(d),t(h)).valueOf()},"Array, Matrix":function(d,h){return this(t(d),h)},"Matrix, Array":function(d,h){return this(d,t(h))},"SparseMatrix, number | BigNumber":function(d,h){return n(h,0)?d.clone():l(d,h,this,!1)},"DenseMatrix, number | BigNumber":function(d,h){return n(h,0)?d.clone():p(d,h,this,!1)},"number | BigNumber, SparseMatrix":function(d,h){return n(d,0)?i(h.size(),h.storage()):c(h,d,this,!0)},"number | BigNumber, DenseMatrix":function(d,h){return n(d,0)?i(h.size(),h.storage()):p(h,d,this,!0)},"Array, number | BigNumber":function(d,h){return this(t(d),h).valueOf()},"number | BigNumber, Array":function(d,h){return this(d,t(h)).valueOf()}})})});var zz,ade,_N,Rz=g(()=>{Au();fo();$n();Er();er();ns();qs();Jd();j();vt();zz="rightArithShift",ade=["typed","matrix","equalScalar","zeros","DenseMatrix"],_N=I(zz,ade,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:o}=r,a=ui({typed:e}),s=ln({typed:e,equalScalar:n}),u=el({typed:e,equalScalar:n}),c=zi({typed:e,DenseMatrix:o}),l=nr({typed:e,equalScalar:n}),f=xt({typed:e}),p=ct({typed:e});return e(zz,{"number, number":t1,"BigNumber, BigNumber":AF,"SparseMatrix, SparseMatrix":function(d,h){return u(d,h,this,!1)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,h){return a(d,h,this,!1)},"DenseMatrix, DenseMatrix":function(d,h){return f(d,h,this)},"Array, Array":function(d,h){return this(t(d),t(h)).valueOf()},"Array, Matrix":function(d,h){return this(t(d),h)},"Matrix, Array":function(d,h){return this(d,t(h))},"SparseMatrix, number | BigNumber":function(d,h){return n(h,0)?d.clone():l(d,h,this,!1)},"DenseMatrix, number | BigNumber":function(d,h){return n(h,0)?d.clone():p(d,h,this,!1)},"number | BigNumber, SparseMatrix":function(d,h){return n(d,0)?i(h.size(),h.storage()):c(h,d,this,!0)},"number | BigNumber, DenseMatrix":function(d,h){return n(d,0)?i(h.size(),h.storage()):p(h,d,this,!0)},"Array, number | BigNumber":function(d,h){return this(t(d),h).valueOf()},"number | BigNumber, Array":function(d,h){return this(d,t(h)).valueOf()}})})});var Lz,sde,FN,qz=g(()=>{fo();$n();Er();er();ns();qs();Jd();j();vt();Lz="rightLogShift",sde=["typed","matrix","equalScalar","zeros","DenseMatrix"],FN=I(Lz,sde,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:o}=r,a=ui({typed:e}),s=ln({typed:e,equalScalar:n}),u=el({typed:e,equalScalar:n}),c=zi({typed:e,DenseMatrix:o}),l=nr({typed:e,equalScalar:n}),f=xt({typed:e}),p=ct({typed:e});return e(Lz,{"number, number":r1,"SparseMatrix, SparseMatrix":function(d,h){return u(d,h,this,!1)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,h){return a(d,h,this,!1)},"DenseMatrix, DenseMatrix":function(d,h){return f(d,h,this)},"Array, Array":function(d,h){return this(t(d),t(h)).valueOf()},"Array, Matrix":function(d,h){return this(t(d),h)},"Matrix, Array":function(d,h){return this(d,t(h))},"SparseMatrix, number | BigNumber":function(d,h){return n(h,0)?d.clone():l(d,h,this,!1)},"DenseMatrix, number | BigNumber":function(d,h){return n(h,0)?d.clone():p(d,h,this,!1)},"number | BigNumber, SparseMatrix":function(d,h){return n(d,0)?i(h.size(),h.storage()):c(h,d,this,!0)},"number | BigNumber, DenseMatrix":function(d,h){return n(d,0)?i(h.size(),h.storage()):p(h,d,this,!0)},"Array, number | BigNumber":function(d,h){return this(t(d),h).valueOf()},"number | BigNumber, Array":function(d,h){return this(d,t(h)).valueOf()}})})});var Pz,ude,BN,$z=g(()=>{fo();$n();Er();er();lp();j();vt();Pz="and",ude=["typed","matrix","equalScalar","zeros","not"],BN=I(Pz,ude,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:o}=r,a=ln({typed:e,equalScalar:n}),s=Ps({typed:e,equalScalar:n}),u=nr({typed:e,equalScalar:n}),c=xt({typed:e}),l=ct({typed:e});return e(Pz,{"number, number":c1,"Complex, Complex":function(p,m){return(p.re!==0||p.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(p,m){return!p.isZero()&&!m.isZero()&&!p.isNaN()&&!m.isNaN()},"Unit, Unit":function(p,m){return this(p.value||0,m.value||0)},"SparseMatrix, SparseMatrix":function(p,m){return s(p,m,this,!1)},"SparseMatrix, DenseMatrix":function(p,m){return a(m,p,this,!0)},"DenseMatrix, SparseMatrix":function(p,m){return a(p,m,this,!1)},"DenseMatrix, DenseMatrix":function(p,m){return c(p,m,this)},"Array, Array":function(p,m){return this(t(p),t(m)).valueOf()},"Array, Matrix":function(p,m){return this(t(p),m)},"Matrix, Array":function(p,m){return this(p,t(m))},"SparseMatrix, any":function(p,m){return o(m)?i(p.size(),p.storage()):u(p,m,this,!1)},"DenseMatrix, any":function(p,m){return o(m)?i(p.size(),p.storage()):l(p,m,this,!1)},"any, SparseMatrix":function(p,m){return o(p)?i(p.size(),p.storage()):u(m,p,this,!0)},"any, DenseMatrix":function(p,m){return o(p)?i(p.size(),p.storage()):l(m,p,this,!0)},"Array, any":function(p,m){return this(t(p),m).valueOf()},"any, Array":function(p,m){return this(p,t(m)).valueOf()}})})});var Uz,cde,zN,Gz=g(()=>{rs();Rt();j();ci();li();er();Er();fp();Uz="compare",cde=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],zN=I(Uz,cde,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:o,Fraction:a,DenseMatrix:s}=r,u=Nr({typed:e}),c=$s({typed:e,equalScalar:n}),l=Sr({typed:e,DenseMatrix:s}),f=xt({typed:e}),p=ct({typed:e});return e(Uz,{"boolean, boolean":function(d,h){return d===h?0:d>h?1:-1},"number, number":function(d,h){return cn(d,h,t.epsilon)?0:d>h?1:-1},"BigNumber, BigNumber":function(d,h){return Pn(d,h,t.epsilon)?new o(0):new o(d.cmp(h))},"Fraction, Fraction":function(d,h){return new a(d.compare(h))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(d,h){if(!d.equalBase(h))throw new Error("Cannot compare units with different base");return this(d.value,h.value)},"SparseMatrix, SparseMatrix":function(d,h){return c(d,h,this)},"SparseMatrix, DenseMatrix":function(d,h){return u(h,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,h){return u(d,h,this,!1)},"DenseMatrix, DenseMatrix":function(d,h){return f(d,h,this)},"Array, Array":function(d,h){return this(i(d),i(h)).valueOf()},"Array, Matrix":function(d,h){return this(i(d),h)},"Matrix, Array":function(d,h){return this(d,i(h))},"SparseMatrix, any":function(d,h){return l(d,h,this,!1)},"DenseMatrix, any":function(d,h){return p(d,h,this,!1)},"any, SparseMatrix":function(d,h){return l(h,d,this,!0)},"any, DenseMatrix":function(d,h){return p(h,d,this,!0)},"Array, any":function(d,h){return p(i(d),h,this,!1).valueOf()},"any, Array":function(d,h){return p(i(h),d,this,!0).valueOf()}})})});var Wz=Re((l4e,Vz)=>{Vz.exports=function r(e,t){"use strict";var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,s=/^0/,u=function(v){return r.insensitive&&(""+v).toLowerCase()||""+v},c=u(e).replace(i,"")||"",l=u(t).replace(i,"")||"",f=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(c.match(a),16)||f.length!==1&&c.match(o)&&Date.parse(c),d=parseInt(l.match(a),16)||m&&l.match(o)&&Date.parse(l)||null,h,x;if(d){if(m<d)return-1;if(m>d)return 1}for(var y=0,N=Math.max(f.length,p.length);y<N;y++){if(h=!(f[y]||"").match(s)&&parseFloat(f[y])||f[y]||0,x=!(p[y]||"").match(s)&&parseFloat(p[y])||p[y]||0,isNaN(h)!==isNaN(x))return isNaN(h)?1:-1;if(typeof h!=typeof x&&(h+="",x+=""),h<x)return-1;if(h>x)return 1}return 0}});function fde(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var Eu,Hz,lde,RN,Kz=g(()=>{Eu=Si(Wz(),1);Je();j();Hz="compareNatural",lde=["typed","compare"],RN=I(Hz,lde,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(Hz,{"any, any":function(u,c){var l=Gt(u),f=Gt(c),p;if((l==="number"||l==="BigNumber"||l==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return p=t(u,c),p.toString()!=="0"?p>0?1:-1:(0,Eu.default)(l,f);if(l==="Array"||l==="Matrix"||f==="Array"||f==="Matrix")return p=i(this,u,c),p!==0?p:(0,Eu.default)(l,f);if(l!==f)return(0,Eu.default)(l,f);if(l==="Complex")return fde(u,c);if(l==="Unit")return u.equalBase(c)?this(u.value,c.value):o(this,u.formatUnits(),c.formatUnits());if(l==="boolean")return n(u,c);if(l==="string")return(0,Eu.default)(u,c);if(l==="Object")return a(this,u,c);if(l==="null"||l==="undefined")return 0;throw new TypeError('Unsupported type of value "'+l+'"')}});function i(s,u,c){return Vo(u)&&Vo(c)?o(s,u.toJSON().values,c.toJSON().values):Vo(u)?i(s,u.toArray(),c):Vo(c)?i(s,u,c.toArray()):xu(u)?i(s,u.toJSON().data,c):xu(c)?i(s,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?o(s,u,c):i(s,u,[c]):i(s,[u],c)}function o(s,u,c){for(var l=0,f=Math.min(u.length,c.length);l<f;l++){var p=s(u[l],c[l]);if(p!==0)return p}return u.length>c.length?1:u.length<c.length?-1:0}function a(s,u,c){var l=Object.keys(u),f=Object.keys(c);l.sort(Eu.default),f.sort(Eu.default);var p=o(s,l,f);if(p!==0)return p;for(var m=0;m<l.length;m++){var d=s(u[l[m]],c[f[m]]);if(d!==0)return d}return 0}})});var jz,pde,LN,Zz=g(()=>{Fr();j();er();Er();jz="compareText",pde=["typed","matrix"],LN=I(jz,pde,r=>{var{typed:e,matrix:t}=r,n=xt({typed:e}),i=ct({typed:e});return e(jz,{"any, any":wu,"DenseMatrix, DenseMatrix":function(a,s){return n(a,s,wu)},"Array, Array":function(a,s){return this(t(a),t(s)).valueOf()},"Array, Matrix":function(a,s){return this(t(a),s)},"Matrix, Array":function(a,s){return this(a,t(s))},"DenseMatrix, any":function(a,s){return i(a,s,wu,!1)},"any, DenseMatrix":function(a,s){return i(s,a,wu,!0)},"Array, any":function(a,s){return i(t(a),s,wu,!1).valueOf()},"any, Array":function(a,s){return i(t(s),a,wu,!0).valueOf()}})})});var Yd,mde,qN,M4e,Xz=g(()=>{j();ci();Zo();li();Er();er();Yd="equal",mde=["typed","matrix","equalScalar","DenseMatrix"],qN=I(Yd,mde,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i}=r,o=Nr({typed:e}),a=An({typed:e,DenseMatrix:i}),s=Sr({typed:e,DenseMatrix:i}),u=xt({typed:e}),c=ct({typed:e});return e(Yd,{"any, any":function(f,p){return f===null?p===null:p===null?f===null:f===void 0?p===void 0:p===void 0?f===void 0:n(f,p)},"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,n)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,n,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,n,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,n)},"Array, Array":function(f,p){return this(t(f),t(p)).valueOf()},"Array, Matrix":function(f,p){return this(t(f),p)},"Matrix, Array":function(f,p){return this(f,t(p))},"SparseMatrix, any":function(f,p){return s(f,p,n,!1)},"DenseMatrix, any":function(f,p){return c(f,p,n,!1)},"any, SparseMatrix":function(f,p){return s(p,f,n,!0)},"any, DenseMatrix":function(f,p){return c(p,f,n,!0)},"Array, any":function(f,p){return c(t(f),p,n,!1).valueOf()},"any, Array":function(f,p){return c(t(p),f,n,!0).valueOf()}})}),M4e=I(Yd,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Yd,{"any, any":function(i,o){return i===null?o===null:o===null?i===null:i===void 0?o===void 0:o===void 0?i===void 0:t(i,o)}})})});var Jz,hde,PN,Yz=g(()=>{j();Jz="equalText",hde=["typed","compareText","isZero"],PN=I(Jz,hde,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(Jz,{"any, any":function(o,a){return n(t(o,a))}})})});var Qz,dde,$N,eR=g(()=>{rs();Rt();j();ci();Zo();li();er();Er();Qz="smaller",dde=["typed","config","matrix","DenseMatrix"],$N=I(Qz,dde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i}=r,o=Nr({typed:e}),a=An({typed:e,DenseMatrix:i}),s=Sr({typed:e,DenseMatrix:i}),u=xt({typed:e}),c=ct({typed:e});return e(Qz,{"boolean, boolean":function(f,p){return f<p},"number, number":function(f,p){return f<p&&!cn(f,p,t.epsilon)},"BigNumber, BigNumber":function(f,p){return f.lt(p)&&!Pn(f,p,t.epsilon)},"Fraction, Fraction":function(f,p){return f.compare(p)===-1},"Complex, Complex":function(f,p){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(f,p){if(!f.equalBase(p))throw new Error("Cannot compare units with different base");return this(f.value,p.value)},"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,this)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,this,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,this,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,this)},"Array, Array":function(f,p){return this(n(f),n(p)).valueOf()},"Array, Matrix":function(f,p){return this(n(f),p)},"Matrix, Array":function(f,p){return this(f,n(p))},"SparseMatrix, any":function(f,p){return s(f,p,this,!1)},"DenseMatrix, any":function(f,p){return c(f,p,this,!1)},"any, SparseMatrix":function(f,p){return s(p,f,this,!0)},"any, DenseMatrix":function(f,p){return c(p,f,this,!0)},"Array, any":function(f,p){return c(n(f),p,this,!1).valueOf()},"any, Array":function(f,p){return c(n(p),f,this,!0).valueOf()}})})});var tR,gde,UN,rR=g(()=>{rs();Rt();j();ci();Zo();li();er();Er();tR="smallerEq",gde=["typed","config","matrix","DenseMatrix"],UN=I(tR,gde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i}=r,o=Nr({typed:e}),a=An({typed:e,DenseMatrix:i}),s=Sr({typed:e,DenseMatrix:i}),u=xt({typed:e}),c=ct({typed:e});return e(tR,{"boolean, boolean":function(f,p){return f<=p},"number, number":function(f,p){return f<=p||cn(f,p,t.epsilon)},"BigNumber, BigNumber":function(f,p){return f.lte(p)||Pn(f,p,t.epsilon)},"Fraction, Fraction":function(f,p){return f.compare(p)!==1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(f,p){if(!f.equalBase(p))throw new Error("Cannot compare units with different base");return this(f.value,p.value)},"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,this)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,this,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,this,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,this)},"Array, Array":function(f,p){return this(n(f),n(p)).valueOf()},"Array, Matrix":function(f,p){return this(n(f),p)},"Matrix, Array":function(f,p){return this(f,n(p))},"SparseMatrix, any":function(f,p){return s(f,p,this,!1)},"DenseMatrix, any":function(f,p){return c(f,p,this,!1)},"any, SparseMatrix":function(f,p){return s(p,f,this,!0)},"any, DenseMatrix":function(f,p){return c(p,f,this,!0)},"Array, any":function(f,p){return c(n(f),p,this,!1).valueOf()},"any, Array":function(f,p){return c(n(p),f,this,!0).valueOf()}})})});var nR,vde,GN,iR=g(()=>{rs();Rt();j();ci();Zo();li();er();Er();nR="larger",vde=["typed","config","matrix","DenseMatrix"],GN=I(nR,vde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i}=r,o=Nr({typed:e}),a=An({typed:e,DenseMatrix:i}),s=Sr({typed:e,DenseMatrix:i}),u=xt({typed:e}),c=ct({typed:e});return e(nR,{"boolean, boolean":function(f,p){return f>p},"number, number":function(f,p){return f>p&&!cn(f,p,t.epsilon)},"BigNumber, BigNumber":function(f,p){return f.gt(p)&&!Pn(f,p,t.epsilon)},"Fraction, Fraction":function(f,p){return f.compare(p)===1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(f,p){if(!f.equalBase(p))throw new Error("Cannot compare units with different base");return this(f.value,p.value)},"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,this)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,this,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,this,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,this)},"Array, Array":function(f,p){return this(n(f),n(p)).valueOf()},"Array, Matrix":function(f,p){return this(n(f),p)},"Matrix, Array":function(f,p){return this(f,n(p))},"SparseMatrix, any":function(f,p){return s(f,p,this,!1)},"DenseMatrix, any":function(f,p){return c(f,p,this,!1)},"any, SparseMatrix":function(f,p){return s(p,f,this,!0)},"any, DenseMatrix":function(f,p){return c(p,f,this,!0)},"Array, any":function(f,p){return c(n(f),p,this,!1).valueOf()},"any, Array":function(f,p){return c(n(p),f,this,!0).valueOf()}})})});var oR,xde,VN,aR=g(()=>{rs();Rt();j();ci();Zo();li();er();Er();oR="largerEq",xde=["typed","config","matrix","DenseMatrix"],VN=I(oR,xde,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i}=r,o=Nr({typed:e}),a=An({typed:e,DenseMatrix:i}),s=Sr({typed:e,DenseMatrix:i}),u=xt({typed:e}),c=ct({typed:e});return e(oR,{"boolean, boolean":function(f,p){return f>=p},"number, number":function(f,p){return f>=p||cn(f,p,t.epsilon)},"BigNumber, BigNumber":function(f,p){return f.gte(p)||Pn(f,p,t.epsilon)},"Fraction, Fraction":function(f,p){return f.compare(p)!==-1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(f,p){if(!f.equalBase(p))throw new Error("Cannot compare units with different base");return this(f.value,p.value)},"SparseMatrix, SparseMatrix":function(f,p){return a(f,p,this)},"SparseMatrix, DenseMatrix":function(f,p){return o(p,f,this,!0)},"DenseMatrix, SparseMatrix":function(f,p){return o(f,p,this,!1)},"DenseMatrix, DenseMatrix":function(f,p){return u(f,p,this)},"Array, Array":function(f,p){return this(n(f),n(p)).valueOf()},"Array, Matrix":function(f,p){return this(n(f),p)},"Matrix, Array":function(f,p){return this(f,n(p))},"SparseMatrix, any":function(f,p){return s(f,p,this,!1)},"DenseMatrix, any":function(f,p){return c(f,p,this,!1)},"any, SparseMatrix":function(f,p){return s(p,f,this,!0)},"any, DenseMatrix":function(f,p){return c(p,f,this,!0)},"Array, any":function(f,p){return c(n(f),p,this,!1).valueOf()},"any, Array":function(f,p){return c(n(p),f,this,!0).valueOf()}})})});var sR,yde,WN,uR=g(()=>{j();sR="deepEqual",yde=["typed","equal"],WN=I(sR,yde,r=>{var{typed:e,equal:t}=r;return e(sR,{"any, any":function(o,a){return n(o.valueOf(),a.valueOf())}});function n(i,o){if(Array.isArray(i))if(Array.isArray(o)){var a=i.length;if(a!==o.length)return!1;for(var s=0;s<a;s++)if(!n(i[s],o[s]))return!1;return!0}else return!1;else return Array.isArray(o)?!1:t(i,o)}})});var HN,bde,KN,yqe,cR=g(()=>{j();ci();Zo();li();er();Er();HN="unequal",bde=["typed","config","equalScalar","matrix","DenseMatrix"],KN=I(HN,bde,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:o}=r,a=Nr({typed:e}),s=An({typed:e,DenseMatrix:o}),u=Sr({typed:e,DenseMatrix:o}),c=xt({typed:e}),l=ct({typed:e});return e("unequal",{"any, any":function(m,d){return m===null?d!==null:d===null?m!==null:m===void 0?d!==void 0:d===void 0?m!==void 0:f(m,d)},"SparseMatrix, SparseMatrix":function(m,d){return s(m,d,f)},"SparseMatrix, DenseMatrix":function(m,d){return a(d,m,f,!0)},"DenseMatrix, SparseMatrix":function(m,d){return a(m,d,f,!1)},"DenseMatrix, DenseMatrix":function(m,d){return c(m,d,f)},"Array, Array":function(m,d){return this(i(m),i(d)).valueOf()},"Array, Matrix":function(m,d){return this(i(m),d)},"Matrix, Array":function(m,d){return this(m,i(d))},"SparseMatrix, any":function(m,d){return u(m,d,f,!1)},"DenseMatrix, any":function(m,d){return l(m,d,f,!1)},"any, SparseMatrix":function(m,d){return u(d,m,f,!0)},"any, DenseMatrix":function(m,d){return l(d,m,f,!0)},"Array, any":function(m,d){return l(i(m),d,f,!1).valueOf()},"any, Array":function(m,d){return l(i(d),m,f,!0).valueOf()}});function f(p,m){return!n(p,m)}}),yqe=I(HN,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(HN,{"any, any":function(i,o){return i===null?o!==null:o===null?i!==null:i===void 0?o!==void 0:o===void 0?i!==void 0:!t(i,o)}})})});var lR,wde,jN,fR=g(()=>{Je();Rt();j();lR="partitionSelect",wde=["typed","isNumeric","isNaN","compare"],jN=I(lR,wde,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,o=i,a=(c,l)=>-i(c,l);return e(lR,{"Array | Matrix, number":function(l,f){return s(l,f,o)},"Array | Matrix, number, string":function(l,f,p){if(p==="asc")return s(l,f,o);if(p==="desc")return s(l,f,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(c,l,f){if(!Ze(l)||l<0)throw new Error("k must be a non-negative integer");if(ut(c)){var p=c.size();if(p.length>1)throw new Error("Only one dimensional matrices supported");return u(c.valueOf(),l,f)}if(Array.isArray(c))return u(c,l,f)}function u(c,l,f){if(l>=c.length)throw new Error("k out of bounds");for(var p=0;p<c.length;p++)if(t(c[p])&&n(c[p]))return c[p];for(var m=0,d=c.length-1;m<d;){for(var h=m,x=d,y=c[Math.floor(Math.random()*(d-m+1))+m];h<x;)if(f(c[h],y)>=0){var N=c[x];c[x]=c[h],c[h]=N,--x}else++h;f(c[h],y)>0&&--h,l<=h?d=h:m=h+1}return c[l]}})});var pR,Nde,ZN,mR=g(()=>{Nt();j();pR="sort",Nde=["typed","matrix","compare","compareNatural"],ZN=I(pR,Nde,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,o=n,a=(l,f)=>-n(l,f);return e(pR,{Array:function(f){return u(f),f.sort(o)},Matrix:function(f){return c(f),t(f.toArray().sort(o),f.storage())},"Array, function":function(f,p){return u(f),f.sort(p)},"Matrix, function":function(f,p){return c(f),t(f.toArray().sort(p),f.storage())},"Array, string":function(f,p){return u(f),f.sort(s(p))},"Matrix, string":function(f,p){return c(f),t(f.toArray().sort(s(p)),f.storage())}});function s(l){if(l==="asc")return o;if(l==="desc")return a;if(l==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function u(l){if(Et(l).length!==1)throw new Error("One dimensional array expected")}function c(l){if(l.size().length!==1)throw new Error("One dimensional matrix expected")}})});var hR,Sde,bp,XN=g(()=>{nt();j();as();hR="max",Sde=["typed","config","numeric","larger"],bp=I(hR,Sde,r=>{var{typed:e,config:t,numeric:n,larger:i}=r;return e(hR,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(u,c){return Ls(u,c.valueOf(),o)},"...":function(u){if(Ma(u))throw new TypeError("Scalar values expected in function max");return a(u)}});function o(s,u){try{return i(s,u)?s:u}catch(c){throw vn(c,"max",u)}}function a(s){var u;if(ai(s,function(c){try{isNaN(c)&&typeof c=="number"?u=NaN:(u===void 0||i(c,u))&&(u=c)}catch(l){throw vn(l,"max",c)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,t.number)),u}})});var dR,Ade,wp,JN=g(()=>{nt();j();as();dR="min",Ade=["typed","config","numeric","smaller"],wp=I(dR,Ade,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r;return e(dR,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(u,c){return Ls(u,c.valueOf(),o)},"...":function(u){if(Ma(u))throw new TypeError("Scalar values expected in function min");return a(u)}});function o(s,u){try{return i(s,u)?s:u}catch(c){throw vn(c,"min",u)}}function a(s){var u;if(ai(s,function(c){try{isNaN(c)&&typeof c=="number"?u=NaN:(u===void 0||i(c,u))&&(u=c)}catch(l){throw vn(l,"min",c)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,t.number)),u}})});var Mde,Dde,YN,gR=g(()=>{Je();Ht();j();Mde="ImmutableDenseMatrix",Dde=["smaller","DenseMatrix"],YN=I(Mde,Dde,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!On(o))throw new Error("Invalid datatype: "+o);if(ut(i)||Xt(i)){var a=new t(i,o);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&Xt(i.data)&&Xt(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Gt(i)+")");this._data=[],this._size=[0],this._datatype=o,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var o=t.prototype.subset.call(this,i);return ut(o)?new n({data:o._data,size:o._size,datatype:o._datatype}):o}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:at(this._data),size:at(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(o){(i===null||e(o,i))&&(i=o)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(o){(i===null||e(i,o))&&(i=o)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0})});var Ede,Tde,QN,vR=g(()=>{Je();Ht();Rt();j();Ede="Index",Tde=["ImmutableDenseMatrix"],QN=I(Ede,Tde,r=>{var{ImmutableDenseMatrix:e}=r;function t(i){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var o=0,a=arguments.length;o<a;o++){var s=arguments[o];if(yu(s))this._dimensions.push(s),this._isScalar=!1;else if(Array.isArray(s)||ut(s)){var u=n(s.valueOf());this._dimensions.push(u);var c=u.size();(c.length!==1||c[0]!==1)&&(this._isScalar=!1)}else if(typeof s=="number")this._dimensions.push(n([s]));else if(typeof s=="string")this._dimensions.push(s);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range")}}t.prototype.type="Index",t.prototype.isIndex=!0;function n(i){for(var o=0,a=i.length;o<a;o++)if(typeof i[o]!="number"||!Ze(i[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(i)}return t.prototype.clone=function(){var i=new t;return i._dimensions=at(this._dimensions),i._isScalar=this._isScalar,i},t.create=function(i){var o=new t;return t.apply(o,i),o},t.prototype.size=function(){for(var i=[],o=0,a=this._dimensions.length;o<a;o++){var s=this._dimensions[o];i[o]=typeof s=="string"?1:s.size()[0]}return i},t.prototype.max=function(){for(var i=[],o=0,a=this._dimensions.length;o<a;o++){var s=this._dimensions[o];i[o]=typeof s=="string"?s:s.max()}return i},t.prototype.min=function(){for(var i=[],o=0,a=this._dimensions.length;o<a;o++){var s=this._dimensions[o];i[o]=typeof s=="string"?s:s.min()}return i},t.prototype.forEach=function(i){for(var o=0,a=this._dimensions.length;o<a;o++)i(this._dimensions[o],o,this)},t.prototype.dimension=function(i){return this._dimensions[i]||null},t.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},t.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},t.prototype.isScalar=function(){return this._isScalar},t.prototype.toArray=function(){for(var i=[],o=0,a=this._dimensions.length;o<a;o++){var s=this._dimensions[o];i.push(typeof s=="string"?s:s.toArray())}return i},t.prototype.valueOf=t.prototype.toArray,t.prototype.toString=function(){for(var i=[],o=0,a=this._dimensions.length;o<a;o++){var s=this._dimensions[o];typeof s=="string"?i.push(JSON.stringify(s)):i.push(s.toString())}return"["+i.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},t.fromJSON=function(i){return t.create(i.dimensions)},t},{isClass:!0})});var Cde,Ide,eS,xR=g(()=>{j();Cde="FibonacciHeap",Ide=["smaller","larger"],eS=I(Cde,Ide,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(l,f){var p={key:l,value:f,degree:0};if(this._minimum){var m=this._minimum;p.left=m,p.right=m.right,m.right=p,p.right.left=p,e(l,m.key)&&(this._minimum=p)}else p.left=p,p.right=p,this._minimum=p;return this._size++,p},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var l=this._minimum;if(l===null)return l;for(var f=this._minimum,p=l.degree,m=l.child;p>0;){var d=m.right;m.left.right=m.right,m.right.left=m.left,m.left=f,m.right=f.right,f.right=m,m.right.left=m,m.parent=null,m=d,p--}return l.left.right=l.right,l.right.left=l.left,l===l.right?f=null:(f=l.right,f=c(f,this._size)),this._size--,this._minimum=f,l},i.prototype.remove=function(l){this._minimum=o(this._minimum,l,-1),this.extractMinimum()};function o(l,f,p){f.key=p;var m=f.parent;return m&&e(f.key,m.key)&&(a(l,f,m),s(l,m)),e(f.key,l.key)&&(l=f),l}function a(l,f,p){f.left.right=f.right,f.right.left=f.left,p.degree--,p.child===f&&(p.child=f.right),p.degree===0&&(p.child=null),f.left=l,f.right=l.right,l.right=f,f.right.left=f,f.parent=null,f.mark=!1}function s(l,f){var p=f.parent;!p||(f.mark?(a(l,f,p),s(p)):f.mark=!0)}var u=function(f,p){f.left.right=f.right,f.right.left=f.left,f.parent=p,p.child?(f.left=p.child,f.right=p.child.right,p.child.right=f,f.right.left=f):(p.child=f,f.right=f,f.left=f),p.degree++,f.mark=!1};function c(l,f){var p=Math.floor(Math.log(f)*n)+1,m=new Array(p),d=0,h=l;if(h)for(d++,h=h.right;h!==l;)d++,h=h.right;for(var x;d>0;){for(var y=h.degree,N=h.right;x=m[y],!!x;){if(t(h.key,x.key)){var v=x;x=h,h=v}u(x,h),m[y]=null,y++}m[y]=h,h=N,d--}l=null;for(var w=0;w<p;w++)x=m[w],x&&(l?(x.left.right=x.right,x.right.left=x.left,x.left=l,x.right=l.right,l.right=x,x.right.left=x,e(x.key,l.key)&&(l=x)):l=x);return l}return i},{isClass:!0})});var kde,Ode,tS,yR=g(()=>{j();kde="Spa",Ode=["addScalar","equalScalar","FibonacciHeap"],tS=I(kde,Ode,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(o,a){if(this._values[o])this._values[o].value=a;else{var s=this._heap.insert(o,a);this._values[o]=s}},i.prototype.get=function(o){var a=this._values[o];return a?a.value:0},i.prototype.accumulate=function(o,a){var s=this._values[o];s?s.value=e(s.value,a):(s=this._heap.insert(o,a),this._values[o]=s)},i.prototype.forEach=function(o,a,s){var u=this._heap,c=this._values,l=[],f=u.extractMinimum();for(f&&l.push(f);f&&f.key<=a;)f.key>=o&&(t(f.value,0)||s(f.key,f.value,this)),f=u.extractMinimum(),f&&l.push(f);for(var p=0;p<l.length;p++){var m=l[p];f=u.insert(m.key,m.value),c[f.key]=f}},i.prototype.swap=function(o,a){var s=this._values[o],u=this._values[a];if(!s&&u)s=this._heap.insert(o,u.value),this._heap.remove(u),this._values[o]=s,this._values[a]=void 0;else if(s&&!u)u=this._heap.insert(a,s.value),this._heap.remove(s),this._values[a]=u,this._values[o]=void 0;else if(s&&u){var c=s.value;s.value=u.value,u.value=c}},i},{isClass:!0})});function Qd(r){return r[0].precision}var bR,wR,Np,NR,rS=g(()=>{is();bR=Mu(function(r){return new r(1).exp()},{hasher:Qd}),wR=Mu(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:Qd}),Np=Mu(function(r){return r.acos(-1)},{hasher:Qd}),NR=Mu(function(r){return Np(r).times(2)},{hasher:Qd})});function SR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(t),!0).forEach(function(n){yp(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):SR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var _de,Fde,iS,AR=g(()=>{Rc();wN();Je();j();is();Fr();Ht();rS();_de="Unit",Fde=["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],iS=I(_de,Fde,r=>{var{on:e,config:t,addScalar:n,subtract:i,multiplyScalar:o,divideScalar:a,pow:s,abs:u,fix:c,round:l,equal:f,isNumeric:p,format:m,number:d,Complex:h,BigNumber:x,Fraction:y}=r,N=d;function v(Z,ie){if(!(this instanceof v))throw new Error("Constructor must be called with the new operator");if(!(Z==null||p(Z)||_i(Z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(ie!==void 0&&(typeof ie!="string"||ie===""))throw new TypeError("Second parameter in Unit constructor must be a string");if(ie!==void 0){var G=v.parse(ie);this.units=G.units,this.dimensions=G.dimensions}else{this.units=[{unit:Ne,prefix:z.NONE,power:0}],this.dimensions=[];for(var X=0;X<Q.length;X++)this.dimensions[X]=0}this.value=Z!=null?this._normalize(Z):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}v.prototype.type="Unit",v.prototype.isUnit=!0;var w,S,b;function E(){for(;b===" "||b==="	";)A()}function M(Z){return Z>="0"&&Z<="9"||Z==="."}function D(Z){return Z>="0"&&Z<="9"}function A(){S++,b=w.charAt(S)}function k(Z){S=Z,b=w.charAt(S)}function T(){var Z="",ie=S;if(b==="+"?A():b==="-"&&(Z+=b,A()),!M(b))return k(ie),null;if(b==="."){if(Z+=b,A(),!D(b))return k(ie),null}else{for(;D(b);)Z+=b,A();b==="."&&(Z+=b,A())}for(;D(b);)Z+=b,A();if(b==="E"||b==="e"){var G="",X=S;if(G+=b,A(),(b==="+"||b==="-")&&(G+=b,A()),!D(b))return k(X),Z;for(Z=Z+G;D(b);)Z+=b,A()}return Z}function L(){for(var Z="";D(b)||v.isValidAlpha(b);)Z+=b,A();var ie=Z.charAt(0);return v.isValidAlpha(ie)?Z:null}function $(Z){return b===Z?(A(),Z):null}v.parse=function(Z,ie){if(ie=ie||{},w=Z,S=-1,b="",typeof w!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var G=new v;G.units=[];var X=1,le=!1;A(),E();var se=T(),Ae=null;if(se){if(t.number==="BigNumber")Ae=new x(se);else if(t.number==="Fraction")try{Ae=new y(se)}catch{Ae=parseFloat(se)}else Ae=parseFloat(se);E(),$("*")?(X=1,le=!0):$("/")&&(X=-1,le=!0)}for(var ze=[],We=1;;){for(E();b==="(";)ze.push(X),We*=X,X=1,A(),E();var Ve=void 0;if(b){var Ke=b;if(Ve=L(),Ve===null)throw new SyntaxError('Unexpected "'+Ke+'" in "'+w+'" at index '+S.toString())}else break;var ft=K(Ve);if(ft===null)throw new SyntaxError('Unit "'+Ve+'" not found.');var or=X*We;if(E(),$("^")){E();var en=T();if(en===null)throw new SyntaxError('In "'+Z+'", "^" must be followed by a floating-point number');or*=en}G.units.push({unit:ft.unit,prefix:ft.prefix,power:or});for(var sn=0;sn<Q.length;sn++)G.dimensions[sn]+=(ft.unit.dimensions[sn]||0)*or;for(E();b===")";){if(ze.length===0)throw new SyntaxError('Unmatched ")" in "'+w+'" at index '+S.toString());We/=ze.pop(),A(),E()}if(le=!1,$("*")?(X=1,le=!0):$("/")?(X=-1,le=!0):X=1,ft.unit.base){var Oi=ft.unit.base.key;ne.auto[Oi]={unit:ft.unit,prefix:ft.prefix}}}if(E(),b)throw new SyntaxError('Could not parse: "'+Z+'"');if(le)throw new SyntaxError('Trailing characters: "'+Z+'"');if(ze.length!==0)throw new SyntaxError('Unmatched "(" in "'+w+'"');if(G.units.length===0&&!ie.allowNoUnits)throw new SyntaxError('"'+Z+'" contains no units');return G.value=Ae!==void 0?G._normalize(Ae):null,G},v.prototype.clone=function(){var Z=new v;Z.fixPrefix=this.fixPrefix,Z.skipAutomaticSimplification=this.skipAutomaticSimplification,Z.value=at(this.value),Z.dimensions=this.dimensions.slice(0),Z.units=[];for(var ie=0;ie<this.units.length;ie++){Z.units[ie]={};for(var G in this.units[ie])ot(this.units[ie],G)&&(Z.units[ie][G]=this.units[ie][G])}return Z},v.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},v.prototype._normalize=function(Z){var ie,G,X,le,se;if(Z==null||this.units.length===0)return Z;if(this._isDerived()){var Ae=Z;se=v._getNumberConverter(Gt(Z));for(var ze=0;ze<this.units.length;ze++)ie=se(this.units[ze].unit.value),le=se(this.units[ze].prefix.value),X=se(this.units[ze].power),Ae=o(Ae,s(o(ie,le),X));return Ae}else return se=v._getNumberConverter(Gt(Z)),ie=se(this.units[0].unit.value),G=se(this.units[0].unit.offset),le=se(this.units[0].prefix.value),o(n(Z,G),o(ie,le))},v.prototype._denormalize=function(Z,ie){var G,X,le,se,Ae;if(Z==null||this.units.length===0)return Z;if(this._isDerived()){var ze=Z;Ae=v._getNumberConverter(Gt(Z));for(var We=0;We<this.units.length;We++)G=Ae(this.units[We].unit.value),se=Ae(this.units[We].prefix.value),le=Ae(this.units[We].power),ze=a(ze,s(o(G,se),le));return ze}else return Ae=v._getNumberConverter(Gt(Z)),G=Ae(this.units[0].unit.value),se=Ae(this.units[0].prefix.value),X=Ae(this.units[0].unit.offset),ie==null?i(a(a(Z,G),se),X):i(a(a(Z,G),ie),X)};var K=Mu(Z=>{if(ot(Y,Z)){var ie=Y[Z],G=ie.prefixes[""];return{unit:ie,prefix:G}}for(var X in Y)if(ot(Y,X)&&iO(Z,X)){var le=Y[X],se=Z.length-X.length,Ae=Z.substring(0,se),ze=ot(le.prefixes,Ae)?le.prefixes[Ae]:void 0;if(ze!==void 0)return{unit:le,prefix:ze}}return null},{hasher:Z=>Z[0],limit:100});v.isValuelessUnit=function(Z){return K(Z)!==null},v.prototype.hasBase=function(Z){if(typeof Z=="string"&&(Z=_[Z]),!Z)return!1;for(var ie=0;ie<Q.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(Z.dimensions[ie]||0))>1e-12)return!1;return!0},v.prototype.equalBase=function(Z){for(var ie=0;ie<Q.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(Z.dimensions[ie]||0))>1e-12)return!1;return!0},v.prototype.equals=function(Z){return this.equalBase(Z)&&f(this.value,Z.value)},v.prototype.multiply=function(Z){for(var ie=this.clone(),G=0;G<Q.length;G++)ie.dimensions[G]=(this.dimensions[G]||0)+(Z.dimensions[G]||0);for(var X=0;X<Z.units.length;X++){var le=nS({},Z.units[X]);ie.units.push(le)}if(this.value!==null||Z.value!==null){var se=this.value===null?this._normalize(1):this.value,Ae=Z.value===null?Z._normalize(1):Z.value;ie.value=o(se,Ae)}else ie.value=null;return ie.skipAutomaticSimplification=!1,V(ie)},v.prototype.divide=function(Z){for(var ie=this.clone(),G=0;G<Q.length;G++)ie.dimensions[G]=(this.dimensions[G]||0)-(Z.dimensions[G]||0);for(var X=0;X<Z.units.length;X++){var le=nS(nS({},Z.units[X]),{},{power:-Z.units[X].power});ie.units.push(le)}if(this.value!==null||Z.value!==null){var se=this.value===null?this._normalize(1):this.value,Ae=Z.value===null?Z._normalize(1):Z.value;ie.value=a(se,Ae)}else ie.value=null;return ie.skipAutomaticSimplification=!1,V(ie)},v.prototype.pow=function(Z){for(var ie=this.clone(),G=0;G<Q.length;G++)ie.dimensions[G]=(this.dimensions[G]||0)*Z;for(var X=0;X<ie.units.length;X++)ie.units[X].power*=Z;return ie.value!==null?ie.value=s(ie.value,Z):ie.value=null,ie.skipAutomaticSimplification=!1,V(ie)};function V(Z){return Z.equalBase(_.NONE)&&Z.value!==null&&!t.predictable?Z.value:Z}v.prototype.abs=function(){var Z=this.clone();Z.value=Z.value!==null?u(Z.value):null;for(var ie in Z.units)(Z.units[ie].unit.name==="VA"||Z.units[ie].unit.name==="VAR")&&(Z.units[ie].unit=Y.W);return Z},v.prototype.to=function(Z){var ie,G=this.value===null?this._normalize(1):this.value;if(typeof Z=="string"){if(ie=v.parse(Z),!this.equalBase(ie))throw new Error("Units do not match ('".concat(ie.toString(),"' != '").concat(this.toString(),"')"));if(ie.value!==null)throw new Error("Cannot convert to a unit with a value");return ie.value=at(G),ie.fixPrefix=!0,ie.skipAutomaticSimplification=!0,ie}else if(Qa(Z)){if(!this.equalBase(Z))throw new Error("Units do not match ('".concat(Z.toString(),"' != '").concat(this.toString(),"')"));if(Z.value!==null)throw new Error("Cannot convert to a unit with a value");return ie=Z.clone(),ie.value=at(G),ie.fixPrefix=!0,ie.skipAutomaticSimplification=!0,ie}else throw new Error("String or Unit expected as parameter")},v.prototype.toNumber=function(Z){return N(this.toNumeric(Z))},v.prototype.toNumeric=function(Z){var ie;return Z?ie=this.to(Z):ie=this.clone(),ie._isDerived()||ie.units.length===0?ie._denormalize(ie.value):ie._denormalize(ie.value,ie.units[0].prefix.value)},v.prototype.toString=function(){return this.format()},v.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},v.fromJSON=function(Z){var ie=new v(Z.value,Z.unit);return ie.fixPrefix=Z.fixPrefix||!1,ie},v.prototype.valueOf=v.prototype.toString,v.prototype.simplify=function(){var Z=this.clone(),ie=[],G;for(var X in ge)if(ot(ge,X)&&Z.hasBase(_[X])){G=X;break}if(G==="NONE")Z.units=[];else{var le;if(G&&ot(ge,G)&&(le=ge[G]),le)Z.units=[{unit:le.unit,prefix:le.prefix,power:1}];else{for(var se=!1,Ae=0;Ae<Q.length;Ae++){var ze=Q[Ae];Math.abs(Z.dimensions[Ae]||0)>1e-12&&(ot(ge,ze)?ie.push({unit:ge[ze].unit,prefix:ge[ze].prefix,power:Z.dimensions[Ae]||0}):se=!0)}ie.length<Z.units.length&&!se&&(Z.units=ie)}}return Z},v.prototype.toSI=function(){for(var Z=this.clone(),ie=[],G=0;G<Q.length;G++){var X=Q[G];if(Math.abs(Z.dimensions[G]||0)>1e-12)if(ot(ne.si,X))ie.push({unit:ne.si[X].unit,prefix:ne.si[X].prefix,power:Z.dimensions[G]||0});else throw new Error("Cannot express custom unit "+X+" in SI units")}return Z.units=ie,Z.fixPrefix=!0,Z.skipAutomaticSimplification=!0,Z},v.prototype.formatUnits=function(){for(var Z="",ie="",G=0,X=0,le=0;le<this.units.length;le++)this.units[le].power>0?(G++,Z+=" "+this.units[le].prefix.name+this.units[le].unit.name,Math.abs(this.units[le].power-1)>1e-15&&(Z+="^"+this.units[le].power)):this.units[le].power<0&&X++;if(X>0)for(var se=0;se<this.units.length;se++)this.units[se].power<0&&(G>0?(ie+=" "+this.units[se].prefix.name+this.units[se].unit.name,Math.abs(this.units[se].power+1)>1e-15&&(ie+="^"+-this.units[se].power)):(ie+=" "+this.units[se].prefix.name+this.units[se].unit.name,ie+="^"+this.units[se].power));Z=Z.substr(1),ie=ie.substr(1),G>1&&X>0&&(Z="("+Z+")"),X>1&&G>0&&(ie="("+ie+")");var Ae=Z;return G>0&&X>0&&(Ae+=" / "),Ae+=ie,Ae},v.prototype.format=function(Z){var ie=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),G=!1;typeof ie.value<"u"&&ie.value!==null&&_i(ie.value)&&(G=Math.abs(ie.value.re)<1e-14);for(var X in ie.units)ot(ie.units,X)&&ie.units[X].unit&&(ie.units[X].unit.name==="VA"&&G?ie.units[X].unit=Y.VAR:ie.units[X].unit.name==="VAR"&&!G&&(ie.units[X].unit=Y.VA));ie.units.length===1&&!ie.fixPrefix&&Math.abs(ie.units[0].power-Math.round(ie.units[0].power))<1e-14&&(ie.units[0].prefix=ie._bestPrefix());var le=ie._denormalize(ie.value),se=ie.value!==null?m(le,Z||{}):"",Ae=ie.formatUnits();return ie.value&&_i(ie.value)&&(se="("+se+")"),Ae.length>0&&se.length>0&&(se+=" "),se+=Ae,se},v.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var Z=this.value!==null?u(this.value):0,ie=u(this.units[0].unit.value),G=this.units[0].prefix;if(Z===0)return G;var X=this.units[0].power,le=Math.log(Z/Math.pow(G.value*ie,X))/Math.LN10-1.2;if(le>-2.200001&&le<1.800001)return G;le=Math.abs(le);var se=this.units[0].unit.prefixes;for(var Ae in se)if(ot(se,Ae)){var ze=se[Ae];if(ze.scientific){var We=Math.abs(Math.log(Z/Math.pow(ze.value*ie,X))/Math.LN10-1.2);(We<le||We===le&&ze.name.length<G.name.length)&&(G=ze,le=We)}}return G},v.prototype.splitUnit=function(Z){for(var ie=this.clone(),G=[],X=0;X<Z.length&&(ie=ie.to(Z[X]),X!==Z.length-1);X++){var le=ie.toNumeric(),se=l(le),Ae=void 0,ze=f(se,le);ze?Ae=se:Ae=c(ie.toNumeric());var We=new v(Ae,Z[X].toString());G.push(We),ie=i(ie,We)}for(var Ve=0,Ke=0;Ke<G.length;Ke++)Ve=n(Ve,G[Ke].value);return f(Ve,this.value)&&(ie.value=0),G.push(ie),G};var z={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};z.SHORTLONG=un({},z.SHORT,z.LONG),z.BINARY_SHORT=un({},z.BINARY_SHORT_SI,z.BINARY_SHORT_IEC),z.BINARY_LONG=un({},z.BINARY_LONG_SI,z.BINARY_LONG_IEC);var Q=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],_={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var te in _)ot(_,te)&&(_[te].key=te);var he={},Ne={name:"",base:he,value:1,offset:0,dimensions:Q.map(Z=>0)},Y={meter:{name:"meter",base:_.LENGTH,prefixes:z.LONG,value:1,offset:0},inch:{name:"inch",base:_.LENGTH,prefixes:z.NONE,value:.0254,offset:0},foot:{name:"foot",base:_.LENGTH,prefixes:z.NONE,value:.3048,offset:0},yard:{name:"yard",base:_.LENGTH,prefixes:z.NONE,value:.9144,offset:0},mile:{name:"mile",base:_.LENGTH,prefixes:z.NONE,value:1609.344,offset:0},link:{name:"link",base:_.LENGTH,prefixes:z.NONE,value:.201168,offset:0},rod:{name:"rod",base:_.LENGTH,prefixes:z.NONE,value:5.0292,offset:0},chain:{name:"chain",base:_.LENGTH,prefixes:z.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:_.LENGTH,prefixes:z.NONE,value:1e-10,offset:0},m:{name:"m",base:_.LENGTH,prefixes:z.SHORT,value:1,offset:0},in:{name:"in",base:_.LENGTH,prefixes:z.NONE,value:.0254,offset:0},ft:{name:"ft",base:_.LENGTH,prefixes:z.NONE,value:.3048,offset:0},yd:{name:"yd",base:_.LENGTH,prefixes:z.NONE,value:.9144,offset:0},mi:{name:"mi",base:_.LENGTH,prefixes:z.NONE,value:1609.344,offset:0},li:{name:"li",base:_.LENGTH,prefixes:z.NONE,value:.201168,offset:0},rd:{name:"rd",base:_.LENGTH,prefixes:z.NONE,value:5.02921,offset:0},ch:{name:"ch",base:_.LENGTH,prefixes:z.NONE,value:20.1168,offset:0},mil:{name:"mil",base:_.LENGTH,prefixes:z.NONE,value:254e-7,offset:0},m2:{name:"m2",base:_.SURFACE,prefixes:z.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:_.SURFACE,prefixes:z.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:_.SURFACE,prefixes:z.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:_.SURFACE,prefixes:z.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:_.SURFACE,prefixes:z.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:_.SURFACE,prefixes:z.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:_.SURFACE,prefixes:z.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:_.SURFACE,prefixes:z.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:_.SURFACE,prefixes:z.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:_.SURFACE,prefixes:z.NONE,value:1e4,offset:0},m3:{name:"m3",base:_.VOLUME,prefixes:z.CUBIC,value:1,offset:0},L:{name:"L",base:_.VOLUME,prefixes:z.SHORT,value:.001,offset:0},l:{name:"l",base:_.VOLUME,prefixes:z.SHORT,value:.001,offset:0},litre:{name:"litre",base:_.VOLUME,prefixes:z.LONG,value:.001,offset:0},cuin:{name:"cuin",base:_.VOLUME,prefixes:z.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:_.VOLUME,prefixes:z.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:_.VOLUME,prefixes:z.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:_.VOLUME,prefixes:z.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:_.VOLUME,prefixes:z.NONE,value:15e-6,offset:0},drop:{name:"drop",base:_.VOLUME,prefixes:z.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:_.VOLUME,prefixes:z.NONE,value:5e-8,offset:0},minim:{name:"minim",base:_.VOLUME,prefixes:z.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:_.VOLUME,prefixes:z.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:_.VOLUME,prefixes:z.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:_.VOLUME,prefixes:z.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:_.VOLUME,prefixes:z.NONE,value:1e-6,offset:0},cup:{name:"cup",base:_.VOLUME,prefixes:z.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:_.VOLUME,prefixes:z.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:_.VOLUME,prefixes:z.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:_.VOLUME,prefixes:z.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:_.VOLUME,prefixes:z.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:_.VOLUME,prefixes:z.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:_.VOLUME,prefixes:z.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:_.VOLUME,prefixes:z.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:_.VOLUME,prefixes:z.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:_.VOLUME,prefixes:z.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:_.VOLUME,prefixes:z.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:_.VOLUME,prefixes:z.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:_.VOLUME,prefixes:z.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:_.VOLUME,prefixes:z.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:_.VOLUME,prefixes:z.NONE,value:.1173478,offset:0},obl:{name:"obl",base:_.VOLUME,prefixes:z.NONE,value:.1589873,offset:0},g:{name:"g",base:_.MASS,prefixes:z.SHORT,value:.001,offset:0},gram:{name:"gram",base:_.MASS,prefixes:z.LONG,value:.001,offset:0},ton:{name:"ton",base:_.MASS,prefixes:z.SHORT,value:907.18474,offset:0},t:{name:"t",base:_.MASS,prefixes:z.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:_.MASS,prefixes:z.LONG,value:1e3,offset:0},grain:{name:"grain",base:_.MASS,prefixes:z.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:_.MASS,prefixes:z.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:_.MASS,prefixes:z.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:_.MASS,prefixes:z.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:_.MASS,prefixes:z.NONE,value:45.359237,offset:0},stick:{name:"stick",base:_.MASS,prefixes:z.NONE,value:.115,offset:0},stone:{name:"stone",base:_.MASS,prefixes:z.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:_.MASS,prefixes:z.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:_.MASS,prefixes:z.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:_.MASS,prefixes:z.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:_.MASS,prefixes:z.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:_.MASS,prefixes:z.NONE,value:45.359237,offset:0},s:{name:"s",base:_.TIME,prefixes:z.SHORT,value:1,offset:0},min:{name:"min",base:_.TIME,prefixes:z.NONE,value:60,offset:0},h:{name:"h",base:_.TIME,prefixes:z.NONE,value:3600,offset:0},second:{name:"second",base:_.TIME,prefixes:z.LONG,value:1,offset:0},sec:{name:"sec",base:_.TIME,prefixes:z.LONG,value:1,offset:0},minute:{name:"minute",base:_.TIME,prefixes:z.NONE,value:60,offset:0},hour:{name:"hour",base:_.TIME,prefixes:z.NONE,value:3600,offset:0},day:{name:"day",base:_.TIME,prefixes:z.NONE,value:86400,offset:0},week:{name:"week",base:_.TIME,prefixes:z.NONE,value:7*86400,offset:0},month:{name:"month",base:_.TIME,prefixes:z.NONE,value:2629800,offset:0},year:{name:"year",base:_.TIME,prefixes:z.NONE,value:31557600,offset:0},decade:{name:"decade",base:_.TIME,prefixes:z.NONE,value:315576e3,offset:0},century:{name:"century",base:_.TIME,prefixes:z.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:_.TIME,prefixes:z.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:_.FREQUENCY,prefixes:z.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:_.FREQUENCY,prefixes:z.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:_.ANGLE,prefixes:z.SHORT,value:1,offset:0},radian:{name:"radian",base:_.ANGLE,prefixes:z.LONG,value:1,offset:0},deg:{name:"deg",base:_.ANGLE,prefixes:z.SHORT,value:null,offset:0},degree:{name:"degree",base:_.ANGLE,prefixes:z.LONG,value:null,offset:0},grad:{name:"grad",base:_.ANGLE,prefixes:z.SHORT,value:null,offset:0},gradian:{name:"gradian",base:_.ANGLE,prefixes:z.LONG,value:null,offset:0},cycle:{name:"cycle",base:_.ANGLE,prefixes:z.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:_.ANGLE,prefixes:z.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:_.ANGLE,prefixes:z.NONE,value:null,offset:0},A:{name:"A",base:_.CURRENT,prefixes:z.SHORT,value:1,offset:0},ampere:{name:"ampere",base:_.CURRENT,prefixes:z.LONG,value:1,offset:0},K:{name:"K",base:_.TEMPERATURE,prefixes:z.NONE,value:1,offset:0},degC:{name:"degC",base:_.TEMPERATURE,prefixes:z.NONE,value:1,offset:273.15},degF:{name:"degF",base:_.TEMPERATURE,prefixes:z.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:_.TEMPERATURE,prefixes:z.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:_.TEMPERATURE,prefixes:z.NONE,value:1,offset:0},celsius:{name:"celsius",base:_.TEMPERATURE,prefixes:z.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:_.TEMPERATURE,prefixes:z.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:_.TEMPERATURE,prefixes:z.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:_.AMOUNT_OF_SUBSTANCE,prefixes:z.SHORT,value:1,offset:0},mole:{name:"mole",base:_.AMOUNT_OF_SUBSTANCE,prefixes:z.LONG,value:1,offset:0},cd:{name:"cd",base:_.LUMINOUS_INTENSITY,prefixes:z.SHORT,value:1,offset:0},candela:{name:"candela",base:_.LUMINOUS_INTENSITY,prefixes:z.LONG,value:1,offset:0},N:{name:"N",base:_.FORCE,prefixes:z.SHORT,value:1,offset:0},newton:{name:"newton",base:_.FORCE,prefixes:z.LONG,value:1,offset:0},dyn:{name:"dyn",base:_.FORCE,prefixes:z.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:_.FORCE,prefixes:z.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:_.FORCE,prefixes:z.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:_.FORCE,prefixes:z.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:_.FORCE,prefixes:z.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:_.FORCE,prefixes:z.NONE,value:9.80665,offset:0},J:{name:"J",base:_.ENERGY,prefixes:z.SHORT,value:1,offset:0},joule:{name:"joule",base:_.ENERGY,prefixes:z.SHORT,value:1,offset:0},erg:{name:"erg",base:_.ENERGY,prefixes:z.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:_.ENERGY,prefixes:z.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:_.ENERGY,prefixes:z.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:_.ENERGY,prefixes:z.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:_.ENERGY,prefixes:z.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:_.POWER,prefixes:z.SHORT,value:1,offset:0},watt:{name:"watt",base:_.POWER,prefixes:z.LONG,value:1,offset:0},hp:{name:"hp",base:_.POWER,prefixes:z.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:_.POWER,prefixes:z.SHORT,value:h.I,offset:0},VA:{name:"VA",base:_.POWER,prefixes:z.SHORT,value:1,offset:0},Pa:{name:"Pa",base:_.PRESSURE,prefixes:z.SHORT,value:1,offset:0},psi:{name:"psi",base:_.PRESSURE,prefixes:z.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:_.PRESSURE,prefixes:z.NONE,value:101325,offset:0},bar:{name:"bar",base:_.PRESSURE,prefixes:z.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:_.PRESSURE,prefixes:z.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:_.PRESSURE,prefixes:z.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:_.PRESSURE,prefixes:z.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:_.PRESSURE,prefixes:z.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:_.ELECTRIC_CHARGE,prefixes:z.LONG,value:1,offset:0},C:{name:"C",base:_.ELECTRIC_CHARGE,prefixes:z.SHORT,value:1,offset:0},farad:{name:"farad",base:_.ELECTRIC_CAPACITANCE,prefixes:z.LONG,value:1,offset:0},F:{name:"F",base:_.ELECTRIC_CAPACITANCE,prefixes:z.SHORT,value:1,offset:0},volt:{name:"volt",base:_.ELECTRIC_POTENTIAL,prefixes:z.LONG,value:1,offset:0},V:{name:"V",base:_.ELECTRIC_POTENTIAL,prefixes:z.SHORT,value:1,offset:0},ohm:{name:"ohm",base:_.ELECTRIC_RESISTANCE,prefixes:z.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:_.ELECTRIC_INDUCTANCE,prefixes:z.LONG,value:1,offset:0},H:{name:"H",base:_.ELECTRIC_INDUCTANCE,prefixes:z.SHORT,value:1,offset:0},siemens:{name:"siemens",base:_.ELECTRIC_CONDUCTANCE,prefixes:z.LONG,value:1,offset:0},S:{name:"S",base:_.ELECTRIC_CONDUCTANCE,prefixes:z.SHORT,value:1,offset:0},weber:{name:"weber",base:_.MAGNETIC_FLUX,prefixes:z.LONG,value:1,offset:0},Wb:{name:"Wb",base:_.MAGNETIC_FLUX,prefixes:z.SHORT,value:1,offset:0},tesla:{name:"tesla",base:_.MAGNETIC_FLUX_DENSITY,prefixes:z.LONG,value:1,offset:0},T:{name:"T",base:_.MAGNETIC_FLUX_DENSITY,prefixes:z.SHORT,value:1,offset:0},b:{name:"b",base:_.BIT,prefixes:z.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:_.BIT,prefixes:z.BINARY_LONG,value:1,offset:0},B:{name:"B",base:_.BIT,prefixes:z.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:_.BIT,prefixes:z.BINARY_LONG,value:8,offset:0}},ve={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function re(Z){if(Z.number==="BigNumber"){var ie=Np(x);Y.rad.value=new x(1),Y.deg.value=ie.div(180),Y.grad.value=ie.div(200),Y.cycle.value=ie.times(2),Y.arcsec.value=ie.div(648e3),Y.arcmin.value=ie.div(10800)}else Y.rad.value=1,Y.deg.value=Math.PI/180,Y.grad.value=Math.PI/200,Y.cycle.value=Math.PI*2,Y.arcsec.value=Math.PI/648e3,Y.arcmin.value=Math.PI/10800;Y.radian.value=Y.rad.value,Y.degree.value=Y.deg.value,Y.gradian.value=Y.grad.value}re(t),e&&e("config",function(Z,ie){Z.number!==ie.number&&re(Z)});var ne={si:{NONE:{unit:Ne,prefix:z.NONE[""]},LENGTH:{unit:Y.m,prefix:z.SHORT[""]},MASS:{unit:Y.g,prefix:z.SHORT.k},TIME:{unit:Y.s,prefix:z.SHORT[""]},CURRENT:{unit:Y.A,prefix:z.SHORT[""]},TEMPERATURE:{unit:Y.K,prefix:z.SHORT[""]},LUMINOUS_INTENSITY:{unit:Y.cd,prefix:z.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:Y.mol,prefix:z.SHORT[""]},ANGLE:{unit:Y.rad,prefix:z.SHORT[""]},BIT:{unit:Y.bits,prefix:z.SHORT[""]},FORCE:{unit:Y.N,prefix:z.SHORT[""]},ENERGY:{unit:Y.J,prefix:z.SHORT[""]},POWER:{unit:Y.W,prefix:z.SHORT[""]},PRESSURE:{unit:Y.Pa,prefix:z.SHORT[""]},ELECTRIC_CHARGE:{unit:Y.C,prefix:z.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:Y.F,prefix:z.SHORT[""]},ELECTRIC_POTENTIAL:{unit:Y.V,prefix:z.SHORT[""]},ELECTRIC_RESISTANCE:{unit:Y.ohm,prefix:z.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:Y.H,prefix:z.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:Y.S,prefix:z.SHORT[""]},MAGNETIC_FLUX:{unit:Y.Wb,prefix:z.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:Y.T,prefix:z.SHORT[""]},FREQUENCY:{unit:Y.Hz,prefix:z.SHORT[""]}}};ne.cgs=JSON.parse(JSON.stringify(ne.si)),ne.cgs.LENGTH={unit:Y.m,prefix:z.SHORT.c},ne.cgs.MASS={unit:Y.g,prefix:z.SHORT[""]},ne.cgs.FORCE={unit:Y.dyn,prefix:z.SHORT[""]},ne.cgs.ENERGY={unit:Y.erg,prefix:z.NONE[""]},ne.us=JSON.parse(JSON.stringify(ne.si)),ne.us.LENGTH={unit:Y.ft,prefix:z.NONE[""]},ne.us.MASS={unit:Y.lbm,prefix:z.NONE[""]},ne.us.TEMPERATURE={unit:Y.degF,prefix:z.NONE[""]},ne.us.FORCE={unit:Y.lbf,prefix:z.NONE[""]},ne.us.ENERGY={unit:Y.BTU,prefix:z.BTU[""]},ne.us.POWER={unit:Y.hp,prefix:z.NONE[""]},ne.us.PRESSURE={unit:Y.psi,prefix:z.NONE[""]},ne.auto=JSON.parse(JSON.stringify(ne.si));var ge=ne.auto;v.setUnitSystem=function(Z){if(ot(ne,Z))ge=ne[Z];else throw new Error("Unit system "+Z+" does not exist. Choices are: "+Object.keys(ne).join(", "))},v.getUnitSystem=function(){for(var Z in ne)if(ot(ne,Z)&&ne[Z]===ge)return Z},v.typeConverters={BigNumber:function(ie){return new x(ie+"")},Fraction:function(ie){return new y(ie)},Complex:function(ie){return ie},number:function(ie){return ie}},v._getNumberConverter=function(Z){if(!v.typeConverters[Z])throw new TypeError('Unsupported type "'+Z+'"');return v.typeConverters[Z]};for(var xe in Y)if(ot(Y,xe)){var Se=Y[xe];Se.dimensions=Se.base.dimensions}for(var we in ve)if(ot(ve,we)){var et=Y[ve[we]],Ye={};for(var Ue in et)ot(et,Ue)&&(Ye[Ue]=et[Ue]);Ye.name=we,Y[we]=Ye}v.isValidAlpha=function(ie){return/^[a-zA-Z]$/.test(ie)};function st(Z){for(var ie=0;ie<Z.length;ie++){if(b=Z.charAt(ie),ie===0&&!v.isValidAlpha(b))throw new Error('Invalid unit name (must begin with alpha character): "'+Z+'"');if(ie>0&&!(v.isValidAlpha(b)||D(b)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Z+'"')}}return v.createUnit=function(Z,ie){if(typeof Z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ie&&ie.override){for(var G in Z)if(ot(Z,G)&&v.deleteUnit(G),Z[G].aliases)for(var X=0;X<Z[G].aliases.length;X++)v.deleteUnit(Z[G].aliases[X])}var le;for(var se in Z)ot(Z,se)&&(le=v.createUnitSingle(se,Z[se]));return le},v.createUnitSingle=function(Z,ie,G){if((typeof ie>"u"||ie===null)&&(ie={}),typeof Z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(ot(Y,Z))throw new Error('Cannot create unit "'+Z+'": a unit with that name already exists');st(Z);var X=null,le=[],se=0,Ae,ze,We;if(ie&&ie.type==="Unit")X=ie.clone();else if(typeof ie=="string")ie!==""&&(Ae=ie);else if(typeof ie=="object")Ae=ie.definition,ze=ie.prefixes,se=ie.offset,We=ie.baseName,ie.aliases&&(le=ie.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Z+'" from "'+ie.toString()+'": expecting "string" or "Unit" or "Object"');if(le){for(var Ve=0;Ve<le.length;Ve++)if(ot(Y,le[Ve]))throw new Error('Cannot create alias "'+le[Ve]+'": a unit with that name already exists')}if(Ae&&typeof Ae=="string"&&!X)try{X=v.parse(Ae,{allowNoUnits:!0})}catch(O){throw O.message='Could not create unit "'+Z+'" from "'+Ae+'": '+O.message,O}else Ae&&Ae.type==="Unit"&&(X=Ae.clone());le=le||[],se=se||0,ze&&ze.toUpperCase?ze=z[ze.toUpperCase()]||z.NONE:ze=z.NONE;var Ke={};if(X){Ke={name:Z,value:X.value,dimensions:X.dimensions.slice(0),prefixes:ze,offset:se};var sn=!1;for(var Oi in _)if(ot(_,Oi)){for(var ja=!0,da=0;da<Q.length;da++)if(Math.abs((Ke.dimensions[da]||0)-(_[Oi].dimensions[da]||0))>1e-12){ja=!1;break}if(ja){sn=!0,Ke.base=_[Oi];break}}if(!sn){We=We||Z+"_STUFF";var Cs={dimensions:X.dimensions.slice(0)};Cs.key=We,_[We]=Cs,ge[We]={unit:Ke,prefix:z.NONE[""]},Ke.base=_[We]}}else{if(We=We||Z+"_STUFF",Q.indexOf(We)>=0)throw new Error('Cannot create new base unit "'+Z+'": a base unit with that name already exists (and cannot be overridden)');Q.push(We);for(var ft in _)ot(_,ft)&&(_[ft].dimensions[Q.length-1]=0);for(var or={dimensions:[]},en=0;en<Q.length;en++)or.dimensions[en]=0;or.dimensions[Q.length-1]=1,or.key=We,_[We]=or,Ke={name:Z,value:1,dimensions:_[We].dimensions.slice(0),prefixes:ze,offset:se,base:_[We]},ge[We]={unit:Ke,prefix:z.NONE[""]}}v.UNITS[Z]=Ke;for(var Za=0;Za<le.length;Za++){var ga=le[Za],Mr={};for(var va in Ke)ot(Ke,va)&&(Mr[va]=Ke[va]);Mr.name=ga,v.UNITS[ga]=Mr}return delete K.cache,new v(null,Z)},v.deleteUnit=function(Z){delete v.UNITS[Z]},v.PREFIXES=z,v.BASE_DIMENSIONS=Q,v.BASE_UNITS=_,v.UNIT_SYSTEMS=ne,v.UNITS=Y,v},{isClass:!0})});var MR,Bde,oS,DR=g(()=>{j();nt();MR="unit",Bde=["typed","Unit"],oS=I(MR,Bde,r=>{var{typed:e,Unit:t}=r;return e(MR,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(i,o){return new t(i,o)},"Array | Matrix":function(i){return Ee(i,this)}})})});var ER,zde,aS,TR=g(()=>{j();ER="sparse",zde=["typed","SparseMatrix"],aS=I(ER,zde,r=>{var{typed:e,SparseMatrix:t}=r;return e(ER,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,o){return new t(i,o)}})})});var CR,Rde,sS,IR=g(()=>{j();CR="createUnit",Rde=["typed","Unit"],sS=I(CR,Rde,r=>{var{typed:e,Unit:t}=r;return e(CR,{"Object, Object":function(i,o){return t.createUnit(i,o)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,o,a){var s={};return s[i]=o,t.createUnit(s,a)},"string, Unit | string | Object":function(i,o){var a={};return a[i]=o,t.createUnit(a,{})},string:function(i){var o={};return o[i]={},t.createUnit(o,{})}})})});var kR,Lde,uS,OR=g(()=>{j();nt();kR="acos",Lde=["typed","config","Complex"],uS=I(kR,Lde,r=>{var{typed:e,config:t,Complex:n}=r;return e(kR,{number:function(o){return o>=-1&&o<=1||t.predictable?Math.acos(o):new n(o,0).acos()},Complex:function(o){return o.acos()},BigNumber:function(o){return o.acos()},"Array | Matrix":function(o){return Ee(o,this)}})})});var _R,qde,cS,FR=g(()=>{j();nt();vt();_R="acosh",qde=["typed","config","Complex"],cS=I(_R,qde,r=>{var{typed:e,config:t,Complex:n}=r;return e(_R,{number:function(o){return o>=1||t.predictable?f1(o):o<=-1?new n(Math.log(Math.sqrt(o*o-1)-o),Math.PI):new n(o,0).acosh()},Complex:function(o){return o.acosh()},BigNumber:function(o){return o.acosh()},"Array | Matrix":function(o){return Ee(o,this)}})})});var BR,Pde,lS,zR=g(()=>{j();nt();vt();BR="acot",Pde=["typed","BigNumber"],lS=I(BR,Pde,r=>{var{typed:e,BigNumber:t}=r;return e(BR,{number:p1,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()},"Array | Matrix":function(i){return Ee(i,this)}})})});var RR,$de,fS,LR=g(()=>{j();nt();vt();RR="acoth",$de=["typed","config","Complex","BigNumber"],fS=I(RR,$de,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(RR,{number:function(a){return a>=1||a<=-1||t.predictable?m1(a):new n(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()},"Array | Matrix":function(a){return Ee(a,this)}})})});var qR,Ude,pS,PR=g(()=>{j();nt();vt();qR="acsc",Ude=["typed","config","Complex","BigNumber"],pS=I(qR,Ude,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(qR,{number:function(a){return a<=-1||a>=1||t.predictable?h1(a):new n(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()},"Array | Matrix":function(a){return Ee(a,this)}})})});var $R,Gde,mS,UR=g(()=>{j();nt();vt();$R="acsch",Gde=["typed","BigNumber"],mS=I($R,Gde,r=>{var{typed:e,BigNumber:t}=r;return e($R,{number:d1,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()},"Array | Matrix":function(i){return Ee(i,this)}})})});var GR,Vde,hS,VR=g(()=>{j();nt();vt();GR="asec",Vde=["typed","config","Complex","BigNumber"],hS=I(GR,Vde,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(GR,{number:function(a){return a<=-1||a>=1||t.predictable?g1(a):new n(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()},"Array | Matrix":function(a){return Ee(a,this)}})})});var WR,Wde,dS,HR=g(()=>{j();nt();vt();WR="asech",Wde=["typed","config","Complex","BigNumber"],dS=I(WR,Wde,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(WR,{number:function(a){if(a<=1&&a>=-1||t.predictable){var s=1/a;if(s>0||t.predictable)return v1(a);var u=Math.sqrt(s*s-1);return new n(Math.log(u-s),Math.PI)}return new n(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()},"Array | Matrix":function(a){return Ee(a,this)}})})});var KR,Hde,gS,jR=g(()=>{j();nt();KR="asin",Hde=["typed","config","Complex"],gS=I(KR,Hde,r=>{var{typed:e,config:t,Complex:n}=r;return e(KR,{number:function(o){return o>=-1&&o<=1||t.predictable?Math.asin(o):new n(o,0).asin()},Complex:function(o){return o.asin()},BigNumber:function(o){return o.asin()},"Array | Matrix":function(o){return Ee(o,this,!0)}})})});var Kde,jde,vS,ZR=g(()=>{j();nt();vt();Kde="asinh",jde=["typed"],vS=I(Kde,jde,r=>{var{typed:e}=r;return e("asinh",{number:x1,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()},"Array | Matrix":function(n){return Ee(n,this,!0)}})})});var Zde,Xde,xS,XR=g(()=>{j();nt();Zde="atan",Xde=["typed"],xS=I(Zde,Xde,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()},"Array | Matrix":function(n){return Ee(n,this,!0)}})})});var JR,Jde,yS,YR=g(()=>{j();fo();ci();Nw();$n();li();Er();er();JR="atan2",Jde=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],yS=I(JR,Jde,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:o}=r,a=ln({typed:e,equalScalar:n}),s=Nr({typed:e}),u=Kd({typed:e,equalScalar:n}),c=nr({typed:e,equalScalar:n}),l=Sr({typed:e,DenseMatrix:o}),f=xt({typed:e}),p=ct({typed:e});return e(JR,{"number, number":Math.atan2,"BigNumber, BigNumber":function(d,h){return i.atan2(d,h)},"SparseMatrix, SparseMatrix":function(d,h){return u(d,h,this,!1)},"SparseMatrix, DenseMatrix":function(d,h){return a(h,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,this,!1)},"DenseMatrix, DenseMatrix":function(d,h){return f(d,h,this)},"Array, Array":function(d,h){return this(t(d),t(h)).valueOf()},"Array, Matrix":function(d,h){return this(t(d),h)},"Matrix, Array":function(d,h){return this(d,t(h))},"SparseMatrix, number | BigNumber":function(d,h){return c(d,h,this,!1)},"DenseMatrix, number | BigNumber":function(d,h){return p(d,h,this,!1)},"number | BigNumber, SparseMatrix":function(d,h){return l(h,d,this,!0)},"number | BigNumber, DenseMatrix":function(d,h){return p(h,d,this,!0)},"Array, number | BigNumber":function(d,h){return p(t(d),h,this,!1).valueOf()},"number | BigNumber, Array":function(d,h){return p(t(h),d,this,!0).valueOf()}})})});var QR,Yde,bS,eL=g(()=>{j();nt();vt();QR="atanh",Yde=["typed","config","Complex"],bS=I(QR,Yde,r=>{var{typed:e,config:t,Complex:n}=r;return e(QR,{number:function(o){return o<=1&&o>=-1||t.predictable?y1(o):new n(o,0).atanh()},Complex:function(o){return o.atanh()},BigNumber:function(o){return o.atanh()},"Array | Matrix":function(o){return Ee(o,this,!0)}})})});var tL,Qde,wS,rL=g(()=>{j();nt();tL="cos",Qde=["typed"],wS=I(tL,Qde,r=>{var{typed:e}=r;return e(tL,{number:Math.cos,Complex:function(n){return n.cos()},BigNumber:function(n){return n.cos()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return this(n.value)},"Array | Matrix":function(n){return Ee(n,this)}})})});var nL,ege,NS,iL=g(()=>{j();nt();Rt();nL="cosh",ege=["typed"],NS=I(nL,ege,r=>{var{typed:e}=r;return e(nL,{number:Td,Complex:function(n){return n.cosh()},BigNumber:function(n){return n.cosh()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return this(n.value)},"Array | Matrix":function(n){return Ee(n,this)}})})});var oL,tge,SS,aL=g(()=>{j();nt();vt();oL="cot",tge=["typed","BigNumber"],SS=I(oL,tge,r=>{var{typed:e,BigNumber:t}=r;return e(oL,{number:b1,Complex:function(i){return i.cot()},BigNumber:function(i){return new t(1).div(i.tan())},Unit:function(i){if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return this(i.value)},"Array | Matrix":function(i){return Ee(i,this)}})})});var sL,rge,AS,uL=g(()=>{j();nt();vt();sL="coth",rge=["typed","BigNumber"],AS=I(sL,rge,r=>{var{typed:e,BigNumber:t}=r;return e(sL,{number:w1,Complex:function(i){return i.coth()},BigNumber:function(i){return new t(1).div(i.tanh())},Unit:function(i){if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return this(i.value)},"Array | Matrix":function(i){return Ee(i,this)}})})});var cL,nge,MS,lL=g(()=>{j();nt();vt();cL="csc",nge=["typed","BigNumber"],MS=I(cL,nge,r=>{var{typed:e,BigNumber:t}=r;return e(cL,{number:N1,Complex:function(i){return i.csc()},BigNumber:function(i){return new t(1).div(i.sin())},Unit:function(i){if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return this(i.value)},"Array | Matrix":function(i){return Ee(i,this)}})})});var fL,ige,DS,pL=g(()=>{j();nt();vt();fL="csch",ige=["typed","BigNumber"],DS=I(fL,ige,r=>{var{typed:e,BigNumber:t}=r;return e(fL,{number:S1,Complex:function(i){return i.csch()},BigNumber:function(i){return new t(1).div(i.sinh())},Unit:function(i){if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return this(i.value)},"Array | Matrix":function(i){return Ee(i,this)}})})});var mL,oge,ES,hL=g(()=>{j();nt();vt();mL="sec",oge=["typed","BigNumber"],ES=I(mL,oge,r=>{var{typed:e,BigNumber:t}=r;return e(mL,{number:A1,Complex:function(i){return i.sec()},BigNumber:function(i){return new t(1).div(i.cos())},Unit:function(i){if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return this(i.value)},"Array | Matrix":function(i){return Ee(i,this)}})})});var dL,age,TS,gL=g(()=>{j();nt();vt();dL="sech",age=["typed","BigNumber"],TS=I(dL,age,r=>{var{typed:e,BigNumber:t}=r;return e(dL,{number:M1,Complex:function(i){return i.sech()},BigNumber:function(i){return new t(1).div(i.cosh())},Unit:function(i){if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return this(i.value)},"Array | Matrix":function(i){return Ee(i,this)}})})});var vL,sge,CS,xL=g(()=>{j();nt();vL="sin",sge=["typed"],CS=I(vL,sge,r=>{var{typed:e}=r;return e(vL,{number:Math.sin,Complex:function(n){return n.sin()},BigNumber:function(n){return n.sin()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return this(n.value)},"Array | Matrix":function(n){return Ee(n,this,!0)}})})});var yL,uge,IS,bL=g(()=>{j();nt();vt();yL="sinh",uge=["typed"],IS=I(yL,uge,r=>{var{typed:e}=r;return e(yL,{number:D1,Complex:function(n){return n.sinh()},BigNumber:function(n){return n.sinh()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return this(n.value)},"Array | Matrix":function(n){return Ee(n,this,!0)}})})});var wL,cge,kS,NL=g(()=>{j();nt();wL="tan",cge=["typed"],kS=I(wL,cge,r=>{var{typed:e}=r;return e(wL,{number:Math.tan,Complex:function(n){return n.tan()},BigNumber:function(n){return n.tan()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return this(n.value)},"Array | Matrix":function(n){return Ee(n,this,!0)}})})});var lge,fge,OS,SL=g(()=>{j();nt();Rt();lge="tanh",fge=["typed"],OS=I(lge,fge,r=>{var{typed:e}=r;return e("tanh",{number:Cd,Complex:function(n){return n.tanh()},BigNumber:function(n){return n.tanh()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return this(n.value)},"Array | Matrix":function(n){return Ee(n,this,!0)}})})});var AL,pge,_S,ML=g(()=>{Nt();j();AL="setCartesian",pge=["typed","size","subset","compareNatural","Index","DenseMatrix"],_S=I(AL,pge,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(AL,{"Array | Matrix, Array | Matrix":function(u,c){var l=[];if(n(t(u),new o(0))!==0&&n(t(c),new o(0))!==0){var f=At(Array.isArray(u)?u:u.toArray()).sort(i),p=At(Array.isArray(c)?c:c.toArray()).sort(i);l=[];for(var m=0;m<f.length;m++)for(var d=0;d<p.length;d++)l.push([f[m],p[d]])}return Array.isArray(u)&&Array.isArray(c)?l:new a(l)}})})});var DL,mge,FS,EL=g(()=>{Nt();j();DL="setDifference",mge=["typed","size","subset","compareNatural","Index","DenseMatrix"],FS=I(DL,mge,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(DL,{"Array | Matrix, Array | Matrix":function(u,c){var l;if(n(t(u),new o(0))===0)l=[];else{if(n(t(c),new o(0))===0)return At(u.toArray());var f=ts(At(Array.isArray(u)?u:u.toArray()).sort(i)),p=ts(At(Array.isArray(c)?c:c.toArray()).sort(i));l=[];for(var m,d=0;d<f.length;d++){m=!1;for(var h=0;h<p.length;h++)if(i(f[d].value,p[h].value)===0&&f[d].identifier===p[h].identifier){m=!0;break}m||l.push(f[d])}}return Array.isArray(u)&&Array.isArray(c)?Gc(l):new a(Gc(l))}})})});var TL,hge,BS,CL=g(()=>{Nt();j();TL="setDistinct",hge=["typed","size","subset","compareNatural","Index","DenseMatrix"],BS=I(TL,hge,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(TL,{"Array | Matrix":function(u){var c;if(n(t(u),new o(0))===0)c=[];else{var l=At(Array.isArray(u)?u:u.toArray()).sort(i);c=[],c.push(l[0]);for(var f=1;f<l.length;f++)i(l[f],l[f-1])!==0&&c.push(l[f])}return Array.isArray(u)?c:new a(c)}})})});var IL,dge,zS,kL=g(()=>{Nt();j();IL="setIntersect",dge=["typed","size","subset","compareNatural","Index","DenseMatrix"],zS=I(IL,dge,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(IL,{"Array | Matrix, Array | Matrix":function(u,c){var l;if(n(t(u),new o(0))===0||n(t(c),new o(0))===0)l=[];else{var f=ts(At(Array.isArray(u)?u:u.toArray()).sort(i)),p=ts(At(Array.isArray(c)?c:c.toArray()).sort(i));l=[];for(var m=0;m<f.length;m++)for(var d=0;d<p.length;d++)if(i(f[m].value,p[d].value)===0&&f[m].identifier===p[d].identifier){l.push(f[m]);break}}return Array.isArray(u)&&Array.isArray(c)?Gc(l):new a(Gc(l))}})})});var OL,gge,RS,_L=g(()=>{Nt();j();OL="setIsSubset",gge=["typed","size","subset","compareNatural","Index"],RS=I(OL,gge,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o}=r;return e(OL,{"Array | Matrix, Array | Matrix":function(s,u){if(n(t(s),new o(0))===0)return!0;if(n(t(u),new o(0))===0)return!1;for(var c=ts(At(Array.isArray(s)?s:s.toArray()).sort(i)),l=ts(At(Array.isArray(u)?u:u.toArray()).sort(i)),f,p=0;p<c.length;p++){f=!1;for(var m=0;m<l.length;m++)if(i(c[p].value,l[m].value)===0&&c[p].identifier===l[m].identifier){f=!0;break}if(f===!1)return!1}return!0}})})});var FL,vge,LS,BL=g(()=>{Nt();j();FL="setMultiplicity",vge=["typed","size","subset","compareNatural","Index"],LS=I(FL,vge,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o}=r;return e(FL,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(s,u){if(n(t(u),new o(0))===0)return 0;for(var c=At(Array.isArray(u)?u:u.toArray()),l=0,f=0;f<c.length;f++)i(c[f],s)===0&&l++;return l}})})});var zL,xge,qS,RL=g(()=>{Nt();j();zL="setPowerset",xge=["typed","size","subset","compareNatural","Index"],qS=I(zL,xge,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o}=r;return e(zL,{"Array | Matrix":function(c){if(n(t(c),new o(0))===0)return[];for(var l=At(Array.isArray(c)?c:c.toArray()).sort(i),f=[],p=0;p.toString(2).length<=l.length;)f.push(a(l,p.toString(2).split("").reverse())),p++;return s(f)}});function a(u,c){for(var l=[],f=0;f<c.length;f++)c[f]==="1"&&l.push(u[f]);return l}function s(u){for(var c=[],l=u.length-1;l>0;l--)for(var f=0;f<l;f++)u[f].length>u[f+1].length&&(c=u[f],u[f]=u[f+1],u[f+1]=c);return u}})});var LL,yge,PS,qL=g(()=>{Nt();j();LL="setSize",yge=["typed","compareNatural"],PS=I(LL,yge,r=>{var{typed:e,compareNatural:t}=r;return e(LL,{"Array | Matrix":function(i){return Array.isArray(i)?At(i).length:At(i.toArray()).length},"Array | Matrix, boolean":function(i,o){if(o===!1||i.length===0)return Array.isArray(i)?At(i).length:At(i.toArray()).length;for(var a=At(Array.isArray(i)?i:i.toArray()).sort(t),s=1,u=1;u<a.length;u++)t(a[u],a[u-1])!==0&&s++;return s}})})});var PL,bge,$S,$L=g(()=>{Nt();j();PL="setSymDifference",bge=["typed","size","concat","subset","setDifference","Index"],$S=I(PL,bge,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:o,Index:a}=r;return e(PL,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new a(0))===0)return At(c);if(i(t(c),new a(0))===0)return At(u);var l=At(u),f=At(c);return n(o(l,f),o(f,l))}})})});var UL,wge,US,GL=g(()=>{Nt();j();UL="setUnion",wge=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],US=I(UL,wge,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:o,setSymDifference:a,Index:s}=r;return e(UL,{"Array | Matrix, Array | Matrix":function(c,l){if(i(t(c),new s(0))===0)return At(l);if(i(t(l),new s(0))===0)return At(c);var f=At(c),p=At(l);return n(a(f,p),o(f,p))}})})});var VL,Nge,GS,WL=g(()=>{j();Ht();ns();Wd();qs();Er();er();VL="add",Nge=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],GS=I(VL,Nge,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:o,SparseMatrix:a}=r,s=ui({typed:e}),u=jc({typed:e,equalScalar:i}),c=zi({typed:e,DenseMatrix:o}),l=xt({typed:e}),f=ct({typed:e});return e(VL,Lc({"DenseMatrix, DenseMatrix":function(m,d){return l(m,d,n)},"DenseMatrix, SparseMatrix":function(m,d){return s(m,d,n,!1)},"SparseMatrix, DenseMatrix":function(m,d){return s(d,m,n,!0)},"SparseMatrix, SparseMatrix":function(m,d){return u(m,d,n)},"Array, Array":function(m,d){return this(t(m),t(d)).valueOf()},"Array, Matrix":function(m,d){return this(t(m),d)},"Matrix, Array":function(m,d){return this(m,t(d))},"DenseMatrix, any":function(m,d){return f(m,d,n,!1)},"SparseMatrix, any":function(m,d){return c(m,d,n,!1)},"any, DenseMatrix":function(m,d){return f(d,m,n,!0)},"any, SparseMatrix":function(m,d){return c(d,m,n,!0)},"Array, any":function(m,d){return f(t(m),d,n,!1).valueOf()},"any, Array":function(m,d){return f(t(d),m,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(m,d,h){for(var x=this(m,d),y=0;y<h.length;y++)x=this(x,h[y]);return x}},n.signatures))})});var HL,Sge,VS,KL=g(()=>{j();Nt();HL="hypot",Sge=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],VS=I(HL,Sge,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:o,sqrt:a,smaller:s,isPositive:u}=r;return e(HL,{"... number | BigNumber":c,Array:function(f){return this.apply(this,At(f))},Matrix:function(f){return this.apply(this,At(f.toArray()))}});function c(l){for(var f=0,p=0,m=0;m<l.length;m++){var d=t(l[m]);s(p,d)?(f=o(f,o(i(p,d),i(p,d))),f=n(f,1),p=d):f=n(f,u(d)?o(i(d,p),i(d,p)):d)}return o(p,a(f))}})});var jL,Age,WS,ZL=g(()=>{j();jL="norm",Age=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],WS=I(jL,Age,r=>{var{typed:e,abs:t,add:n,pow:i,conj:o,sqrt:a,multiply:s,equalScalar:u,larger:c,smaller:l,matrix:f,ctranspose:p,eigs:m}=r;return e(jL,{number:Math.abs,Complex:function(M){return M.abs()},BigNumber:function(M){return M.abs()},boolean:function(M){return Math.abs(M)},Array:function(M){return b(f(M),2)},Matrix:function(M){return b(M,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(M){return this(M)},"Array, number | BigNumber | string":function(M,D){return b(f(M),D)},"Matrix, number | BigNumber | string":function(M,D){return b(M,D)}});function d(E){var M=0;return E.forEach(function(D){var A=t(D);c(A,M)&&(M=A)},!0),M}function h(E){var M;return E.forEach(function(D){var A=t(D);(!M||l(A,M))&&(M=A)},!0),M||0}function x(E,M){if(M===Number.POSITIVE_INFINITY||M==="inf")return d(E);if(M===Number.NEGATIVE_INFINITY||M==="-inf")return h(E);if(M==="fro")return b(E,2);if(typeof M=="number"&&!isNaN(M)){if(!u(M,0)){var D=0;return E.forEach(function(A){D=n(i(t(A),M),D)},!0),i(D,1/M)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function y(E){var M=0;return E.forEach(function(D,A){M=n(M,s(D,o(D)))}),t(a(M))}function N(E){var M=[],D=0;return E.forEach(function(A,k){var T=k[1],L=n(M[T]||0,t(A));c(L,D)&&(D=L),M[T]=L},!0),D}function v(E){var M=E.size();if(M[0]!==M[1])throw new RangeError("Invalid matrix dimensions");var D=p(E),A=s(D,E),k=m(A).values.toArray(),T=k[k.length-1];return t(a(T))}function w(E){var M=[],D=0;return E.forEach(function(A,k){var T=k[0],L=n(M[T]||0,t(A));c(L,D)&&(D=L),M[T]=L},!0),D}function S(E,M){if(M===1)return N(E);if(M===Number.POSITIVE_INFINITY||M==="inf")return w(E);if(M==="fro")return y(E);if(M===2)return v(E);throw new Error("Unsupported parameter value "+M)}function b(E,M){var D=E.size();if(D.length===1)return x(E,M);if(D.length===2){if(D[0]&&D[1])return S(E,M);throw new RangeError("Invalid matrix dimensions")}}})});var XL,Mge,HS,JL=g(()=>{j();Je();XL="dot",Mge=["typed","addScalar","multiplyScalar","conj","size"],HS=I(XL,Mge,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:o}=r;return e(XL,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":u});function a(l,f){var p=c(l),m=c(f),d,h;if(p.length===1)d=p[0];else if(p.length===2&&p[1]===1)d=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(m.length===1)h=m[0];else if(m.length===2&&m[1]===1)h=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(d!==h)throw new RangeError("Vectors must have equal length ("+d+" != "+h+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function s(l,f){var p=a(l,f),m=ut(l)?l._data:l,d=ut(l)?l._datatype:void 0,h=ut(f)?f._data:f,x=ut(f)?f._datatype:void 0,y=c(l).length===2,N=c(f).length===2,v=t,w=n;if(d&&x&&d===x&&typeof d=="string"){var S=d;v=e.find(t,[S,S]),w=e.find(n,[S,S])}if(!y&&!N){for(var b=w(i(m[0]),h[0]),E=1;E<p;E++)b=v(b,w(i(m[E]),h[E]));return b}if(!y&&N){for(var M=w(i(m[0]),h[0][0]),D=1;D<p;D++)M=v(M,w(i(m[D]),h[D][0]));return M}if(y&&!N){for(var A=w(i(m[0][0]),h[0]),k=1;k<p;k++)A=v(A,w(i(m[k][0]),h[k]));return A}if(y&&N){for(var T=w(i(m[0][0]),h[0][0]),L=1;L<p;L++)T=v(T,w(i(m[L][0]),h[L][0]));return T}}function u(l,f){a(l,f);for(var p=l._index,m=l._values,d=f._index,h=f._values,x=0,y=t,N=n,v=0,w=0;v<p.length&&w<d.length;){var S=p[v],b=d[w];if(S<b){v++;continue}if(S>b){w++;continue}S===b&&(x=y(x,N(m[v],h[w])),v++,w++)}return x}function c(l){return ut(l)?l.size():o(l)}})});var Dge,Ege,KS,YL=g(()=>{Ht();Fr();j();Dge="trace",Ege=["typed","matrix","add"],KS=I(Dge,Ege,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(s){return i(t(s))},SparseMatrix:o,DenseMatrix:i,any:at});function i(a){var s=a._size,u=a._data;switch(s.length){case 1:if(s[0]===1)return at(u[0]);throw new RangeError("Matrix must be square (size: "+gt(s)+")");case 2:{var c=s[0],l=s[1];if(c===l){for(var f=0,p=0;p<c;p++)f=n(f,u[p][p]);return f}else throw new RangeError("Matrix must be square (size: "+gt(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+gt(s)+")")}}function o(a){var s=a._values,u=a._index,c=a._ptr,l=a._size,f=l[0],p=l[1];if(f===p){var m=0;if(s.length>0)for(var d=0;d<p;d++)for(var h=c[d],x=c[d+1],y=h;y<x;y++){var N=u[y];if(N===d){m=n(m,s[y]);break}if(N>d)break}return m}throw new RangeError("Matrix must be square (size: "+gt(l)+")")}})});var QL,Tge,jS,e4=g(()=>{j();Je();QL="index",Tge=["typed","Index"],jS=I(QL,Tge,r=>{var{typed:e,Index:t}=r;return e(QL,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var o=i.map(function(s){return lt(s)?s.toNumber():Array.isArray(s)||ut(s)?s.map(function(u){return lt(u)?u.toNumber():u}):s}),a=new t;return t.apply(a,o),a}})})});var eg,ZS=g(()=>{eg=new Set(["end"])});var Cge,Ige,XS,t4=g(()=>{Je();ZS();Ht();j();Rs();Cge="Node",Ige=["mathWithTransform"],XS=I(Cge,Ige,r=>{var{mathWithTransform:e}=r;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}t.prototype.evaluate=function(i){return this.compile().evaluate(i)},t.prototype.type="Node",t.prototype.isNode=!0,t.prototype.comment="",t.prototype.compile=function(){var i=this._compile(e,{}),o={},a=null;function s(u){var c=Vc(u);return n(c),i(c,o,a)}return{evaluate:s}},t.prototype._compile=function(i,o){throw new Error("Method _compile should be implemented by type "+this.type)},t.prototype.forEach=function(i){throw new Error("Cannot run forEach on a Node interface")},t.prototype.map=function(i){throw new Error("Cannot run map on a Node interface")},t.prototype._ifNode=function(i){if(!Ot(i))throw new TypeError("Callback function must return a Node");return i},t.prototype.traverse=function(i){i(this,null,null);function o(a,s){a.forEach(function(u,c,l){s(u,c,l),o(u,s)})}o(this,i)},t.prototype.transform=function(i){function o(a,s,u){var c=i(a,s,u);return c!==a?c:a.map(o)}return o(this,null,null)},t.prototype.filter=function(i){var o=[];return this.traverse(function(a,s,u){i(a,s,u)&&o.push(a)}),o},t.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},t.prototype.cloneDeep=function(){return this.map(function(i){return i.cloneDeep()})},t.prototype.equals=function(i){return i?Fs(this,i):!1},t.prototype.toString=function(i){var o=this._getCustomString(i);return typeof o<"u"?o:this._toString(i)},t.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},t.prototype.toHTML=function(i){var o=this._getCustomString(i);return typeof o<"u"?o:this.toHTML(i)},t.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},t.prototype.toTex=function(i){var o=this._getCustomString(i);return typeof o<"u"?o:this._toTex(i)},t.prototype._toTex=function(i){throw new Error("_toTex not implemented for "+this.type)},t.prototype._getCustomString=function(i){if(i&&typeof i=="object")switch(typeof i.handler){case"object":case"undefined":return;case"function":return i.handler(this,i);default:throw new TypeError("Object or function expected as callback")}},t.prototype.getIdentifier=function(){return this.type},t.prototype.getContent=function(){return this};function n(i){for(var o of[...eg])if(i.has(o))throw new Error('Scope contains an illegal symbol, "'+o+'" is a reserved keyword')}return t},{isClass:!0,isNode:!0})});function Cr(r){return r&&r.isIndexError?new Mi(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}var Ei=g(()=>{Pc()});function tg(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return nn(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(o){throw Cr(o)}}}var JS=g(()=>{Ei();Bi()});var kge,Oge,YS,r4=g(()=>{Je();Bi();j();JS();kge="AccessorNode",Oge=["subset","Node"],YS=I(kge,Oge,r=>{var{subset:e,Node:t}=r,n=tg({subset:e});function i(a,s){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!Ot(a))throw new TypeError('Node expected for parameter "object"');if(!_s(s))throw new TypeError('IndexNode expected for parameter "index"');this.object=a||null,this.index=s,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}i.prototype=new t,i.prototype.type="AccessorNode",i.prototype.isAccessorNode=!0,i.prototype._compile=function(a,s){var u=this.object._compile(a,s),c=this.index._compile(a,s);if(this.index.isObjectProperty()){var l=this.index.getObjectProperty();return function(p,m,d){return nn(u(p,m,d),l)}}else return function(p,m,d){var h=u(p,m,d),x=c(p,m,h);return n(h,x)}},i.prototype.forEach=function(a){a(this.object,"object",this),a(this.index,"index",this)},i.prototype.map=function(a){return new i(this._ifNode(a(this.object,"object",this)),this._ifNode(a(this.index,"index",this)))},i.prototype.clone=function(){return new i(this.object,this.index)},i.prototype._toString=function(a){var s=this.object.toString(a);return o(this.object)&&(s="("+s+")"),s+this.index.toString(a)},i.prototype.toHTML=function(a){var s=this.object.toHTML(a);return o(this.object)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s+this.index.toHTML(a)},i.prototype._toTex=function(a){var s=this.object.toTex(a);return o(this.object)&&(s="\\left(' + object + '\\right)"),s+this.index.toTex(a)},i.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},i.fromJSON=function(a){return new i(a.object,a.index)};function o(a){return!(Wo(a)||bu(a)||sr(a)||Sa(a)||Sd(a)||co(a)||lr(a))}return i},{isClass:!0,isNode:!0})});var _ge,Fge,QS,n4=g(()=>{Je();Nt();j();_ge="ArrayNode",Fge=["Node"],QS=I(_ge,Fge,r=>{var{Node:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=n||[],!Array.isArray(this.items)||!this.items.every(Ot))throw new TypeError("Array containing Nodes expected")}return t.prototype=new e,t.prototype.type="ArrayNode",t.prototype.isArrayNode=!0,t.prototype._compile=function(n,i){var o=Fi(this.items,function(u){return u._compile(n,i)}),a=n.config.matrix!=="Array";if(a){var s=n.matrix;return function(c,l,f){return s(Fi(o,function(p){return p(c,l,f)}))}}else return function(c,l,f){return Fi(o,function(p){return p(c,l,f)})}},t.prototype.forEach=function(n){for(var i=0;i<this.items.length;i++){var o=this.items[i];n(o,"items["+i+"]",this)}},t.prototype.map=function(n){for(var i=[],o=0;o<this.items.length;o++)i[o]=this._ifNode(n(this.items[o],"items["+o+"]",this));return new t(i)},t.prototype.clone=function(){return new t(this.items.slice(0))},t.prototype._toString=function(n){var i=this.items.map(function(o){return o.toString(n)});return"["+i.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},t.fromJSON=function(n){return new t(n.items)},t.prototype.toHTML=function(n){var i=this.items.map(function(o){return o.toHTML(n)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},t.prototype._toTex=function(n){function i(o,a){var s=o.some(bu)&&!o.every(bu),u=a||s,c=u?"&":"\\\\",l=o.map(function(f){return f.items?i(f.items,!a):f.toTex(n)}).join(c);return s||!u||u&&!a?"\\begin{bmatrix}"+l+"\\end{bmatrix}":l}return i(this.items,!1)},t},{isClass:!0,isNode:!0})});function i4(r){var{subset:e,matrix:t}=r;return function(i,o,a){try{if(Array.isArray(i))return t(i).subset(o,a).valueOf();if(i&&typeof i.subset=="function")return i.subset(o,a);if(typeof i=="string")return e(i,o,a);if(typeof i=="object"){if(!o.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Aa(i,o.getObjectProperty(),a),i}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Cr(s)}}}var o4=g(()=>{Ei();Bi()});function tr(r,e){var t=r;e!=="keep"&&(t=r.getContent());for(var n=t.getIdentifier(),i=0;i<Xo.length;i++)if(n in Xo[i])return i;return null}function tl(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=tr(t,e);if(i===null)return null;var o=Xo[i][n];if(ot(o,"associativity")){if(o.associativity==="left")return"left";if(o.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+o.associativity+"'.")}return null}function rg(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,o=n.getIdentifier(),a=i.getIdentifier(),s=tr(n,t);if(s===null)return null;var u=Xo[s][o];if(ot(u,"associativeWith")&&u.associativeWith instanceof Array){for(var c=0;c<u.associativeWith.length;c++)if(u.associativeWith[c]===a)return!0;return!1}return null}var Xo,Tu=g(()=>{Ht();Xo=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}]});var Bge,zge,eA,a4=g(()=>{Je();Bi();j();JS();o4();Tu();Bge="AssignmentNode",zge=["subset","?matrix","Node"],eA=I(Bge,zge,r=>{var{subset:e,matrix:t,Node:n}=r,i=tg({subset:e}),o=i4({subset:e,matrix:t});function a(u,c,l){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=u,this.index=l?c:null,this.value=l||c,!lr(u)&&!Wo(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(lr(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!_s(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ot(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}a.prototype=new n,a.prototype.type="AssignmentNode",a.prototype.isAssignmentNode=!0,a.prototype._compile=function(u,c){var l=this.object._compile(u,c),f=this.index?this.index._compile(u,c):null,p=this.value._compile(u,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var d=this.index.getObjectProperty();return function(v,w,S){var b=l(v,w,S),E=p(v,w,S);return Aa(b,d,E),E}}else{if(lr(this.object))return function(v,w,S){var b=l(v,w,S),E=p(v,w,S),M=f(v,w,b);return v.set(m,o(b,M,E)),E};var h=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var x=this.object.index.getObjectProperty();return function(v,w,S){var b=h(v,w,S),E=nn(b,x),M=f(v,w,E),D=p(v,w,S);return Aa(b,x,o(E,M,D)),D}}else{var y=this.object.index._compile(u,c);return function(v,w,S){var b=h(v,w,S),E=y(v,w,b),M=i(b,E),D=f(v,w,M),A=p(v,w,S);return o(b,E,o(M,D,A)),A}}}else{if(!lr(this.object))throw new TypeError("SymbolNode expected as object");return function(v,w,S){var b=p(v,w,S);return v.set(m,b),b}}},a.prototype.forEach=function(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)},a.prototype.map=function(u){var c=this._ifNode(u(this.object,"object",this)),l=this.index?this._ifNode(u(this.index,"index",this)):null,f=this._ifNode(u(this.value,"value",this));return new a(c,l,f)},a.prototype.clone=function(){return new a(this.object,this.index,this.value)};function s(u,c){c||(c="keep");var l=tr(u,c),f=tr(u.value,c);return c==="all"||f!==null&&f<=l}return a.prototype._toString=function(u){var c=this.object.toString(u),l=this.index?this.index.toString(u):"",f=this.value.toString(u);return s(this,u&&u.parenthesis)&&(f="("+f+")"),c+l+" = "+f},a.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},a.fromJSON=function(u){return new a(u.object,u.index,u.value)},a.prototype.toHTML=function(u){var c=this.object.toHTML(u),l=this.index?this.index.toHTML(u):"",f=this.value.toHTML(u);return s(this,u&&u.parenthesis)&&(f='<span class="math-paranthesis math-round-parenthesis">(</span>'+f+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+l+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+f},a.prototype._toTex=function(u){var c=this.object.toTex(u),l=this.index?this.index.toTex(u):"",f=this.value.toTex(u);return s(this,u&&u.parenthesis)&&(f="\\left(".concat(f,"\\right)")),c+l+":="+f},a},{isClass:!0,isNode:!0})});var Rge,Lge,tA,s4=g(()=>{Je();Nt();j();Rge="BlockNode",Lge=["ResultSet","Node"],tA=I(Rge,Lge,r=>{var{ResultSet:e,Node:t}=r;function n(i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(i))throw new Error("Array expected");this.blocks=i.map(function(o){var a=o&&o.node,s=o&&o.visible!==void 0?o.visible:!0;if(!Ot(a))throw new TypeError('Property "node" must be a Node');if(typeof s!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:a,visible:s}})}return n.prototype=new t,n.prototype.type="BlockNode",n.prototype.isBlockNode=!0,n.prototype._compile=function(i,o){var a=Fi(this.blocks,function(s){return{evaluate:s.node._compile(i,o),visible:s.visible}});return function(u,c,l){var f=[];return Bs(a,function(m){var d=m.evaluate(u,c,l);m.visible&&f.push(d)}),new e(f)}},n.prototype.forEach=function(i){for(var o=0;o<this.blocks.length;o++)i(this.blocks[o].node,"blocks["+o+"].node",this)},n.prototype.map=function(i){for(var o=[],a=0;a<this.blocks.length;a++){var s=this.blocks[a],u=this._ifNode(i(s.node,"blocks["+a+"].node",this));o[a]={node:u,visible:s.visible}}return new n(o)},n.prototype.clone=function(){var i=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new n(i)},n.prototype._toString=function(i){return this.blocks.map(function(o){return o.node.toString(i)+(o.visible?"":";")}).join(`
`)},n.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},n.fromJSON=function(i){return new n(i.blocks)},n.prototype.toHTML=function(i){return this.blocks.map(function(o){return o.node.toHTML(i)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')},n.prototype._toTex=function(i){return this.blocks.map(function(o){return o.node.toTex(i)+(o.visible?"":";")}).join(`\\;\\;
`)},n},{isClass:!0,isNode:!0})});var qge,Pge,rA,u4=g(()=>{Je();j();Tu();qge="ConditionalNode",Pge=["Node"],rA=I(qge,Pge,r=>{var{Node:e}=r;function t(i,o,a){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!Ot(i))throw new TypeError("Parameter condition must be a Node");if(!Ot(o))throw new TypeError("Parameter trueExpr must be a Node");if(!Ot(a))throw new TypeError("Parameter falseExpr must be a Node");this.condition=i,this.trueExpr=o,this.falseExpr=a}t.prototype=new e,t.prototype.type="ConditionalNode",t.prototype.isConditionalNode=!0,t.prototype._compile=function(i,o){var a=this.condition._compile(i,o),s=this.trueExpr._compile(i,o),u=this.falseExpr._compile(i,o);return function(l,f,p){return n(a(l,f,p))?s(l,f,p):u(l,f,p)}},t.prototype.forEach=function(i){i(this.condition,"condition",this),i(this.trueExpr,"trueExpr",this),i(this.falseExpr,"falseExpr",this)},t.prototype.map=function(i){return new t(this._ifNode(i(this.condition,"condition",this)),this._ifNode(i(this.trueExpr,"trueExpr",this)),this._ifNode(i(this.falseExpr,"falseExpr",this)))},t.prototype.clone=function(){return new t(this.condition,this.trueExpr,this.falseExpr)},t.prototype._toString=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=tr(this,o),s=this.condition.toString(i),u=tr(this.condition,o);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=a)&&(s="("+s+")");var c=this.trueExpr.toString(i),l=tr(this.trueExpr,o);(o==="all"||this.trueExpr.type==="OperatorNode"||l!==null&&l<=a)&&(c="("+c+")");var f=this.falseExpr.toString(i),p=tr(this.falseExpr,o);return(o==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=a)&&(f="("+f+")"),s+" ? "+c+" : "+f},t.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},t.fromJSON=function(i){return new t(i.condition,i.trueExpr,i.falseExpr)},t.prototype.toHTML=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=tr(this,o),s=this.condition.toHTML(i),u=tr(this.condition,o);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=a)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(i),l=tr(this.trueExpr,o);(o==="all"||this.trueExpr.type==="OperatorNode"||l!==null&&l<=a)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var f=this.falseExpr.toHTML(i),p=tr(this.falseExpr,o);return(o==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=a)&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+f},t.prototype._toTex=function(i){return"\\begin{cases} {"+this.trueExpr.toTex(i)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(i)+"}\\\\{"+this.falseExpr.toTex(i)+"}, &\\quad{\\text{otherwise}}\\end{cases}"};function n(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(lt(i))return!i.isZero();if(_i(i))return!!(i.re||i.im);if(Qa(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Gt(i)+'"')}return t},{isClass:!0,isNode:!0})});var l4=Re((V9e,c4)=>{"use strict";var nA=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},$ge={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},Uge={"\u2013":"\\--","\u2014":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},Gge=function(e,t){return nA({},e,t)};c4.exports=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,o=i===void 0?Gge:i,a=String(r),s="",u=o(nA({},$ge),n?nA({},Uge):{}),c=Object.keys(u),l=function(){var p=!1;c.forEach(function(m,d){p||a.length>=m.length&&a.slice(0,m.length)===m&&(s+=u[c[d]],a=a.slice(m.length,a.length),p=!0)}),p||(s+=a.slice(0,1),a=a.slice(1,a.length))};a;)l();return s}});function ng(r){return(0,p4.default)(r,{preserveFormatting:!0})}function ig(r,e){return e=typeof e>"u"?!1:e,e?ot(f4,r)?f4[r]:"\\mathrm{"+ng(r)+"}":ot(iA,r)?iA[r]:ng(r)}var p4,iA,Kt,oA,m4,f4,Cu=g(()=>{p4=Si(l4(),1);Ht();iA={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Kt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},oA={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Kt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Kt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Kt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Kt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Kt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Kt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Kt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Kt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Kt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Kt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Kt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Kt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Kt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Kt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Kt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Kt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Kt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Kt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Kt.and,"${args[1]}\\right)")},not:{1:Kt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Kt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Kt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Kt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(Kt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Kt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Kt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Kt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Kt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Kt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Kt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Kt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Kt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Kt.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(iA.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},m4="\\mathrm{${name}}\\left(${args}\\right)",f4={deg:"^\\circ"}});var Vge,Wge,aA,h4=g(()=>{Fr();Je();Cu();j();Vge="ConstantNode",Wge=["Node"],aA=I(Vge,Wge,r=>{var{Node:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.value=n}return t.prototype=new e,t.prototype.type="ConstantNode",t.prototype.isConstantNode=!0,t.prototype._compile=function(n,i){var o=this.value;return function(){return o}},t.prototype.forEach=function(n){},t.prototype.map=function(n){return this.clone()},t.prototype.clone=function(){return new t(this.value)},t.prototype._toString=function(n){return gt(this.value,n)},t.prototype.toHTML=function(n){var i=this._toString(n);switch(Gt(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+i+"</span>";case"string":return'<span class="math-string">'+i+"</span>";case"boolean":return'<span class="math-boolean">'+i+"</span>";case"null":return'<span class="math-null-symbol">'+i+"</span>";case"undefined":return'<span class="math-undefined">'+i+"</span>";default:return'<span class="math-symbol">'+i+"</span>"}},t.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},t.fromJSON=function(n){return new t(n.value)},t.prototype._toTex=function(n){var i=this._toString(n);switch(Gt(this.value)){case"string":return"\\mathtt{"+ng(i)+"}";case"number":case"BigNumber":{if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var o=i.toLowerCase().indexOf("e");if(o!==-1)return i.substring(0,o)+"\\cdot10^{"+i.substring(o+1)+"}"}return i;case"Fraction":return this.value.toLatex();default:return i}},t},{isClass:!0,isNode:!0})});var Hge,Kge,sA,d4=g(()=>{Je();ZS();Fr();Nt();Cu();Tu();j();Hge="FunctionAssignmentNode",Kge=["typed","Node"],sA=I(Hge,Kge,r=>{var{typed:e,Node:t}=r;function n(o,a,s){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(a))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ot(s))throw new TypeError('Node expected for parameter "expr"');if(eg.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');this.name=o,this.params=a.map(function(u){return u&&u.name||u}),this.types=a.map(function(u){return u&&u.type||"any"}),this.expr=s}n.prototype=new t,n.prototype.type="FunctionAssignmentNode",n.prototype.isFunctionAssignmentNode=!0,n.prototype._compile=function(o,a){var s=Object.create(a);Bs(this.params,function(m){s[m]=!0});var u=this.expr._compile(o,s),c=this.name,l=this.params,f=mb(this.types,","),p=c+"("+mb(this.params,", ")+")";return function(d,h,x){var y={};y[f]=function(){for(var v=Object.create(h),w=0;w<l.length;w++)v[l[w]]=arguments[w];return u(d,v,x)};var N=e(c,y);return N.syntax=p,d.set(c,N),N}},n.prototype.forEach=function(o){o(this.expr,"expr",this)},n.prototype.map=function(o){var a=this._ifNode(o(this.expr,"expr",this));return new n(this.name,this.params.slice(0),a)},n.prototype.clone=function(){return new n(this.name,this.params.slice(0),this.expr)};function i(o,a){var s=tr(o,a),u=tr(o.expr,a);return a==="all"||u!==null&&u<=s}return n.prototype._toString=function(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=this.expr.toString(o);return i(this,a)&&(s="("+s+")"),this.name+"("+this.params.join(", ")+") = "+s},n.prototype.toJSON=function(){var o=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map(function(a,s){return{name:a,type:o[s]}}),expr:this.expr}},n.fromJSON=function(o){return new n(o.name,o.params,o.expr)},n.prototype.toHTML=function(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",s=[],u=0;u<this.params.length;u++)s.push('<span class="math-symbol math-parameter">'+_n(this.params[u])+"</span>");var c=this.expr.toHTML(o);return i(this,a)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+_n(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c},n.prototype._toTex=function(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=this.expr.toTex(o);return i(this,a)&&(s="\\left(".concat(s,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(ig).join(",")+"\\right):="+s},n},{isClass:!0,isNode:!0})});var jge,Zge,uA,g4=g(()=>{Je();Nt();Fr();j();Bi();jge="IndexNode",Zge=["Range","Node","size"],uA=I(jge,Zge,r=>{var{Range:e,Node:t,size:n}=r;function i(a,s){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=a,this.dotNotation=s||!1,!Array.isArray(a)||!a.every(Ot))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}i.prototype=new t,i.prototype.type="IndexNode",i.prototype.isIndexNode=!0,i.prototype._compile=function(a,s){var u=Fi(this.dimensions,function(l,f){if(Ad(l))if(l.needsEnd()){var p=Object.create(s);p.end=!0;var m=l.start._compile(a,p),d=l.end._compile(a,p),h=l.step?l.step._compile(a,p):function(){return 1};return function(E,M,D){var A=n(D).valueOf(),k=Object.create(M);return k.end=A[f],o(m(E,k,D),d(E,k,D),h(E,k,D))}}else{var x=l.start._compile(a,s),y=l.end._compile(a,s),N=l.step?l.step._compile(a,s):function(){return 1};return function(E,M,D){return o(x(E,M,D),y(E,M,D),N(E,M,D))}}else if(lr(l)&&l.name==="end"){var v=Object.create(s);v.end=!0;var w=l._compile(a,v);return function(E,M,D){var A=n(D).valueOf(),k=Object.create(M);return k.end=A[f],w(E,k,D)}}else{var S=l._compile(a,s);return function(E,M,D){return S(E,M,D)}}}),c=nn(a,"index");return function(f,p,m){var d=Fi(u,function(h){return h(f,p,m)});return c(...d)}},i.prototype.forEach=function(a){for(var s=0;s<this.dimensions.length;s++)a(this.dimensions[s],"dimensions["+s+"]",this)},i.prototype.map=function(a){for(var s=[],u=0;u<this.dimensions.length;u++)s[u]=this._ifNode(a(this.dimensions[u],"dimensions["+u+"]",this));return new i(s,this.dotNotation)},i.prototype.clone=function(){return new i(this.dimensions.slice(0),this.dotNotation)},i.prototype.isObjectProperty=function(){return this.dimensions.length===1&&sr(this.dimensions[0])&&typeof this.dimensions[0].value=="string"},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},i.prototype._toString=function(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},i.fromJSON=function(a){return new i(a.dimensions,a.dotNotation)},i.prototype.toHTML=function(a){for(var s=[],u=0;u<this.dimensions.length;u++)s[u]=this.dimensions[u].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+_n(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},i.prototype._toTex=function(a){var s=this.dimensions.map(function(u){return u.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"};function o(a,s,u){return new e(lt(a)?a.toNumber():a,lt(s)?s.toNumber():s,lt(u)?u.toNumber():u)}return i},{isClass:!0,isNode:!0})});var Xge,Jge,cA,v4=g(()=>{Je();Fr();Bi();Ht();j();Xge="ObjectNode",Jge=["Node"],cA=I(Xge,Jge,r=>{var{Node:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=n||{},n&&(typeof n!="object"||!Object.keys(n).every(function(i){return Ot(n[i])})))throw new TypeError("Object containing Nodes expected")}return t.prototype=new e,t.prototype.type="ObjectNode",t.prototype.isObjectNode=!0,t.prototype._compile=function(n,i){var o={};for(var a in this.properties)if(ot(this.properties,a)){var s=ip(a),u=JSON.parse(s);if(!_d(this.properties,u))throw new Error('No access to property "'+u+'"');o[u]=this.properties[a]._compile(n,i)}return function(l,f,p){var m={};for(var d in o)ot(o,d)&&(m[d]=o[d](l,f,p));return m}},t.prototype.forEach=function(n){for(var i in this.properties)ot(this.properties,i)&&n(this.properties[i],"properties["+ip(i)+"]",this)},t.prototype.map=function(n){var i={};for(var o in this.properties)ot(this.properties,o)&&(i[o]=this._ifNode(n(this.properties[o],"properties["+ip(o)+"]",this)));return new t(i)},t.prototype.clone=function(){var n={};for(var i in this.properties)ot(this.properties,i)&&(n[i]=this.properties[i]);return new t(n)},t.prototype._toString=function(n){var i=[];for(var o in this.properties)ot(this.properties,o)&&i.push(ip(o)+": "+this.properties[o].toString(n));return"{"+i.join(", ")+"}"},t.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},t.fromJSON=function(n){return new t(n.properties)},t.prototype.toHTML=function(n){var i=[];for(var o in this.properties)ot(this.properties,o)&&i.push('<span class="math-symbol math-property">'+_n(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(n));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},t.prototype._toTex=function(n){var i=[];for(var o in this.properties)ot(this.properties,o)&&i.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(n)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(i.join(`
`),"\\end{array}\\right\\}")},t},{isClass:!0,isNode:!0})});var Yge,Qge,lA,x4=g(()=>{Je();Nt();Fr();Bi();Tu();Cu();j();Yge="OperatorNode",Qge=["Node"],lA=I(Yge,Qge,r=>{var{Node:e}=r;function t(i,o,a,s,u){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof i!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(a)||!a.every(Ot))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=s===!0,this.isPercentage=u===!0,this.op=i,this.fn=o,this.args=a||[]}t.prototype=new e,t.prototype.type="OperatorNode",t.prototype.isOperatorNode=!0,t.prototype._compile=function(i,o){if(typeof this.fn!="string"||!Fd(i,this.fn))throw i[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var a=nn(i,this.fn),s=Fi(this.args,function(f){return f._compile(i,o)});if(s.length===1){var u=s[0];return function(p,m,d){return a(u(p,m,d))}}else if(s.length===2){var c=s[0],l=s[1];return function(p,m,d){return a(c(p,m,d),l(p,m,d))}}else return function(p,m,d){return a.apply(null,Fi(s,function(h){return h(p,m,d)}))}},t.prototype.forEach=function(i){for(var o=0;o<this.args.length;o++)i(this.args[o],"args["+o+"]",this)},t.prototype.map=function(i){for(var o=[],a=0;a<this.args.length;a++)o[a]=this._ifNode(i(this.args[a],"args["+a+"]",this));return new t(this.op,this.fn,o,this.implicit,this.isPercentage)},t.prototype.clone=function(){return new t(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)},t.prototype.isUnary=function(){return this.args.length===1},t.prototype.isBinary=function(){return this.args.length===2};function n(i,o,a,s,u){var c=tr(i,o),l=tl(i,o);if(o==="all"||s.length>2&&i.getIdentifier()!=="OperatorNode:add"&&i.getIdentifier()!=="OperatorNode:multiply")return s.map(function(M){switch(M.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var f;switch(s.length){case 0:f=[];break;case 1:{var p=tr(s[0],o);if(u&&p!==null){var m,d;if(o==="keep"?(m=s[0].getIdentifier(),d=i.getIdentifier()):(m=s[0].getContent().getIdentifier(),d=i.getContent().getIdentifier()),Xo[c][d].latexLeftParens===!1){f=[!1];break}if(Xo[p][m].latexParens===!1){f=[!1];break}}if(p===null){f=[!1];break}if(p<=c){f=[!0];break}f=[!1]}break;case 2:{var h,x=tr(s[0],o),y=rg(i,s[0],o);x===null?h=!1:x===c&&l==="right"&&!y||x<c?h=!0:h=!1;var N,v=tr(s[1],o),w=rg(i,s[1],o);if(v===null?N=!1:v===c&&l==="left"&&!w||v<c?N=!0:N=!1,u){var S,b,E;o==="keep"?(S=i.getIdentifier(),b=i.args[0].getIdentifier(),E=i.args[1].getIdentifier()):(S=i.getContent().getIdentifier(),b=i.args[0].getContent().getIdentifier(),E=i.args[1].getContent().getIdentifier()),x!==null&&(Xo[c][S].latexLeftParens===!1&&(h=!1),Xo[x][b].latexParens===!1&&(h=!1)),v!==null&&(Xo[c][S].latexRightParens===!1&&(N=!1),Xo[v][E].latexParens===!1&&(N=!1))}f=[h,N]}break;default:(i.getIdentifier()==="OperatorNode:add"||i.getIdentifier()==="OperatorNode:multiply")&&(f=s.map(function(M){var D=tr(M,o),A=rg(i,M,o),k=tl(M,o);return D===null?!1:c===D&&l===k&&!A?!0:D<c}));break}return s.length>=2&&i.getIdentifier()==="OperatorNode:multiply"&&i.implicit&&o==="auto"&&a==="hide"&&(f=s.map(function(M,D){var A=M.getIdentifier()==="ParenthesisNode";return!!(f[D]||A)})),f}return t.prototype._toString=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=i&&i.implicit?i.implicit:"hide",s=this.args,u=n(this,o,a,s,!1);if(s.length===1){var c=tl(this,o),l=s[0].toString(i);u[0]&&(l="("+l+")");var f=/[a-zA-Z]+/.test(this.op);return c==="right"?this.op+(f?" ":"")+l:c==="left"?l+(f?" ":"")+this.op:l+this.op}else if(s.length===2){var p=s[0].toString(i),m=s[1].toString(i);return u[0]&&(p="("+p+")"),u[1]&&(m="("+m+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&a==="hide"?p+" "+m:p+" "+this.op+" "+m}else if(s.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var d=s.map(function(h,x){return h=h.toString(i),u[x]&&(h="("+h+")"),h});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&a==="hide"?d.join(" "):d.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"},t.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}},t.fromJSON=function(i){return new t(i.op,i.fn,i.args,i.implicit,i.isPercentage)},t.prototype.toHTML=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=i&&i.implicit?i.implicit:"hide",s=this.args,u=n(this,o,a,s,!1);if(s.length===1){var c=tl(this,o),l=s[0].toHTML(i);return u[0]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+_n(this.op)+"</span>"+l:l+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+_n(this.op)+"</span>"}else if(s.length===2){var f=s[0].toHTML(i),p=s[1].toHTML(i);return u[0]&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&a==="hide"?f+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:f+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+_n(this.op)+"</span>"+p}else{var m=s.map(function(d,h){return d=d.toHTML(i),u[h]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),d});return s.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&a==="hide"?m.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):m.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+_n(this.op)+"</span>"):'<span class="math-function">'+_n(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+m.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}},t.prototype._toTex=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=i&&i.implicit?i.implicit:"hide",s=this.args,u=n(this,o,a,s,!0),c=Kt[this.fn];if(c=typeof c>"u"?this.op:c,s.length===1){var l=tl(this,o),f=s[0].toTex(i);return u[0]&&(f="\\left(".concat(f,"\\right)")),l==="right"?c+f:f+c}else if(s.length===2){var p=s[0],m=p.toTex(i);u[0]&&(m="\\left(".concat(m,"\\right)"));var d=s[1],h=d.toTex(i);u[1]&&(h="\\left(".concat(h,"\\right)"));var x;switch(o==="keep"?x=p.getIdentifier():x=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return c+"{"+m+"}{"+h+"}";case"OperatorNode:pow":switch(m="{"+m+"}",h="{"+h+"}",x){case"ConditionalNode":case"OperatorNode:divide":m="\\left(".concat(m,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&a==="hide")return m+"~"+h}return m+c+h}else if(s.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=s.map(function(N,v){return N=N.toTex(i),u[v]&&(N="\\left(".concat(N,"\\right)")),N});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit?y.join("~"):y.join(c)}else return"\\mathrm{"+this.fn+"}\\left("+s.map(function(N){return N.toTex(i)}).join(",")+"\\right)"},t.prototype.getIdentifier=function(){return this.type+":"+this.fn},t},{isClass:!0,isNode:!0})});var eve,tve,fA,y4=g(()=>{Je();j();eve="ParenthesisNode",tve=["Node"],fA=I(eve,tve,r=>{var{Node:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!Ot(n))throw new TypeError('Node expected for parameter "content"');this.content=n}return t.prototype=new e,t.prototype.type="ParenthesisNode",t.prototype.isParenthesisNode=!0,t.prototype._compile=function(n,i){return this.content._compile(n,i)},t.prototype.getContent=function(){return this.content.getContent()},t.prototype.forEach=function(n){n(this.content,"content",this)},t.prototype.map=function(n){var i=n(this.content,"content",this);return new t(i)},t.prototype.clone=function(){return new t(this.content)},t.prototype._toString=function(n){return!n||n&&!n.parenthesis||n&&n.parenthesis==="keep"?"("+this.content.toString(n)+")":this.content.toString(n)},t.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},t.fromJSON=function(n){return new t(n.content)},t.prototype.toHTML=function(n){return!n||n&&!n.parenthesis||n&&n.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(n)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(n)},t.prototype._toTex=function(n){return!n||n&&!n.parenthesis||n&&n.parenthesis==="keep"?"\\left(".concat(this.content.toTex(n),"\\right)"):this.content.toTex(n)},t},{isClass:!0,isNode:!0})});var rve,nve,pA,b4=g(()=>{Je();j();Tu();rve="RangeNode",nve=["Node"],pA=I(rve,nve,r=>{var{Node:e}=r;function t(i,o,a){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!Ot(i))throw new TypeError("Node expected");if(!Ot(o))throw new TypeError("Node expected");if(a&&!Ot(a))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=i,this.end=o,this.step=a||null}t.prototype=new e,t.prototype.type="RangeNode",t.prototype.isRangeNode=!0,t.prototype.needsEnd=function(){var i=this.filter(function(o){return lr(o)&&o.name==="end"});return i.length>0},t.prototype._compile=function(i,o){var a=i.range,s=this.start._compile(i,o),u=this.end._compile(i,o);if(this.step){var c=this.step._compile(i,o);return function(f,p,m){return a(s(f,p,m),u(f,p,m),c(f,p,m))}}else return function(f,p,m){return a(s(f,p,m),u(f,p,m))}},t.prototype.forEach=function(i){i(this.start,"start",this),i(this.end,"end",this),this.step&&i(this.step,"step",this)},t.prototype.map=function(i){return new t(this._ifNode(i(this.start,"start",this)),this._ifNode(i(this.end,"end",this)),this.step&&this._ifNode(i(this.step,"step",this)))},t.prototype.clone=function(){return new t(this.start,this.end,this.step&&this.step)};function n(i,o){var a=tr(i,o),s={},u=tr(i.start,o);if(s.start=u!==null&&u<=a||o==="all",i.step){var c=tr(i.step,o);s.step=c!==null&&c<=a||o==="all"}var l=tr(i.end,o);return s.end=l!==null&&l<=a||o==="all",s}return t.prototype._toString=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=n(this,o),s,u=this.start.toString(i);if(a.start&&(u="("+u+")"),s=u,this.step){var c=this.step.toString(i);a.step&&(c="("+c+")"),s+=":"+c}var l=this.end.toString(i);return a.end&&(l="("+l+")"),s+=":"+l,s},t.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(i){return new t(i.start,i.end,i.step)},t.prototype.toHTML=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=n(this,o),s,u=this.start.toHTML(i);if(a.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s=u,this.step){var c=this.step.toHTML(i);a.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s+='<span class="math-operator math-range-operator">:</span>'+c}var l=this.end.toHTML(i);return a.end&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s+='<span class="math-operator math-range-operator">:</span>'+l,s},t.prototype._toTex=function(i){var o=i&&i.parenthesis?i.parenthesis:"keep",a=n(this,o),s=this.start.toTex(i);if(a.start&&(s="\\left(".concat(s,"\\right)")),this.step){var u=this.step.toTex(i);a.step&&(u="\\left(".concat(u,"\\right)")),s+=":"+u}var c=this.end.toTex(i);return a.end&&(c="\\left(".concat(c,"\\right)")),s+=":"+c,s},t},{isClass:!0,isNode:!0})});var ive,ove,mA,w4=g(()=>{Tu();Fr();Bi();Cu();j();ive="RelationalNode",ove=["Node"],mA=I(ive,ove,r=>{var{Node:e}=r;function t(n,i){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(n))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(i))throw new TypeError("Parameter params must be an array");if(n.length!==i.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=n,this.params=i}return t.prototype=new e,t.prototype.type="RelationalNode",t.prototype.isRelationalNode=!0,t.prototype._compile=function(n,i){var o=this,a=this.params.map(s=>s._compile(n,i));return function(u,c,l){for(var f,p=a[0](u,c,l),m=0;m<o.conditionals.length;m++){f=p,p=a[m+1](u,c,l);var d=nn(n,o.conditionals[m]);if(!d(f,p))return!1}return!0}},t.prototype.forEach=function(n){this.params.forEach((i,o)=>n(i,"params["+o+"]",this),this)},t.prototype.map=function(n){return new t(this.conditionals.slice(),this.params.map((i,o)=>this._ifNode(n(i,"params["+o+"]",this)),this))},t.prototype.clone=function(){return new t(this.conditionals,this.params)},t.prototype._toString=function(n){for(var i=n&&n.parenthesis?n.parenthesis:"keep",o=tr(this,i),a=this.params.map(function(l,f){var p=tr(l,i);return i==="all"||p!==null&&p<=o?"("+l.toString(n)+")":l.toString(n)}),s={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},u=a[0],c=0;c<this.conditionals.length;c++)u+=" "+s[this.conditionals[c]]+" "+a[c+1];return u},t.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},t.fromJSON=function(n){return new t(n.conditionals,n.params)},t.prototype.toHTML=function(n){for(var i=n&&n.parenthesis?n.parenthesis:"keep",o=tr(this,i),a=this.params.map(function(l,f){var p=tr(l,i);return i==="all"||p!==null&&p<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+l.toHTML(n)+'<span class="math-parenthesis math-round-parenthesis">)</span>':l.toHTML(n)}),s={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},u=a[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+_n(s[this.conditionals[c]])+"</span>"+a[c+1];return u},t.prototype._toTex=function(n){for(var i=n&&n.parenthesis?n.parenthesis:"keep",o=tr(this,i),a=this.params.map(function(c,l){var f=tr(c,i);return i==="all"||f!==null&&f<=o?"\\left("+c.toTex(n)+"\right)":c.toTex(n)}),s=a[0],u=0;u<this.conditionals.length;u++)s+=Kt[this.conditionals[u]]+a[u+1];return s},t},{isClass:!0,isNode:!0})});var ave,sve,hA,N4=g(()=>{Fr();Bi();j();Cu();ave="SymbolNode",sve=["math","?Unit","Node"],hA=I(ave,sve,r=>{var{math:e,Unit:t,Node:n}=r;function i(a){return t?t.isValuelessUnit(a):!1}function o(a){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(typeof a!="string")throw new TypeError('String expected for parameter "name"');this.name=a}return o.prototype=new n,o.prototype.type="SymbolNode",o.prototype.isSymbolNode=!0,o.prototype._compile=function(a,s){var u=this.name;if(s[u]===!0)return function(l,f,p){return f[u]};if(u in a)return function(l,f,p){return l.has(u)?l.get(u):nn(a,u)};var c=i(u);return function(l,f,p){return l.has(u)?l.get(u):c?new t(null,u):o.onUndefinedSymbol(u)}},o.prototype.forEach=function(a){},o.prototype.map=function(a){return this.clone()},o.onUndefinedSymbol=function(a){throw new Error("Undefined symbol "+a)},o.prototype.clone=function(){return new o(this.name)},o.prototype._toString=function(a){return this.name},o.prototype.toHTML=function(a){var s=_n(this.name);return s==="true"||s==="false"?'<span class="math-symbol math-boolean">'+s+"</span>":s==="i"?'<span class="math-symbol math-imaginary-symbol">'+s+"</span>":s==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+s+"</span>":s==="NaN"?'<span class="math-symbol math-nan-symbol">'+s+"</span>":s==="null"?'<span class="math-symbol math-null-symbol">'+s+"</span>":s==="undefined"?'<span class="math-symbol math-undefined-symbol">'+s+"</span>":'<span class="math-symbol">'+s+"</span>"},o.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},o.fromJSON=function(a){return new o(a.name)},o.prototype._toTex=function(a){var s=!1;typeof e[this.name]>"u"&&i(this.name)&&(s=!0);var u=ig(this.name,s);return u[0]==="\\"?u:" "+u},o},{isClass:!0,isNode:!0})});function rl(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return typeof r.createSubScope=="function"?hb(r.createSubScope(),...t):hb(Zi(),r,...t)}var dA=g(()=>{Rs()});var uve,cve,gA,S4=g(()=>{Je();Fr();Ht();Bi();dA();j();Cu();uve="FunctionNode",cve=["math","Node","SymbolNode"],gA=I(uve,cve,r=>{var{math:e,Node:t,SymbolNode:n}=r;function i(u,c){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(typeof u=="string"&&(u=new n(u)),!Ot(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Ot))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}i.prototype=new t,i.prototype.type="FunctionNode",i.prototype.isFunctionNode=!0,i.prototype._compile=function(u,c){if(!(this instanceof i))throw new TypeError("No valid FunctionNode");var l=this.args.map(S=>S._compile(u,c));if(lr(this.fn)){var f=this.fn.name,p=f in u?nn(u,f):void 0,m=typeof p=="function"&&p.rawArgs===!0,d=S=>S.has(f)?S.get(f):f in u?nn(u,f):i.onUndefinedFunction(f);if(m){var h=this.args;return function(b,E,M){var D=d(b);return D(h,u,rl(b,E),b)}}else switch(l.length){case 0:return function(b,E,M){var D=d(b);return D()};case 1:return function(b,E,M){var D=d(b),A=l[0];return D(A(b,E,M))};case 2:return function(b,E,M){var D=d(b),A=l[0],k=l[1];return D(A(b,E,M),k(b,E,M))};default:return function(b,E,M){var D=d(b),A=l.map(k=>k(b,E,M));return D(...A)}}}else if(Wo(this.fn)&&_s(this.fn.index)&&this.fn.index.isObjectProperty()){var x=this.fn.object._compile(u,c),y=this.fn.index.getObjectProperty(),N=this.args;return function(b,E,M){var D=x(b,E,M);fO(D,y);var A=D[y]&&D[y].rawArgs;if(A)return D[y](N,u,rl(b,E),b);var k=l.map(T=>T(b,E,M));return D[y].apply(D,k)}}else{var v=this.fn._compile(u,c),w=this.args;return function(b,E,M){var D=v(b,E,M),A=D&&D.rawArgs;if(A)return D(w,u,rl(b,E),b);var k=l.map(T=>T(b,E,M));return D.apply(D,k)}}},i.prototype.forEach=function(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)},i.prototype.map=function(u){for(var c=this._ifNode(u(this.fn,"fn",this)),l=[],f=0;f<this.args.length;f++)l[f]=this._ifNode(u(this.args[f],"args["+f+"]",this));return new i(c,l)},i.prototype.clone=function(){return new i(this.fn,this.args.slice(0))},i.onUndefinedFunction=function(u){throw new Error("Undefined function "+u)};var o=i.prototype.toString;i.prototype.toString=function(u){var c,l=this.fn.toString(u);return u&&typeof u.handler=="object"&&ot(u.handler,l)&&(c=u.handler[l](this,u)),typeof c<"u"?c:o.call(this,u)},i.prototype._toString=function(u){var c=this.args.map(function(f){return f.toString(u)}),l=Na(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return l+"("+c.join(", ")+")"},i.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},i.fromJSON=function(u){return new i(u.fn,u.args)},i.prototype.toHTML=function(u){var c=this.args.map(function(l){return l.toHTML(u)});return'<span class="math-function">'+_n(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};function a(u,c,l){for(var f="",p=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,m=0,d;(d=p.exec(u))!==null;)if(f+=u.substring(m,d.index),m=d.index,d[0]==="$$")f+="$",m++;else{m+=d[0].length;var h=c[d[1]];if(!h)throw new ReferenceError("Template: Property "+d[1]+" does not exist.");if(d[2]===void 0)switch(typeof h){case"string":f+=h;break;case"object":if(Ot(h))f+=h.toTex(l);else if(Array.isArray(h))f+=h.map(function(x,y){if(Ot(x))return x.toTex(l);throw new TypeError("Template: "+d[1]+"["+y+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+d[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+d[1]+" has to be a Node, String or array of Nodes")}else if(Ot(h[d[2]]&&h[d[2]]))f+=h[d[2]].toTex(l);else throw new TypeError("Template: "+d[1]+"["+d[2]+"] is not a Node.")}return f+=u.slice(m),f}var s=i.prototype.toTex;return i.prototype.toTex=function(u){var c;return u&&typeof u.handler=="object"&&ot(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:s.call(this,u)},i.prototype._toTex=function(u){var c=this.args.map(function(p){return p.toTex(u)}),l;oA[this.name]&&(l=oA[this.name]),e[this.name]&&(typeof e[this.name].toTex=="function"||typeof e[this.name].toTex=="object"||typeof e[this.name].toTex=="string")&&(l=e[this.name].toTex);var f;switch(typeof l){case"function":f=l(this,u);break;case"string":f=a(l,this,u);break;case"object":switch(typeof l[c.length]){case"function":f=l[c.length](this,u);break;case"string":f=a(l[c.length],this,u);break}}return typeof f<"u"?f:a(m4,this,u)},i.prototype.getIdentifier=function(){return this.type+":"+this.name},i},{isClass:!0,isNode:!0})});var A4,lve,vA,M4=g(()=>{Rc();j();Je();nt();Ht();A4="parse",lve=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],vA=I(A4,lve,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:o,AssignmentNode:a,BlockNode:s,ConditionalNode:u,ConstantNode:c,FunctionAssignmentNode:l,FunctionNode:f,IndexNode:p,ObjectNode:m,OperatorNode:d,ParenthesisNode:h,RangeNode:x,RelationalNode:y,SymbolNode:N}=r,v=e(A4,{string:function(ae){return te(ae,{})},"Array | Matrix":function(ae){return w(ae,{})},"string, Object":function(ae,Me){var He=Me.nodes!==void 0?Me.nodes:{};return te(ae,He)},"Array | Matrix, Object":w});function w(O){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me=ae.nodes!==void 0?ae.nodes:{};return Ee(O,function(He){if(typeof He!="string")throw new TypeError("String expected");return te(He,Me)})}var S={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},b={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},E={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},M={true:!0,false:!1,null:null,undefined:void 0},D=["NaN","Infinity"];function A(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:S.NULL,nestingLevel:0,conditionalLevel:null}}function k(O,ae){return O.expression.substr(O.index,ae)}function T(O){return k(O,1)}function L(O){O.index++}function $(O){return O.expression.charAt(O.index-1)}function K(O){return O.expression.charAt(O.index+1)}function V(O){for(O.tokenType=S.NULL,O.token="",O.comment="";v.isWhitespace(T(O),O.nestingLevel);)L(O);if(T(O)==="#")for(;T(O)!==`
`&&T(O)!=="";)O.comment+=T(O),L(O);if(T(O)===""){O.tokenType=S.DELIMITER;return}if(T(O)===`
`&&!O.nestingLevel){O.tokenType=S.DELIMITER,O.token=T(O),L(O);return}var ae=T(O),Me=k(O,2),He=k(O,3);if(He.length===3&&b[He]){O.tokenType=S.DELIMITER,O.token=He,L(O),L(O),L(O);return}if(Me.length===2&&b[Me]){O.tokenType=S.DELIMITER,O.token=Me,L(O),L(O);return}if(b[ae]){O.tokenType=S.DELIMITER,O.token=ae,L(O);return}if(v.isDigitDot(ae)){O.tokenType=S.NUMBER;var Bt=k(O,2);if(Bt==="0b"||Bt==="0o"||Bt==="0x"){for(O.token+=T(O),L(O),O.token+=T(O),L(O);v.isHexDigit(T(O));)O.token+=T(O),L(O);if(T(O)===".")for(O.token+=".",L(O);v.isHexDigit(T(O));)O.token+=T(O),L(O);else if(T(O)==="i")for(O.token+="i",L(O);v.isDigit(T(O));)O.token+=T(O),L(O);return}if(T(O)==="."){if(O.token+=T(O),L(O),!v.isDigit(T(O))){O.tokenType=S.DELIMITER;return}}else{for(;v.isDigit(T(O));)O.token+=T(O),L(O);v.isDecimalMark(T(O),K(O))&&(O.token+=T(O),L(O))}for(;v.isDigit(T(O));)O.token+=T(O),L(O);if(T(O)==="E"||T(O)==="e"){if(v.isDigit(K(O))||K(O)==="-"||K(O)==="+"){if(O.token+=T(O),L(O),(T(O)==="+"||T(O)==="-")&&(O.token+=T(O),L(O)),!v.isDigit(T(O)))throw Mr(O,'Digit expected, got "'+T(O)+'"');for(;v.isDigit(T(O));)O.token+=T(O),L(O);if(v.isDecimalMark(T(O),K(O)))throw Mr(O,'Digit expected, got "'+T(O)+'"')}else if(K(O)===".")throw L(O),Mr(O,'Digit expected, got "'+T(O)+'"')}return}if(v.isAlpha(T(O),$(O),K(O))){for(;v.isAlpha(T(O),$(O),K(O))||v.isDigit(T(O));)O.token+=T(O),L(O);ot(E,O.token)?O.tokenType=S.DELIMITER:O.tokenType=S.SYMBOL;return}for(O.tokenType=S.UNKNOWN;T(O)!=="";)O.token+=T(O),L(O);throw Mr(O,'Syntax error in part "'+O.token+'"')}function z(O){do V(O);while(O.token===`
`)}function Q(O){O.nestingLevel++}function _(O){O.nestingLevel--}v.isAlpha=function(ae,Me,He){return v.isValidLatinOrGreek(ae)||v.isValidMathSymbol(ae,He)||v.isValidMathSymbol(Me,ae)},v.isValidLatinOrGreek=function(ae){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ae)},v.isValidMathSymbol=function(ae,Me){return/^[\uD835]$/.test(ae)&&/^[\uDC00-\uDFFF]$/.test(Me)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Me)},v.isWhitespace=function(ae,Me){return ae===" "||ae==="	"||ae===`
`&&Me>0},v.isDecimalMark=function(ae,Me){return ae==="."&&Me!=="/"&&Me!=="*"&&Me!=="^"},v.isDigitDot=function(ae){return ae>="0"&&ae<="9"||ae==="."},v.isDigit=function(ae){return ae>="0"&&ae<="9"},v.isHexDigit=function(ae){return ae>="0"&&ae<="9"||ae>="a"&&ae<="f"||ae>="A"&&ae<="F"};function te(O,ae){var Me=A();un(Me,{expression:O,extraNodes:ae}),V(Me);var He=he(Me);if(Me.token!=="")throw Me.tokenType===S.DELIMITER?va(Me,"Unexpected operator "+Me.token):Mr(Me,'Unexpected part "'+Me.token+'"');return He}function he(O){var ae,Me=[],He;for(O.token!==""&&O.token!==`
`&&O.token!==";"&&(ae=Ne(O),ae.comment=O.comment);O.token===`
`||O.token===";";)Me.length===0&&ae&&(He=O.token!==";",Me.push({node:ae,visible:He})),V(O),O.token!==`
`&&O.token!==";"&&O.token!==""&&(ae=Ne(O),ae.comment=O.comment,He=O.token!==";",Me.push({node:ae,visible:He}));return Me.length>0?new s(Me):(ae||(ae=new c(void 0),ae.comment=O.comment),ae)}function Ne(O){var ae,Me,He,Bt,Wt=Y(O);if(O.token==="="){if(lr(Wt))return ae=Wt.name,z(O),He=Ne(O),new a(new N(ae),He);if(Wo(Wt))return z(O),He=Ne(O),new a(Wt.object,Wt.index,He);if(Sa(Wt)&&lr(Wt.fn)&&(Bt=!0,Me=[],ae=Wt.name,Wt.args.forEach(function(wi,Uf){lr(wi)?Me[Uf]=wi.name:Bt=!1}),Bt))return z(O),He=Ne(O),new l(ae,Me,He);throw Mr(O,"Invalid left hand side of assignment operator =")}return Wt}function Y(O){for(var ae=ve(O);O.token==="?";){var Me=O.conditionalLevel;O.conditionalLevel=O.nestingLevel,z(O);var He=ae,Bt=Ne(O);if(O.token!==":")throw Mr(O,"False part of conditional expression expected");O.conditionalLevel=null,z(O);var Wt=Ne(O);ae=new u(He,Bt,Wt),O.conditionalLevel=Me}return ae}function ve(O){for(var ae=re(O);O.token==="or";)z(O),ae=new d("or","or",[ae,re(O)]);return ae}function re(O){for(var ae=ne(O);O.token==="xor";)z(O),ae=new d("xor","xor",[ae,ne(O)]);return ae}function ne(O){for(var ae=ge(O);O.token==="and";)z(O),ae=new d("and","and",[ae,ge(O)]);return ae}function ge(O){for(var ae=xe(O);O.token==="|";)z(O),ae=new d("|","bitOr",[ae,xe(O)]);return ae}function xe(O){for(var ae=Se(O);O.token==="^|";)z(O),ae=new d("^|","bitXor",[ae,Se(O)]);return ae}function Se(O){for(var ae=we(O);O.token==="&";)z(O),ae=new d("&","bitAnd",[ae,we(O)]);return ae}function we(O){for(var ae=[et(O)],Me=[],He={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};ot(He,O.token);){var Bt={name:O.token,fn:He[O.token]};Me.push(Bt),z(O),ae.push(et(O))}return ae.length===1?ae[0]:ae.length===2?new d(Me[0].name,Me[0].fn,ae):new y(Me.map(Wt=>Wt.fn),ae)}function et(O){var ae,Me,He,Bt;ae=Ye(O);for(var Wt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};ot(Wt,O.token);)Me=O.token,He=Wt[Me],z(O),Bt=[ae,Ye(O)],ae=new d(Me,He,Bt);return ae}function Ye(O){var ae,Me,He,Bt;ae=Ue(O);for(var Wt={to:"to",in:"to"};ot(Wt,O.token);)Me=O.token,He=Wt[Me],z(O),Me==="in"&&O.token===""?ae=new d("*","multiply",[ae,new N("in")],!0):(Bt=[ae,Ue(O)],ae=new d(Me,He,Bt));return ae}function Ue(O){var ae,Me=[];if(O.token===":"?ae=new c(1):ae=st(O),O.token===":"&&O.conditionalLevel!==O.nestingLevel){for(Me.push(ae);O.token===":"&&Me.length<3;)z(O),O.token===")"||O.token==="]"||O.token===","||O.token===""?Me.push(new N("end")):Me.push(st(O));Me.length===3?ae=new x(Me[0],Me[2],Me[1]):ae=new x(Me[0],Me[1])}return ae}function st(O){var ae,Me,He,Bt;ae=Z(O);for(var Wt={"+":"add","-":"subtract"};ot(Wt,O.token);){Me=O.token,He=Wt[Me],z(O);var wi=Z(O);wi.isPercentage?Bt=[ae,new d("*","multiply",[ae,wi])]:Bt=[ae,wi],ae=new d(Me,He,Bt)}return ae}function Z(O){var ae,Me,He,Bt;ae=ie(O),Me=ae;for(var Wt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};ot(Wt,O.token);)He=O.token,Bt=Wt[He],z(O),Me=ie(O),ae=new d(He,Bt,[ae,Me]);return ae}function ie(O){var ae,Me;for(ae=G(O),Me=ae;O.tokenType===S.SYMBOL||O.token==="in"&&sr(ae)||O.tokenType===S.NUMBER&&!sr(Me)&&(!gn(Me)||Me.op==="!")||O.token==="(";)Me=G(O),ae=new d("*","multiply",[ae,Me],!0);return ae}function G(O){for(var ae=X(O),Me=ae,He=[];O.token==="/"&&sr(Me);)if(He.push(un({},O)),z(O),O.tokenType===S.NUMBER)if(He.push(un({},O)),z(O),O.tokenType===S.SYMBOL||O.token==="(")un(O,He.pop()),He.pop(),Me=X(O),ae=new d("/","divide",[ae,Me]);else{He.pop(),un(O,He.pop());break}else{un(O,He.pop());break}return ae}function X(O){var ae,Me,He,Bt;ae=le(O);for(var Wt={"%":"mod",mod:"mod"};ot(Wt,O.token);)Me=O.token,He=Wt[Me],z(O),Me==="%"&&O.tokenType===S.DELIMITER&&O.token!=="("?ae=new d("/","divide",[ae,new c(100)],!1,!0):(Bt=[ae,le(O)],ae=new d(Me,He,Bt));return ae}function le(O){var ae,Me,He,Bt={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return ot(Bt,O.token)?(He=Bt[O.token],ae=O.token,z(O),Me=[le(O)],new d(ae,He,Me)):se(O)}function se(O){var ae,Me,He,Bt;return ae=Ae(O),(O.token==="^"||O.token===".^")&&(Me=O.token,He=Me==="^"?"pow":"dotPow",z(O),Bt=[ae,le(O)],ae=new d(Me,He,Bt)),ae}function Ae(O){var ae,Me,He,Bt;ae=ze(O);for(var Wt={"!":"factorial","'":"ctranspose"};ot(Wt,O.token);)Me=O.token,He=Wt[Me],V(O),Bt=[ae],ae=new d(Me,He,Bt),ae=Ve(O,ae);return ae}function ze(O){var ae=[];if(O.tokenType===S.SYMBOL&&ot(O.extraNodes,O.token)){var Me=O.extraNodes[O.token];if(V(O),O.token==="("){if(ae=[],Q(O),V(O),O.token!==")")for(ae.push(Ne(O));O.token===",";)V(O),ae.push(Ne(O));if(O.token!==")")throw Mr(O,"Parenthesis ) expected");_(O),V(O)}return new Me(ae)}return We(O)}function We(O){var ae,Me;return O.tokenType===S.SYMBOL||O.tokenType===S.DELIMITER&&O.token in E?(Me=O.token,V(O),ot(M,Me)?ae=new c(M[Me]):D.indexOf(Me)!==-1?ae=new c(t(Me,"number")):ae=new N(Me),ae=Ve(O,ae),ae):Ke(O)}function Ve(O,ae,Me){for(var He;(O.token==="("||O.token==="["||O.token===".")&&(!Me||Me.indexOf(O.token)!==-1);)if(He=[],O.token==="(")if(lr(ae)||Wo(ae)){if(Q(O),V(O),O.token!==")")for(He.push(Ne(O));O.token===",";)V(O),He.push(Ne(O));if(O.token!==")")throw Mr(O,"Parenthesis ) expected");_(O),V(O),ae=new f(ae,He)}else return ae;else if(O.token==="["){if(Q(O),V(O),O.token!=="]")for(He.push(Ne(O));O.token===",";)V(O),He.push(Ne(O));if(O.token!=="]")throw Mr(O,"Parenthesis ] expected");_(O),V(O),ae=new i(ae,new p(He))}else{if(V(O),O.tokenType!==S.SYMBOL)throw Mr(O,"Property name expected after dot");He.push(new c(O.token)),V(O);var Bt=!0;ae=new i(ae,new p(He,Bt))}return ae}function Ke(O){var ae,Me;return O.token==='"'?(Me=ft(O),ae=new c(Me),ae=Ve(O,ae),ae):or(O)}function ft(O){for(var ae="";T(O)!==""&&T(O)!=='"';)T(O)==="\\"&&(ae+=T(O),L(O)),ae+=T(O),L(O);if(V(O),O.token!=='"')throw Mr(O,'End of string " expected');return V(O),JSON.parse('"'+ae+'"')}function or(O){var ae,Me;return O.token==="'"?(Me=en(O),ae=new c(Me),ae=Ve(O,ae),ae):sn(O)}function en(O){for(var ae="";T(O)!==""&&T(O)!=="'";)T(O)==="\\"&&(ae+=T(O),L(O)),ae+=T(O),L(O);if(V(O),O.token!=="'")throw Mr(O,"End of string ' expected");return V(O),JSON.parse('"'+ae+'"')}function sn(O){var ae,Me,He,Bt;if(O.token==="["){if(Q(O),V(O),O.token!=="]"){var Wt=Oi(O);if(O.token===";"){for(He=1,Me=[Wt];O.token===";";)V(O),Me[He]=Oi(O),He++;if(O.token!=="]")throw Mr(O,"End of matrix ] expected");_(O),V(O),Bt=Me[0].items.length;for(var wi=1;wi<He;wi++)if(Me[wi].items.length!==Bt)throw va(O,"Column dimensions mismatch ("+Me[wi].items.length+" !== "+Bt+")");ae=new o(Me)}else{if(O.token!=="]")throw Mr(O,"End of matrix ] expected");_(O),V(O),ae=Wt}}else _(O),V(O),ae=new o([]);return Ve(O,ae)}return ja(O)}function Oi(O){for(var ae=[Ne(O)],Me=1;O.token===",";)V(O),ae[Me]=Ne(O),Me++;return new o(ae)}function ja(O){if(O.token==="{"){Q(O);var ae,Me={};do if(V(O),O.token!=="}"){if(O.token==='"')ae=ft(O);else if(O.token==="'")ae=en(O);else if(O.tokenType===S.SYMBOL||O.tokenType===S.DELIMITER&&O.token in E)ae=O.token,V(O);else throw Mr(O,"Symbol or string expected as object key");if(O.token!==":")throw Mr(O,"Colon : expected after object key");V(O),Me[ae]=Ne(O)}while(O.token===",");if(O.token!=="}")throw Mr(O,"Comma , or bracket } expected after object value");_(O),V(O);var He=new m(Me);return He=Ve(O,He),He}return da(O)}function da(O){var ae;return O.tokenType===S.NUMBER?(ae=O.token,V(O),new c(t(ae,n.number))):Cs(O)}function Cs(O){var ae;if(O.token==="("){if(Q(O),V(O),ae=Ne(O),O.token!==")")throw Mr(O,"Parenthesis ) expected");return _(O),V(O),ae=new h(ae),ae=Ve(O,ae),ae}return Za(O)}function Za(O){throw O.token===""?Mr(O,"Unexpected end of expression"):Mr(O,"Value expected")}function ga(O){return O.index-O.token.length+1}function Mr(O,ae){var Me=ga(O),He=new SyntaxError(ae+" (char "+Me+")");return He.char=Me,He}function va(O,ae){var Me=ga(O),He=new SyntaxError(ae+" (char "+Me+")");return He.char=Me,He}return v})});var D4,fve,xA,E4=g(()=>{nt();j();D4="compile",fve=["typed","parse"],xA=I(D4,fve,r=>{var{typed:e,parse:t}=r;return e(D4,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return Ee(i,function(o){return t(o).compile()})}})})});var T4,pve,yA,C4=g(()=>{nt();j();Rs();T4="evaluate",pve=["typed","parse"],yA=I(T4,pve,r=>{var{typed:e,parse:t}=r;return e(T4,{string:function(i){var o=Zi();return t(i).compile().evaluate(o)},"string, Map | Object":function(i,o){return t(i).compile().evaluate(o)},"Array | Matrix":function(i){var o=Zi();return Ee(i,function(a){return t(a).compile().evaluate(o)})},"Array | Matrix, Map | Object":function(i,o){return Ee(i,function(a){return t(a).compile().evaluate(o)})}})})});var mve,hve,bA,I4=g(()=>{j();Rs();mve="Parser",hve=["evaluate"],bA=I(mve,hve,r=>{var{evaluate:e}=r;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Zi(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(n){return e(n,this.scope)},t.prototype.get=function(n){if(this.scope.has(n))return this.scope.get(n)},t.prototype.getAll=function(){return mO(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(n,i){return this.scope.set(n,i),i},t.prototype.remove=function(n){this.scope.delete(n)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0})});var k4,dve,wA,O4=g(()=>{j();k4="parser",dve=["typed","Parser"],wA=I(k4,dve,r=>{var{typed:e,Parser:t}=r;return e(k4,{"":function(){return new t}})})});var _4,gve,NA,F4=g(()=>{Ht();j();_4="lup",gve=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],NA=I(_4,gve,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:o,multiplyScalar:a,subtract:s,larger:u,equalScalar:c,unaryMinus:l,DenseMatrix:f,SparseMatrix:p,Spa:m}=r;return e(_4,{DenseMatrix:function(y){return d(y)},SparseMatrix:function(y){return h(y)},Array:function(y){var N=t(y),v=d(N);return{L:v.L.valueOf(),U:v.U.valueOf(),p:v.p}}});function d(x){var y=x._size[0],N=x._size[1],v=Math.min(y,N),w=at(x._data),S=[],b=[y,v],E=[],M=[v,N],D,A,k,T=[];for(D=0;D<y;D++)T[D]=D;for(A=0;A<N;A++){if(A>0)for(D=0;D<y;D++){var L=Math.min(D,A),$=0;for(k=0;k<L;k++)$=i($,a(w[D][k],w[k][A]));w[D][A]=s(w[D][A],$)}var K=A,V=0,z=0;for(D=A;D<y;D++){var Q=w[D][A],_=n(Q);u(_,V)&&(K=D,V=_,z=Q)}if(A!==K&&(T[A]=[T[K],T[K]=T[A]][0],f._swapRows(A,K,w)),A<y)for(D=A+1;D<y;D++){var te=w[D][A];c(te,0)||(w[D][A]=o(w[D][A],z))}}for(A=0;A<N;A++)for(D=0;D<y;D++){if(A===0&&(D<N&&(E[D]=[]),S[D]=[]),D<A){D<N&&(E[D][A]=w[D][A]),A<y&&(S[D][A]=0);continue}if(D===A){D<N&&(E[D][A]=w[D][A]),A<y&&(S[D][A]=1);continue}D<N&&(E[D][A]=0),A<y&&(S[D][A]=w[D][A])}var he=new f({data:S,size:b}),Ne=new f({data:E,size:M}),Y=[];for(D=0,v=T.length;D<v;D++)Y[T[D]]=D;return{L:he,U:Ne,p:Y,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function h(x){var y=x._size[0],N=x._size[1],v=Math.min(y,N),w=x._values,S=x._index,b=x._ptr,E=[],M=[],D=[],A=[y,v],k=[],T=[],L=[],$=[v,N],K,V,z,Q=[],_=[];for(K=0;K<y;K++)Q[K]=K,_[K]=K;var te=function(Y,ve){var re=_[Y],ne=_[ve];Q[re]=ve,Q[ne]=Y,_[Y]=ne,_[ve]=re},he=function(){var Y=new m;V<y&&(D.push(E.length),E.push(1),M.push(V)),L.push(k.length);var ve=b[V],re=b[V+1];for(z=ve;z<re;z++)K=S[z],Y.set(Q[K],w[z]);V>0&&Y.forEach(0,V-1,function(Se,we){p._forEachRow(Se,E,M,D,function(et,Ye){et>Se&&Y.accumulate(et,l(a(Ye,we)))})});var ne=V,ge=Y.get(V),xe=n(ge);Y.forEach(V+1,y-1,function(Se,we){var et=n(we);u(et,xe)&&(ne=Se,xe=et,ge=we)}),V!==ne&&(p._swapRows(V,ne,A[1],E,M,D),p._swapRows(V,ne,$[1],k,T,L),Y.swap(V,ne),te(V,ne)),Y.forEach(0,y-1,function(Se,we){Se<=V?(k.push(we),T.push(Se)):(we=o(we,ge),c(we,0)||(E.push(we),M.push(Se)))})};for(V=0;V<N;V++)he();return L.push(k.length),D.push(E.length),{L:new p({values:E,index:M,ptr:D,size:A}),U:new p({values:k,index:T,ptr:L,size:$}),p:Q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}})});var B4,vve,SA,z4=g(()=>{Rc();j();B4="qr",vve=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],SA=I(B4,vve,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:o,equal:a,sign:s,sqrt:u,conj:c,unaryMinus:l,addScalar:f,divideScalar:p,multiplyScalar:m,subtract:d,complex:h}=r;return un(e(B4,{DenseMatrix:function(w){return y(w)},SparseMatrix:function(w){return N(w)},Array:function(w){var S=t(w),b=y(S);return{Q:b.Q.valueOf(),R:b.R.valueOf()}}}),{_denseQRimpl:x});function x(v){var w=v._size[0],S=v._size[1],b=i([w],"dense"),E=b._data,M=v.clone(),D=M._data,A,k,T,L=n([w],"");for(T=0;T<Math.min(S,w);++T){var $=D[T][T],K=l(a($,0)?1:s($)),V=c(K),z=0;for(A=T;A<w;A++)z=f(z,m(D[A][T],c(D[A][T])));var Q=m(K,u(z));if(!o(Q)){var _=d($,Q);for(L[T]=1,A=T+1;A<w;A++)L[A]=p(D[A][T],_);var te=l(c(p(_,Q))),he=void 0;for(k=T;k<S;k++){for(he=0,A=T;A<w;A++)he=f(he,m(c(L[A]),D[A][k]));for(he=m(he,te),A=T;A<w;A++)D[A][k]=m(d(D[A][k],m(L[A],he)),V)}for(A=0;A<w;A++){for(he=0,k=T;k<w;k++)he=f(he,m(E[A][k],L[k]));for(he=m(he,te),k=T;k<w;++k)E[A][k]=p(d(E[A][k],m(he,c(L[k]))),V)}}}return{Q:b,R:M,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function y(v){var w=x(v),S=w.R._data;if(v._data.length>0)for(var b=S[0][0].type==="Complex"?h(0):0,E=0;E<S.length;++E)for(var M=0;M<E&&M<(S[0]||[]).length;++M)S[E][M]=b;return w}function N(v){throw new Error("qr not implemented for sparse matrices yet")}})});function R4(r,e,t,n){for(var i=r._values,o=r._index,a=r._ptr,s=r._size,u=r._datatype,c=s[0],l=s[1],f=n&&r._values?[]:null,p=[],m=[],d=0,h=0;h<l;h++){m[h]=d;for(var x=t?t[h]:h,y=a[x],N=a[x+1],v=y;v<N;v++){var w=e?e[o[v]]:o[v];p[d]=w,f&&(f[d]=i[v]),d++}}return m[l]=d,r.createSparseMatrix({values:f,index:p,ptr:m,size:[c,l],datatype:u})}var L4=g(()=>{});function og(r,e,t,n,i,o,a){var s=0;for(t[a]=r;s>=0;){var u=t[a+s],c=t[n+u];c===-1?(s--,o[e++]=u):(t[n+u]=t[i+c],++s,t[a+s]=c)}return e}var AA=g(()=>{});function q4(r,e){if(!r)return null;var t=0,n,i=[],o=[],a=0,s=e,u=2*e;for(n=0;n<e;n++)o[a+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(o[s+n]=o[a+r[n]],o[a+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=og(n,t,o,a,s,i,u));return i}var P4=g(()=>{AA()});function $4(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,o=i[0],a=i[1],s=[],u=[],c=0,l=a,f,p;if(e)for(f=0;f<o;f++)u[l+f]=-1;for(var m=0;m<a;m++){s[m]=-1,u[c+m]=-1;for(var d=n[m],h=n[m+1],x=d;x<h;x++){var y=t[x];for(f=e?u[l+y]:y;f!==-1&&f<m;f=p)p=u[c+f],u[c+f]=m,p===-1&&(s[f]=m);e&&(u[l+y]=m)}}return s}var U4=g(()=>{});function G4(r,e,t){for(var n=r._values,i=r._index,o=r._ptr,a=r._size,s=a[1],u=0,c=0;c<s;c++){var l=o[c];for(o[c]=u;l<o[c+1];l++)e(i[l],c,n?n[l]:1,t)&&(i[u]=i[l],n&&(n[u]=n[l]),u++)}return o[s]=u,i.splice(u,i.length-u),n&&n.splice(u,n.length-u),u}var V4=g(()=>{});function Jo(r){return-r-2}var ag=g(()=>{});var xve,yve,W4,H4=g(()=>{j();V4();ag();AA();xve="csAmd",yve=["add","multiply","transpose"],W4=I(xve,yve,r=>{var{add:e,multiply:t,transpose:n}=r;return function(l,f){if(!f||l<=0||l>3)return null;var p=f._size,m=p[0],d=p[1],h=0,x=Math.max(16,10*Math.sqrt(d));x=Math.min(d-2,x);var y=i(l,f,m,d,x);G4(y,u,null);for(var N=y._index,v=y._ptr,w=v[d],S=[],b=[],E=0,M=d+1,D=2*(d+1),A=3*(d+1),k=4*(d+1),T=5*(d+1),L=6*(d+1),$=7*(d+1),K=S,V=o(d,v,b,E,A,K,D,$,M,L,k,T),z=a(d,v,b,T,k,L,x,M,A,K,D),Q=0,_,te,he,Ne,Y,ve,re,ne,ge,xe,Se,we,et,Ye,Ue,st;z<d;){for(he=-1;Q<d&&(he=b[A+Q])===-1;Q++);b[D+he]!==-1&&(K[b[D+he]]=-1),b[A+Q]=b[D+he];var Z=b[k+he],ie=b[M+he];z+=ie;var G=0;b[M+he]=-ie;var X=v[he],le=Z===0?X:w,se=le;for(Ne=1;Ne<=Z+1;Ne++){for(Ne>Z?(ve=he,re=X,ne=b[E+he]-Z):(ve=N[X++],re=v[ve],ne=b[E+ve]),Y=1;Y<=ne;Y++)_=N[re++],!((ge=b[M+_])<=0)&&(G+=ge,b[M+_]=-ge,N[se++]=_,b[D+_]!==-1&&(K[b[D+_]]=K[_]),K[_]!==-1?b[D+K[_]]=b[D+_]:b[A+b[T+_]]=b[D+_]);ve!==he&&(v[ve]=Jo(he),b[L+ve]=0)}for(Z!==0&&(w=se),b[T+he]=G,v[he]=le,b[E+he]=se-le,b[k+he]=-2,V=s(V,h,b,L,d),xe=le;xe<se;xe++)if(_=N[xe],!((Se=b[k+_])<=0)){ge=-b[M+_];var Ae=V-ge;for(X=v[_],we=v[_]+Se-1;X<=we;X++)ve=N[X],b[L+ve]>=V?b[L+ve]-=ge:b[L+ve]!==0&&(b[L+ve]=b[T+ve]+Ae)}for(xe=le;xe<se;xe++){for(_=N[xe],we=v[_],et=we+b[k+_]-1,Ye=we,Ue=0,st=0,X=we;X<=et;X++)if(ve=N[X],b[L+ve]!==0){var ze=b[L+ve]-V;ze>0?(st+=ze,N[Ye++]=ve,Ue+=ve):(v[ve]=Jo(he),b[L+ve]=0)}b[k+_]=Ye-we+1;var We=Ye,Ve=we+b[E+_];for(X=et+1;X<Ve;X++){te=N[X];var Ke=b[M+te];Ke<=0||(st+=Ke,N[Ye++]=te,Ue+=te)}st===0?(v[_]=Jo(he),ge=-b[M+_],G-=ge,ie+=ge,z+=ge,b[M+_]=0,b[k+_]=-1):(b[T+_]=Math.min(b[T+_],st),N[Ye]=N[We],N[We]=N[we],N[we]=he,b[E+_]=Ye-we+1,Ue=(Ue<0?-Ue:Ue)%d,b[D+_]=b[$+Ue],b[$+Ue]=_,K[_]=Ue)}for(b[T+he]=G,h=Math.max(h,G),V=s(V+h,h,b,L,d),xe=le;xe<se;xe++)if(_=N[xe],!(b[M+_]>=0))for(Ue=K[_],_=b[$+Ue],b[$+Ue]=-1;_!==-1&&b[D+_]!==-1;_=b[D+_],V++){for(ne=b[E+_],Se=b[k+_],X=v[_]+1;X<=v[_]+ne-1;X++)b[L+N[X]]=V;var ft=_;for(te=b[D+_];te!==-1;){var or=b[E+te]===ne&&b[k+te]===Se;for(X=v[te]+1;or&&X<=v[te]+ne-1;X++)b[L+N[X]]!==V&&(or=0);or?(v[te]=Jo(_),b[M+_]+=b[M+te],b[M+te]=0,b[k+te]=-1,te=b[D+te],b[D+ft]=te):(ft=te,te=b[D+te])}}for(X=le,xe=le;xe<se;xe++)_=N[xe],!((ge=-b[M+_])<=0)&&(b[M+_]=ge,st=b[T+_]+G-ge,st=Math.min(st,d-z-ge),b[A+st]!==-1&&(K[b[A+st]]=_),b[D+_]=b[A+st],K[_]=-1,b[A+st]=_,Q=Math.min(Q,st),b[T+_]=st,N[X++]=_);b[M+he]=ie,(b[E+he]=X-le)===0&&(v[he]=-1,b[L+he]=0),Z!==0&&(w=X)}for(_=0;_<d;_++)v[_]=Jo(v[_]);for(te=0;te<=d;te++)b[A+te]=-1;for(te=d;te>=0;te--)b[M+te]>0||(b[D+te]=b[A+v[te]],b[A+v[te]]=te);for(ve=d;ve>=0;ve--)b[M+ve]<=0||v[ve]!==-1&&(b[D+ve]=b[A+v[ve]],b[A+v[ve]]=ve);for(he=0,_=0;_<=d;_++)v[_]===-1&&(he=og(_,he,b,A,D,S,L));return S.splice(S.length-1,1),S};function i(c,l,f,p,m){var d=n(l);if(c===1&&p===f)return e(l,d);if(c===2){for(var h=d._index,x=d._ptr,y=0,N=0;N<f;N++){var v=x[N];if(x[N]=y,!(x[N+1]-v>m))for(var w=x[N+1];v<w;v++)h[y++]=h[v]}return x[f]=y,l=n(d),t(d,l)}return t(d,l)}function o(c,l,f,p,m,d,h,x,y,N,v,w){for(var S=0;S<c;S++)f[p+S]=l[S+1]-l[S];f[p+c]=0;for(var b=0;b<=c;b++)f[m+b]=-1,d[b]=-1,f[h+b]=-1,f[x+b]=-1,f[y+b]=1,f[N+b]=1,f[v+b]=0,f[w+b]=f[p+b];var E=s(0,0,f,N,c);return f[v+c]=-2,l[c]=-1,f[N+c]=0,E}function a(c,l,f,p,m,d,h,x,y,N,v){for(var w=0,S=0;S<c;S++){var b=f[p+S];if(b===0)f[m+S]=-2,w++,l[S]=-1,f[d+S]=0;else if(b>h)f[x+S]=0,f[m+S]=-1,w++,l[S]=Jo(c),f[x+c]++;else{var E=f[y+b];E!==-1&&(N[E]=S),f[v+S]=f[y+b],f[y+b]=S}}return w}function s(c,l,f,p,m){if(c<2||c+l<0){for(var d=0;d<m;d++)f[p+d]!==0&&(f[p+d]=1);c=2}return c}function u(c,l){return c!==l}})});function K4(r,e,t,n,i,o,a){var s,u,c=0,l;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var f=t[o+r];if(t[o+r]=e,f===-1)c=1,l=r;else{for(c=2,l=f;l!==t[a+l];l=t[a+l]);for(s=f;s!==l;s=u)u=t[a+s],t[a+s]=l}return{jleaf:c,q:l}}var j4=g(()=>{});var bve,wve,Z4,X4=g(()=>{j();j4();bve="csCounts",wve=["transpose"],Z4=I(bve,wve,r=>{var{transpose:e}=r;return function(t,n,i,o){if(!t||!n||!i)return null;var a=t._size,s=a[0],u=a[1],c,l,f,p,m,d,h,x=4*u+(o?u+s+1:0),y=[],N=0,v=u,w=2*u,S=3*u,b=4*u,E=5*u+1;for(f=0;f<x;f++)y[f]=-1;var M=[],D=e(t),A=D._index,k=D._ptr;for(f=0;f<u;f++)for(l=i[f],M[l]=y[S+l]===-1?1:0;l!==-1&&y[S+l]===-1;l=n[l])y[S+l]=f;if(o){for(f=0;f<u;f++)y[i[f]]=f;for(c=0;c<s;c++){for(f=u,d=k[c],h=k[c+1],m=d;m<h;m++)f=Math.min(f,y[A[m]]);y[E+c]=y[b+f],y[b+f]=c}}for(c=0;c<u;c++)y[N+c]=c;for(f=0;f<u;f++){for(l=i[f],n[l]!==-1&&M[n[l]]--,p=o?y[b+f]:l;p!==-1;p=o?y[E+p]:-1)for(m=k[p];m<k[p+1];m++){c=A[m];var T=K4(c,l,y,S,v,w,N);T.jleaf>=1&&M[l]++,T.jleaf===2&&M[T.q]--}n[l]!==-1&&(y[N+l]=n[l])}for(l=0;l<u;l++)n[l]!==-1&&(M[n[l]]+=M[l]);return M}})});var Nve,Sve,J4,Y4=g(()=>{L4();P4();U4();H4();X4();j();Nve="csSqr",Sve=["add","multiply","transpose"],J4=I(Nve,Sve,r=>{var{add:e,multiply:t,transpose:n}=r,i=W4({add:e,multiply:t,transpose:n}),o=Z4({transpose:n});return function(u,c,l){var f=c._ptr,p=c._size,m=p[1],d,h={};if(h.q=i(u,c),u&&!h.q)return null;if(l){var x=u?R4(c,null,h.q,0):c;h.parent=$4(x,1);var y=q4(h.parent,m);if(h.cp=o(x,h.parent,y,1),x&&h.parent&&h.cp&&a(x,h))for(h.unz=0,d=0;d<m;d++)h.unz+=h.cp[d]}else h.unz=4*f[m]+m,h.lnz=h.unz;return h};function a(s,u){var c=s._ptr,l=s._index,f=s._size,p=f[0],m=f[1];u.pinv=[],u.leftmost=[];var d=u.parent,h=u.pinv,x=u.leftmost,y=[],N=0,v=p,w=p+m,S=p+2*m,b,E,M,D,A;for(E=0;E<m;E++)y[v+E]=-1,y[w+E]=-1,y[S+E]=0;for(b=0;b<p;b++)x[b]=-1;for(E=m-1;E>=0;E--)for(D=c[E],A=c[E+1],M=D;M<A;M++)x[l[M]]=E;for(b=p-1;b>=0;b--)h[b]=-1,E=x[b],E!==-1&&(y[S+E]++===0&&(y[w+E]=b),y[N+b]=y[v+E],y[v+E]=b);for(u.lnz=0,u.m2=p,E=0;E<m;E++)if(b=y[v+E],u.lnz++,b<0&&(b=u.m2++),h[b]=E,!(--S[E]<=0)){u.lnz+=y[S+E];var k=d[E];k!==-1&&(y[S+k]===0&&(y[w+k]=y[w+E]),y[N+y[w+E]]=y[v+k],y[v+k]=y[N+b],y[S+k]+=y[S+E])}for(b=0;b<p;b++)h[b]<0&&(h[b]=E++);return!0}})});function Sp(r,e){return r[e]<0}var MA=g(()=>{});function sg(r,e){r[e]=Jo(r[e])}var DA=g(()=>{ag()});function EA(r){return r<0?Jo(r):r}var Q4=g(()=>{ag()});function eq(r,e,t,n,i){var o=e._index,a=e._ptr,s=e._size,u=s[1],c,l,f,p=0;for(n[0]=r;p>=0;){r=n[p];var m=i?i[r]:r;Sp(a,r)||(sg(a,r),n[u+p]=m<0?0:EA(a[m]));var d=1;for(l=n[u+p],f=m<0?0:EA(a[m+1]);l<f;l++)if(c=o[l],!Sp(a,c)){n[u+p]=l,n[++p]=c,d=0;break}d&&(p--,n[--t]=r)}return t}var tq=g(()=>{MA();DA();Q4()});function rq(r,e,t,n,i){var o=r._ptr,a=r._size,s=e._index,u=e._ptr,c=a[1],l,f,p,m=c;for(f=u[t],p=u[t+1],l=f;l<p;l++){var d=s[l];Sp(o,d)||(m=eq(d,r,m,n,i))}for(l=m;l<c;l++)sg(o,n[l]);return m}var nq=g(()=>{MA();DA();tq()});var Ave,Mve,iq,oq=g(()=>{nq();j();Ave="csSpsolve",Mve=["divideScalar","multiply","subtract"],iq=I(Ave,Mve,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(o,a,s,u,c,l,f){var p=o._values,m=o._index,d=o._ptr,h=o._size,x=h[1],y=a._values,N=a._index,v=a._ptr,w,S,b,E,M=rq(o,a,s,u,l);for(w=M;w<x;w++)c[u[w]]=0;for(S=v[s],b=v[s+1],w=S;w<b;w++)c[N[w]]=y[w];for(var D=M;D<x;D++){var A=u[D],k=l?l[A]:A;if(!(k<0))for(S=d[k],b=d[k+1],c[A]=e(c[A],p[f?S:b-1]),w=f?S+1:S,E=f?b:b-1;w<E;w++){var T=m[w];c[T]=n(c[T],t(p[w],c[A]))}}return M}})});var Dve,Eve,aq,sq=g(()=>{j();oq();Dve="csLu",Eve=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],aq=I(Dve,Eve,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:o,largerEq:a,SparseMatrix:s}=r,u=iq({divideScalar:t,multiply:n,subtract:i});return function(l,f,p){if(!l)return null;var m=l._size,d=m[1],h,x=100,y=100;f&&(h=f.q,x=f.lnz||x,y=f.unz||y);var N=[],v=[],w=[],S=new s({values:N,index:v,ptr:w,size:[d,d]}),b=[],E=[],M=[],D=new s({values:b,index:E,ptr:M,size:[d,d]}),A=[],k,T,L=[],$=[];for(k=0;k<d;k++)L[k]=0,A[k]=-1,w[k+1]=0;x=0,y=0;for(var K=0;K<d;K++){w[K]=x,M[K]=y;var V=h?h[K]:K,z=u(S,l,V,$,L,A,1),Q=-1,_=-1;for(T=z;T<d;T++)if(k=$[T],A[k]<0){var te=e(L[k]);o(te,_)&&(_=te,Q=k)}else E[y]=A[k],b[y++]=L[k];if(Q===-1||_<=0)return null;A[V]<0&&a(e(L[V]),n(_,p))&&(Q=V);var he=L[Q];for(E[y]=K,b[y++]=he,A[Q]=K,v[x]=Q,N[x++]=1,T=z;T<d;T++)k=$[T],A[k]<0&&(v[x]=k,N[x++]=t(L[k],he)),L[k]=0}for(w[d]=x,M[d]=y,T=0;T<x;T++)v[T]=A[v[T]];return N.splice(x,N.length-x),v.splice(x,v.length-x),b.splice(y,b.length-y),E.splice(y,E.length-y),{L:S,U:D,pinv:A}}})});var uq,Tve,TA,cq=g(()=>{Rt();j();Y4();sq();uq="slu",Tve=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],TA=I(uq,Tve,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:o,divideScalar:a,subtract:s,larger:u,largerEq:c,SparseMatrix:l}=r,f=J4({add:n,multiply:i,transpose:o}),p=aq({abs:t,divideScalar:a,multiply:i,subtract:s,larger:u,largerEq:c,SparseMatrix:l});return e(uq,{"SparseMatrix, number, number":function(d,h,x){if(!Ze(h)||h<0||h>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(x<0||x>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=f(h,d,!1),N=p(d,y,x);return{L:N.L,U:N.U,p:N.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})})});function CA(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var lq=g(()=>{});var fq,Cve,IA,pq=g(()=>{Je();j();Qc();lq();fq="lusolve",Cve=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],IA=I(fq,Cve,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:o,lsolve:a,DenseMatrix:s}=r,u=Da({DenseMatrix:s});return e(fq,{"Array, Array | Matrix":function(p,m){p=t(p);var d=n(p),h=l(d.L,d.U,d.p,null,m);return h.valueOf()},"DenseMatrix, Array | Matrix":function(p,m){var d=n(p);return l(d.L,d.U,d.p,null,m)},"SparseMatrix, Array | Matrix":function(p,m){var d=n(p);return l(d.L,d.U,d.p,null,m)},"SparseMatrix, Array | Matrix, number, number":function(p,m,d,h){var x=i(p,d,h);return l(x.L,x.U,x.p,x.q,m)},"Object, Array | Matrix":function(p,m){return l(p.L,p.U,p.p,p.q,m)}});function c(f){if(ut(f))return f;if(Xt(f))return t(f);throw new TypeError("Invalid Matrix LU decomposition")}function l(f,p,m,d,h){f=c(f),p=c(p),m&&(h=u(f,h,!0),h._data=CA(m,h._data));var x=a(f,h),y=o(p,x);return d&&(y._data=CA(d,y._data)),y}})});var Ive,kve,kA,mq=g(()=>{Je();Ht();Fr();j();Ive="Help",kve=["parse"],kA=I(Ive,kve,r=>{var{parse:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var o={},a=0;a<n.examples.length;a++){var s=n.examples[a];i+="    "+s+`
`;var u=void 0;try{u=e(s).compile().evaluate(o)}catch(c){u=c}u!==void 0&&!tp(u)&&(i+="        "+gt(u,{precision:14})+`
`)}i+=`
`}return n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=at(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(o=>o!=="mathjs").forEach(o=>{i[o]=n[o]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0})});var Ove,_ve,OA,hq=g(()=>{Je();Fr();Ht();j();Ove="Chain",_ve=["?on","math"],OA=I(Ove,_ve,r=>{var{on:e,math:t}=r;function n(u){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");np(u)?this.value=u.value:this.value=u}n.prototype.type="Chain",n.prototype.isChain=!0,n.prototype.done=function(){return this.value},n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return gt(this.value)},n.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},n.fromJSON=function(u){return new n(u.value)};function i(u,c){typeof c=="function"&&(n.prototype[u]=a(c))}function o(u,c){L3(n.prototype,u,function(){var f=c();if(typeof f=="function")return a(f)})}function a(u){return function(){for(var c=[this.value],l=0;l<arguments.length;l++)c[l+1]=arguments[l];return new n(u.apply(u,c))}}n.createProxy=function(u,c){if(typeof u=="string")i(u,c);else{var l=function(m){ot(u,m)&&s[m]===void 0&&o(m,()=>u[m])};for(var f in u)l(f)}};var s={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return n.createProxy(t),e&&e("import",function(u,c,l){l||o(u,c)}),n},{isClass:!0})});var dq,gq=g(()=>{dq={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]}});var vq,xq=g(()=>{vq={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]}});var yq,bq=g(()=>{yq={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]}});var wq,Nq=g(()=>{wq={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}});var Sq,Aq=g(()=>{Sq={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}});var Mq,Dq=g(()=>{Mq={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]}});var Eq,Tq=g(()=>{Eq={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]}});var Cq,Iq=g(()=>{Cq={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]}});var kq,Oq=g(()=>{kq={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]}});var _q,Fq=g(()=>{_q={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]}});var Bq,zq=g(()=>{Bq={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]}});var Rq,Lq=g(()=>{Rq={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]}});var qq,Pq=g(()=>{qq={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]}});var $q,Uq=g(()=>{$q={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]}});var Gq,Vq=g(()=>{Gq={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]}});var Wq,Hq=g(()=>{Wq={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]}});var Kq,jq=g(()=>{Kq={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]}});var Zq,Xq=g(()=>{Zq={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]}});var Jq,Yq=g(()=>{Jq={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]}});var Qq,eP=g(()=>{Qq={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]}});var tP,rP=g(()=>{tP={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]}});var nP,iP=g(()=>{nP={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]}});var oP,aP=g(()=>{oP={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]}});var sP,uP=g(()=>{sP={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]}});var cP,lP=g(()=>{cP={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]}});var fP,pP=g(()=>{fP={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]}});var mP,hP=g(()=>{mP={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]}});var dP,gP=g(()=>{dP={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]}});var vP,xP=g(()=>{vP={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]}});var yP,bP=g(()=>{yP={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]}});var wP,NP=g(()=>{wP={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]}});var SP,AP=g(()=>{SP={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]}});var MP,DP=g(()=>{MP={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]}});var EP,TP=g(()=>{EP={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]}});var CP,IP=g(()=>{CP={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]}});var kP,OP=g(()=>{kP={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]}});var _P,FP=g(()=>{_P={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]}});var BP,zP=g(()=>{BP={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]}});var RP,LP=g(()=>{RP={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]}});var qP,PP=g(()=>{qP={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]}});var $P,UP=g(()=>{$P={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]}});var GP,VP=g(()=>{GP={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]}});var WP,HP=g(()=>{WP={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]}});var KP,jP=g(()=>{KP={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]}});var ZP,XP=g(()=>{ZP={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]}});var JP,YP=g(()=>{JP={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]}});var QP,e$=g(()=>{QP={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]}});var t$,r$=g(()=>{t$={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]}});var n$,i$=g(()=>{n$={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]}});var o$,a$=g(()=>{o$={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]}});var s$,u$=g(()=>{s$={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]}});var c$,l$=g(()=>{c$={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]}});var f$,p$=g(()=>{f$={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]}});var m$,h$=g(()=>{m$={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]}});var d$,g$=g(()=>{d$={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]}});var v$,x$=g(()=>{v$={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]}});var y$,b$=g(()=>{y$={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]}});var w$,N$=g(()=>{w$={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]}});var S$,A$=g(()=>{S$={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]}});var M$,D$=g(()=>{M$={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]}});var E$,T$=g(()=>{E$={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]}});var C$,I$=g(()=>{C$={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}});var k$,O$=g(()=>{k$={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]}});var _$,F$=g(()=>{_$={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]}});var B$,z$=g(()=>{B$={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]}});var R$,L$=g(()=>{R$={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]}});var q$,P$=g(()=>{q$={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]}});var $$,U$=g(()=>{$$={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]}});var G$,V$=g(()=>{G$={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]}});var W$,H$=g(()=>{W$={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]}});var K$,j$=g(()=>{K$={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]}});var Z$,X$=g(()=>{Z$={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]}});var J$,Y$=g(()=>{J$={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]}});var Q$,e5=g(()=>{Q$={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]}});var t5,r5=g(()=>{t5={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]}});var n5,i5=g(()=>{n5={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]}});var o5,a5=g(()=>{o5={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]}});var s5,u5=g(()=>{s5={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]}});var c5,l5=g(()=>{c5={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]}});var f5,p5=g(()=>{f5={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]}});var m5,h5=g(()=>{m5={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]}});var d5,g5=g(()=>{d5={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]}});var v5,x5=g(()=>{v5={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]}});var y5,b5=g(()=>{y5={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]}});var w5,N5=g(()=>{w5={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]}});var S5,A5=g(()=>{S5={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]}});var M5,D5=g(()=>{M5={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]}});var E5,T5=g(()=>{E5={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]}});var C5,I5=g(()=>{C5={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]}});var k5,O5=g(()=>{k5={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["diff([1, 2, 4, 7, 0])","diff([1, 2, 4, 7, 0], 0)","diff(matrix([1, 2, 4, 7, 0]))","diff([[1, 2], [3, 4]])","diff([[1, 2], [3, 4]], 0)","diff([[1, 2], [3, 4]], 1)","diff([[1, 2], [3, 4]], bignumber(1))","diff(matrix([[1, 2], [3, 4]]), 1)","diff([[1, 2], matrix([3, 4])], 1)"],seealso:["subtract","partitionSelect"]}});var _5,F5=g(()=>{_5={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]}});var B5,z5=g(()=>{B5={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]}});var R5,L5=g(()=>{R5={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]}});var q5,P5=g(()=>{q5={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]}});var $5,U5=g(()=>{$5={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]}});var G5,V5=g(()=>{G5={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]}});var W5,H5=g(()=>{W5={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]}});var K5,j5=g(()=>{K5={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]}});var Z5,X5=g(()=>{Z5={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]}});var J5,Y5=g(()=>{J5={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]}});var Q5,e9=g(()=>{Q5={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]}});var t9,r9=g(()=>{t9={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}});var n9,i9=g(()=>{n9={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]}});var o9,a9=g(()=>{o9={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]}});var s9,u9=g(()=>{s9={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}});var c9,l9=g(()=>{c9={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}});var f9,p9=g(()=>{f9={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]}});var m9,h9=g(()=>{m9={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]}});var d9,g9=g(()=>{d9={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}});var v9,x9=g(()=>{v9={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]}});var y9,b9=g(()=>{y9={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]}});var w9,N9=g(()=>{w9={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]}});var S9,A9=g(()=>{S9={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]}});var M9,D9=g(()=>{M9={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]}});var E9,T9=g(()=>{E9={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]}});var C9,I9=g(()=>{C9={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]}});var k9,O9=g(()=>{k9={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]}});var _9,F9=g(()=>{_9={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]}});var B9,z9=g(()=>{B9={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]}});var R9,L9=g(()=>{R9={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]}});var q9,P9=g(()=>{q9={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]}});var $9,U9=g(()=>{$9={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]}});var G9,V9=g(()=>{G9={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]}});var W9,H9=g(()=>{W9={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]}});var K9,j9=g(()=>{K9={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]}});var Z9,X9=g(()=>{Z9={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]}});var J9,Y9=g(()=>{J9={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]}});var Q9,e6=g(()=>{Q9={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]}});var t6,r6=g(()=>{t6={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]}});var n6,i6=g(()=>{n6={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]}});var o6,a6=g(()=>{o6={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]}});var s6,u6=g(()=>{s6={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]}});var c6,l6=g(()=>{c6={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]}});var f6,p6=g(()=>{f6={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]}});var m6,h6=g(()=>{m6={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}});var d6,g6=g(()=>{d6={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}});var v6,x6=g(()=>{v6={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]}});var y6,b6=g(()=>{y6={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]}});var w6,N6=g(()=>{w6={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]}});var S6,A6=g(()=>{S6={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]}});var M6,D6=g(()=>{M6={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]}});var E6,T6=g(()=>{E6={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]}});var C6,I6=g(()=>{C6={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]}});var k6,O6=g(()=>{k6={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]}});var _6,F6=g(()=>{_6={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]}});var B6,z6=g(()=>{B6={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]}});var R6,L6=g(()=>{R6={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]}});var q6,P6=g(()=>{q6={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']}});var $6,U6=g(()=>{$6={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]}});var G6,V6=g(()=>{G6={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]}});var W6,H6=g(()=>{W6={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]}});var K6,j6=g(()=>{K6={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]}});var Z6,X6=g(()=>{Z6={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]}});var J6,Y6=g(()=>{J6={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]}});var Q6,eU=g(()=>{Q6={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]}});var tU,rU=g(()=>{tU={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]}});var nU,iU=g(()=>{nU={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]}});var oU,aU=g(()=>{oU={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]}});var sU,uU=g(()=>{sU={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]}});var cU,lU=g(()=>{cU={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]}});var fU,pU=g(()=>{fU={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]}});var mU,hU=g(()=>{mU={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]}});var dU,gU=g(()=>{dU={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]}});var vU,xU=g(()=>{vU={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]}});var yU,bU=g(()=>{yU={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]}});var wU,NU=g(()=>{wU={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]}});var SU,AU=g(()=>{SU={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]}});var MU,DU=g(()=>{MU={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]}});var EU,TU=g(()=>{EU={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]}});var CU,IU=g(()=>{CU={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]}});var kU,OU=g(()=>{kU={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]}});var _U,FU=g(()=>{_U={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]}});var BU,zU=g(()=>{BU={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]}});var RU,LU=g(()=>{RU={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]}});var qU,PU=g(()=>{qU={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]}});var $U,UU=g(()=>{$U={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]}});var GU,VU=g(()=>{GU={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]}});var WU,HU=g(()=>{WU={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]}});var KU,jU=g(()=>{KU={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]}});var ZU,XU=g(()=>{ZU={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]}});var JU,YU=g(()=>{JU={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]}});var QU,e8=g(()=>{QU={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]}});var t8,r8=g(()=>{t8={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]}});var n8,i8=g(()=>{n8={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]}});var o8,a8=g(()=>{o8={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]}});var s8,u8=g(()=>{s8={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]}});var c8,l8=g(()=>{c8={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]}});var _A,f8=g(()=>{_A={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]}});var p8,m8=g(()=>{p8={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]}});var h8,d8=g(()=>{h8={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]}});var g8,v8=g(()=>{g8={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]}});var x8,y8=g(()=>{x8={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]}});var b8,w8=g(()=>{b8={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]}});var N8,S8=g(()=>{N8={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]}});var A8,M8=g(()=>{A8={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]}});var D8,E8=g(()=>{D8={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]}});var T8,C8=g(()=>{T8={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]}});var FA,I8=g(()=>{FA={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]}});var k8,O8=g(()=>{k8={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]}});var _8,F8=g(()=>{_8={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]}});var B8,z8=g(()=>{B8={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]}});var R8,L8=g(()=>{R8={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]}});var q8,P8=g(()=>{q8={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]}});var $8,U8=g(()=>{$8={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]}});var G8,V8=g(()=>{G8={name:"matrixFromFunction",category:"Matrix",syntax:["math.matrixFromFunction(size, fn)","math.matrixFromFunction(size, fn, format)","math.matrixFromFunction(size, fn, format, datatype)","math.matrixFromFunction(size, format, fn)","math.matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]}});var W8,H8=g(()=>{W8={name:"matrixFromRows",category:"Matrix",syntax:["math.matrixFromRows(...arr)","math.matrixFromRows(row1, row2)","math.matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]}});var K8,j8=g(()=>{K8={name:"matrixFromColumns",category:"Matrix",syntax:["math.matrixFromColumns(...arr)","math.matrixFromColumns(row1, row2)","math.matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]}});var Z8,X8=g(()=>{Z8={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]}});var J8,Y8=g(()=>{J8={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]}});var Q8,eG=g(()=>{Q8={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]}});var tG,rG=g(()=>{tG={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]}});var nG,iG=g(()=>{nG={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]}});var oG,aG=g(()=>{oG={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]}});var sG,uG=g(()=>{sG={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]}});var cG,lG=g(()=>{cG={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]}});var fG,pG=g(()=>{fG={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]}});var mG,hG=g(()=>{mG={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]}});var dG,gG=g(()=>{dG={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]}});var vG,xG=g(()=>{vG={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]}});var yG,bG=g(()=>{yG={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]}});var wG,NG=g(()=>{wG={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]}});var SG,AG=g(()=>{SG={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], math.pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]}});var MG,DG=g(()=>{gq();xq();bq();Nq();Aq();Dq();Tq();Iq();Oq();Fq();zq();Lq();Pq();Uq();Vq();Hq();jq();Xq();Yq();eP();rP();iP();aP();uP();lP();pP();hP();gP();xP();bP();NP();AP();DP();TP();IP();OP();FP();zP();LP();PP();UP();VP();HP();jP();XP();YP();e$();r$();i$();a$();u$();l$();p$();h$();g$();x$();b$();N$();A$();D$();T$();I$();O$();F$();z$();L$();P$();U$();V$();H$();j$();X$();Y$();e5();r5();i5();a5();u5();l5();p5();h5();g5();x5();b5();N5();A5();D5();T5();I5();O5();F5();z5();L5();P5();U5();V5();H5();j5();X5();Y5();e9();r9();i9();a9();u9();l9();p9();h9();g9();x9();b9();N9();A9();D9();T9();I9();O9();F9();z9();L9();P9();U9();V9();H9();j9();X9();Y9();e6();r6();i6();a6();u6();l6();p6();h6();g6();x6();b6();N6();A6();D6();T6();I6();O6();F6();z6();L6();P6();U6();V6();H6();j6();X6();Y6();eU();rU();iU();aU();uU();lU();pU();hU();gU();xU();bU();NU();AU();DU();TU();IU();OU();FU();zU();LU();PU();UU();VU();HU();jU();XU();YU();e8();r8();i8();a8();u8();l8();f8();m8();d8();v8();y8();w8();S8();M8();E8();C8();I8();O8();F8();z8();L8();P8();U8();V8();H8();j8();X8();Y8();eG();rG();iG();aG();uG();lG();pG();hG();gG();xG();bG();NG();AG();MG={bignumber:dq,boolean:nG,complex:tG,createUnit:Q8,fraction:J8,index:Z8,matrix:$8,number:q8,sparse:R8,splitUnit:B8,string:_8,unit:k8,e:FA,E:FA,false:T8,i:D8,Infinity:A8,LN2:N8,LN10:b8,LOG2E:x8,LOG10E:g8,NaN:h8,null:p8,pi:_A,PI:_A,phi:c8,SQRT1_2:s8,SQRT2:o8,tau:n8,true:t8,version:QU,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:JU,lsolve:KU,lsolveAll:ZU,lup:WU,lusolve:sG,simplify:GU,rationalize:$U,slu:qU,usolve:BU,usolveAll:RU,qr:_U,abs:kU,add:CU,cbrt:EU,ceil:MU,cube:SU,divide:wU,dotDivide:yU,dotMultiply:vU,dotPow:oG,exp:dU,expm:fU,expm1:cU,fix:sU,floor:oU,gcd:nU,hypot:tU,lcm:Q6,log:J6,log2:Z6,log1p:K6,log10:W6,mod:G6,multiply:$6,norm:q6,nthRoot:R6,nthRoots:B6,pow:_6,round:k6,sign:C6,sqrt:E6,sqrtm:M6,square:S6,subtract:cG,unaryMinus:w6,unaryPlus:y6,xgcd:v6,bitAnd:d6,bitNot:m6,bitOr:f6,bitXor:c6,leftShift:s6,rightArithShift:o6,rightLogShift:n6,bellNumbers:t6,catalan:Q9,composition:J9,stirlingS2:Z9,config:K9,import:W9,typed:G9,arg:$9,conj:q9,re:R9,im:B9,evaluate:_9,help:k9,distance:C9,intersect:E9,and:M9,not:S9,or:w9,xor:y9,concat:d9,count:v9,cross:m9,column:vG,ctranspose:f9,det:c9,diag:s9,diff:k5,dot:o9,getMatrixDataType:n9,identity:t9,filter:Q5,flatten:J5,forEach:Z5,inv:K5,eigs:mU,kron:W5,matrixFromFunction:G8,matrixFromRows:W8,matrixFromColumns:K8,map:G5,ones:$5,partitionSelect:q5,range:R5,resize:B5,reshape:_5,rotate:SG,rotationMatrix:wG,row:yG,size:C5,sort:E5,squeeze:M5,subset:S5,trace:w5,transpose:y5,zeros:v5,combinations:m5,combinationsWithRep:d5,factorial:f5,gamma:c5,kldivergence:s5,multinomial:o5,permutations:n5,pickRandom:t5,random:Q$,randomInt:J$,compare:Z$,compareNatural:K$,compareText:W$,deepEqual:G$,equal:$$,equalText:q$,larger:R$,largerEq:B$,smaller:_$,smallerEq:k$,unequal:C$,setCartesian:E$,setDifference:M$,setDistinct:S$,setIntersect:w$,setIsSubset:y$,setMultiplicity:v$,setPowerset:d$,setSize:m$,setSymDifference:f$,setUnion:c$,erf:s$,mad:o$,max:n$,mean:t$,median:QP,min:JP,mode:ZP,prod:KP,quantileSeq:WP,std:GP,sum:$P,variance:fG,acos:qP,acosh:RP,acot:BP,acoth:_P,acsc:kP,acsch:CP,asec:EP,asech:MP,asin:SP,asinh:wP,atan:yP,atanh:vP,atan2:dP,cos:mP,cosh:fP,cot:cP,coth:sP,csc:oP,csch:nP,sec:tP,sech:Qq,sin:mG,sinh:Jq,tan:Zq,tanh:Kq,to:Wq,clone:Gq,format:Bq,bin:Rq,oct:qq,hex:$q,isNaN:_q,isInteger:kq,isNegative:Cq,isNumeric:Mq,hasNumericValue:Eq,isPositive:Sq,isPrime:wq,isZero:yq,typeOf:vq,numeric:dG}});var EG,Fve,BA,TG=g(()=>{j();Bi();DG();Ht();EG="help",Fve=["typed","mathWithTransform","Help"],BA=I(EG,Fve,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(EG,{any:function(o){var a,s=o;if(typeof o!="string"){for(a in t)if(ot(t,a)&&o===t[a]){s=a;break}}var u=nn(MG,s);if(!u){var c=typeof s=="function"?s.name:s;throw new Error('No documentation found on "'+c+'"')}return new n(u)}})})});var CG,Bve,zA,IG=g(()=>{j();CG="chain",Bve=["typed","Chain"],zA=I(CG,Bve,r=>{var{typed:e,Chain:t}=r;return e(CG,{"":function(){return new t},any:function(i){return new t(i)}})})});var kG,zve,RA,OG=g(()=>{Je();Ht();Fr();j();kG="det",zve=["typed","matrix","subtract","multiply","unaryMinus","lup"],RA=I(kG,zve,r=>{var{typed:e,matrix:t,subtract:n,multiply:i,unaryMinus:o,lup:a}=r;return e(kG,{any:function(c){return at(c)},"Array | Matrix":function(c){var l;switch(ut(c)?l=c.size():Array.isArray(c)?(c=t(c),l=c.size()):l=[],l.length){case 0:return at(c);case 1:if(l[0]===1)return at(c.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+gt(l)+")");case 2:{var f=l[0],p=l[1];if(f===p)return s(c.clone().valueOf(),f,p);throw new RangeError("Matrix must be square (size: "+gt(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+gt(l)+")")}}});function s(u,c,l){if(c===1)return at(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var f=a(u),p=f.U[0][0],m=1;m<c;m++)p=i(p,f.U[m][m]);for(var d=0,h=0,x=[];;){for(;x[h];)h++;if(h>=c)break;for(var y=h,N=0;!x[f.p[y]];)x[f.p[y]]=!0,y=f.p[y],N++;N%2===0&&d++}return d%2===0?p:o(p)}})});var _G,Rve,LA,FG=g(()=>{Je();Nt();j();Fr();_G="inv",Rve=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],LA=I(_G,Rve,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:o,unaryMinus:a,det:s,identity:u,abs:c}=r;return e(_G,{"Array | Matrix":function(p){var m=ut(p)?p.size():Et(p);switch(m.length){case 1:if(m[0]===1)return ut(p)?t([n(1,p.valueOf()[0])]):[n(1,p[0])];throw new RangeError("Matrix must be square (size: "+gt(m)+")");case 2:{var d=m[0],h=m[1];if(d===h)return ut(p)?t(l(p.valueOf(),d,h),p.storage()):l(p,d,h);throw new RangeError("Matrix must be square (size: "+gt(m)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+gt(m)+")")}},any:function(p){return n(1,p)}});function l(f,p,m){var d,h,x,y,N;if(p===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,y)]]}else if(p===2){var v=s(f);if(v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],v),n(a(f[0][1]),v)],[n(a(f[1][0]),v),n(f[0][0],v)]]}else{var w=f.concat();for(d=0;d<p;d++)w[d]=w[d].concat();for(var S=u(p).valueOf(),b=0;b<m;b++){var E=c(w[b][b]),M=b;for(d=b+1;d<p;)c(w[d][b])>E&&(E=c(w[d][b]),M=d),d++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");d=M,d!==b&&(N=w[b],w[b]=w[d],w[d]=N,N=S[b],S[b]=S[d],S[d]=N);var D=w[b],A=S[b];for(d=0;d<p;d++){var k=w[d],T=S[d];if(d!==b){if(k[b]!==0){for(x=n(a(k[b]),D[b]),h=b;h<m;h++)k[h]=i(k[h],o(x,D[h]));for(h=0;h<m;h++)T[h]=i(T[h],o(x,A[h]))}}else{for(x=D[b],h=b;h<m;h++)k[h]=n(k[h],x);for(h=0;h<m;h++)T[h]=n(T[h],x)}}}return S}}})});function BG(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:o,divideScalar:a,sqrt:s,abs:u,bignumber:c,diag:l,inv:f,qr:p,usolve:m,usolveAll:d,equal:h,complex:x,larger:y,smaller:N,matrixFromColumns:v,dot:w}=r;function S(te,he,Ne,Y,ve){ve===void 0&&(ve=!0);var re=b(te,he,Ne,Y,ve);E(te,he,Ne,Y,ve,re);var{values:ne,C:ge}=M(te,he,Ne,Y,ve);ge=i(f(re),ge);var xe;return ve&&(xe=D(te,he,ge,ne,Ne,Y),xe=v(...xe)),{values:ne,vectors:xe}}function b(te,he,Ne,Y,ve){var re=Y==="BigNumber",ne=Y==="Complex",ge=re?c(0):ne?x(0):0,xe=re?c(1):ne?x(1):1,Se=re?c(10):2,we=o(Se,Se),et;ve&&(et=Array(he).fill(xe));for(var Ye=!1;!Ye;){Ye=!0;for(var Ue=0;Ue<he;Ue++){for(var st=ge,Z=ge,ie=0;ie<he;ie++)if(Ue!==ie){var G=u(te[Ue][ie]);st=e(st,G),Z=e(Z,G)}if(!h(st,0)&&!h(Z,0)){for(var X=xe,le=st,se=a(Z,Se),Ae=o(Z,Se);N(le,se);)le=o(le,we),X=o(X,Se);for(;y(le,Ae);)le=a(le,we),X=a(X,Se);var ze=N(a(e(le,Z),X),o(e(st,Z),.95));if(ze){Ye=!1;for(var We=a(1,X),Ve=0;Ve<he;Ve++)Ue!==Ve&&(te[Ue][Ve]=o(te[Ue][Ve],X),te[Ve][Ue]=o(te[Ve][Ue],We));ve&&(et[Ue]=o(et[Ue],X))}}}}return l(et)}function E(te,he,Ne,Y,ve,re){var ne=Y==="BigNumber",ge=Y==="Complex",xe=ne?c(0):ge?x(0):0;ne&&(Ne=c(Ne));for(var Se=0;Se<he-2;Se++){for(var we=0,et=xe,Ye=Se+1;Ye<he;Ye++){var Ue=te[Ye][Se];N(u(et),u(Ue))&&(et=Ue,we=Ye)}if(!N(u(et),Ne)){if(we!==Se+1){var st=te[we];te[we]=te[Se+1],te[Se+1]=st;for(var Z=0;Z<he;Z++){var ie=te[Z][we];te[Z][we]=te[Z][Se+1],te[Z][Se+1]=ie}if(ve){var G=re[we];re[we]=re[Se+1],re[Se+1]=G}}for(var X=Se+2;X<he;X++){var le=a(te[X][Se],et);if(le!==0){for(var se=0;se<he;se++)te[X][se]=t(te[X][se],o(le,te[Se+1][se]));for(var Ae=0;Ae<he;Ae++)te[Ae][Se+1]=e(te[Ae][Se+1],o(le,te[Ae][X]));if(ve)for(var ze=0;ze<he;ze++)re[X][ze]=t(re[X][ze],o(le,re[Se+1][ze]))}}}}return re}function M(te,he,Ne,Y,ve){var re=Y==="BigNumber",ne=Y==="Complex",ge=re?c(1):ne?x(1):1;re&&(Ne=c(Ne));for(var xe=at(te),Se=[],we=he,et=[],Ye=ve?l(Array(he).fill(ge)):void 0,Ue=ve?l(Array(we).fill(ge)):void 0,st=0;st<=100;){st+=1;for(var Z=0,ie=0;ie<we;ie++)xe[ie][ie]=t(xe[ie][ie],Z);var{Q:G,R:X}=p(xe);xe=i(X,G);for(var le=0;le<we;le++)xe[le][le]=e(xe[le][le],Z);if(ve&&(Ue=i(Ue,G)),we===1||N(u(xe[we-1][we-2]),Ne)){st=0,Se.push(xe[we-1][we-1]),ve&&(et.unshift([[1]]),T(Ue,he),Ye=i(Ye,Ue),we>1&&(Ue=l(Array(we-1).fill(ge)))),we-=1,xe.pop();for(var se=0;se<we;se++)xe[se].pop()}else if(we===2||N(u(xe[we-2][we-3]),Ne)){st=0;var Ae=A(xe[we-2][we-2],xe[we-2][we-1],xe[we-1][we-2],xe[we-1][we-1]);Se.push(...Ae),ve&&(et.unshift(k(xe[we-2][we-2],xe[we-2][we-1],xe[we-1][we-2],xe[we-1][we-1],Ae[0],Ae[1],Ne,Y)),T(Ue,he),Ye=i(Ye,Ue),we>2&&(Ue=l(Array(we-2).fill(ge)))),we-=2,xe.pop(),xe.pop();for(var ze=0;ze<we;ze++)xe[ze].pop(),xe[ze].pop()}if(we===0)break}if(Se.sort((Ke,ft)=>+t(u(Ke),u(ft))),st>100){var We=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Se.join(", "));throw We.values=Se,We.vectors=[],We}var Ve=ve?i(Ye,L(et,he)):void 0;return{values:Se,C:Ve}}function D(te,he,Ne,Y,ve,re){var ne=f(Ne),ge=i(ne,te,Ne),xe=re==="BigNumber",Se=re==="Complex",we=xe?c(0):Se?x(0):0,et=xe?c(1):Se?x(1):1,Ye=[],Ue=[];for(var st of Y){var Z=$(Ye,st,h);Z===-1?(Ye.push(st),Ue.push(1)):Ue[Z]+=1}for(var ie=[],G=Ye.length,X=Array(he).fill(we),le=l(Array(he).fill(et)),se=[],Ae=0;Ae<G;Ae++){var ze=Ye[Ae],We=t(ge,i(ze,le)),Ve=d(We,X);for(Ve=Ve.map(or=>i(Ne,or)),Ve.shift();Ve.length<Ue[Ae];){var Ke=K(We,he,Ve,ve,re);if(Ke==null){se.push(ze);break}Ve.push(Ke)}ie.push(...Ve.map(or=>n(or)))}if(se.length!==0){var ft=new Error("Failed to find eigenvectors for the following eigenvalues: "+se.join(", "));throw ft.values=Y,ft.vectors=ie,ft}return ie}function A(te,he,Ne,Y){var ve=e(te,Y),re=t(o(te,Y),o(he,Ne)),ne=o(ve,.5),ge=o(s(t(o(ve,ve),o(4,re))),.5);return[e(ne,ge),t(ne,ge)]}function k(te,he,Ne,Y,ve,re,ne,ge){var xe=ge==="BigNumber",Se=ge==="Complex",we=xe?c(0):Se?x(0):0,et=xe?c(1):Se?x(1):1;if(N(u(Ne),ne))return[[et,we],[we,et]];if(y(u(t(ve,re)),ne))return[[t(ve,Y),t(re,Y)],[Ne,Ne]];var Ye=t(te,ve),Ue=t(he,ve),st=t(Ne,ve),Z=t(Y,ve);return N(u(Ue),ne)?[[Ye,et],[st,we]]:[[Ue,we],[Z,et]]}function T(te,he){for(var Ne=0;Ne<te.length;Ne++)te[Ne].push(...Array(he-te[Ne].length).fill(0));for(var Y=te.length;Y<he;Y++)te.push(Array(he).fill(0)),te[Y][Y]=1;return te}function L(te,he){for(var Ne=[],Y=0;Y<he;Y++)Ne[Y]=Array(he).fill(0);var ve=0;for(var re of te){for(var ne=re.length,ge=0;ge<ne;ge++)for(var xe=0;xe<ne;xe++)Ne[ve+ge][ve+xe]=re[ge][xe];ve+=ne}return Ne}function $(te,he,Ne){for(var Y=0;Y<te.length;Y++)if(Ne(te[Y],he))return Y;return-1}function K(te,he,Ne,Y,ve){for(var re=ve==="BigNumber"?c(1e3):1e3,ne,ge=0;ne=V(he,Ne,ve),ne=m(te,ne),!y(Q(ne),re);)if(++ge>=5)return null;for(ge=0;;){var xe=m(te,ne);if(N(Q(z(ne,[xe])),Y))break;if(++ge>=10)return null;ne=_(xe)}return ne}function V(te,he,Ne){var Y=Ne==="BigNumber",ve=Ne==="Complex",re=Array(te).fill(0).map(ne=>2*Math.random()-1);return Y&&(re=re.map(ne=>c(ne))),ve&&(re=re.map(ne=>x(ne))),re=z(re,he),_(re,Ne)}function z(te,he){for(var Ne of he)te=t(te,i(a(w(Ne,te),w(Ne,Ne)),Ne));return te}function Q(te){return u(s(w(te,te)))}function _(te,he){var Ne=he==="BigNumber",Y=he==="Complex",ve=Ne?c(1):Y?x(1):1;return i(a(ve,Q(te)),te)}return S}var zG=g(()=>{Ht()});function RG(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:o,cos:a,sin:s,multiplyScalar:u,inv:c,bignumber:l,multiply:f,add:p}=r;function m(A,k){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,L=arguments.length>3?arguments[3]:void 0;if(L==="number")return d(A,T);if(L==="BigNumber")return h(A,T);throw TypeError("Unsupported data type: "+L)}function d(A,k){for(var T=A.length,L=Math.abs(k/T),$,K=new Array(T),V=0;V<T;V++)K[V]=D(T,0),K[V][V]=1;for(var z=b(A);Math.abs(z[1])>=Math.abs(L);){var Q=z[0][0],_=z[0][1];$=x(A[Q][Q],A[_][_],A[Q][_]),A=S(A,$,Q,_),K=N(K,$,Q,_),z=b(A)}for(var te=D(T,0),he=0;he<T;he++)te[he]=A[he][he];return M(at(te),at(K))}function h(A,k){for(var T=A.length,L=i(k/T),$,K=new Array(T),V=0;V<T;V++)K[V]=D(T,0),K[V][V]=1;for(var z=E(A);i(z[1])>=i(L);){var Q=z[0][0],_=z[0][1];$=y(A[Q][Q],A[_][_],A[Q][_]),A=w(A,$,Q,_),K=v(K,$,Q,_),z=E(A)}for(var te=D(T,0),he=0;he<T;he++)te[he]=A[he][he];return M(at(te),at(K))}function x(A,k,T){var L=k-A;return Math.abs(L)<=e.epsilon?Math.PI/4:.5*Math.atan(2*T/(k-A))}function y(A,k,T){var L=n(k,A);return i(L)<=e.epsilon?l(-1).acos().div(4):u(.5,o(f(2,T,c(L))))}function N(A,k,T,L){for(var $=A.length,K=Math.cos(k),V=Math.sin(k),z=D($,0),Q=D($,0),_=0;_<$;_++)z[_]=K*A[_][T]-V*A[_][L],Q[_]=V*A[_][T]+K*A[_][L];for(var te=0;te<$;te++)A[te][T]=z[te],A[te][L]=Q[te];return A}function v(A,k,T,L){for(var $=A.length,K=a(k),V=s(k),z=D($,l(0)),Q=D($,l(0)),_=0;_<$;_++)z[_]=n(u(K,A[_][T]),u(V,A[_][L])),Q[_]=t(u(V,A[_][T]),u(K,A[_][L]));for(var te=0;te<$;te++)A[te][T]=z[te],A[te][L]=Q[te];return A}function w(A,k,T,L){for(var $=A.length,K=l(a(k)),V=l(s(k)),z=u(K,K),Q=u(V,V),_=D($,l(0)),te=D($,l(0)),he=f(l(2),K,V,A[T][L]),Ne=t(n(u(z,A[T][T]),he),u(Q,A[L][L])),Y=p(u(Q,A[T][T]),he,u(z,A[L][L])),ve=0;ve<$;ve++)_[ve]=n(u(K,A[T][ve]),u(V,A[L][ve])),te[ve]=t(u(V,A[T][ve]),u(K,A[L][ve]));A[T][T]=Ne,A[L][L]=Y,A[T][L]=l(0),A[L][T]=l(0);for(var re=0;re<$;re++)re!==T&&re!==L&&(A[T][re]=_[re],A[re][T]=_[re],A[L][re]=te[re],A[re][L]=te[re]);return A}function S(A,k,T,L){for(var $=A.length,K=Math.cos(k),V=Math.sin(k),z=K*K,Q=V*V,_=D($,0),te=D($,0),he=z*A[T][T]-2*K*V*A[T][L]+Q*A[L][L],Ne=Q*A[T][T]+2*K*V*A[T][L]+z*A[L][L],Y=0;Y<$;Y++)_[Y]=K*A[T][Y]-V*A[L][Y],te[Y]=V*A[T][Y]+K*A[L][Y];A[T][T]=he,A[L][L]=Ne,A[T][L]=0,A[L][T]=0;for(var ve=0;ve<$;ve++)ve!==T&&ve!==L&&(A[T][ve]=_[ve],A[ve][T]=_[ve],A[L][ve]=te[ve],A[ve][L]=te[ve]);return A}function b(A){for(var k=A.length,T=0,L=[0,1],$=0;$<k;$++)for(var K=$+1;K<k;K++)Math.abs(T)<Math.abs(A[$][K])&&(T=Math.abs(A[$][K]),L=[$,K]);return[L,T]}function E(A){for(var k=A.length,T=0,L=[0,1],$=0;$<k;$++)for(var K=$+1;K<k;K++)i(T)<i(A[$][K])&&(T=i(A[$][K]),L=[$,K]);return[L,T]}function M(A,k){for(var T=A.length,L=Array(T),$=Array(T),K=0;K<T;K++)$[K]=Array(T);for(var V=0;V<T;V++){for(var z=0,Q=A[0],_=0;_<A.length;_++)i(A[_])<i(Q)&&(z=_,Q=A[z]);L[V]=A.splice(z,1)[0];for(var te=0;te<T;te++)$[te][V]=k[te][z],k[te].splice(z,1)}return{values:L,vectors:$}}function D(A,k){for(var T=new Array(A),L=0;L<A;L++)T[L]=k;return T}return m}var LG=g(()=>{Ht()});var Lve,qve,qA,qG=g(()=>{j();Fr();zG();LG();Je();Lve="eigs",qve=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],qA=I(Lve,qve,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:o,equal:a,abs:s,atan:u,cos:c,sin:l,multiplyScalar:f,divideScalar:p,inv:m,bignumber:d,multiply:h,add:x,larger:y,column:N,flatten:v,number:w,complex:S,sqrt:b,diag:E,qr:M,usolve:D,usolveAll:A,im:k,re:T,smaller:L,matrixFromColumns:$,dot:K}=r,V=RG({config:e,addScalar:i,subtract:o,column:N,flatten:v,equal:a,abs:s,atan:u,cos:c,sin:l,multiplyScalar:f,inv:m,bignumber:d,complex:S,multiply:h,add:x}),z=BG({config:e,addScalar:i,subtract:o,multiply:h,multiplyScalar:f,flatten:v,divideScalar:p,sqrt:b,abs:s,bignumber:d,diag:E,qr:M,inv:m,usolve:D,usolveAll:A,equal:a,complex:S,larger:y,smaller:L,matrixFromColumns:$,dot:K});return t("eigs",{Array:function(ve){var re=n(ve);return Q(re)},"Array, number|BigNumber":function(ve,re){var ne=n(ve);return Q(ne,re)},Matrix:function(ve){var{values:re,vectors:ne}=Q(ve);return{values:n(re),vectors:n(ne)}},"Matrix, number|BigNumber":function(ve,re){var{values:ne,vectors:ge}=Q(ve,re);return{values:n(ne),vectors:n(ge)}}});function Q(Y,ve){ve===void 0&&(ve=e.epsilon);var re=Y.size();if(re.length!==2||re[0]!==re[1])throw new RangeError("Matrix must be square (size: "+gt(re)+")");var ne=Y.toArray(),ge=re[0];if(te(ne,ge,ve)&&(he(ne,ge),_(ne,ge,ve))){var xe=Ne(Y,ne,ge);return V(ne,ge,ve,xe)}var Se=Ne(Y,ne,ge);return z(ne,ge,ve,Se)}function _(Y,ve,re){for(var ne=0;ne<ve;ne++)for(var ge=ne;ge<ve;ge++)if(y(d(s(o(Y[ne][ge],Y[ge][ne]))),re))return!1;return!0}function te(Y,ve,re){for(var ne=0;ne<ve;ne++)for(var ge=0;ge<ve;ge++)if(y(d(s(k(Y[ne][ge]))),re))return!1;return!0}function he(Y,ve){for(var re=0;re<ve;re++)for(var ne=0;ne<ve;ne++)Y[re][ne]=T(Y[re][ne])}function Ne(Y,ve,re){var ne=Y.datatype();if(ne==="number"||ne==="BigNumber"||ne==="Complex")return ne;for(var ge=!1,xe=!1,Se=!1,we=0;we<re;we++)for(var et=0;et<re;et++){var Ye=ve[we][et];if(kt(Ye)||ba(Ye))ge=!0;else if(lt(Ye))xe=!0;else if(_i(Ye))Se=!0;else throw TypeError("Unsupported type in Matrix: "+Gt(Ye))}if(xe&&Se&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),Se){for(var Ue=0;Ue<re;Ue++)for(var st=0;st<re;st++)ve[Ue][st]=S(ve[Ue][st]);return"Complex"}if(xe){for(var Z=0;Z<re;Z++)for(var ie=0;ie<re;ie++)ve[Z][ie]=d(ve[Z][ie]);return"BigNumber"}if(ge){for(var G=0;G<re;G++)for(var X=0;X<re;X++)ve[G][X]=w(ve[G][X]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}})});var PG,Pve,PA,$G=g(()=>{Je();Fr();j();PG="expm",Pve=["typed","abs","add","identity","inv","multiply"],PA=I(PG,Pve,r=>{var{typed:e,abs:t,add:n,identity:i,inv:o,multiply:a}=r;return e(PG,{Matrix:function(f){var p=f.size();if(p.length!==2||p[0]!==p[1])throw new RangeError("Matrix must be square (size: "+gt(p)+")");for(var m=p[0],d=1e-15,h=s(f),x=u(h,d),y=x.q,N=x.j,v=a(f,Math.pow(2,-N)),w=i(m),S=i(m),b=1,E=v,M=-1,D=1;D<=y;D++)D>1&&(E=a(E,v),M=-M),b=b*(y-D+1)/((2*y-D+1)*D),w=n(w,a(b,E)),S=n(S,a(b*M,E));for(var A=a(o(S),w),k=0;k<N;k++)A=a(A,A);return Vo(f)?f.createSparseMatrix(A):A}});function s(l){for(var f=l.size()[0],p=0,m=0;m<f;m++){for(var d=0,h=0;h<f;h++)d+=t(l.get([m,h]));p=Math.max(d,p)}return p}function u(l,f){for(var p=30,m=0;m<p;m++)for(var d=0;d<=m;d++){var h=m-d;if(c(l,d,h)<f)return{q:d,j:h}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function c(l,f,p){for(var m=1,d=2;d<=f;d++)m*=d;for(var h=m,x=f+1;x<=2*f;x++)h*=x;var y=h*(2*f+1);return 8*Math.pow(l/Math.pow(2,p),2*f)*m*m/(h*y)}})});var UG,$ve,$A,GG=g(()=>{Je();Fr();Nt();j();UG="sqrtm",$ve=["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],$A=I(UG,$ve,r=>{var{typed:e,abs:t,add:n,multiply:i,sqrt:o,subtract:a,inv:s,size:u,max:c,identity:l}=r,f=1e3,p=1e-6;function m(d){var h,x=0,y=d,N=l(u(d));do{var v=y;if(y=i(.5,n(v,s(N))),N=i(.5,n(N,s(v))),h=c(t(a(y,v))),h>p&&++x>f)throw new Error("computing square root of matrix: iterative method could not converge")}while(h>p);return y}return e(UG,{"Array | Matrix":function(h){var x=ut(h)?h.size():Et(h);switch(x.length){case 1:if(x[0]===1)return o(h);throw new RangeError("Matrix must be square (size: "+gt(x)+")");case 2:{var y=x[0],N=x[1];if(y===N)return m(h);throw new RangeError("Matrix must be square (size: "+gt(x)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+gt(x)+")")}}})})});var Uve,Gve,UA,VG=g(()=>{j();Ht();$n();er();Uve="divide",Gve=["typed","matrix","multiply","equalScalar","divideScalar","inv"],UA=I(Uve,Gve,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:o,inv:a}=r,s=nr({typed:e,equalScalar:i}),u=ct({typed:e});return e("divide",Lc({"Array | Matrix, Array | Matrix":function(l,f){return n(l,a(f))},"DenseMatrix, any":function(l,f){return u(l,f,o,!1)},"SparseMatrix, any":function(l,f){return s(l,f,o,!1)},"Array, any":function(l,f){return u(t(l),f,o,!1).valueOf()},"any, Array | Matrix":function(l,f){return n(l,a(f))}},o.signatures))})});var WG,Vve,GA,HG=g(()=>{Je();j();WG="distance",Vve=["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],GA=I(WG,Vve,r=>{var{typed:e,addScalar:t,subtract:n,multiplyScalar:i,divideScalar:o,unaryMinus:a,sqrt:s,abs:u}=r;return e(WG,{"Array, Array, Array":function(S,b,E){if(S.length===2&&b.length===2&&E.length===2){if(!l(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!l(b))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!l(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var M=o(n(E[1],E[0]),n(b[1],b[0])),D=i(i(M,M),b[0]),A=a(i(M,b[0])),k=S[1];return x(S[0],S[1],D,A,k)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(S,b,E){if(Object.keys(S).length===2&&Object.keys(b).length===2&&Object.keys(E).length===2){if(!l(S))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!l(b))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!l(E))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in S&&"pointY"in S&&"lineOnePtX"in b&&"lineOnePtY"in b&&"lineTwoPtX"in E&&"lineTwoPtY"in E){var M=o(n(E.lineTwoPtY,E.lineTwoPtX),n(b.lineOnePtY,b.lineOnePtX)),D=i(i(M,M),b.lineOnePtX),A=a(i(M,b.lineOnePtX)),k=S.pointX;return x(S.pointX,S.pointY,D,A,k)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(S,b){if(S.length===2&&b.length===3){if(!l(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(b))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return x(S[0],S[1],b[0],b[1],b[2])}else if(S.length===3&&b.length===6){if(!f(S))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(b))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(S[0],S[1],S[2],b[0],b[1],b[2],b[3],b[4],b[5])}else if(S.length===b.length&&S.length>0){if(!p(S))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!p(b))throw new TypeError("All values of an array should be numbers or BigNumbers");return N(S,b)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(S,b){if(Object.keys(S).length===2&&Object.keys(b).length===3){if(!l(S))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(b))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in S&&"pointY"in S&&"xCoeffLine"in b&&"yCoeffLine"in b&&"constant"in b)return x(S.pointX,S.pointY,b.xCoeffLine,b.yCoeffLine,b.constant);throw new TypeError("Key names do not match")}else if(Object.keys(S).length===3&&Object.keys(b).length===6){if(!f(S))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!m(b))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in S&&"pointY"in S&&"x0"in b&&"y0"in b&&"z0"in b&&"a"in b&&"b"in b&&"c"in b)return y(S.pointX,S.pointY,S.pointZ,b.x0,b.y0,b.z0,b.a,b.b,b.c);throw new TypeError("Key names do not match")}else if(Object.keys(S).length===2&&Object.keys(b).length===2){if(!l(S))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!l(b))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in S&&"pointOneY"in S&&"pointTwoX"in b&&"pointTwoY"in b)return N([S.pointOneX,S.pointOneY],[b.pointTwoX,b.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(S).length===3&&Object.keys(b).length===3){if(!f(S))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(b))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in S&&"pointOneY"in S&&"pointOneZ"in S&&"pointTwoX"in b&&"pointTwoY"in b&&"pointTwoZ"in b)return N([S.pointOneX,S.pointOneY,S.pointOneZ],[b.pointTwoX,b.pointTwoY,b.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(S){if(!h(S))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return v(S)}});function c(w){return typeof w=="number"||lt(w)}function l(w){return w.constructor!==Array&&(w=d(w)),c(w[0])&&c(w[1])}function f(w){return w.constructor!==Array&&(w=d(w)),c(w[0])&&c(w[1])&&c(w[2])}function p(w){return Array.isArray(w)||(w=d(w)),w.every(c)}function m(w){return w.constructor!==Array&&(w=d(w)),c(w[0])&&c(w[1])&&c(w[2])&&c(w[3])&&c(w[4])&&c(w[5])}function d(w){for(var S=Object.keys(w),b=[],E=0;E<S.length;E++)b.push(w[S[E]]);return b}function h(w){if(w[0].length===2&&c(w[0][0])&&c(w[0][1])){if(w.some(S=>S.length!==2||!c(S[0])||!c(S[1])))return!1}else if(w[0].length===3&&c(w[0][0])&&c(w[0][1])&&c(w[0][2])){if(w.some(S=>S.length!==3||!c(S[0])||!c(S[1])||!c(S[2])))return!1}else return!1;return!0}function x(w,S,b,E,M){var D=u(t(t(i(b,w),i(E,S)),M)),A=s(t(i(b,b),i(E,E)));return o(D,A)}function y(w,S,b,E,M,D,A,k,T){var L=[n(i(n(M,S),T),i(n(D,b),k)),n(i(n(D,b),A),i(n(E,w),T)),n(i(n(E,w),k),i(n(M,S),A))];L=s(t(t(i(L[0],L[0]),i(L[1],L[1])),i(L[2],L[2])));var $=s(t(t(i(A,A),i(k,k)),i(T,T)));return o(L,$)}function N(w,S){for(var b=w.length,E=0,M=0,D=0;D<b;D++)M=n(w[D],S[D]),E=t(i(M,M),E);return s(E)}function v(w){for(var S=[],b=[],E=[],M=0;M<w.length-1;M++)for(var D=M+1;D<w.length;D++)w[0].length===2?(b=[w[M][0],w[M][1]],E=[w[D][0],w[D][1]]):w[0].length===3&&(b=[w[M][0],w[M][1],w[M][2]],E=[w[D][0],w[D][1],w[D][2]]),S.push(N(b,E));return S}})});var Wve,Hve,VA,KG=g(()=>{Je();j();Wve="intersect",Hve=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten"],VA=I(Wve,Hve,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:o,matrix:a,multiply:s,multiplyScalar:u,divideScalar:c,subtract:l,smaller:f,equalScalar:p,flatten:m}=r;return e("intersect",{"Array, Array, Array":d,"Array, Array, Array, Array":h,"Matrix, Matrix, Matrix":function(A,k,T){var L=d(A.valueOf(),k.valueOf(),T.valueOf());return L===null?null:a(L)},"Matrix, Matrix, Matrix, Matrix":function(A,k,T,L){var $=h(A.valueOf(),k.valueOf(),T.valueOf(),L.valueOf());return $===null?null:a($)}});function d(D,A,k){if(D=x(D),A=x(A),k=x(k),!v(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!v(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(k))throw new TypeError("Array with 4 numbers expected as third argument");return M(D[0],D[1],D[2],A[0],A[1],A[2],k[0],k[1],k[2],k[3])}function h(D,A,k,T){if(D=x(D),A=x(A),k=x(k),T=x(T),D.length===2){if(!N(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!N(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!N(k))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!N(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return S(D,A,k,T)}else if(D.length===3){if(!v(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!v(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!v(k))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!v(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return E(D[0],D[1],D[2],A[0],A[1],A[2],k[0],k[1],k[2],T[0],T[1],T[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(D){return D.length===1?D[0]:D.length>1&&Array.isArray(D[0])&&D.every(A=>Array.isArray(A)&&A.length===1)?m(D):D}function y(D){return typeof D=="number"||lt(D)}function N(D){return D.length===2&&y(D[0])&&y(D[1])}function v(D){return D.length===3&&y(D[0])&&y(D[1])&&y(D[2])}function w(D){return D.length===4&&y(D[0])&&y(D[1])&&y(D[2])&&y(D[3])}function S(D,A,k,T){var L=D,$=k,K=l(L,A),V=l($,T),z=l(u(K[0],V[1]),u(V[0],K[1]));if(f(n(z),t.epsilon))return null;var Q=u(V[0],L[1]),_=u(V[1],L[0]),te=u(V[0],$[1]),he=u(V[1],$[0]),Ne=c(o(l(l(Q,_),te),he),z);return i(s(K,Ne),L)}function b(D,A,k,T,L,$,K,V,z,Q,_,te){var he=u(l(D,A),l(k,T)),Ne=u(l(L,$),l(K,V)),Y=u(l(z,Q),l(_,te));return o(o(he,Ne),Y)}function E(D,A,k,T,L,$,K,V,z,Q,_,te){var he=b(D,K,Q,K,A,V,_,V,k,z,te,z),Ne=b(Q,K,T,D,_,V,L,A,te,z,$,k),Y=b(D,K,T,D,A,V,L,A,k,z,$,k),ve=b(Q,K,Q,K,_,V,_,V,te,z,te,z),re=b(T,D,T,D,L,A,L,A,$,k,$,k),ne=c(l(u(he,Ne),u(Y,ve)),l(u(re,ve),u(Ne,Ne))),ge=c(o(he,u(ne,Ne)),ve),xe=o(D,u(ne,l(T,D))),Se=o(A,u(ne,l(L,A))),we=o(k,u(ne,l($,k))),et=o(K,u(ge,l(Q,K))),Ye=o(V,u(ge,l(_,V))),Ue=o(z,u(ge,l(te,z)));return p(xe,et)&&p(Se,Ye)&&p(we,Ue)?[xe,Se,we]:null}function M(D,A,k,T,L,$,K,V,z,Q){var _=u(D,K),te=u(T,K),he=u(A,V),Ne=u(L,V),Y=u(k,z),ve=u($,z),re=l(l(l(Q,_),he),Y),ne=l(l(l(o(o(te,Ne),ve),_),he),Y),ge=c(re,ne),xe=o(D,u(ge,l(T,D))),Se=o(A,u(ge,l(L,A))),we=o(k,u(ge,l($,k)));return[xe,Se,we]}})});var jG,Kve,Ap,WA=g(()=>{nt();j();as();jG="sum",Kve=["typed","config","add","numeric"],Ap=I(jG,Kve,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(jG,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":a,"...":function(u){if(Ma(u))throw new TypeError("Scalar values expected in function sum");return o(u)}});function o(s){var u;return ai(s,function(c){try{u=u===void 0?c:n(u,c)}catch(l){throw vn(l,"sum",c)}}),u===void 0&&(u=i(0,t.number)),typeof u=="string"&&(u=i(u,t.number)),u}function a(s,u){try{var c=Ls(s,u,n);return c}catch(l){throw vn(l,"sum")}}})});var ZG,jve,Mp,HA=g(()=>{nt();Nt();j();as();ZG="mean",jve=["typed","add","divide"],Mp=I(ZG,jve,r=>{var{typed:e,add:t,divide:n}=r;return e(ZG,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":i,"...":function(s){if(Ma(s))throw new TypeError("Scalar values expected in function mean");return o(s)}});function i(a,s){try{var u=Ls(a,s,t),c=Array.isArray(a)?Et(a):a.size();return n(u,c[s])}catch(l){throw vn(l,"mean")}}function o(a){var s,u=0;if(ai(a,function(c){try{s=s===void 0?c:t(s,c),u++}catch(l){throw vn(l,"mean",c)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return n(s,u)}})});var XG,Zve,KA,JG=g(()=>{nt();Nt();j();as();XG="median",Zve=["typed","add","divide","compare","partitionSelect"],KA=I(XG,Zve,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:o}=r;function a(c){try{c=At(c.valueOf());var l=c.length;if(l===0)throw new Error("Cannot calculate median of an empty array");if(l%2===0){for(var f=l/2-1,p=o(c,f+1),m=c[f],d=0;d<f;++d)i(c[d],m)>0&&(m=c[d]);return u(m,p)}else{var h=o(c,(l-1)/2);return s(h)}}catch(x){throw vn(x,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(l){return l}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(l,f){return n(t(l,f),2)}});return e(XG,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(l,f){throw new Error("median(A, dim) is not yet supported")},"...":function(l){if(Ma(l))throw new TypeError("Scalar values expected in function median");return a(l)}})})});var YG,Xve,jA,QG=g(()=>{Nt();j();as();YG="mad",Xve=["typed","abs","map","median","subtract"],jA=I(YG,Xve,r=>{var{typed:e,abs:t,map:n,median:i,subtract:o}=r;return e(YG,{"Array | Matrix":a,"...":function(u){return a(u)}});function a(s){if(s=At(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=i(s);return i(n(s,function(c){return t(o(c,u))}))}catch(c){throw c instanceof TypeError&&c.message.indexOf("median")!==-1?new TypeError(c.message.replace("median","mad")):vn(c,"mad")}}})});var ZA,e7,Jve,Dp,XA=g(()=>{nt();Je();j();as();ZA="unbiased",e7="variance",Jve=["typed","add","subtract","multiply","divide","apply","isNaN"],Dp=I(e7,Jve,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:o,apply:a,isNaN:s}=r;return e(e7,{"Array | Matrix":function(f){return u(f,ZA)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,p){return c(f,p,ZA)},"Array | Matrix, number | BigNumber, string":c,"...":function(f){return u(f,ZA)}});function u(l,f){var p,m=0;if(l.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(ai(l,function(x){try{p=p===void 0?x:t(p,x),m++}catch(y){throw vn(y,"variance",x)}}),m===0)throw new Error("Cannot calculate variance of an empty array");var d=o(p,m);if(p=void 0,ai(l,function(x){var y=n(x,d);p=p===void 0?i(y,y):t(p,i(y,y))}),s(p))return p;switch(f){case"uncorrected":return o(p,m);case"biased":return o(p,m+1);case"unbiased":{var h=lt(p)?p.mul(0):0;return m===1?h:o(p,m-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function c(l,f,p){try{if(l.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(l,f,m=>u(m,p))}catch(m){throw vn(m,"variance")}}})});var Yve,Qve,JA,t7=g(()=>{Je();Rt();Nt();j();Yve="quantileSeq",Qve=["typed","add","multiply","partitionSelect","compare"],JA=I(Yve,Qve,r=>{var{typed:e,add:t,multiply:n,partitionSelect:i,compare:o}=r;function a(c,l,f){var p,m,d;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(wa(c)){if(f=f||!1,typeof f=="boolean"){if(m=c.valueOf(),kt(l)){if(l<0)throw new Error("N/prob must be non-negative");if(l<=1)return s(m,l,f);if(l>1){if(!Ze(l))throw new Error("N must be a positive integer");var h=l+1;p=new Array(l);for(var x=0;x<l;)p[x]=s(m,++x/h,f);return p}}if(lt(l)){var y=l.constructor;if(l.isNegative())throw new Error("N/prob must be non-negative");if(d=new y(1),l.lte(d))return new y(s(m,l,f));if(l.gt(d)){if(!l.isInteger())throw new Error("N must be a positive integer");var N=l.toNumber();if(N>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var v=new y(N+1);p=new Array(N);for(var w=0;w<N;)p[w]=new y(s(m,new y(++w).div(v),f));return p}}if(Array.isArray(l)){p=new Array(l.length);for(var S=0;S<p.length;++S){var b=l[S];if(kt(b)){if(b<0||b>1)throw new Error("Probability must be between 0 and 1, inclusive")}else if(lt(b)){if(d=new b.constructor(1),b.isNegative()||b.gt(d))throw new Error("Probability must be between 0 and 1, inclusive")}else throw new TypeError("Unexpected type of argument in function quantileSeq");p[S]=s(m,b,f)}return p}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}function s(c,l,f){var p=At(c),m=p.length;if(m===0)throw new Error("Cannot calculate quantile of an empty sequence");if(kt(l)){var d=l*(m-1),h=d%1;if(h===0){var x=f?p[d]:i(p,d);return u(x),x}var y=Math.floor(d),N,v;if(f)N=p[y],v=p[y+1];else{v=i(p,y+1),N=p[y];for(var w=0;w<y;++w)o(p[w],N)>0&&(N=p[w])}return u(N),u(v),t(n(N,1-h),n(v,h))}var S=l.times(m-1);if(S.isInteger()){S=S.toNumber();var b=f?p[S]:i(p,S);return u(b),b}var E=S.floor(),M=S.minus(E),D=E.toNumber(),A,k;if(f)A=p[D],k=p[D+1];else{k=i(p,D+1),A=p[D];for(var T=0;T<D;++T)o(p[T],A)>0&&(A=p[T])}u(A),u(k);var L=new M.constructor(1);return t(n(A,L.minus(M)),n(k,M))}var u=e({"number | BigNumber | Unit":function(l){return l}});return a})});var r7,exe,Ep,YA=g(()=>{j();r7="std",exe=["typed","sqrt","variance"],Ep=I(r7,exe,r=>{var{typed:e,sqrt:t,variance:n}=r;return e(r7,{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(a){return i(a)}});function i(o,a){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return t(n.apply(null,arguments))}catch(s){throw s instanceof TypeError&&s.message.indexOf(" variance")!==-1?new TypeError(s.message.replace(" variance"," std")):s}}})});function i7(r){return r.isInteger()&&r.gte(0)}var n7,txe,QA,o7=g(()=>{j();i1();n7="combinations",txe=["typed"],QA=I(n7,txe,r=>{var{typed:e}=r;return e(n7,{"number, number":n1,"BigNumber, BigNumber":function(n,i){var o=n.constructor,a,s,u=n.minus(i),c=new o(1);if(!i7(n)||!i7(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(a=c,i.lt(u))for(s=c;s.lte(u);s=s.plus(c))a=a.times(i.plus(s)).dividedBy(s);else for(s=c;s.lte(i);s=s.plus(c))a=a.times(u.plus(s)).dividedBy(s);return a}})})});function s7(r){return r.isInteger()&&r.gte(0)}var a7,rxe,eM,u7=g(()=>{j();Rt();sp();a7="combinationsWithRep",rxe=["typed"],eM=I(a7,rxe,r=>{var{typed:e}=r;return e(a7,{"number, number":function(n,i){if(!Ze(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Ze(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var o=si(n,n+i-1);return o/si(1,i)}var a=si(i+1,n+i-1);return a/si(1,n-1)},"BigNumber, BigNumber":function(n,i){var o=n.constructor,a,s,u=new o(1),c=n.minus(u);if(!s7(n)||!s7(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=u,i.lt(c))for(s=u;s.lte(c);s=s.plus(u))a=a.times(i.plus(s)).dividedBy(s);else for(s=u;s.lte(i);s=s.plus(u))a=a.times(c.plus(s)).dividedBy(s);return a}})})});var c7,nxe,tM,l7=g(()=>{nt();j();vt();c7="gamma",nxe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],tM=I(c7,nxe,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:o,Complex:a}=r;return e(c7,{number:Ud,Complex:function(c){if(c.im===0)return this(c.re);if(c.re<.5){var l=new a(1-c.re,-c.im),f=new a(Math.PI*c.re,Math.PI*c.im);return new a(Math.PI).div(f.sin()).div(this(l))}c=new a(c.re-1,c.im);for(var p=new a(Su[0],0),m=1;m<Su.length;++m){var d=new a(Su[m],0);p=p.add(d.div(c.add(m)))}var h=new a(c.re+l1+.5,c.im),x=Math.sqrt(2*Math.PI),y=h.pow(c.add(.5)),N=h.neg().exp();return p.mul(x).mul(y).mul(N)},BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new o(1/0):s(c.minus(1));if(!c.isFinite())return new o(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(c){return Ee(c,this)}});function s(u){if(u<8)return new o([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),l=o.clone({precision:c});if(u%2===1)return u.times(s(new o(u-1)));for(var f=u,p=new l(u),m=u.toNumber();f>2;)f-=2,m+=f,p=p.times(m);return new o(p.toPrecision(o.precision))}})});var f7,ixe,rM,p7=g(()=>{nt();j();f7="factorial",ixe=["typed","gamma"],rM=I(f7,ixe,r=>{var{typed:e,gamma:t}=r;return e(f7,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":function(i){return Ee(i,this)}})})});var m7,oxe,nM,h7=g(()=>{j();m7="kldivergence",oxe=["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],nM=I(m7,oxe,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:o,dotDivide:a,log:s,isNumeric:u}=r;return e(m7,{"Array, Array":function(f,p){return c(t(f),t(p))},"Matrix, Array":function(f,p){return c(f,t(p))},"Array, Matrix":function(f,p){return c(t(f),p)},"Matrix, Matrix":function(f,p){return c(f,p)}});function c(l,f){var p=f.size().length,m=l.size().length;if(p>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(p!==m)throw new Error("Length of two vectors must be equal");var d=i(l);if(d===0)throw new Error("Sum of elements in first object must be non zero");var h=i(f);if(h===0)throw new Error("Sum of elements in second object must be non zero");var x=n(l,i(l)),y=n(f,i(f)),N=i(o(x,s(a(x,y))));return u(N)?N:Number.NaN}})});var d7,axe,iM,g7=g(()=>{nt();j();d7="multinomial",axe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],iM=I(d7,axe,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:o,isInteger:a,isPositive:s}=r;return e(d7,{"Array | Matrix":function(c){var l=0,f=1;return ai(c,function(p){if(!a(p)||!s(p))throw new TypeError("Positive integer value expected in function multinomial");l=t(l,p),f=i(f,o(p))}),n(o(l),f)}})})});function x7(r){return r.isInteger()&&r.gte(0)}var v7,sxe,oM,y7=g(()=>{Rt();sp();j();v7="permutations",sxe=["typed","factorial"],oM=I(v7,sxe,r=>{var{typed:e,factorial:t}=r;return e(v7,{"number | BigNumber":t,"number, number":function(i,o){if(!Ze(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!Ze(o)||o<0)throw new TypeError("Positive integer value expected in function permutations");if(o>i)throw new TypeError("second argument k must be less than or equal to first argument n");return si(i-o+1,i)},"BigNumber, BigNumber":function(i,o){var a,s;if(!x7(i)||!x7(o))throw new TypeError("Positive integer value expected in function permutations");if(o.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var u=i.mul(0).add(1);for(a=u,s=i.minus(o).plus(1);s.lte(i);s=s.plus(1))a=a.times(s);return a}})})});var w7=Re((b7,aM)=>{(function(r,e,t){function n(s){var u=this,c=a();u.next=function(){var l=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=l-(u.c=l|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(s),u.s0<0&&(u.s0+=1),u.s1-=c(s),u.s1<0&&(u.s1+=1),u.s2-=c(s),u.s2<0&&(u.s2+=1),c=null}function i(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function o(s,u){var c=new n(s),l=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,l&&(typeof l=="object"&&i(l,c),f.state=function(){return i(c,{})}),f}function a(){var s=4022871197,u=function(c){c=String(c);for(var l=0;l<c.length;l++){s+=c.charCodeAt(l);var f=.02519603282416938*s;s=f>>>0,f-=s,f*=s,s=f>>>0,f-=s,s+=f*4294967296}return(s>>>0)*23283064365386963e-26};return u}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(b7,typeof aM=="object"&&aM,typeof define=="function"&&define)});var S7=Re((N7,sM)=>{(function(r,e,t){function n(a){var s=this,u="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var l=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^l^l>>>8},a===(a|0)?s.x=a:u+=a;for(var c=0;c<u.length+64;c++)s.x^=u.charCodeAt(c)|0,s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function o(a,s){var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(N7,typeof sM=="object"&&sM,typeof define=="function"&&define)});var M7=Re((A7,uM)=>{(function(r,e,t){function n(a){var s=this,u="";s.next=function(){var l=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^(l^l<<1))|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,a===(a|0)?s.x=a:u+=a;for(var c=0;c<u.length+64;c++)s.x^=u.charCodeAt(c)|0,c==u.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function o(a,s){var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})(A7,typeof uM=="object"&&uM,typeof define=="function"&&define)});var E7=Re((D7,cM)=>{(function(r,e,t){function n(a){var s=this;s.next=function(){var c=s.x,l=s.i,f,p,m;return f=c[l],f^=f>>>7,p=f^f<<24,f=c[l+1&7],p^=f^f>>>10,f=c[l+3&7],p^=f^f>>>3,f=c[l+4&7],p^=f^f<<7,f=c[l+7&7],f=f^f<<13,p^=f^f<<9,c[l]=p,s.i=l+1&7,p};function u(c,l){var f,p,m=[];if(l===(l|0))p=m[0]=l;else for(l=""+l,f=0;f<l.length;++f)m[f&7]=m[f&7]<<15^l.charCodeAt(f)+m[f+1&7]<<13;for(;m.length<8;)m.push(0);for(f=0;f<8&&m[f]===0;++f);for(f==8?p=m[7]=-1:p=m[f],c.x=m,c.i=0,f=256;f>0;--f)c.next()}u(s,a)}function i(a,s){return s.x=a.x.slice(),s.i=a.i,s}function o(a,s){a==null&&(a=+new Date);var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(c.x&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})(D7,typeof cM=="object"&&cM,typeof define=="function"&&define)});var C7=Re((T7,lM)=>{(function(r,e,t){function n(a){var s=this;s.next=function(){var c=s.w,l=s.X,f=s.i,p,m;return s.w=c=c+1640531527|0,m=l[f+34&127],p=l[f=f+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=l[f]=m^p,s.i=f,m+(c^c>>>16)|0};function u(c,l){var f,p,m,d,h,x=[],y=128;for(l===(l|0)?(p=l,l=null):(l=l+"\0",p=0,y=Math.max(y,l.length)),m=0,d=-32;d<y;++d)l&&(p^=l.charCodeAt((d+32)%l.length)),d===0&&(h=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,d>=0&&(h=h+1640531527|0,f=x[d&127]^=p+h,m=f==0?m+1:0);for(m>=128&&(x[(l&&l.length||0)&127]=-1),m=127,d=4*128;d>0;--d)p=x[m+34&127],f=x[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,x[m]=p^f;c.w=h,c.X=x,c.i=m}u(s,a)}function i(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function o(a,s){a==null&&(a=+new Date);var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(c.X&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(T7,typeof lM=="object"&&lM,typeof define=="function"&&define)});var k7=Re((I7,fM)=>{(function(r,e,t){function n(a){var s=this,u="";s.next=function(){var l=s.b,f=s.c,p=s.d,m=s.a;return l=l<<25^l>>>7^f,f=f-p|0,p=p<<24^p>>>8^m,m=m-l|0,s.b=l=l<<20^l>>>12^f,s.c=f=f-p|0,s.d=p<<16^f>>>16^m,s.a=m-l|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,a===Math.floor(a)?(s.a=a/4294967296|0,s.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)s.b^=u.charCodeAt(c)|0,s.next()}function i(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function o(a,s){var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(I7,typeof fM=="object"&&fM,typeof define=="function"&&define)});var pM=Re(()=>{});var _7=Re((O7,ug)=>{(function(r,e,t){var n=256,i=6,o=52,a="random",s=t.pow(n,i),u=t.pow(2,o),c=u*2,l=n-1,f;function p(v,w,S){var b=[];w=w==!0?{entropy:!0}:w||{};var E=x(h(w.entropy?[v,N(e)]:v??y(),3),b),M=new m(b),D=function(){for(var A=M.g(i),k=s,T=0;A<u;)A=(A+T)*n,k*=n,T=M.g(1);for(;A>=c;)A/=2,k/=2,T>>>=1;return(A+T)/k};return D.int32=function(){return M.g(4)|0},D.quick=function(){return M.g(4)/4294967296},D.double=D,x(N(M.S),e),(w.pass||S||function(A,k,T,L){return L&&(L.S&&d(L,M),A.state=function(){return d(M,{})}),T?(t[a]=A,k):A})(D,E,"global"in w?w.global:this==t,w.state)}function m(v){var w,S=v.length,b=this,E=0,M=b.i=b.j=0,D=b.S=[];for(S||(v=[S++]);E<n;)D[E]=E++;for(E=0;E<n;E++)D[E]=D[M=l&M+v[E%S]+(w=D[E])],D[M]=w;(b.g=function(A){for(var k,T=0,L=b.i,$=b.j,K=b.S;A--;)k=K[L=l&L+1],T=T*n+K[l&(K[L]=K[$=l&$+k])+(K[$]=k)];return b.i=L,b.j=$,T})(n)}function d(v,w){return w.i=v.i,w.j=v.j,w.S=v.S.slice(),w}function h(v,w){var S=[],b=typeof v,E;if(w&&b=="object")for(E in v)try{S.push(h(v[E],w-1))}catch{}return S.length?S:b=="string"?v:v+"\0"}function x(v,w){for(var S=v+"",b,E=0;E<S.length;)w[l&E]=l&(b^=w[l&E]*19)+S.charCodeAt(E++);return N(w)}function y(){try{var v;return f&&(v=f.randomBytes)?v=v(n):(v=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(v)),N(v)}catch{var w=r.navigator,S=w&&w.plugins;return[+new Date,r,S,r.screen,N(e)]}}function N(v){return String.fromCharCode.apply(0,v)}if(x(t.random(),e),typeof ug=="object"&&ug.exports){ug.exports=p;try{f=pM()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):t["seed"+a]=p})(typeof self<"u"?self:O7,[],Math)});var B7=Re((PJe,F7)=>{var uxe=w7(),cxe=S7(),lxe=M7(),fxe=E7(),pxe=C7(),mxe=k7(),Iu=_7();Iu.alea=uxe;Iu.xor128=cxe;Iu.xorwow=lxe;Iu.xorshift7=fxe;Iu.xor4096=pxe;Iu.tychei=mxe;F7.exports=Iu});function ss(r){var e;function t(i){e=i===null?hxe:(0,mM.default)(String(i))}t(r);function n(){return e()}return n}var mM,hxe,cg=g(()=>{mM=Si(B7(),1),hxe=(0,mM.default)(Date.now())});var z7,dxe,hM,R7=g(()=>{Nt();j();Je();cg();z7="pickRandom",dxe=["typed","config","?on"],hM=I(z7,dxe,r=>{var{typed:e,config:t,on:n}=r,i=ss(t.randomSeed);return n&&n("config",function(a,s){a.randomSeed!==s.randomSeed&&(i=ss(a.randomSeed))}),e(z7,{"Array | Matrix":function(s){return o(s,{})},"Array | Matrix, Object":function(s,u){return o(s,u)},"Array | Matrix, number":function(s,u){return o(s,{number:u})},"Array | Matrix, Array | Matrix":function(s,u){return o(s,{weights:u})},"Array | Matrix, Array | Matrix, number":function(s,u,c){return o(s,{number:c,weights:u})},"Array | Matrix, number, Array | Matrix":function(s,u,c){return o(s,{number:u,weights:c})}});function o(a,s){var{number:u,weights:c,elementWise:l=!0}=s,f=typeof u>"u";f&&(u=1);var p=ut(a)?a.create:ut(c)?c.create:null;a=a.valueOf(),c&&(c=c.valueOf()),l===!0&&(a=At(a),c=At(c));var m=0;if(typeof c<"u"){if(c.length!==a.length)throw new Error("Weights must have the same length as possibles");for(var d=0,h=c.length;d<h;d++){if(!kt(c[d])||c[d]<0)throw new Error("Weights must be an array of positive numbers");m+=c[d]}}for(var x=a.length,y=[],N;y.length<u;){if(typeof c>"u")N=a[Math.floor(i()*x)];else for(var v=i()*m,w=0,S=a.length;w<S;w++)if(v-=c[w],v<0){N=a[w];break}y.push(N)}return f?y[0]:p?p(y):y}})});function Tp(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(Tp(r,e));else for(var o=0,a=r.shift();o<a;o++)t.push(e());return t}var dM=g(()=>{});var L7,gxe,gM,q7=g(()=>{j();Je();cg();dM();L7="random",gxe=["typed","config","?on"],gM=I(L7,gxe,r=>{var{typed:e,config:t,on:n}=r,i=ss(t.randomSeed);return n&&n("config",function(s,u){s.randomSeed!==u.randomSeed&&(i=ss(s.randomSeed))}),e(L7,{"":()=>a(0,1),number:s=>a(0,s),"number, number":(s,u)=>a(s,u),"Array | Matrix":s=>o(s,0,1),"Array | Matrix, number":(s,u)=>o(s,0,u),"Array | Matrix, number, number":(s,u,c)=>o(s,u,c)});function o(s,u,c){var l=Tp(s.valueOf(),()=>a(u,c));return ut(s)?s.create(l):l}function a(s,u){return s+i()*(u-s)}})});var P7,vxe,vM,$7=g(()=>{j();dM();cg();Je();P7="randomInt",vxe=["typed","config","?on"],vM=I(P7,vxe,r=>{var{typed:e,config:t,on:n}=r,i=ss(t.randomSeed);return n&&n("config",function(s,u){s.randomSeed!==u.randomSeed&&(i=ss(s.randomSeed))}),e(P7,{"":()=>a(0,1),number:s=>a(0,s),"number, number":(s,u)=>a(s,u),"Array | Matrix":s=>o(s,0,1),"Array | Matrix, number":(s,u)=>o(s,0,u),"Array | Matrix, number, number":(s,u,c)=>o(s,u,c)});function o(s,u,c){var l=Tp(s.valueOf(),()=>a(u,c));return ut(s)?s.create(l):l}function a(s,u){return Math.floor(s+i()*(u-s))}})});var U7,xxe,xM,G7=g(()=>{j();U7="stirlingS2",xxe=["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],xM=I(U7,xxe,r=>{var{typed:e,addScalar:t,subtract:n,multiplyScalar:i,divideScalar:o,pow:a,factorial:s,combinations:u,isNegative:c,isInteger:l,larger:f}=r;return e(U7,{"number | BigNumber, number | BigNumber":function(m,d){if(!l(m)||c(m)||!l(d)||c(d))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(f(d,m))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var h=s(d),x=0,y=0;y<=d;y++){var N=a(-1,n(d,y)),v=u(d,y),w=a(y,m);x=t(x,i(i(v,w),N))}return o(x,h)}})})});var V7,yxe,yM,W7=g(()=>{j();V7="bellNumbers",yxe=["typed","addScalar","isNegative","isInteger","stirlingS2"],yM=I(V7,yxe,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:o}=r;return e(V7,{"number | BigNumber":function(s){if(!i(s)||n(s))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,c=0;c<=s;c++)u=t(u,o(s,c));return u}})})});var H7,bxe,bM,K7=g(()=>{j();H7="catalan",bxe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],bM=I(H7,bxe,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:o,isNegative:a,isInteger:s}=r;return e(H7,{"number | BigNumber":function(c){if(!s(c)||a(c))throw new TypeError("Non-negative integer value expected in function catalan");return n(o(i(c,2),c),t(c,1))}})})});var j7,wxe,wM,Z7=g(()=>{j();j7="composition",wxe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],wM=I(j7,wxe,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:o,isInteger:a,larger:s}=r;return e(j7,{"number | BigNumber, number | BigNumber":function(c,l){if(!a(c)||!i(c)||!a(l)||!i(l))throw new TypeError("Positive integer value expected in function composition");if(s(l,c))throw new TypeError("k must be less than or equal to n in function composition");return n(t(c,-1),t(l,-1))}})})});var Nxe,Sxe,lg,NM=g(()=>{Je();j();Ht();Nxe="simplifyUtil",Sxe=["FunctionNode","OperatorNode","SymbolNode"],lg=I(Nxe,Sxe,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i={add:!0,multiply:!0},o={add:!0,multiply:!0};function a(m,d){if(!gn(m))return!0;var h=m.fn.toString();return d&&ot(d,h)&&ot(d[h],"commutative")?d[h].commutative:i[h]||!1}function s(m,d){if(!gn(m))return!1;var h=m.fn.toString();return d&&ot(d,h)&&ot(d[h],"associative")?d[h].associative:o[h]||!1}function u(m){if(!m.args||m.args.length===0)return m;m.args=c(m);for(var d=0;d<m.args.length;d++)u(m.args[d])}function c(m){var d,h=[],x=function y(N){for(var v=0;v<N.args.length;v++){var w=N.args[v];gn(w)&&d===w.op?y(w):h.push(w)}};return s(m)?(d=m.op,x(m),h):m.args}function l(m){if(!(!m.args||m.args.length===0)){for(var d=p(m),h=m.args.length,x=0;x<h;x++)l(m.args[x]);if(h>2&&s(m)){for(var y=m.args.pop();m.args.length>0;)y=d([m.args.pop(),y]);m.args=y.args}}}function f(m){if(!(!m.args||m.args.length===0)){for(var d=p(m),h=m.args.length,x=0;x<h;x++)f(m.args[x]);if(h>2&&s(m)){for(var y=m.args.shift();m.args.length>0;)y=d([y,m.args.shift()]);m.args=y.args}}}function p(m){return gn(m)?function(d){try{return new t(m.op,m.fn,d,m.implicit)}catch(h){return console.error(h),[]}}:function(d){return new e(new n(m.name),d)}}return{createMakeNodeFunction:p,isCommutative:a,isAssociative:s,flatten:u,allChildren:c,unflattenr:l,unflattenl:f}})});var Axe,Mxe,fg,SM=g(()=>{Je();j();Axe="simplifyCore",Mxe=["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],fg=I(Axe,Mxe,r=>{var{equal:e,isZero:t,add:n,subtract:i,multiply:o,divide:a,pow:s,ConstantNode:u,OperatorNode:c,FunctionNode:l,ParenthesisNode:f}=r,p=new u(0),m=new u(1);function d(h){if(gn(h)&&h.isUnary()){var x=d(h.args[0]);if(h.op==="+")return x;if(h.op==="-"){if(gn(x)){if(x.isUnary()&&x.op==="-")return x.args[0];if(x.isBinary()&&x.fn==="subtract")return new c("-","subtract",[x.args[1],x.args[0]])}return new c(h.op,h.fn,[x])}}else if(gn(h)&&h.isBinary()){var y=d(h.args[0]),N=d(h.args[1]);if(h.op==="+"){if(sr(y)){if(t(y.value))return N;if(sr(N))return new u(n(y.value,N.value))}return sr(N)&&t(N.value)?y:gn(N)&&N.isUnary()&&N.op==="-"?new c("-","subtract",[y,N.args[0]]):new c(h.op,h.fn,N?[y,N]:[y])}else if(h.op==="-"){if(sr(y)&&N){if(sr(N))return new u(i(y.value,N.value));if(t(y.value))return new c("-","unaryMinus",[N])}if(h.fn==="subtract")return sr(N)&&t(N.value)?y:gn(N)&&N.isUnary()&&N.op==="-"?d(new c("+","add",[y,N.args[0]])):new c(h.op,h.fn,[y,N])}else if(h.op==="*"){if(sr(y)){if(t(y.value))return p;if(e(y.value,1))return N;if(sr(N))return new u(o(y.value,N.value))}if(sr(N)){if(t(N.value))return p;if(e(N.value,1))return y;if(gn(y)&&y.isBinary()&&y.op===h.op){var v=y.args[0];if(sr(v)){var w=new u(o(v.value,N.value));return new c(h.op,h.fn,[w,y.args[1]],h.implicit)}}return new c(h.op,h.fn,[N,y],h.implicit)}return new c(h.op,h.fn,[y,N],h.implicit)}else if(h.op==="/"){if(sr(y)){if(t(y.value))return p;if(sr(N)&&(e(N.value,1)||e(N.value,2)||e(N.value,4)))return new u(a(y.value,N.value))}return new c(h.op,h.fn,[y,N])}else if(h.op==="^"){if(sr(N)){if(t(N.value))return m;if(e(N.value,1))return y;if(sr(y))return new u(s(y.value,N.value));if(gn(y)&&y.isBinary()&&y.op==="^"){var S=y.args[1];if(sr(S))return new c(h.op,h.fn,[y.args[0],new u(o(S.value,N.value))])}}return new c(h.op,h.fn,[y,N])}}else if(co(h)){var b=d(h.content);return co(b)||lr(b)||sr(b)?b:new f(b)}else if(Sa(h)){var E=h.args.map(d).map(function(M){return co(M)?M.content:M});return new l(d(h.fn),E)}return h}return d})});var Dxe,Exe,pg,AM=g(()=>{Je();j();NM();dp();Dxe="simplifyConstant",Exe=["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],pg=I(Dxe,Exe,r=>{var{typed:e,config:t,mathWithTransform:n,fraction:i,bignumber:o,ConstantNode:a,OperatorNode:s,FunctionNode:u,SymbolNode:c}=r,{isCommutative:l,isAssociative:f,allChildren:p,createMakeNodeFunction:m}=lg({FunctionNode:u,OperatorNode:s,SymbolNode:c});function d(E,M){var D=b(E,M);return Ot(D)?D:x(D)}function h(E,M,D){try{return N(n[E].apply(null,M),D)}catch{return M=M.map(function(k){return ba(k)?k.valueOf():k}),N(n[E].apply(null,M),D)}}var x=e({Fraction:w,number:function(M){return M<0?v(new a(-M)):new a(M)},BigNumber:function(M){return M<0?v(new a(-M)):new a(M)},Complex:function(M){throw new Error("Cannot convert Complex number to Node")}});function y(E,M){var D=M&&M.exactFractions!==!1;if(D&&isFinite(E)&&i){var A=i(E),k=M&&typeof M.fractionsLimit=="number"?M.fractionsLimit:1/0;if(A.valueOf()===E&&A.n<k&&A.d<k)return A}return E}var N=e({"string, Object":function(M,D){if(t.number==="BigNumber")return o===void 0&&Xc(),o(M);if(t.number==="Fraction")return i===void 0&&Zd(),i(M);var A=parseFloat(M);return y(A,D)},"Fraction, Object":function(M,D){return M},"BigNumber, Object":function(M,D){return M},"number, Object":function(M,D){return y(M,D)},"Complex, Object":function(M,D){return M.im!==0?M:y(M.re,D)}});function v(E){return new s("-","unaryMinus",[E])}function w(E){var M,D=E.s*E.n;return D<0?M=new s("-","unaryMinus",[new a(-D)]):M=new a(D),E.d===1?M:new s("/","divide",[M,new a(E.d)])}function S(E,M,D,A){return M.reduce(function(k,T){if(!Ot(k)&&!Ot(T)){try{return h(E,[k,T],A)}catch{}k=x(k),T=x(T)}else Ot(k)?Ot(T)||(T=x(T)):k=x(k);return D([k,T])})}function b(E,M){switch(E.type){case"SymbolNode":return E;case"ConstantNode":return typeof E.value=="number"||!isNaN(E.value)?N(E.value,M):E;case"FunctionNode":if(n[E.name]&&n[E.name].rawArgs)return E;{var D=["add","multiply"];if(D.indexOf(E.name)===-1){var A=E.args.map(Q=>b(Q,M));if(!A.some(Ot))try{return h(E.name,A,M)}catch{}return A=A.map(function(Q){return Ot(Q)?Q:x(Q)}),new u(E.name,A)}}case"OperatorNode":{var k=E.fn.toString(),T,L,$=m(E);if(gn(E)&&E.isUnary())T=[b(E.args[0],M)],Ot(T[0])?L=$(T):L=h(k,T,M);else if(f(E))if(T=p(E),T=T.map(Q=>b(Q,M)),l(k)){for(var K=[],V=[],z=0;z<T.length;z++)Ot(T[z])?V.push(T[z]):K.push(T[z]);K.length>1?(L=S(k,K,$,M),V.unshift(L),L=S(k,V,$,M)):L=S(k,T,$,M)}else L=S(k,T,$,M);else T=E.args.map(Q=>b(Q,M)),L=S(k,T,$,M);return L}case"ParenthesisNode":return b(E.content,M);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(E.type))}}return d})});var Txe,Cxe,X7,J7=g(()=>{Rs();Je();j();Txe="resolve",Cxe=["parse","FunctionNode","OperatorNode","ParenthesisNode"],X7=I(Txe,Cxe,r=>{var{parse:e,FunctionNode:t,OperatorNode:n,ParenthesisNode:i}=r;function o(a,s){if(!s)return a;if(Wc(s)||(s=Vc(s)),lr(a)){var u=s.get(a.name);if(Ot(u))return o(u,s);if(typeof u=="number")return e(String(u))}else if(gn(a)){var c=a.args.map(function(f){return o(f,s)});return new n(a.op,a.fn,c,a.implicit)}else{if(co(a))return new i(o(a.content,s));if(Sa(a)){var l=a.args.map(function(f){return o(f,s)});return new t(a.name,l)}}return a}return o})});var Ixe,kxe,MM,Y7=g(()=>{Je();j();NM();SM();AM();J7();Ht();Rs();Ixe="simplify",kxe=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],MM=I(Ixe,kxe,r=>{var{config:e,typed:t,parse:n,add:i,subtract:o,multiply:a,divide:s,pow:u,isZero:c,equal:l,fraction:f,bignumber:p,mathWithTransform:m,ConstantNode:d,FunctionNode:h,OperatorNode:x,ParenthesisNode:y,SymbolNode:N}=r,v=pg({typed:t,config:e,mathWithTransform:m,fraction:f,bignumber:p,ConstantNode:d,OperatorNode:x,FunctionNode:h,SymbolNode:N}),w=fg({equal:l,isZero:c,add:i,subtract:o,multiply:a,divide:s,pow:u,ConstantNode:d,OperatorNode:x,FunctionNode:h,ParenthesisNode:y}),S=X7({parse:n,FunctionNode:h,OperatorNode:x,ParenthesisNode:y}),{isCommutative:b,isAssociative:E,flatten:M,unflattenr:D,unflattenl:A,createMakeNodeFunction:k}=lg({FunctionNode:h,OperatorNode:x,SymbolNode:N}),T=t("simplify",{string:function(ne){return this(n(ne),this.rules,Zi(),{})},"string, Map | Object":function(ne,ge){return this(n(ne),this.rules,ge,{})},"string, Map | Object, Object":function(ne,ge,xe){return this(n(ne),this.rules,ge,xe)},"string, Array":function(ne,ge){return this(n(ne),ge,Zi(),{})},"string, Array, Map | Object":function(ne,ge,xe){return this(n(ne),ge,xe,{})},"string, Array, Map | Object, Object":function(ne,ge,xe,Se){return this(n(ne),ge,xe,Se)},"Node, Map | Object":function(ne,ge){return this(ne,this.rules,ge,{})},"Node, Map | Object, Object":function(ne,ge,xe){return this(ne,this.rules,ge,xe)},Node:function(ne){return this(ne,this.rules,Zi(),{})},"Node, Array":function(ne,ge){return this(ne,ge,Zi(),{})},"Node, Array, Map | Object":function(ne,ge,xe){return this(ne,ge,xe,{})},"Node, Array, Object, Object":function(ne,ge,xe,Se){return this(ne,ge,Vc(xe),Se)},"Node, Array, Map, Object":function(ne,ge,xe,Se){ge=K(ge);var we=S(ne,xe);we=L(we);for(var et={},Ye=we.toString({parenthesis:"all"});!et[Ye];){et[Ye]=!0,V=0;for(var Ue=0;Ue<ge.length;Ue++)typeof ge[Ue]=="function"?we=ge[Ue](we,Se):(M(we),we=Q(we,ge[Ue])),A(we);Ye=we.toString({parenthesis:"all"})}return we}});T.simplifyCore=w,T.resolve=S;function L(re){return re.transform(function(ne,ge,xe){return co(ne)?L(ne.content):ne})}var $={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};T.rules=[w,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},v,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"},{l:"n1/(n2/n3)",r:"(n1*n3)/n2"}];function K(re){for(var ne=[],ge=0;ge<re.length;ge++){var xe=re[ge],Se=void 0,we=typeof xe;switch(we){case"string":{var et=xe.split("->");if(et.length===2)xe={l:et[0],r:et[1]};else throw SyntaxError("Could not parse rule: "+xe)}case"object":if(Se={l:L(n(xe.l)),r:L(n(xe.r))},xe.context&&(Se.evaluate=xe.context),xe.evaluate&&(Se.evaluate=n(xe.evaluate)),E(Se.l)){var Ye=k(Se.l),Ue=z();Se.expanded={},Se.expanded.l=Ye([Se.l.clone(),Ue]),M(Se.expanded.l),D(Se.expanded.l),Se.expanded.r=Ye([Se.r,Ue])}break;case"function":Se=xe;break;default:throw TypeError("Unsupported type of rule: "+we)}ne.push(Se)}return ne}var V=0;function z(){return new N("_p"+V++)}var Q=t("applyRule",{"Node, Object":function(ne,ge){var xe=ne;if(xe instanceof x||xe instanceof h){if(xe.args)for(var Se=0;Se<xe.args.length;Se++)xe.args[Se]=Q(xe.args[Se],ge)}else xe instanceof y&&xe.content&&(xe.content=Q(xe.content,ge));var we=ge.r,et=Y(ge.l,xe)[0];if(!et&&ge.expanded&&(we=ge.expanded.r,et=Y(ge.expanded.l,xe)[0]),et){var Ye=xe.implicit;xe=we.clone(),Ye&&"implicit"in we&&(xe.implicit=!0),xe=xe.transform(function(Ue){return Ue.isSymbolNode&&ot(et.placeholders,Ue.name)?et.placeholders[Ue.name].clone():Ue})}return xe}});function _(re,ne){var ge=[],xe,Se,we=k(re);if(b(re,ne))for(var et=0;et<re.args.length;et++)Se=re.args.slice(0),Se.splice(et,1),xe=Se.length===1?Se[0]:we(Se),ge.push(we([re.args[et],xe]));else Se=re.args.slice(1),xe=Se.length===1?Se[0]:we(Se),ge.push(we([re.args[0],xe]));return ge}function te(re,ne){var ge={placeholders:{}};if(!re.placeholders&&!ne.placeholders)return ge;if(re.placeholders){if(!ne.placeholders)return re}else return ne;for(var xe in re.placeholders)if(ot(re.placeholders,xe)&&(ge.placeholders[xe]=re.placeholders[xe],ot(ne.placeholders,xe)&&!ve(re.placeholders[xe],ne.placeholders[xe])))return null;for(var Se in ne.placeholders)ot(ne.placeholders,Se)&&(ge.placeholders[Se]=ne.placeholders[Se]);return ge}function he(re,ne){var ge=[];if(re.length===0||ne.length===0)return ge;for(var xe,Se=0;Se<re.length;Se++)for(var we=0;we<ne.length;we++)xe=te(re[Se],ne[we]),xe&&ge.push(xe);return ge}function Ne(re){if(re.length===0)return re;for(var ne=re.reduce(he),ge=[],xe={},Se=0;Se<ne.length;Se++){var we=JSON.stringify(ne[Se]);xe[we]||(xe[we]=!0,ge.push(ne[Se]))}return ge}function Y(re,ne,ge){var xe=[{placeholders:{}}];if(re instanceof x&&ne instanceof x||re instanceof h&&ne instanceof h){if(re instanceof x){if(re.op!==ne.op||re.fn!==ne.fn)return[]}else if(re instanceof h&&re.name!==ne.name)return[];if(ne.args.length===1&&re.args.length===1||!E(ne)&&ne.args.length===re.args.length||ge){for(var Se=[],we=0;we<re.args.length;we++){var et=Y(re.args[we],ne.args[we]);if(et.length===0)return[];Se.push(et)}xe=Ne(Se)}else if(ne.args.length>=2&&re.args.length===2){for(var Ye=_(ne,re.context),Ue=[],st=0;st<Ye.length;st++){var Z=Y(re,Ye[st],!0);Ue=Ue.concat(Z)}return Ue}else{if(re.args.length>2)throw Error("Unexpected non-binary associative function: "+re.toString());return[]}}else if(re instanceof N){if(re.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if($[re.name]){if(re.name!==ne.name)return[]}else if(re.name[0]==="n"||re.name.substring(0,2)==="_p")xe[0].placeholders[re.name]=ne;else if(re.name[0]==="v")if(!sr(ne))xe[0].placeholders[re.name]=ne;else return[];else if(re.name[0]==="c")if(ne instanceof d)xe[0].placeholders[re.name]=ne;else return[];else throw new Error("Invalid symbol in rule: "+re.name)}else if(re instanceof d){if(!l(re.value,ne.value))return[]}else return[];return xe}function ve(re,ne){if(re instanceof d&&ne instanceof d){if(!l(re.value,ne.value))return!1}else if(re instanceof N&&ne instanceof N){if(re.name!==ne.name)return!1}else if(re instanceof x&&ne instanceof x||re instanceof h&&ne instanceof h){if(re instanceof x){if(re.op!==ne.op||re.fn!==ne.fn)return!1}else if(re instanceof h&&re.name!==ne.name)return!1;if(re.args.length!==ne.args.length)return!1;for(var ge=0;ge<re.args.length;ge++)if(!ve(re.args[ge],ne.args[ge]))return!1}else return!1;return!0}return T})});var Oxe,_xe,DM,Q7=g(()=>{Je();j();Oxe="derivative",_xe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],DM=I(Oxe,_xe,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:o,isZero:a,numeric:s,ConstantNode:u,FunctionNode:c,OperatorNode:l,ParenthesisNode:f,SymbolNode:p}=r,m=e("derivative",{"Node, SymbolNode, Object":function(w,S,b){var E={};h(E,w,S.name);var M=x(w,E);return b.simplify?i(M):M},"Node, SymbolNode":function(w,S){return this(w,S,{simplify:!0})},"string, SymbolNode":function(w,S){return this(n(w),S)},"string, SymbolNode, Object":function(w,S,b){return this(n(w),S,b)},"string, string":function(w,S){return this(n(w),n(S))},"string, string, Object":function(w,S,b){return this(n(w),n(S),b)},"Node, string":function(w,S){return this(w,n(S))},"Node, string, Object":function(w,S,b){return this(w,n(S),b)}});m._simplify=!0,m.toTex=function(v){return d.apply(null,v.args)};var d=e("_derivTex",{"Node, SymbolNode":function(w,S){return sr(w)&&Gt(w.value)==="string"?d(n(w.value).toString(),S.toString(),1):d(w.toString(),S.toString(),1)},"Node, ConstantNode":function(w,S){if(Gt(S.value)==="string")return d(w,n(S.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(w,S,b){return d(w.toString(),S.name,b.value)},"string, string, number":function(w,S,b){var E;return b===1?E="{d\\over d"+S+"}":E="{d^{"+b+"}\\over d"+S+"^{"+b+"}}",E+"\\left[".concat(w,"\\right]")}}),h=e("constTag",{"Object, ConstantNode, string":function(w,S){return w[S]=!0,!0},"Object, SymbolNode, string":function(w,S,b){return S.name!==b?(w[S]=!0,!0):!1},"Object, ParenthesisNode, string":function(w,S,b){return h(w,S.content,b)},"Object, FunctionAssignmentNode, string":function(w,S,b){return S.params.indexOf(b)===-1?(w[S]=!0,!0):h(w,S.expr,b)},"Object, FunctionNode | OperatorNode, string":function(w,S,b){if(S.args.length>0){for(var E=h(w,S.args[0],b),M=1;M<S.args.length;++M)E=h(w,S.args[M],b)&&E;if(E)return w[S]=!0,!0}return!1}}),x=e("_derivative",{"ConstantNode, Object":function(w){return N(0)},"SymbolNode, Object":function(w,S){return S[w]!==void 0?N(0):N(1)},"ParenthesisNode, Object":function(w,S){return new f(x(w.content,S))},"FunctionAssignmentNode, Object":function(w,S){return S[w]!==void 0?N(0):x(w.expr,S)},"FunctionNode, Object":function(w,S){if(w.args.length!==1&&y(w),S[w]!==void 0)return N(0);var b=w.args[0],E,M=!1,D=!1,A;switch(w.name){case"cbrt":M=!0,A=new l("*","multiply",[N(3),new l("^","pow",[b,new l("/","divide",[N(2),N(3)])])]);break;case"sqrt":case"nthRoot":if(w.args.length===1)M=!0,A=new l("*","multiply",[N(2),new c("sqrt",[b])]);else if(w.args.length===2)return E=new l("/","divide",[N(1),w.args[1]]),S[E]=S[w.args[1]],x(new l("^","pow",[b,E]),S);break;case"log10":E=N(10);case"log":if(!E&&w.args.length===1)A=b.clone(),M=!0;else if(w.args.length===1&&E||w.args.length===2&&S[w.args[1]]!==void 0)A=new l("*","multiply",[b.clone(),new c("log",[E||w.args[1]])]),M=!0;else if(w.args.length===2)return x(new l("/","divide",[new c("log",[b]),new c("log",[w.args[1]])]),S);break;case"pow":return S[E]=S[w.args[1]],x(new l("^","pow",[b,w.args[1]]),S);case"exp":A=new c("exp",[b.clone()]);break;case"sin":A=new c("cos",[b.clone()]);break;case"cos":A=new l("-","unaryMinus",[new c("sin",[b.clone()])]);break;case"tan":A=new l("^","pow",[new c("sec",[b.clone()]),N(2)]);break;case"sec":A=new l("*","multiply",[w,new c("tan",[b.clone()])]);break;case"csc":D=!0,A=new l("*","multiply",[w,new c("cot",[b.clone()])]);break;case"cot":D=!0,A=new l("^","pow",[new c("csc",[b.clone()]),N(2)]);break;case"asin":M=!0,A=new c("sqrt",[new l("-","subtract",[N(1),new l("^","pow",[b.clone(),N(2)])])]);break;case"acos":M=!0,D=!0,A=new c("sqrt",[new l("-","subtract",[N(1),new l("^","pow",[b.clone(),N(2)])])]);break;case"atan":M=!0,A=new l("+","add",[new l("^","pow",[b.clone(),N(2)]),N(1)]);break;case"asec":M=!0,A=new l("*","multiply",[new c("abs",[b.clone()]),new c("sqrt",[new l("-","subtract",[new l("^","pow",[b.clone(),N(2)]),N(1)])])]);break;case"acsc":M=!0,D=!0,A=new l("*","multiply",[new c("abs",[b.clone()]),new c("sqrt",[new l("-","subtract",[new l("^","pow",[b.clone(),N(2)]),N(1)])])]);break;case"acot":M=!0,D=!0,A=new l("+","add",[new l("^","pow",[b.clone(),N(2)]),N(1)]);break;case"sinh":A=new c("cosh",[b.clone()]);break;case"cosh":A=new c("sinh",[b.clone()]);break;case"tanh":A=new l("^","pow",[new c("sech",[b.clone()]),N(2)]);break;case"sech":D=!0,A=new l("*","multiply",[w,new c("tanh",[b.clone()])]);break;case"csch":D=!0,A=new l("*","multiply",[w,new c("coth",[b.clone()])]);break;case"coth":D=!0,A=new l("^","pow",[new c("csch",[b.clone()]),N(2)]);break;case"asinh":M=!0,A=new c("sqrt",[new l("+","add",[new l("^","pow",[b.clone(),N(2)]),N(1)])]);break;case"acosh":M=!0,A=new c("sqrt",[new l("-","subtract",[new l("^","pow",[b.clone(),N(2)]),N(1)])]);break;case"atanh":M=!0,A=new l("-","subtract",[N(1),new l("^","pow",[b.clone(),N(2)])]);break;case"asech":M=!0,D=!0,A=new l("*","multiply",[b.clone(),new c("sqrt",[new l("-","subtract",[N(1),new l("^","pow",[b.clone(),N(2)])])])]);break;case"acsch":M=!0,D=!0,A=new l("*","multiply",[new c("abs",[b.clone()]),new c("sqrt",[new l("+","add",[new l("^","pow",[b.clone(),N(2)]),N(1)])])]);break;case"acoth":M=!0,D=!0,A=new l("-","subtract",[N(1),new l("^","pow",[b.clone(),N(2)])]);break;case"abs":A=new l("/","divide",[new c(new p("abs"),[b.clone()]),b.clone()]);break;case"gamma":default:throw new Error('Function "'+w.name+'" is not supported by derivative, or a wrong number of arguments is passed')}var k,T;M?(k="/",T="divide"):(k="*",T="multiply");var L=x(b,S);return D&&(L=new l("-","unaryMinus",[L])),new l(k,T,[L,A])},"OperatorNode, Object":function(w,S){if(S[w]!==void 0)return N(0);if(w.op==="+")return new l(w.op,w.fn,w.args.map(function(K){return x(K,S)}));if(w.op==="-"){if(w.isUnary())return new l(w.op,w.fn,[x(w.args[0],S)]);if(w.isBinary())return new l(w.op,w.fn,[x(w.args[0],S),x(w.args[1],S)])}if(w.op==="*"){var b=w.args.filter(function(K){return S[K]!==void 0});if(b.length>0){var E=w.args.filter(function(K){return S[K]===void 0}),M=E.length===1?E[0]:new l("*","multiply",E),D=b.concat(x(M,S));return new l("*","multiply",D)}return new l("+","add",w.args.map(function(K){return new l("*","multiply",w.args.map(function(V){return V===K?x(V,S):V.clone()}))}))}if(w.op==="/"&&w.isBinary()){var A=w.args[0],k=w.args[1];return S[k]!==void 0?new l("/","divide",[x(A,S),k]):S[A]!==void 0?new l("*","multiply",[new l("-","unaryMinus",[A]),new l("/","divide",[x(k,S),new l("^","pow",[k.clone(),N(2)])])]):new l("/","divide",[new l("-","subtract",[new l("*","multiply",[x(A,S),k.clone()]),new l("*","multiply",[A.clone(),x(k,S)])]),new l("^","pow",[k.clone(),N(2)])])}if(w.op==="^"&&w.isBinary()){var T=w.args[0],L=w.args[1];if(S[T]!==void 0)return sr(T)&&(a(T.value)||o(T.value,1))?N(0):new l("*","multiply",[w,new l("*","multiply",[new c("log",[T.clone()]),x(L.clone(),S)])]);if(S[L]!==void 0){if(sr(L)){if(a(L.value))return N(0);if(o(L.value,1))return x(T,S)}var $=new l("^","pow",[T.clone(),new l("-","subtract",[L,N(1)])]);return new l("*","multiply",[L.clone(),new l("*","multiply",[x(T,S),$])])}return new l("*","multiply",[new l("^","pow",[T.clone(),L.clone()]),new l("+","add",[new l("*","multiply",[x(T,S),new l("/","divide",[L.clone(),T.clone()])]),new l("*","multiply",[x(L,S),new c("log",[T.clone()])])])])}throw new Error('Operator "'+w.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function y(v){if(!((v.name==="log"||v.name==="nthRoot"||v.name==="pow")&&v.args.length===2)){for(var w=0;w<v.args.length;++w)v.args[w]=N(0);throw v.compile().evaluate(),new Error("Expected TypeError, but none found")}}function N(v,w){return new u(s(v,w||t.number))}return m})});var eV,Fxe,EM,tV=g(()=>{Rt();j();AM();SM();eV="rationalize",Fxe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],EM=I(eV,Fxe,r=>{var{config:e,typed:t,equal:n,isZero:i,add:o,subtract:a,multiply:s,divide:u,pow:c,parse:l,simplify:f,fraction:p,bignumber:m,mathWithTransform:d,ConstantNode:h,OperatorNode:x,FunctionNode:y,SymbolNode:N,ParenthesisNode:v}=r,w=pg({typed:t,config:e,mathWithTransform:d,fraction:p,bignumber:m,ConstantNode:h,OperatorNode:x,FunctionNode:y,SymbolNode:N}),S=fg({equal:n,isZero:i,add:o,subtract:a,multiply:s,divide:u,pow:c,ConstantNode:h,OperatorNode:x,FunctionNode:y,ParenthesisNode:v});return t(eV,{string:function(k){return this(l(k),{},!1)},"string, boolean":function(k,T){return this(l(k),{},T)},"string, Object":function(k,T){return this(l(k),T,!1)},"string, Object, boolean":function(k,T,L){return this(l(k),T,L)},Node:function(k){return this(k,{},!1)},"Node, boolean":function(k,T){return this(k,{},T)},"Node, Object":function(k,T){return this(k,T,!1)},"Node, Object, boolean":function(k,T,L){var $=E(),K=b(k,T,!0,$.firstRules),V=K.variables.length;if(k=K.expression,V>=1){k=M(k);var z,Q,_=!0,te=!1;k=f(k,$.firstRules,{},{exactFractions:!1});for(var he;Q=_?$.distrDivRules:$.sucDivRules,k=f(k,Q),_=!_,he=k.toString(),he!==z;)te=!0,z=he;te&&(k=f(k,$.firstRulesAgain,{},{exactFractions:!1})),k=f(k,$.finalRules,{},{exactFractions:!1})}var Ne=[],Y={};return k.type==="OperatorNode"&&k.isBinary()&&k.op==="/"?(V===1&&(k.args[0]=D(k.args[0],Ne),k.args[1]=D(k.args[1])),L&&(Y.numerator=k.args[0],Y.denominator=k.args[1])):(V===1&&(k=D(k,Ne)),L&&(Y.numerator=k,Y.denominator=null)),L?(Y.coefficients=Ne,Y.variables=K.variables,Y.expression=k,Y):k}});function b(A,k,T,L){var $=[],K=f(A,L,k,{exactFractions:!1});T=!!T;var V="+-*"+(T?"/":"");Q(K);var z={};return z.expression=K,z.variables=$,z;function Q(_){var te=_.type;if(te==="FunctionNode")throw new Error("There is an unsolved function call");if(te==="OperatorNode")if(_.op==="^"){if(_.args[1].type!=="ConstantNode"||!Ze(parseFloat(_.args[1].value)))throw new Error("There is a non-integer exponent");Q(_.args[0])}else{if(V.indexOf(_.op)===-1)throw new Error("Operator "+_.op+" invalid in polynomial expression");for(var he=0;he<_.args.length;he++)Q(_.args[he])}else if(te==="SymbolNode"){var Ne=_.name,Y=$.indexOf(Ne);Y===-1&&$.push(Ne)}else if(te==="ParenthesisNode")Q(_.content);else if(te!=="ConstantNode")throw new Error("type "+te+" is not allowed in polynomial expression")}}function E(){var A=[S,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},w,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],k=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],T=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],L=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],$={};return $.firstRules=A.concat(k,L),$.distrDivRules=T,$.sucDivRules=L,$.firstRulesAgain=A.concat(k),$.finalRules=[S,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},w,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],$}function M(A,k,T){var L=A.type,$=arguments.length>1;if(L==="OperatorNode"&&A.isBinary()){var K=!1,V;if(A.op==="^"&&(A.args[0].type==="ParenthesisNode"||A.args[0].type==="OperatorNode")&&A.args[1].type==="ConstantNode"&&(V=parseFloat(A.args[1].value),K=V>=2&&Ze(V)),K){if(V>2){var z=A.args[0],Q=new x("^","pow",[A.args[0].cloneDeep(),new h(V-1)]);A=new x("*","multiply",[z,Q])}else A=new x("*","multiply",[A.args[0],A.args[0].cloneDeep()]);$&&(T==="content"?k.content=A:k.args[T]=A)}}if(L==="ParenthesisNode")M(A.content,A,"content");else if(L!=="ConstantNode"&&L!=="SymbolNode")for(var _=0;_<A.args.length;_++)M(A.args[_],A,_);if(!$)return A}function D(A,k){k===void 0&&(k=[]),k[0]=0;var T={};T.cte=1,T.oper="+",T.fire="";var L=0,$="";Ne(A,null,T),L=k.length-1;for(var K=!0,V,z=L;z>=0;z--)if(k[z]!==0){var Q=new h(K?k[z]:Math.abs(k[z])),_=k[z]<0?"-":"+";if(z>0){var te=new N($);if(z>1){var he=new h(z);te=new x("^","pow",[te,he])}k[z]===-1&&K?Q=new x("-","unaryMinus",[te]):Math.abs(k[z])===1?Q=te:Q=new x("*","multiply",[Q,te])}K?V=Q:_==="+"?V=new x("+","add",[V,Q]):V=new x("-","subtract",[V,Q]),K=!1}if(K)return new h(0);return V;function Ne(Y,ve,re){var ne=Y.type;if(ne==="FunctionNode")throw new Error("There is an unsolved function call");if(ne==="OperatorNode"){if("+-*^".indexOf(Y.op)===-1)throw new Error("Operator "+Y.op+" invalid");if(ve!==null){if((Y.fn==="unaryMinus"||Y.fn==="pow")&&ve.fn!=="add"&&ve.fn!=="subtract"&&ve.fn!=="multiply")throw new Error("Invalid "+Y.op+" placing");if((Y.fn==="subtract"||Y.fn==="add"||Y.fn==="multiply")&&ve.fn!=="add"&&ve.fn!=="subtract")throw new Error("Invalid "+Y.op+" placing");if((Y.fn==="subtract"||Y.fn==="add"||Y.fn==="unaryMinus")&&re.noFil!==0)throw new Error("Invalid "+Y.op+" placing")}(Y.op==="^"||Y.op==="*")&&(re.fire=Y.op);for(var ge=0;ge<Y.args.length;ge++)Y.fn==="unaryMinus"&&(re.oper="-"),(Y.op==="+"||Y.fn==="subtract")&&(re.fire="",re.cte=1,re.oper=ge===0?"+":Y.op),re.noFil=ge,Ne(Y.args[ge],Y,re)}else if(ne==="SymbolNode"){if(Y.name!==$&&$!=="")throw new Error("There is more than one variable");if($=Y.name,ve===null){k[1]=1;return}if(ve.op==="^"&&re.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ve.op==="*"&&re.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(re.fire===""||re.fire==="*")&&(L<1&&(k[1]=0),k[1]+=re.cte*(re.oper==="+"?1:-1),L=Math.max(1,L))}else if(ne==="ConstantNode"){var xe=parseFloat(Y.value);if(ve===null){k[0]=xe;return}if(ve.op==="^"){if(re.noFil!==1)throw new Error("Constant cannot be powered");if(!Ze(xe)||xe<=0)throw new Error("Non-integer exponent is not allowed");for(var Se=L+1;Se<xe;Se++)k[Se]=0;xe>L&&(k[xe]=0),k[xe]+=re.cte*(re.oper==="+"?1:-1),L=Math.max(xe,L);return}re.cte=xe,re.fire===""&&(k[0]+=re.cte*(re.oper==="+"?1:-1))}else throw new Error("Type "+ne+" is not allowed")}}})});var Bxe,zxe,TM,rV=g(()=>{j();Bxe="reviver",zxe=["classes"],TM=I(Bxe,zxe,r=>{var{classes:e}=r;return function(n,i){var o=e[i&&i.mathjs];return o&&typeof o.fromJSON=="function"?o.fromJSON(i):i}})});var Rxe,Lxe,CM,nV=g(()=>{j();Rxe="replacer",Lxe=[],CM=I(Rxe,Lxe,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:t})});var iV,oV=g(()=>{iV="10.0.1"});function Xi(r,e,t){return I(r,e,t,{recreateOnConfigChange:!0})}var IM,kM,OM,_M,FM,BM,zM,RM,LM,qM,PM,$M,UM,GM,VM,WM,HM,aV=g(()=>{j();oV();rS();vt();IM=I("true",[],()=>!0),kM=I("false",[],()=>!1),OM=I("null",[],()=>null),_M=Xi("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),FM=Xi("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),BM=Xi("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Np(t):FO}),zM=Xi("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?NR(t):BO}),RM=Xi("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?bR(t):zO}),LM=Xi("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?wR(t):RO}),qM=Xi("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),PM=Xi("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),$M=Xi("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),UM=Xi("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),GM=Xi("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),VM=Xi("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),WM=Xi("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),HM=I("version",[],()=>iV)});function zt(r,e,t){var n=["config","Unit","BigNumber"];return I(r,n,i=>{var{config:o,Unit:a,BigNumber:s}=i,u=o.number==="BigNumber"?new s(e):parseFloat(e),c=new a(u,t);return c.fixPrefix=!0,c})}function mg(r,e){var t=["config","BigNumber"];return I(r,t,n=>{var{config:i,BigNumber:o}=n;return i.number==="BigNumber"?new o(e):e})}var KM,jM,ZM,XM,JM,YM,QM,e2,t2,r2,n2,i2,o2,a2,s2,u2,c2,l2,f2,p2,m2,h2,d2,g2,v2,x2,y2,b2,w2,N2,S2,A2,M2,D2,E2,T2,C2,I2,k2,O2,_2,F2,B2,z2,R2,L2,q2,P2,$2,U2,sV=g(()=>{j();KM=zt("speedOfLight","299792458","m s^-1"),jM=zt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),ZM=zt("planckConstant","6.62607015e-34","J s"),XM=zt("reducedPlanckConstant","1.0545718176461565e-34","J s"),JM=zt("magneticConstant","1.25663706212e-6","N A^-2"),YM=zt("electricConstant","8.8541878128e-12","F m^-1"),QM=zt("vacuumImpedance","376.730313667","ohm"),e2=zt("coulomb","8.987551792261171e9","N m^2 C^-2"),t2=zt("elementaryCharge","1.602176634e-19","C"),r2=zt("bohrMagneton","9.2740100783e-24","J T^-1"),n2=zt("conductanceQuantum","7.748091729863649e-5","S"),i2=zt("inverseConductanceQuantum","12906.403729652257","ohm"),o2=zt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),a2=zt("nuclearMagneton","5.0507837461e-27","J T^-1"),s2=zt("klitzing","25812.807459304513","ohm"),u2=zt("bohrRadius","5.29177210903e-11","m"),c2=zt("classicalElectronRadius","2.8179403262e-15","m"),l2=zt("electronMass","9.1093837015e-31","kg"),f2=zt("fermiCoupling","1.1663787e-5","GeV^-2"),p2=mg("fineStructure",.0072973525693),m2=zt("hartreeEnergy","4.3597447222071e-18","J"),h2=zt("protonMass","1.67262192369e-27","kg"),d2=zt("deuteronMass","3.3435830926e-27","kg"),g2=zt("neutronMass","1.6749271613e-27","kg"),v2=zt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),x2=zt("rydberg","10973731.568160","m^-1"),y2=zt("thomsonCrossSection","6.6524587321e-29","m^2"),b2=mg("weakMixingAngle",.2229),w2=mg("efimovFactor",22.7),N2=zt("atomicMass","1.66053906660e-27","kg"),S2=zt("avogadro","6.02214076e23","mol^-1"),A2=zt("boltzmann","1.380649e-23","J K^-1"),M2=zt("faraday","96485.33212331001","C mol^-1"),D2=zt("firstRadiation","3.7417718521927573e-16","W m^2"),E2=zt("loschmidt","2.686780111798444e25","m^-3"),T2=zt("gasConstant","8.31446261815324","J K^-1 mol^-1"),C2=zt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),I2=zt("molarVolume","0.022413969545014137","m^3 mol^-1"),k2=mg("sackurTetrode",-1.16487052358),O2=zt("secondRadiation","0.014387768775039337","m K"),_2=zt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),F2=zt("wienDisplacement","2.897771955e-3","m K"),B2=zt("molarMass","0.99999999965e-3","kg mol^-1"),z2=zt("molarMassC12","11.9999999958e-3","kg mol^-1"),R2=zt("gravity","9.80665","m s^-2"),L2=zt("planckLength","1.616255e-35","m"),q2=zt("planckMass","2.176435e-8","kg"),P2=zt("planckTime","5.391245e-44","s"),$2=zt("planckCharge","1.87554603778e-18","C"),U2=zt("planckTemperature","1.416785e+32","K")});var qxe,Pxe,G2,uV=g(()=>{Ei();j();ew();Je();qxe="apply",Pxe=["typed","isInteger"],G2=I(qxe,Pxe,r=>{var{typed:e,isInteger:t}=r,n=cp({typed:e,isInteger:t});return e("apply",{"...any":function(o){var a=o[1];kt(a)?o[1]=a-1:lt(a)&&(o[1]=a.minus(1));try{return n.apply(null,o)}catch(s){throw Cr(s)}}})},{isTransformFunction:!0})});var $xe,Uxe,V2,cV=g(()=>{Ei();j();Rw();Je();$xe="column",Uxe=["typed","Index","matrix","range"],V2=I($xe,Uxe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,o=mp({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(s){var u=s.length-1,c=s[u];kt(c)&&(s[u]=c-1);try{return o.apply(null,s)}catch(l){throw Cr(l)}}})},{isTransformFunction:!0})});function nl(r,e,t){var n=r.filter(function(s){return lr(s)&&!(s.name in e)&&!t.has(s.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,o=rl(t),a=r.compile();return function(u){return o.set(i,u),a.evaluate(o)}}var hg=g(()=>{Je();dA()});function lV(r,e){var t=po(e);return Od(r,function(n,i,o){return t===1?e(n):t===2?e(n,[i+1]):e(n,[i+1],o)})}var Gxe,Vxe,W2,fV=g(()=>{Je();Nt();is();hg();j();Gxe="filter",Vxe=["typed"],W2=I(Gxe,Vxe,r=>{var{typed:e}=r;function t(i,o,a){var s,u;return i[0]&&(s=i[0].compile().evaluate(a)),i[1]&&(lr(i[1])||Na(i[1])?u=i[1].compile().evaluate(a):u=nl(i[1],o,a)),n(s,u)}t.rawArgs=!0;var n=e("filter",{"Array, function":lV,"Matrix, function":function(o,a){return o.create(lV(o.toArray(),a))},"Array, RegExp":Uc,"Matrix, RegExp":function(o,a){return o.create(Uc(o.toArray(),a))}});return t},{isTransformFunction:!0})});var Wxe,Hxe,H2,pV=g(()=>{Je();is();Nt();j();hg();Wxe="forEach",Hxe=["typed"],H2=I(Wxe,Hxe,r=>{var{typed:e}=r;function t(i,o,a){var s,u;return i[0]&&(s=i[0].compile().evaluate(a)),i[1]&&(lr(i[1])||Na(i[1])?u=i[1].compile().evaluate(a):u=nl(i[1],o,a)),n(s,u)}t.rawArgs=!0;var n=e("forEach",{"Array | Matrix, function":function(o,a){var s=po(a),u=function c(l,f){Array.isArray(l)?Bs(l,function(p,m){c(p,f.concat(m+1))}):s===1?a(l):s===2?a(l,f):a(l,f,o)};u(o.valueOf(),[])}});return t},{isTransformFunction:!0})});var Kxe,jxe,K2,mV=g(()=>{Je();j();Kxe="index",jxe=["Index"],K2=I(Kxe,jxe,r=>{var{Index:e}=r;return function(){for(var n=[],i=0,o=arguments.length;i<o;i++){var a=arguments[i];if(yu(a))a.start--,a.end-=a.step>0?0:2;else if(a&&a.isSet===!0)a=a.map(function(u){return u-1});else if(Xt(a)||ut(a))a=a.map(function(u){return u-1});else if(kt(a))a--;else if(lt(a))a=a.toNumber()-1;else if(typeof a!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");n[i]=a}var s=new e;return e.apply(s,n),s}},{isTransformFunction:!0})});function hV(r,e,t){var n=po(e);function i(o,a){return Array.isArray(o)?Fi(o,function(s,u){return i(s,a.concat(u+1))}):n===1?e(o):n===2?e(o,a):e(o,a,t)}return i(r,[])}var Zxe,Xxe,j2,dV=g(()=>{Je();is();Nt();j();hg();Zxe="map",Xxe=["typed"],j2=I(Zxe,Xxe,r=>{var{typed:e}=r;function t(i,o,a){var s,u;return i[0]&&(s=i[0].compile().evaluate(a)),i[1]&&(lr(i[1])||Na(i[1])?u=i[1].compile().evaluate(a):u=nl(i[1],o,a)),n(s,u)}t.rawArgs=!0;var n=e("map",{"Array, function":function(o,a){return hV(o,a,o)},"Matrix, function":function(o,a){return o.create(hV(o.valueOf(),a,o))}});return t},{isTransformFunction:!0})});function Ri(r){if(r.length===2&&wa(r[0])){r=r.slice();var e=r[1];kt(e)?r[1]=e-1:lt(e)&&(r[1]=e.minus(1))}return r}var Us=g(()=>{Je()});var Jxe,Yxe,Z2,gV=g(()=>{j();Ei();XN();Us();Jxe="max",Yxe=["typed","config","numeric","larger"],Z2=I(Jxe,Yxe,r=>{var{typed:e,config:t,numeric:n,larger:i}=r,o=bp({typed:e,config:t,numeric:n,larger:i});return e("max",{"...any":function(s){s=Ri(s);try{return o.apply(null,s)}catch(u){throw Cr(u)}}})},{isTransformFunction:!0})});var Qxe,eye,X2,vV=g(()=>{j();Ei();HA();Us();Qxe="mean",eye=["typed","add","divide"],X2=I(Qxe,eye,r=>{var{typed:e,add:t,divide:n}=r,i=Mp({typed:e,add:t,divide:n});return e("mean",{"...any":function(a){a=Ri(a);try{return i.apply(null,a)}catch(s){throw Cr(s)}}})},{isTransformFunction:!0})});var tye,rye,J2,xV=g(()=>{j();Ei();JN();Us();tye="min",rye=["typed","config","numeric","smaller"],J2=I(tye,rye,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r,o=wp({typed:e,config:t,numeric:n,smaller:i});return e("min",{"...any":function(s){s=Ri(s);try{return o.apply(null,s)}catch(u){throw Cr(u)}}})},{isTransformFunction:!0})});var nye,iye,Y2,yV=g(()=>{j();Xw();nye="range",iye=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],Y2=I(nye,iye,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:u}=r,c=gp({typed:e,config:t,matrix:n,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:u});return e("range",{"...any":function(f){var p=f.length-1,m=f[p];return typeof m!="boolean"&&f.push(!0),c.apply(null,f)}})},{isTransformFunction:!0})});var oye,aye,Q2,bV=g(()=>{j();tN();Ei();Je();oye="row",aye=["typed","Index","matrix","range"],Q2=I(oye,aye,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,o=vp({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(s){var u=s.length-1,c=s[u];kt(c)&&(s[u]=c-1);try{return o.apply(null,s)}catch(l){throw Cr(l)}}})},{isTransformFunction:!0})});var sye,uye,eD,wV=g(()=>{j();Ei();iN();sye="subset",uye=["typed","matrix"],eD=I(sye,uye,r=>{var{typed:e,matrix:t}=r,n=xp({typed:e,matrix:t});return e("subset",{"...any":function(o){try{return n.apply(null,o)}catch(a){throw Cr(a)}}})},{isTransformFunction:!0})});var cye,lye,tD,NV=g(()=>{Je();Ei();j();zw();cye="concat",lye=["typed","matrix","isInteger"],tD=I(cye,lye,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=pp({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(a){var s=a.length-1,u=a[s];kt(u)?a[s]=u-1:lt(u)&&(a[s]=u.minus(1));try{return i.apply(null,a)}catch(c){throw Cr(c)}}})},{isTransformFunction:!0})});var SV,fye,rD,AV=g(()=>{j();Ei();jw();Us();SV="diff",fye=["typed","matrix","subtract","number","bignumber"],rD=I(SV,fye,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:o}=r,a=hp({typed:e,matrix:t,subtract:n,number:i,bignumber:o});return e(SV,{"...any":function(u){u=Ri(u);try{return a.apply(null,u)}catch(c){throw Cr(c)}}})},{isTransformFunction:!0})});var pye,mye,nD,MV=g(()=>{j();YA();Ei();Us();pye="std",mye=["typed","sqrt","variance"],nD=I(pye,mye,r=>{var{typed:e,sqrt:t,variance:n}=r,i=Ep({typed:e,sqrt:t,variance:n});return e("std",{"...any":function(a){a=Ri(a);try{return i.apply(null,a)}catch(s){throw Cr(s)}}})},{isTransformFunction:!0})});var DV,hye,iD,EV=g(()=>{j();Ei();WA();Us();DV="sum",hye=["typed","config","add","numeric"],iD=I(DV,hye,r=>{var{typed:e,config:t,add:n,numeric:i}=r,o=Ap({typed:e,config:t,add:n,numeric:i});return e(DV,{"...any":function(s){s=Ri(s);try{return o.apply(null,s)}catch(u){throw Cr(u)}}})},{isTransformFunction:!0})});var TV,dye,oD,CV=g(()=>{j();Ei();XA();Us();TV="variance",dye=["typed","add","subtract","multiply","divide","apply","isNaN"],oD=I(TV,dye,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:o,apply:a,isNaN:s}=r,u=Dp({typed:e,add:t,subtract:n,multiply:i,divide:o,apply:a,isNaN:s});return e(TV,{"...any":function(l){l=Ri(l);try{return u.apply(null,l)}catch(f){throw Cr(f)}}})},{isTransformFunction:!0})});var dg=g(()=>{dO();gO();xO();wO();AO();MO();DO();EO();CO();kO();WO();KO();ZO();JO();QO();t_();n_();a_();s_();u_();l_();p_();m_();h_();d_();v_();y_();w_();S_();M_();E_();C_();k_();ew();F_();z_();L_();P_();U_();V_();W_();K_();Z_();J_();Q_();tF();nF();iF();aF();uF();lF();fF();mF();dF();vF();yF();DF();TF();IF();OF();FF();zF();LF();PF();UF();VF();HF();zw();Rw();JF();QF();tB();oB();sB();cB();fB();mB();dB();vB();jw();yB();Xw();NB();AB();DB();TB();tN();kB();_B();iN();zB();LB();PB();$B();GB();WB();KB();ZB();JB();QB();rz();iz();az();sz();cz();fz();dz();vz();yz();wz();Sz();Mz();Ez();Cz();kz();_z();Bz();Rz();qz();$z();Gz();Kz();Zz();Xz();Yz();eR();rR();iR();aR();uR();cR();fR();mR();XN();JN();gR();vR();xR();yR();AR();DR();TR();IR();OR();FR();zR();LR();PR();UR();VR();HR();jR();ZR();XR();YR();eL();rL();iL();aL();uL();lL();pL();hL();gL();xL();bL();NL();SL();ML();EL();CL();kL();_L();BL();RL();qL();$L();GL();WL();KL();ZL();JL();YL();e4();t4();r4();n4();a4();s4();u4();h4();d4();g4();v4();x4();y4();b4();w4();N4();S4();M4();E4();C4();I4();O4();F4();z4();cq();pq();mq();hq();TG();IG();OG();FG();qG();$G();GG();VG();HG();KG();WA();HA();JG();QG();XA();t7();YA();o7();u7();l7();p7();h7();g7();y7();R7();q7();$7();G7();W7();K7();Z7();Y7();Q7();tV();rV();nV();aV();sV();uV();cV();fV();pV();mV();dV();gV();vV();xV();yV();bV();wV();NV();AV();MV();EV();CV()});var je,jr,aD,IV,kV,Gs,OV,_V,FV,BV,Cp,zV,RV,LV,sD,uD,qV,PV,$V,UV,GV,Vt,VV,WV,cD,HV,KV,ue,jV,ZV,Li,XV,JV,YV,Mn,QV,eW,tW,lD,rW,us,nW,iW,oW,Ip,kp,il,aW,sW,uW,cW,Jt,lW,fW,pW,mW,hW,ol,dW,gW,fD,mo,ku,Op,Vs,vW,xW,yW,pD,fn,mD,Ws,bW,wW,NW,SW,hD,AW,dD,gg,Ea,MW,DW,EW,TW,CW,IW,kW,vg,OW,_W,FW,xg,BW,al,zW,RW,LW,qW,PW,Ta,$W,Ca,UW,GW,sl,Ou,Qe,VW,WW,HW,ho,KW,gD,jW,Hn,go,ZW,Ji,Yr,XW,yg,JW,Hs,YW,QW,eH,tH,_u,vD,bg,rH,xD,yD,pn,bD,cs,ul,nH,iH,oH,wD,Kn,aH,_p,sH,ND,SD,uH,cH,lH,fH,wg,pH,mH,Fp,Ng,hH,Sg,dH,Dn,gH,vH,xH,Yo,yH,bH,Ag,wH,AD,Fu,Yi,Mg,NH,SH,xn,ls,MD,cl,AH,MH,DH,EH,TH,CH,DD,ED,IH,TD,kH,CD,ID,OH,_H,FH,BH,kD,OD,_D,zH,RH,FD,Bu,BD,LH,zD,qH,Tt,PH,$H,UH,GH,VH,WH,HH,KH,jH,ZH,XH,Bp,JH,YH,QH,eK,tK,rK,nK,iK,oK,aK,sK,uK,cK,lK,fK,pK,mK,hK,dK,RD,gK,LD,vK,xK,yK,bK,wK,NK,SK,AK,MK,DK,EK,TK,CK,IK,kK,qD,OK,_K,Dg,FK,BK,zK,RK,LK,PD,qK,ll,PK,$K,Qo,UK,GK,VK,zu,WK,Eg,HK,$D,KK,jK,UD,GD,ZK,VD=g(()=>{ab();dg();je=wb({config:Be}),jr=Sb({}),aD=RM({BigNumber:je,config:Be}),IV=kM({}),kV=p2({BigNumber:je,config:Be}),Gs=Mb({}),OV=WM({Complex:jr}),_V=_M({BigNumber:je,config:Be}),FV=PM({BigNumber:je,config:Be}),BV=UM({BigNumber:je,config:Be}),Cp=Eb({}),zV=FM({BigNumber:je,config:Be}),RV=OM({}),LV=LM({BigNumber:je,config:Be}),sD=Db({}),uD=yb({}),qV=GM({BigNumber:je,config:Be}),PV=k2({BigNumber:je,config:Be}),$V=zM({BigNumber:je,config:Be}),UV=IM({}),GV=HM({}),Vt=Tb({Matrix:Cp}),VV=w2({BigNumber:je,config:Be}),WV=qM({BigNumber:je,config:Be}),cD=BM({BigNumber:je,config:Be}),HV=CM({}),KV=VM({BigNumber:je,config:Be}),ue=xb({BigNumber:je,Complex:jr,DenseMatrix:Vt,Fraction:Gs}),jV=Y1({BigNumber:je,config:Be,typed:ue}),ZV=b2({BigNumber:je,config:Be}),Li=Q1({typed:ue}),XV=uS({Complex:jr,config:Be,typed:ue}),JV=lS({BigNumber:je,typed:ue}),YV=pS({BigNumber:je,Complex:jr,config:Be,typed:ue}),Mn=tw({typed:ue}),QV=Cw({typed:ue}),eW=dS({BigNumber:je,Complex:jr,config:Be,typed:ue}),tW=vS({typed:ue}),lD=xS({typed:ue}),rW=bS({Complex:jr,config:Be,typed:ue}),us=G1({BigNumber:je,typed:ue}),nW=Dw({typed:ue}),iW=U1({typed:ue}),oW=Cb({typed:ue}),Ip=QA({typed:ue}),kp=V1({Complex:jr,typed:ue}),il=Iw({typed:ue}),aW=NS({typed:ue}),sW=AS({BigNumber:je,typed:ue}),uW=MS({BigNumber:je,typed:ue}),cW=iw({typed:ue}),Jt=L1({config:Be,typed:ue}),lW=uN({typed:ue}),fW=ow({typed:ue}),pW=aw({Complex:jr,typed:ue}),mW=$w({typed:ue}),hW=Gw({typed:ue}),ol=fN({typed:ue}),dW=Vw({typed:ue}),gW=hN({format:ol,typed:ue}),fD=kw({typed:ue}),mo=kb({typed:ue}),ku=k1({typed:ue}),Op=F1({typed:ue}),Vs=B1({typed:ue}),vW=$M({BigNumber:je,config:Be}),xW=fw({Complex:jr,config:Be,typed:ue}),yW=pw({Complex:jr,config:Be,typed:ue}),pD=Kw({typed:ue}),fn=hw({typed:ue}),mD=_w({typed:ue}),Ws=P1({typed:ue}),bW=mN({format:ol,typed:ue}),wW=hM({config:Be,typed:ue}),NW=dN({typed:ue}),SW=gM({config:Be,typed:ue}),hD=Ow({typed:ue}),AW=ES({BigNumber:je,typed:ue}),dD=vw({BigNumber:je,Fraction:Gs,complex:kp,typed:ue}),gg=CS({typed:ue}),Ea=q1({Matrix:Cp,equalScalar:Jt,typed:ue}),MW=X1({typed:ue}),DW=yw({typed:ue}),EW=$1({typed:ue}),TW=kS({typed:ue}),CW=R1({typed:ue}),IW=cS({Complex:jr,config:Be,typed:ue}),kW=mS({BigNumber:je,typed:ue}),vg=cp({isInteger:mo,typed:ue}),OW=hS({BigNumber:je,Complex:jr,config:Be,typed:ue}),_W=pN({format:ol,typed:ue}),FW=eM({typed:ue}),xg=wS({typed:ue}),BW=DS({BigNumber:je,typed:ue}),al=z1({typed:ue}),zW=vN({typed:ue}),RW=vM({config:Be,typed:ue}),LW=TS({BigNumber:je,typed:ue}),qW=IS({typed:ue}),PW=aS({SparseMatrix:Ea,typed:ue}),Ta=xw({Complex:jr,config:Be,typed:ue}),$W=OS({typed:ue}),Ca=J1({typed:ue}),UW=fS({BigNumber:je,Complex:jr,config:Be,typed:ue}),GW=SS({BigNumber:je,typed:ue}),sl=W1({Fraction:Gs,typed:ue}),Ou=O1({typed:ue}),Qe=H1({DenseMatrix:Vt,Matrix:Cp,SparseMatrix:Ea,typed:ue}),VW=K1({isZero:Vs,matrix:Qe,typed:ue}),WW=mw({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue}),HW=gw({BigNumber:je,equalScalar:Jt,matrix:Qe,typed:ue}),ho=xN({bignumber:us,fraction:sl,number:Ws}),KW=Fw({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue}),gD=lN({config:Be,multiplyScalar:fn,numeric:ho,typed:ue}),jW=Jw({isInteger:mo,matrix:Qe,typed:ue}),Hn=rN({matrix:Qe,config:Be,typed:ue}),go=$N({DenseMatrix:Vt,config:Be,matrix:Qe,typed:ue}),ZW=nN({matrix:Qe,typed:ue}),Ji=xp({matrix:Qe,typed:ue}),Yr=bw({DenseMatrix:Vt,addScalar:Mn,equalScalar:Jt,matrix:Qe,typed:ue,unaryMinus:Ca}),XW=gN({matrix:Qe,typed:ue}),yg=oN({matrix:Qe,typed:ue}),JW=ww({BigNumber:je,config:Be,matrix:Qe,typed:ue}),Hs=sN({BigNumber:je,config:Be,matrix:Qe,typed:ue}),YW=BN({equalScalar:Jt,matrix:Qe,not:mD,typed:ue,zeros:Hs}),QW=Mw({equalScalar:Jt,matrix:Qe,typed:ue}),eH=Tw({DenseMatrix:Vt,matrix:Qe,typed:ue}),tH=rw({BigNumber:je,Complex:jr,Fraction:Gs,config:Be,isNegative:ku,matrix:Qe,typed:ue,unaryMinus:Ca}),_u=zN({BigNumber:je,DenseMatrix:Vt,Fraction:Gs,config:Be,equalScalar:Jt,matrix:Qe,typed:ue}),vD=LN({matrix:Qe,typed:ue}),bg=pp({isInteger:mo,matrix:Qe,typed:ue}),rH=Lw({prod:gD,size:Hn,typed:ue}),xD=aN({conj:il,transpose:yg,typed:ue}),yD=Pw({DenseMatrix:Vt,SparseMatrix:Ea,matrix:Qe,typed:ue}),pn=yN({numeric:ho,typed:ue}),bD=EN({DenseMatrix:Vt,divideScalar:pn,equalScalar:Jt,matrix:Qe,typed:ue}),cs=qN({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue}),ul=Uw({matrix:Qe,typed:ue}),nH=cw({BigNumber:je,DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue}),iH=_1({isNumeric:Ou,typed:ue}),oH=VS({abs:Li,addScalar:Mn,divideScalar:pn,isPositive:Op,multiplyScalar:fn,smaller:go,sqrt:Ta,typed:ue}),wD=YN({DenseMatrix:Vt,smaller:go}),Kn=QN({ImmutableDenseMatrix:wD}),aH=Hw({matrix:Qe,multiplyScalar:fn,typed:ue}),_p=VN({DenseMatrix:Vt,config:Be,matrix:Qe,typed:ue}),sH=ON({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue,zeros:Hs}),ND=TN({DenseMatrix:Vt,divideScalar:pn,equalScalar:Jt,matrix:Qe,multiplyScalar:fn,subtract:Yr,typed:ue}),SD=Z1({flatten:ul,matrix:Qe,size:Hn,typed:ue}),uH=wp({config:Be,numeric:ho,smaller:go,typed:ue}),cH=cN({isNaN:al,isNumeric:Ou,typed:ue}),lH=MN({Complex:jr,config:Be,divideScalar:pn,typed:ue}),fH=Zw({BigNumber:je,config:Be,matrix:Qe,typed:ue}),wg=jN({compare:_u,isNaN:al,isNumeric:Ou,typed:ue}),pH=Yw({config:Be,matrix:Qe}),mH=FN({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue,zeros:Hs}),Fp=NN({BigNumber:je,DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue,zeros:Hs}),Ng=UN({DenseMatrix:Vt,config:Be,matrix:Qe,typed:ue}),hH=KN({DenseMatrix:Vt,config:Be,equalScalar:Jt,matrix:Qe,typed:ue}),Sg=CN({DenseMatrix:Vt,divideScalar:pn,equalScalar:Jt,matrix:Qe,multiplyScalar:fn,subtract:Yr,typed:ue}),dH=Bw({DenseMatrix:Vt,matrix:Qe,typed:ue}),Dn=GS({DenseMatrix:Vt,SparseMatrix:Ea,addScalar:Mn,equalScalar:Jt,matrix:Qe,typed:ue}),gH=yS({BigNumber:je,DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue}),vH=Ew({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue}),xH=bM({addScalar:Mn,combinations:Ip,divideScalar:pn,isInteger:mo,isNegative:ku,multiplyScalar:fn,typed:ue}),Yo=RN({compare:_u,typed:ue}),yH=WN({equal:cs,typed:ue}),bH=hp({matrix:Qe,number:Ws,subtract:Yr,typed:ue}),Ag=HS({addScalar:Mn,conj:il,multiplyScalar:fn,size:Hn,typed:ue}),wH=PN({compareText:vD,isZero:Vs,typed:ue}),AD=uw({config:Be,equalScalar:Jt,matrix:Qe,round:Fp,typed:ue}),Fu=Ww({BigNumber:je,DenseMatrix:Vt,SparseMatrix:Ea,config:Be,matrix:Qe,typed:ue}),Yi=GN({DenseMatrix:Vt,config:Be,matrix:Qe,typed:ue}),Mg=SN({Complex:jr,config:Be,divideScalar:pn,typed:ue}),NH=IN({DenseMatrix:Vt,divideScalar:pn,equalScalar:Jt,matrix:Qe,multiplyScalar:fn,subtract:Yr,typed:ue}),SH=j1({flatten:ul,matrix:Qe,size:Hn,typed:ue}),xn=dw({addScalar:Mn,dot:Ag,equalScalar:Jt,matrix:Qe,multiplyScalar:fn,typed:ue}),ls=bN({Complex:jr,config:Be,fraction:sl,identity:Fu,matrix:Qe,multiply:xn,number:Ws,typed:ue}),MD=SA({addScalar:Mn,complex:kp,conj:il,divideScalar:pn,equal:cs,identity:Fu,isZero:Vs,matrix:Qe,multiplyScalar:fn,sign:dD,sqrt:Ta,subtract:Yr,typed:ue,unaryMinus:Ca,zeros:Hs}),cl=gp({bignumber:us,matrix:Qe,config:Be,larger:Yi,largerEq:_p,smaller:go,smallerEq:Ng,typed:ue}),AH=_N({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,typed:ue,zeros:Hs}),MH=vp({Index:Kn,matrix:Qe,range:cl,typed:ue}),DH=_S({DenseMatrix:Vt,Index:Kn,compareNatural:Yo,size:Hn,subset:Ji,typed:ue}),EH=BS({DenseMatrix:Vt,Index:Kn,compareNatural:Yo,size:Hn,subset:Ji,typed:ue}),TH=RS({Index:Kn,compareNatural:Yo,size:Hn,subset:Ji,typed:ue}),CH=qS({Index:Kn,compareNatural:Yo,size:Hn,subset:Ji,typed:ue}),DD=TA({SparseMatrix:Ea,abs:Li,add:Dn,divideScalar:pn,larger:Yi,largerEq:_p,multiply:xn,subtract:Yr,transpose:yg,typed:ue}),ED=Ap({add:Dn,config:Be,numeric:ho,typed:ue}),IH=KS({add:Dn,matrix:Qe,typed:ue}),TD=kN({DenseMatrix:Vt,divideScalar:pn,equalScalar:Jt,matrix:Qe,multiplyScalar:fn,subtract:Yr,typed:ue}),kH=gS({Complex:jr,config:Be,typed:ue}),CD=nw({config:Be,equalScalar:Jt,matrix:Qe,round:Fp,typed:ue}),ID=mp({Index:Kn,matrix:Qe,range:cl,typed:ue}),OH=wM({addScalar:Mn,combinations:Ip,isInteger:mo,isNegative:ku,isPositive:Op,larger:Yi,typed:ue}),_H=qw({matrix:Qe,multiply:xn,subtract:Yr,typed:ue}),FH=GA({abs:Li,addScalar:Mn,divideScalar:pn,multiplyScalar:fn,sqrt:Ta,subtract:Yr,typed:ue,unaryMinus:Ca}),BH=Sw({equalScalar:Jt,matrix:Qe,multiplyScalar:fn,typed:ue}),kD=eS({larger:Yi,smaller:go}),OD=sw({Complex:jr,ceil:CD,floor:AD,matrix:Qe,typed:ue}),_D=tM({BigNumber:je,Complex:jr,config:Be,multiplyScalar:fn,pow:ls,typed:ue}),zH=jS({Index:Kn,typed:ue}),RH=lw({equalScalar:Jt,matrix:Qe,typed:ue}),FD=bp({config:Be,larger:Yi,numeric:ho,typed:ue}),Bu=JA({add:Dn,compare:_u,multiply:xn,partitionSelect:wg,typed:ue}),BD=FS({DenseMatrix:Vt,Index:Kn,compareNatural:Yo,size:Hn,subset:Ji,typed:ue}),LH=LS({Index:Kn,compareNatural:Yo,size:Hn,subset:Ji,typed:ue}),zD=$S({Index:Kn,concat:bg,setDifference:BD,size:Hn,subset:Ji,typed:ue}),qH=ZN({compare:_u,compareNatural:Yo,matrix:Qe,typed:ue}),Tt=iS({BigNumber:je,Complex:jr,Fraction:Gs,abs:Li,addScalar:Mn,config:Be,divideScalar:pn,equal:cs,fix:OD,format:ol,isNumeric:Ou,multiplyScalar:fn,number:Ws,pow:ls,round:Fp,subtract:Yr}),PH=QM({BigNumber:je,Unit:Tt,config:Be}),$H=F2({BigNumber:je,Unit:Tt,config:Be}),UH=N2({BigNumber:je,Unit:Tt,config:Be}),GH=r2({BigNumber:je,Unit:Tt,config:Be}),VH=A2({BigNumber:je,Unit:Tt,config:Be}),WH=n2({BigNumber:je,Unit:Tt,config:Be}),HH=sS({Unit:Tt,typed:ue}),KH=d2({BigNumber:je,Unit:Tt,config:Be}),jH=DN({DenseMatrix:Vt,equalScalar:Jt,matrix:Qe,pow:ls,typed:ue}),ZH=YM({BigNumber:je,Unit:Tt,config:Be}),XH=t2({BigNumber:je,Unit:Tt,config:Be}),Bp=rM({gamma:_D,typed:ue}),JH=f2({BigNumber:je,Unit:Tt,config:Be}),YH=T2({BigNumber:je,Unit:Tt,config:Be}),QH=R2({BigNumber:je,Unit:Tt,config:Be}),eK=VA({abs:Li,add:Dn,addScalar:Mn,config:Be,divideScalar:pn,equalScalar:Jt,flatten:ul,matrix:Qe,multiply:xn,multiplyScalar:fn,smaller:go,subtract:Yr,typed:ue}),tK=i2({BigNumber:je,Unit:Tt,config:Be}),rK=s2({BigNumber:je,Unit:Tt,config:Be}),nK=E2({BigNumber:je,Unit:Tt,config:Be}),iK=JM({BigNumber:je,Unit:Tt,config:Be}),oK=B2({BigNumber:je,Unit:Tt,config:Be}),aK=C2({BigNumber:je,Unit:Tt,config:Be}),sK=g2({BigNumber:je,Unit:Tt,config:Be}),uK=a2({BigNumber:je,Unit:Tt,config:Be}),cK=oM({factorial:Bp,typed:ue}),lK=ZM({BigNumber:je,Unit:Tt,config:Be}),fK=q2({BigNumber:je,Unit:Tt,config:Be}),pK=P2({BigNumber:je,Unit:Tt,config:Be}),mK=v2({BigNumber:je,Unit:Tt,config:Be}),hK=XM({BigNumber:je,Unit:Tt,config:Be}),dK=x2({BigNumber:je,Unit:Tt,config:Be}),RD=zS({DenseMatrix:Vt,Index:Kn,compareNatural:Yo,size:Hn,subset:Ji,typed:ue}),gK=US({Index:Kn,concat:bg,setIntersect:RD,setSymDifference:zD,size:Hn,subset:Ji,typed:ue}),LD=tS({FibonacciHeap:kD,addScalar:Mn,equalScalar:Jt}),vK=_2({BigNumber:je,Unit:Tt,config:Be}),xK=oS({Unit:Tt,typed:ue}),yK=S2({BigNumber:je,Unit:Tt,config:Be}),bK=u2({BigNumber:je,Unit:Tt,config:Be}),wK=e2({BigNumber:je,Unit:Tt,config:Be}),NK=l2({BigNumber:je,Unit:Tt,config:Be}),SK=M2({BigNumber:je,Unit:Tt,config:Be}),AK=m2({BigNumber:je,Unit:Tt,config:Be}),MK=AN({Complex:jr,config:Be,divideScalar:pn,log:Mg,typed:ue}),DK=o2({BigNumber:je,Unit:Tt,config:Be}),EK=z2({BigNumber:je,Unit:Tt,config:Be}),TK=$2({BigNumber:je,Unit:Tt,config:Be}),CK=U2({BigNumber:je,Unit:Tt,config:Be}),IK=O2({BigNumber:je,Unit:Tt,config:Be}),kK=KM({BigNumber:je,Unit:Tt,config:Be}),qD=xM({addScalar:Mn,combinations:Ip,divideScalar:pn,factorial:Bp,isInteger:mo,isNegative:ku,larger:Yi,multiplyScalar:fn,pow:ls,subtract:Yr,typed:ue}),OK=yM({addScalar:Mn,isInteger:mo,isNegative:ku,stirlingS2:qD,typed:ue}),_K=D2({BigNumber:je,Unit:Tt,config:Be}),Dg=NA({DenseMatrix:Vt,Spa:LD,SparseMatrix:Ea,abs:Li,addScalar:Mn,divideScalar:pn,equalScalar:Jt,larger:Yi,matrix:Qe,multiplyScalar:fn,subtract:Yr,typed:ue,unaryMinus:Ca}),FK=I2({BigNumber:je,Unit:Tt,config:Be}),BK=h2({BigNumber:je,Unit:Tt,config:Be}),zK=PS({compareNatural:Yo,typed:ue}),RK=y2({BigNumber:je,Unit:Tt,config:Be}),LK=c2({BigNumber:je,Unit:Tt,config:Be}),PD=RA({lup:Dg,matrix:Qe,multiply:xn,subtract:Yr,typed:ue,unaryMinus:Ca}),qK=jM({BigNumber:je,Unit:Tt,config:Be}),ll=LA({abs:Li,addScalar:Mn,det:PD,divideScalar:pn,identity:Fu,matrix:Qe,multiply:xn,typed:ue,unaryMinus:Ca}),PK=IA({DenseMatrix:Vt,lsolve:ND,lup:Dg,matrix:Qe,slu:DD,typed:ue,usolve:Sg}),$K=$A({abs:Li,add:Dn,identity:Fu,inv:ll,max:FD,multiply:xn,size:Hn,sqrt:Ta,subtract:Yr,typed:ue}),Qo=UA({divideScalar:pn,equalScalar:Jt,inv:ll,matrix:Qe,multiply:xn,typed:ue}),UK=PA({abs:Li,add:Dn,identity:Fu,inv:ll,multiply:xn,typed:ue}),GK=nM({divide:Qo,dotDivide:bD,isNumeric:Ou,log:Mg,matrix:Qe,multiply:xn,sum:ED,typed:ue}),VK=Mp({add:Dn,divide:Qo,typed:ue}),zu=KA({add:Dn,compare:_u,divide:Qo,partitionSelect:wg,typed:ue}),WK=L2({BigNumber:je,Unit:Tt,config:Be}),Eg=Dp({add:Dn,apply:vg,divide:Qo,isNaN:al,multiply:xn,subtract:Yr,typed:ue}),HK=Ep({sqrt:Ta,typed:ue,variance:Eg}),$D=qA({abs:Li,add:Dn,addScalar:Mn,atan:lD,bignumber:us,column:ID,complex:kp,config:Be,cos:xg,diag:yD,divideScalar:pn,dot:Ag,equal:cs,flatten:ul,im:fD,inv:ll,larger:Yi,matrix:Qe,matrixFromColumns:SD,multiply:xn,multiplyScalar:fn,number:Ws,qr:MD,re:hD,sin:gg,smaller:go,sqrt:Ta,subtract:Yr,typed:ue,usolve:Sg,usolveAll:TD}),KK=iM({add:Dn,divide:Qo,factorial:Bp,isInteger:mo,isPositive:Op,multiply:xn,typed:ue}),jK=jA({abs:Li,map:pD,median:zu,subtract:Yr,typed:ue}),UD=WS({abs:Li,add:Dn,conj:il,ctranspose:xD,eigs:$D,equalScalar:Jt,larger:Yi,matrix:Qe,multiply:xn,pow:ls,smaller:go,sqrt:Ta,typed:ue}),GD=eN({BigNumber:je,DenseMatrix:Vt,SparseMatrix:Ea,addScalar:Mn,config:Be,cos:xg,matrix:Qe,multiplyScalar:fn,norm:UD,sin:gg,typed:ue,unaryMinus:Ca}),ZK=Qw({multiply:xn,rotationMatrix:GD,typed:ue})});var fl,zp,XK,WD,fi,JK,Rp,Lp,YK,QK,ej,tj,qp,rj,gye,vye,nj,ij,oj,aj,pl,Pp,Ru,xye,sj,uj,cj,yye,HD,bye,wye,Nye,lj=g(()=>{Rc();ab();dg();VD();fl={},zp={},XK={},WD=OA({math:fl}),fi=XS({mathWithTransform:zp}),JK=cA({Node:fi}),Rp=lA({Node:fi}),Lp=fA({Node:fi}),YK=mA({Node:fi}),QK=QS({Node:fi}),ej=tA({Node:fi,ResultSet:uD}),tj=rA({Node:fi}),qp=aA({Node:fi}),rj=pA({Node:fi}),gye=TM({classes:XK}),vye=zA({Chain:WD,typed:ue}),nj=sA({Node:fi,typed:ue}),ij=YS({Node:fi,subset:Ji}),oj=eA({matrix:Qe,Node:fi,subset:Ji}),aj=uA({Node:fi,Range:sD,size:Hn}),pl=hA({Unit:Tt,Node:fi,math:fl}),Pp=gA({Node:fi,SymbolNode:pl,math:fl}),Ru=vA({AccessorNode:ij,ArrayNode:QK,AssignmentNode:oj,BlockNode:ej,ConditionalNode:tj,ConstantNode:qp,FunctionAssignmentNode:nj,FunctionNode:Pp,IndexNode:aj,ObjectNode:JK,OperatorNode:Rp,ParenthesisNode:Lp,RangeNode:rj,RelationalNode:YK,SymbolNode:pl,config:Be,numeric:ho,typed:ue}),xye=xA({parse:Ru,typed:ue}),sj=yA({parse:Ru,typed:ue}),uj=kA({parse:Ru}),cj=bA({evaluate:sj}),yye=wA({Parser:cj,typed:ue}),HD=MM({bignumber:us,fraction:sl,ConstantNode:qp,FunctionNode:Pp,OperatorNode:Rp,ParenthesisNode:Lp,SymbolNode:pl,add:Dn,config:Be,divide:Qo,equal:cs,isZero:Vs,mathWithTransform:zp,multiply:xn,parse:Ru,pow:ls,subtract:Yr,typed:ue}),bye=DM({ConstantNode:qp,FunctionNode:Pp,OperatorNode:Rp,ParenthesisNode:Lp,SymbolNode:pl,config:Be,equal:cs,isZero:Vs,numeric:ho,parse:Ru,simplify:HD,typed:ue}),wye=BA({Help:uj,mathWithTransform:zp,typed:ue}),Nye=EM({bignumber:us,fraction:sl,ConstantNode:qp,FunctionNode:Pp,OperatorNode:Rp,ParenthesisNode:Lp,SymbolNode:pl,add:Dn,config:Be,divide:Qo,equal:cs,isZero:Vs,mathWithTransform:zp,multiply:xn,parse:Ru,pow:ls,simplify:HD,subtract:Yr,typed:ue});un(fl,{e:aD,false:IV,fineStructure:kV,i:OV,Infinity:_V,LN10:FV,LOG10E:BV,NaN:zV,null:RV,phi:LV,SQRT1_2:qV,sackurTetrode:PV,tau:$V,true:UV,E:aD,version:GV,efimovFactor:VV,LN2:WV,pi:cD,replacer:HV,reviver:gye,SQRT2:KV,typed:ue,unaryPlus:jV,PI:cD,weakMixingAngle:ZV,abs:Li,acos:XV,acot:JV,acsc:YV,addScalar:Mn,arg:QV,asech:eW,asinh:tW,atan:lD,atanh:rW,bignumber:us,bitNot:nW,boolean:iW,chain:vye,clone:oW,combinations:Ip,complex:kp,conj:il,cosh:aW,coth:sW,csc:uW,cube:cW,equalScalar:Jt,erf:lW,exp:fW,expm1:pW,filter:mW,forEach:hW,format:ol,getMatrixDataType:dW,hex:gW,im:fD,isInteger:mo,isNegative:ku,isPositive:Op,isZero:Vs,LOG2E:vW,log10:xW,log2:yW,map:pD,multiplyScalar:fn,not:mD,number:Ws,oct:bW,pickRandom:wW,print:NW,random:SW,re:hD,sec:AW,sign:dD,sin:gg,splitUnit:MW,square:DW,string:EW,tan:TW,typeOf:CW,acosh:IW,acsch:kW,apply:vg,asec:OW,bin:_W,combinationsWithRep:FW,cos:xg,csch:BW,isNaN:al,isPrime:zW,randomInt:RW,sech:LW,sinh:qW,sparse:PW,sqrt:Ta,tanh:$W,unaryMinus:Ca,acoth:UW,cot:GW,fraction:sl,isNumeric:Ou,matrix:Qe,matrixFromFunction:VW,mod:WW,nthRoot:HW,numeric:ho,or:KW,prod:gD,reshape:jW,size:Hn,smaller:go,squeeze:ZW,subset:Ji,subtract:Yr,to:XW,transpose:yg,xgcd:JW,zeros:Hs,and:YW,bitAnd:QW,bitXor:eH,cbrt:tH,compare:_u,compareText:vD,concat:bg,count:rH,ctranspose:xD,diag:yD,divideScalar:pn,dotDivide:bD,equal:cs,flatten:ul,gcd:nH,hasNumericValue:iH,hypot:oH,kron:aH,largerEq:_p,leftShift:sH,lsolve:ND,matrixFromColumns:SD,min:uH,mode:cH,nthRoots:lH,ones:fH,partitionSelect:wg,resize:pH,rightLogShift:mH,round:Fp,smallerEq:Ng,unequal:hH,usolve:Sg,xor:dH,add:Dn,atan2:gH,bitOr:vH,catalan:xH,compareNatural:Yo,deepEqual:yH,diff:bH,dot:Ag,equalText:wH,floor:AD,identity:Fu,larger:Yi,log:Mg,lsolveAll:NH,matrixFromRows:SH,multiply:xn,pow:ls,qr:MD,range:cl,rightArithShift:AH,row:MH,setCartesian:DH,setDistinct:EH,setIsSubset:TH,setPowerset:CH,slu:DD,sum:ED,trace:IH,usolveAll:TD,asin:kH,ceil:CD,column:ID,composition:OH,cross:_H,distance:FH,dotMultiply:BH,fix:OD,gamma:_D,index:zH,lcm:RH,max:FD,quantileSeq:Bu,setDifference:BD,setMultiplicity:LH,setSymDifference:zD,sort:qH,vacuumImpedance:PH,wienDisplacement:$H,atomicMass:UH,bohrMagneton:GH,boltzmann:VH,conductanceQuantum:WH,createUnit:HH,deuteronMass:KH,dotPow:jH,electricConstant:ZH,elementaryCharge:XH,factorial:Bp,fermiCoupling:JH,gasConstant:YH,gravity:QH,intersect:eK,inverseConductanceQuantum:tK,klitzing:rK,loschmidt:nK,magneticConstant:iK,molarMass:oK,molarPlanckConstant:aK,neutronMass:sK,nuclearMagneton:uK,permutations:cK,planckConstant:lK,planckMass:fK,planckTime:pK,quantumOfCirculation:mK,reducedPlanckConstant:hK,rydberg:dK,setIntersect:RD,setUnion:gK,stefanBoltzmann:vK,unit:xK,avogadro:yK,bohrRadius:bK,coulomb:wK,electronMass:NK,faraday:SK,hartreeEnergy:AK,log1p:MK,magneticFluxQuantum:DK,molarMassC12:EK,parse:Ru,planckCharge:TK,planckTemperature:CK,secondRadiation:IK,speedOfLight:kK,stirlingS2:qD,bellNumbers:OK,compile:xye,evaluate:sj,firstRadiation:_K,lup:Dg,molarVolume:FK,protonMass:BK,setSize:zK,thomsonCrossSection:RK,classicalElectronRadius:LK,det:PD,gravitationConstant:qK,inv:ll,lusolve:PK,parser:yye,sqrtm:$K,divide:Qo,expm:UK,kldivergence:GK,mean:VK,median:zu,planckLength:WK,simplify:HD,variance:Eg,derivative:bye,help:wye,rationalize:Nye,std:HK,eigs:$D,multinomial:KK,mad:jK,norm:UD,rotationMatrix:GD,rotate:ZK,config:Be});un(zp,fl,{filter:W2({typed:ue}),forEach:H2({typed:ue}),map:j2({typed:ue}),apply:G2({isInteger:mo,typed:ue}),diff:rD({bignumber:us,matrix:Qe,number:Ws,subtract:Yr,typed:ue}),index:K2({Index:Kn}),subset:eD({matrix:Qe,typed:ue}),concat:tD({isInteger:mo,matrix:Qe,typed:ue}),max:Z2({config:Be,larger:Yi,numeric:ho,typed:ue}),min:J2({config:Be,numeric:ho,smaller:go,typed:ue}),range:Y2({bignumber:us,matrix:Qe,config:Be,larger:Yi,largerEq:_p,smaller:go,smallerEq:Ng,typed:ue}),row:Q2({Index:Kn,matrix:Qe,range:cl,typed:ue}),sum:iD({add:Dn,config:Be,numeric:ho,typed:ue}),column:V2({Index:Kn,matrix:Qe,range:cl,typed:ue}),mean:X2({add:Dn,divide:Qo,typed:ue}),variance:oD({add:Dn,apply:vg,divide:Qo,isNaN:al,multiply:xn,subtract:Yr,typed:ue}),std:nD({sqrt:Ta,typed:ue,variance:Eg})});un(XK,{BigNumber:je,Chain:WD,Complex:jr,Fraction:Gs,Matrix:Cp,Node:fi,ObjectNode:JK,OperatorNode:Rp,ParenthesisNode:Lp,Range:sD,RelationalNode:YK,ResultSet:uD,ArrayNode:QK,BlockNode:ej,ConditionalNode:tj,ConstantNode:qp,DenseMatrix:Vt,RangeNode:rj,FunctionAssignmentNode:nj,SparseMatrix:Ea,AccessorNode:ij,AssignmentNode:oj,ImmutableDenseMatrix:wD,Index:Kn,IndexNode:aj,FibonacciHeap:kD,Unit:Tt,Spa:LD,SymbolNode:pl,FunctionNode:Pp,Help:uj,Parser:cj});WD.createProxy(fl)});var fj=g(()=>{});var pj=g(()=>{});var mj=g(()=>{VD();lj();fj();pj();dg()});var Tg=g(()=>{mj()});var KD,hj=g(()=>{Kr();Dr();Tg();Ai();Pt();KD=class extends ks{constructor({strategy:t="mean",constant:n,quantile:i}={}){super();this.name="DummyRegressor";this.tf=qe(),this.strategy=t,this.constant=n,this.quantile=i}fit(t,n){Ge(Ki(n),"y variable can not be converted to a 1D Tensor."),Ge(["mean","median","constant","quantile"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mean', 'median', 'constant', and 'quantile'`);let i=Ya(n);return this.strategy==="mean"?(this.constant=i.mean().dataSync()[0],this):this.strategy==="median"?(this.constant=zu(i.arraySync()),this):this.strategy==="quantile"?(Ge(typeof this.quantile=="number"&&!isNaN(this.quantile)&&isFinite(this.quantile),"quantile is not set to a number. Please set it to a value between 0 and 1 in the constructor"),Ge(this.quantile<0||this.quantile>1,"quantile must be set to a value between 0 and 1"),this.constant=Bu(i.arraySync(),this.quantile),this):this}predict(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let i=_t(t).shape[0];return this.tf.tensor1d(Array(i).fill(this.constant))}}});function Ig(r){for(var e=new Map,t,n=0,i=0;i<r.length;i++){var o=e.get(r[i]);o===void 0?o=1:o++,o>n&&(t=r[i],n=o),e.set(r[i],o)}if(n===0)throw new Error("mode requires at last one data point");return t}function Aye(r){for(var e=r,t=r,n=1;n<15;n++)t*=r*r/(2*n+1),e+=t;return Math.round((.5+e/Sye*Math.exp(-r*r/2))*1e4)/1e4}var dj,gj,uat,cat,lat,Sye,Mye,Cg,jD=g(()=>{dj=function(){this.totalCount=0,this.data={}};dj.prototype.train=function(e,t){this.data[t]||(this.data[t]={});for(var n in e){var i=e[n];this.data[t][n]===void 0&&(this.data[t][n]={}),this.data[t][n][i]===void 0&&(this.data[t][n][i]=0),this.data[t][n][i]++}this.totalCount++};dj.prototype.score=function(e){var t={},n;for(var i in e){var o=e[i];for(n in this.data)t[n]={},this.data[n][i]?t[n][i+"_"+o]=(this.data[n][i][o]||0)/this.totalCount:t[n][i+"_"+o]=0}var a={};for(n in t){a[n]=0;for(var s in t[n])a[n]+=t[n][s]}return a};gj=function(){this.weights=[],this.bias=0};gj.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,n=0;n<this.weights.length;n++)t+=this.weights[n]*e[n];return t+=this.bias,t>0?1:0};gj.prototype.train=function(e,t){if(t!==0&&t!==1)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var n=this.predict(e);if(typeof n=="number"&&n!==t){for(var i=t-n,o=0;o<this.weights.length;o++)this.weights[o]+=i*e[o];this.bias+=i}return this};uat=607/128,cat=Math.log(Math.sqrt(2*Math.PI)),lat=Math.sqrt(2*Math.PI),Sye=Math.sqrt(2*Math.PI);Mye=[];for(Cg=0;Cg<=3.09;Cg+=.01)Mye.push(Aye(Cg))});var ZD=Re((pat,vj)=>{var Dye=Math.floor,Eye=Math.random;function Tye(r,e){return r+Dye(Eye()*(e-r+1))}vj.exports=Tye});var XD=Re((mat,xj)=>{var Cye=ZD();function Iye(r){var e=r.length;return e?r[Cye(0,e-1)]:void 0}xj.exports=Iye});var bj=Re((hat,yj)=>{function kye(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}yj.exports=kye});var Nj=Re((dat,wj)=>{var Oye=bj();function _ye(r,e){return Oye(e,function(t){return r[t]})}wj.exports=_ye});var Aj=Re((gat,Sj)=>{function Fye(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}Sj.exports=Fye});var kg=Re((vat,Mj)=>{function Bye(r){return r!=null&&typeof r=="object"}Mj.exports=Bye});var Ej=Re((xat,Dj)=>{var zye=xd(),Rye=kg(),Lye="[object Arguments]";function qye(r){return Rye(r)&&zye(r)==Lye}Dj.exports=qye});var kj=Re((yat,Ij)=>{var Tj=Ej(),Pye=kg(),Cj=Object.prototype,$ye=Cj.hasOwnProperty,Uye=Cj.propertyIsEnumerable,Gye=Tj(function(){return arguments}())?Tj:function(r){return Pye(r)&&$ye.call(r,"callee")&&!Uye.call(r,"callee")};Ij.exports=Gye});var Og=Re((bat,Oj)=>{var Vye=Array.isArray;Oj.exports=Vye});var Fj=Re((wat,_j)=>{function Wye(){return!1}_j.exports=Wye});var Lj=Re(($p,ml)=>{var Hye=Ic(),Kye=Fj(),Rj=typeof $p=="object"&&$p&&!$p.nodeType&&$p,Bj=Rj&&typeof ml=="object"&&ml&&!ml.nodeType&&ml,jye=Bj&&Bj.exports===Rj,zj=jye?Hye.Buffer:void 0,Zye=zj?zj.isBuffer:void 0,Xye=Zye||Kye;ml.exports=Xye});var Pj=Re((Nat,qj)=>{var Jye=9007199254740991,Yye=/^(?:0|[1-9]\d*)$/;function Qye(r,e){var t=typeof r;return e=e??Jye,!!e&&(t=="number"||t!="symbol"&&Yye.test(r))&&r>-1&&r%1==0&&r<e}qj.exports=Qye});var JD=Re((Sat,$j)=>{var e0e=9007199254740991;function t0e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e0e}$j.exports=t0e});var Gj=Re((Aat,Uj)=>{var r0e=xd(),n0e=JD(),i0e=kg(),o0e="[object Arguments]",a0e="[object Array]",s0e="[object Boolean]",u0e="[object Date]",c0e="[object Error]",l0e="[object Function]",f0e="[object Map]",p0e="[object Number]",m0e="[object Object]",h0e="[object RegExp]",d0e="[object Set]",g0e="[object String]",v0e="[object WeakMap]",x0e="[object ArrayBuffer]",y0e="[object DataView]",b0e="[object Float32Array]",w0e="[object Float64Array]",N0e="[object Int8Array]",S0e="[object Int16Array]",A0e="[object Int32Array]",M0e="[object Uint8Array]",D0e="[object Uint8ClampedArray]",E0e="[object Uint16Array]",T0e="[object Uint32Array]",Zr={};Zr[b0e]=Zr[w0e]=Zr[N0e]=Zr[S0e]=Zr[A0e]=Zr[M0e]=Zr[D0e]=Zr[E0e]=Zr[T0e]=!0;Zr[o0e]=Zr[a0e]=Zr[x0e]=Zr[s0e]=Zr[y0e]=Zr[u0e]=Zr[c0e]=Zr[l0e]=Zr[f0e]=Zr[p0e]=Zr[m0e]=Zr[h0e]=Zr[d0e]=Zr[g0e]=Zr[v0e]=!1;function C0e(r){return i0e(r)&&n0e(r.length)&&!!Zr[r0e(r)]}Uj.exports=C0e});var Wj=Re((Mat,Vj)=>{function I0e(r){return function(e){return r(e)}}Vj.exports=I0e});var Kj=Re((Up,hl)=>{var k0e=P0(),Hj=typeof Up=="object"&&Up&&!Up.nodeType&&Up,Gp=Hj&&typeof hl=="object"&&hl&&!hl.nodeType&&hl,O0e=Gp&&Gp.exports===Hj,YD=O0e&&k0e.process,_0e=function(){try{var r=Gp&&Gp.require&&Gp.require("util").types;return r||YD&&YD.binding&&YD.binding("util")}catch{}}();hl.exports=_0e});var Jj=Re((Dat,Xj)=>{var F0e=Gj(),B0e=Wj(),jj=Kj(),Zj=jj&&jj.isTypedArray,z0e=Zj?B0e(Zj):F0e;Xj.exports=z0e});var Qj=Re((Eat,Yj)=>{var R0e=Aj(),L0e=kj(),q0e=Og(),P0e=Lj(),$0e=Pj(),U0e=Jj(),G0e=Object.prototype,V0e=G0e.hasOwnProperty;function W0e(r,e){var t=q0e(r),n=!t&&L0e(r),i=!t&&!n&&P0e(r),o=!t&&!n&&!i&&U0e(r),a=t||n||i||o,s=a?R0e(r.length,String):[],u=s.length;for(var c in r)(e||V0e.call(r,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||$0e(c,u)))&&s.push(c);return s}Yj.exports=W0e});var tZ=Re((Tat,eZ)=>{var H0e=Object.prototype;function K0e(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||H0e;return r===t}eZ.exports=K0e});var nZ=Re((Cat,rZ)=>{function j0e(r,e){return function(t){return r(e(t))}}rZ.exports=j0e});var oZ=Re((Iat,iZ)=>{var Z0e=nZ(),X0e=Z0e(Object.keys,Object);iZ.exports=X0e});var sZ=Re((kat,aZ)=>{var J0e=tZ(),Y0e=oZ(),Q0e=Object.prototype,ebe=Q0e.hasOwnProperty;function tbe(r){if(!J0e(r))return Y0e(r);var e=[];for(var t in Object(r))ebe.call(r,t)&&t!="constructor"&&e.push(t);return e}aZ.exports=tbe});var cZ=Re((Oat,uZ)=>{var rbe=G0(),nbe=JD();function ibe(r){return r!=null&&nbe(r.length)&&!rbe(r)}uZ.exports=ibe});var fZ=Re((_at,lZ)=>{var obe=Qj(),abe=sZ(),sbe=cZ();function ube(r){return sbe(r)?obe(r):abe(r)}lZ.exports=ube});var QD=Re((Fat,pZ)=>{var cbe=Nj(),lbe=fZ();function fbe(r){return r==null?[]:cbe(r,lbe(r))}pZ.exports=fbe});var hZ=Re((Bat,mZ)=>{var pbe=XD(),mbe=QD();function hbe(r){return pbe(mbe(r))}mZ.exports=hbe});var gZ=Re((zat,dZ)=>{var dbe=XD(),gbe=hZ(),vbe=Og();function xbe(r){var e=vbe(r)?dbe:gbe;return e(r)}dZ.exports=xbe});var vZ,xZ,eE,yZ=g(()=>{Kr();Dr();jD();vZ=Si(K0()),xZ=Si(gZ());Ai();Pt();eE=class extends Os{constructor({strategy:t="mostFrequent",constant:n=0}={}){super();this.name="DummyClassifier";this.tf=qe(),this.constant=n,this.strategy=t,this.classes=[]}fit(t,n){Ge(Ki(n),"Data can not be converted to a 1D or 2D matrix."),Ge(["mostFrequent","uniform","constant"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mostFrequent', 'uniform', and 'constant'`);let i=Ya(n);return this.classes=(0,vZ.default)(i.arraySync()),this.strategy==="mostFrequent"?(this.constant=Ig(i.arraySync()),this):this}predictProba(t){return Ge(dr(t),"Data can not be converted to a 1D or 2D matrix."),Ge(["mostFrequent","uniform","constant"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mostFrequent', 'uniform', and 'constant'`),this.tf.oneHot(this.predict(t).toInt(),this.classes.length)}predict(t){Ge(dr(t),"Data can not be converted to a 1D or 2D matrix."),Ge(["mostFrequent","uniform","constant"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mostFrequent', 'uniform', and 'constant'`);let i=_t(t).shape[0];if(this.strategy==="mostFrequent"||this.strategy==="constant")return this.tf.tensor1d(Array(i).fill(this.constant));let o=[];for(let a=0;a<i;a++)o.push((0,xZ.default)(this.classes));return this.tf.tensor1d(o)}}});function bZ(r,e,t){let n=qe();return t?n.tidy(()=>n.where(r.isNaN(),1/0,r).min(e)):r.min(e)}function _g(r,e,t){let n=qe();return t?n.tidy(()=>n.where(r.isNaN(),-1/0,r).max(e)):r.min(e)}function tE(r,e,t){let n=qe();return t?n.tidy(()=>n.where(r.isNaN(),0,r).sum(e)):r.sum(e)}function rE(r,e,t){let n=qe();return t?n.tidy(()=>n.logicalNot(r.isNaN()).sum(e)):n.onesLike(r).sum(e)}function Vp(r,e,t,n){let i=qe();return t?n?i.tidy(()=>tE(r,e,t).div(Ia(rE(r,e,t)))):i.tidy(()=>tE(r,e,t).div(rE(r,e,t))):r.mean(e)}function wZ(r,e,t){return Ge(Boolean(t),"We only need to call this function when ignoreNaN is true"),qe().tidy(()=>{let i=Vp(r,e,t),o=rE(r,e,t),a=tE(r.sub(i).square(),e,t),s=Ia(o);return a.div(s).sqrt()})}function Ia(r){let e=qe();return e.tidy(()=>{let t=e.zerosLike(r),n=r.equal(t);return r.add(n)})}var dl=g(()=>{Dr();Pt()});var nE,NZ=g(()=>{Kr();Dr();dl();Ai();Pt();nE=class extends Rn{constructor({featureRange:t=[0,1]}={}){super();this.name="MinMaxScaler";this.tf=qe(),this.featureRange=t,this.scale=this.tf.tensor1d([]),this.min=this.tf.tensor1d([]),this.dataMin=this.tf.tensor1d([]),this.dataMax=this.tf.tensor1d([]),this.dataRange=this.tf.tensor1d([]),this.nFeaturesIn=0,this.nSamplesSeen=0,this.featureNamesIn=[]}isNumber(t){return typeof t=="number"&&isFinite(t)}fit(t){Ge(dr(t),"Data can not be converted to a 2D matrix."),Ge(this.isNumber(this.featureRange[0])&&this.isNumber(this.featureRange[1])&&this.featureRange[0]<this.featureRange[1],"featureRange needs to contain exactly two numbers where the first is less than the second");let n=_t(t),i=_g(n,0,!0),o=bZ(n,0,!0),a=i.sub(o);return this.scale=this.tf.div(this.featureRange[1]-this.featureRange[0],Ia(a)),this.min=this.tf.sub(this.featureRange[0],o.mul(this.scale)),this.dataMin=o,this.dataMax=i,this.dataRange=a,this.nSamplesSeen=n.shape[0],this.nFeaturesIn=n.shape[1],rn(t)&&(this.featureNamesIn=[...t.columns]),this}transform(t){return Ge(dr(t),"Data can not be converted to a 2D matrix."),_t(t).mul(this.scale).add(this.min)}inverseTransform(t){return Ge(dr(t),"Data can not be converted to a 2D matrix."),_t(t).sub(this.min).div(this.scale)}}});var iE,SZ=g(()=>{Kr();Dr();dl();Ai();Pt();iE=class extends Rn{constructor({withMean:t=!0,withStd:n=!0}={}){super();this.name="StandardScaler";this.tf=qe(),this.withMean=t,this.withStd=n,this.scale=this.tf.tensor1d([]),this.mean=this.tf.tensor1d([]),this.nFeaturesIn=0,this.nSamplesSeen=0,this.featureNamesIn=[]}fit(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t);if(this.withMean&&(this.mean=Vp(n,0,!0)),this.withStd){let i=wZ(n,0,!0);this.scale=Ia(i)}return this.nSamplesSeen=n.shape[0],this.nFeaturesIn=n.shape[1],rn(t)&&(this.featureNamesIn=[...t.columns]),this}transform(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t);return this.withMean&&(n=n.sub(this.mean)),this.withStd&&(n=n.div(this.scale)),n}inverseTransform(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t);return this.withStd&&(n=n.mul(this.scale)),this.withMean&&(n=n.add(this.mean)),n}}});var oE,AZ=g(()=>{Kr();Dr();dl();Ai();Pt();oE=class extends Rn{constructor(){super();this.name="MaxAbsScaler";this.tf=qe(),this.scale=this.tf.tensor1d([]),this.nFeaturesIn=0,this.nSamplesSeen=0,this.featureNamesIn=[]}fit(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t),i=_g(n.abs(),0,!0);return this.scale=Ia(i),this.nSamplesSeen=n.shape[0],this.nFeaturesIn=n.shape[1],rn(t)&&(this.featureNamesIn=[...t.columns]),this}transform(t){return Ge(dr(t),"Data can not be converted to a 2D matrix."),_t(t).div(this.scale)}inverseTransform(t){return Ge(dr(t),"Data can not be converted to a 2D matrix."),_t(t).mul(this.scale)}}});function ybe(r){return r==null||isNaN(r)&&typeof r!="string"}function MZ(r){return r.filter(t=>!ybe(t))}var aE,DZ=g(()=>{Kr();dl();Tg();jD();Ai();Pt();aE=class extends Rn{constructor({strategy:t="mean",fillValue:n=void 0,missingValues:i=NaN}={}){super();this.name="SimpleImputer";this.tf=qe(),this.missingValues=i,this.strategy=t,this.fillValue=n,this.statistics=this.tf.tensor1d([])}fit(t){if(this.strategy==="constant")return this;if(this.strategy==="mean"){let n=_t(t),i=Vp(n,0,!0);return this.statistics=i,this}if(this.strategy==="mostFrequent"){let i=_t(t).transpose().arraySync().map(o=>Ig(MZ(o)));return this.statistics=this.tf.tensor1d(i),this}if(this.strategy==="median"){let i=_t(t).transpose().arraySync().map(o=>zu(MZ(o)));return this.statistics=this.tf.tensor1d(i),this}throw new Error(`Strategy ${this.strategy} is unsupported. Supported strategies are 'mean', 'median', 'mostFrequent', and 'constant'`)}transform(t){if(this.strategy==="constant"){let i=Tc(t);return this.fillValue===void 0?i.dtype!=="string"?this.tf.where(i.isNaN(),0,i):this.tf.where(i.isNaN(),"missing_value",i):this.tf.where(i.isNaN(),this.fillValue,i)}let n=_t(t);return this.tf.where(n.isNaN(),this.statistics.reshape([1,-1]),n)}}});var Lu,Fg=g(()=>{Dr();Pt();so();Lu=class extends qr{constructor(){super();this.name="LabelEncoder";this.tf=qe(),this.classes=[]}convertTo1DArray(t){return Ja(t)?t.values:ao(t)?t.arraySync():t}classesToMapping(t){let n=new Map;return t.forEach((i,o)=>{n.set(i,o)}),n}fit(t){let n=this.convertTo1DArray(t),i=Array.from(new Set(n));return this.classes=i,this}transform(t){let n=this.convertTo1DArray(t),i=this.classesToMapping(this.classes),o=n.map(a=>{let s=i.get(a);return s===void 0?-1:s});return this.tf.tensor1d(o)}fitTransform(t){return this.fit(t).transform(t)}inverseTransform(t){let n=this.convertTo1DArray(t),i=this.classesToMapping(this.classes),o=new Map(Array.from(i,s=>s.reverse()));return n.map(s=>o.get(s)===void 0?null:o.get(s))}}});var sE,EZ=g(()=>{Kr();Ai();Pt();Dr();sE=class extends Rn{constructor({categories:t="auto",handleUnknown:n="error",unknownValue:i=NaN}={}){super();this.name="OrdinalEncoder";this.tf=qe(),this.categoriesParam=t,this.categories=[],this.handleUnknown=n,this.unknownValue=i,this.nFeaturesIn=0,this.featureNamesIn=[]}classesToMapping(t){let n=new Map;return t.forEach((i,o)=>{n.set(i,o)}),n}loopOver2DArrayToSetLabels(t){for(let n=0;n<t[0].length;n++){let i=new Set;for(let a=0;a<t.length;a++)i.add(t[a][n]);let o=Array.from(i);this.categories.push(o)}}fit(t,n){let i=ya(t);return this.categoriesParam==="auto"?(this.loopOver2DArrayToSetLabels(i),this):(this.categories=this.categoriesParam,this.nFeaturesIn=i.length===0?0:i[0].length||0,rn(t)&&(this.featureNamesIn=[...t.columns]),this)}loopOver2DArrayToUseLabels(t){let n=this.categories.map(o=>this.classesToMapping(o)),i=[];for(let o=0;o<t.length;o++){let a=[];for(let s=0;s<t[0].length;s++){let u=t[o][s],c=n[s].get(u);if(c===void 0){if(this.handleUnknown==="error")throw new Error(`Unknown value ${u} encountered while transforming. Not encountered in training data`);c=this.unknownValue}a.push(c)}i.push(a)}return i}transform(t,n){let i=ya(t),o=this.loopOver2DArrayToUseLabels(i);return this.tf.tensor2d(o,void 0,"int32")}}});var uE,TZ=g(()=>{Kr();Dr();Ai();Pt();uE=class extends Rn{constructor({norm:t="l2"}={}){super();this.name="Normalizer";this.tf=qe(),this.norm=t,this.nFeaturesIn=0,this.featureNamesIn=[]}fit(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t);return this.nFeaturesIn=n.shape[1],rn(t)&&(this.featureNamesIn=[...t.columns]),this}transform(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t);if(this.norm==="l1"){let o=this.tf.abs(n).sum(1).reshape([-1,1]);return n.divNoNan(o)}if(this.norm==="l2"){let o=n.square().sum(1).sqrt().reshape([-1,1]);return n.divNoNan(o)}let i=this.tf.abs(n).max(1).reshape([-1,1]);return n.divNoNan(i)}}});function bbe(...r){let e=[];for(let t=0;t<r.length;t++){let n=r[t];e.push([n.name,n])}return new Bg({steps:e})}var Bg,CZ=g(()=>{Dr();so();Bg=class extends qr{constructor({steps:t=[]}={}){super();this.name="Pipeline";this.steps=t,this.validateSteps(this.steps)}isTransformer(t){return t==="passthrough"||typeof t.fit=="function"&&typeof t.transform=="function"&&typeof t.fitTransform=="function"}isEstimator(t){return t==="passthrough"||typeof t.fit=="function"}validateSteps(t){if(Ge(Array.isArray(t),`steps is not an array. It is ${t}`),t.length===0)return;for(let i=0;i<t.length-1;i++){let o=t[i];Ge(Array.isArray(o),`A single step in your pipeline must be an array containing a string as the first argument, and the transformer in the second. Something akin to ['minmaxscaler', new MinMaxScaler()]. Instead it is ${o}`),Ge(this.isTransformer(o[1]),`The ${i}th step in your pipeline isn't an array containing a name and a Transformer. Instead it is ${t[i]}.`)}let n=t[t.length-1];Ge(Array.isArray(n),`The last element in your pipeline must be a 2-element array that contains a string as the first argument, and an estimator as the second. Instead it is ${n}`),Ge(this.isEstimator(n[1]),`The last element in your pipeline should be an Estimator. Instead it is ${n}`)}transformExceptLast(t){let n=t;for(let i=0;i<this.steps.length-1;i++){let[,o]=this.steps[i];o!=="passthrough"&&(n=o.transform(n))}return n}fitTransformExceptLast(t){let n=t;for(let i=0;i<this.steps.length-1;i++){let[,o]=this.steps[i];o!=="passthrough"&&(n=o.fitTransform(n))}return n}getLastEstimator(){return this.steps.length===0?null:this.steps[this.steps.length-1][1]}assertEstimatorHasFunction(t,n){Ge(t!==null,`Your final Estimator is null and therefore you can't call ${n}`),Ge(typeof t[n]=="function",`Estimator ${t} doesn't implement the function ${n}`)}fit(t,n){return Qt(this,null,function*(){this.validateSteps(this.steps);let i=this.getLastEstimator();this.assertEstimatorHasFunction(i,"fit");let o=this.fitTransformExceptLast(t);return yield i.fit(o,n),this})}transform(t){this.validateSteps(this.steps);let n=this.getLastEstimator();this.assertEstimatorHasFunction(n,"transform");let i=this.transformExceptLast(t);return n.transform(i)}fitTransform(t,n){this.validateSteps(this.steps);let i=this.getLastEstimator();this.assertEstimatorHasFunction(i,"fitTransform");let o=this.fitTransformExceptLast(t);return i.fitTransform(o)}predict(t){this.validateSteps(this.steps);let n=this.getLastEstimator();this.assertEstimatorHasFunction(n,"predict");let i=this.transformExceptLast(t);return n.predict(i)}fitPredict(t,n){return Qt(this,null,function*(){this.validateSteps(this.steps);let i=this.getLastEstimator();this.assertEstimatorHasFunction(i,"fitPredict");let o=this.fitTransformExceptLast(t);return yield i.fitPredict(o,n)})}}});function IZ(r){return Array.isArray(r)&&typeof r[0]=="string"}var cE,kZ=g(()=>{Dr();Pt();so();cE=class extends qr{constructor({transformers:t=[],remainder:n="drop"}={}){super();this.name="ColumnTransformer";this.tf=qe(),this.transformers=t,this.remainder=n}fit(t,n){for(let i=0;i<this.transformers.length;i++){let[,o,a]=this.transformers[i],s=this.getColumns(t,a);o.fit(s,n)}return this}transform(t,n){let i=[];for(let o=0;o<this.transformers.length;o++){let[,a,s]=this.transformers[o],u=this.getColumns(t,s);i.push(a.transform(u,n))}return this.tf.concat(i,1)}fitTransform(t,n){let i=[];for(let o=0;o<this.transformers.length;o++){let[,a,s]=this.transformers[o],u=this.getColumns(t,s);i.push(a.fitTransform(u,n))}return this.tf.concat(i,1)}getColumns(t,n){if(rn(t))return IZ(n)?t.loc({columns:n}).tensor:Array.isArray(n)?t.iloc({columns:n}).tensor:typeof n=="string"?t[n].tensor:t.iloc({columns:[n]}).tensor;if(IZ(n)||typeof n=="string")throw new Error("Can't pass string selected columns when not a DataFrame");if(typeof n=="number"){let i=this.tf.tensor1d([n]);return t.gather(i,1)}else{let i=this.tf.tensor1d(n);return t.gather(i,1)}}}});function wbe(r){return r==null||isNaN(r)&&typeof r!="string"}function OZ(r){return r.filter(t=>!wbe(t))}var lE,_Z=g(()=>{Kr();Dr();dl();Ai();Tg();Pt();lE=class extends Rn{constructor({quantileRange:t=[25,75],withCentering:n=!0,withScaling:i=!0}={}){super();this.name="RobustScaler";this.tf=qe(),this.scale=this.tf.tensor1d([]),this.center=this.tf.tensor1d([]),this.quantileRange=t,this.withScaling=i,this.withCentering=n,this.nFeaturesIn=0,this.featureNamesIn=[]}isNumber(t){return typeof t=="number"&&isFinite(t)}fit(t){Ge(dr(t),"Data can not be converted to a 2D matrix."),Ge(this.isNumber(this.quantileRange[0])&&this.isNumber(this.quantileRange[1]),"quantileRange values must be numbers");let n=this.quantileRange[0],i=this.quantileRange[1];Ge(n<i&&0<=n&&n<=100&&0<=i&&i<=100,"quantileRange numbers must be between 0 and 100");let o=_t(t),a=o.transpose().arraySync();if(this.withCentering){let s=a.map(u=>Bu(OZ(u),.5));this.center=this.tf.tensor1d(s)}if(this.withScaling){let s=a.map(c=>Bu(OZ(c),[n/100,i/100])),u=this.tf.tensor1d(s.map(c=>c[1]-c[0]));this.scale=Ia(u)}return this.nFeaturesIn=o.shape[1],rn(t)&&(this.featureNamesIn=[...t.columns]),this}transform(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t);return this.withCentering&&(n=n.sub(this.center)),this.withScaling&&(n=n.div(this.scale)),n}inverseTransform(t){Ge(dr(t),"Data can not be converted to a 2D matrix.");let n=_t(t);return this.withScaling&&(n=n.mul(this.scale)),this.withCentering&&(n=n.add(this.center)),n}}});var fE,FZ=g(()=>{Kr();Pt();so();fE=class extends qr{constructor({nClusters:t=8,init:n="random",maxIter:i=300,tol:o=1e-4,nInit:a=10,randomState:s}={}){super();this.name="KMeans";this.tf=qe(),this.nClusters=t,this.init=n,this.maxIter=i,this.tol=o,this.randomState=s,this.nInit=a,this.clusterCenters=this.tf.tensor2d([[]])}initCentroids(t){if(this.init==="random"){let n=vd(t.shape[0],this.nClusters,this.randomState);this.clusterCenters=this.tf.gather(t,n);return}throw new Error(`init ${this.init} is not currently implemented`)}closestCentroid(t){return this.tf.tidy(()=>{let n=this.tf.expandDims(t,1),i=this.tf.expandDims(this.clusterCenters,0);return this.tf.squaredDifference(n,i).sum(2).argMin(1)})}updateCentroids(t,n){return this.tf.tidy(()=>{let i=[];for(let o=0;o<this.nClusters;o++){let a=this.tf.equal(n,this.tf.scalar(o).toInt()),s=this.tf.div(this.tf.sum(this.tf.mul(this.tf.expandDims(a.toFloat(),1),t),0),this.tf.sum(a.toFloat()));i.push(s)}return this.tf.stack(i)})}fit(t){let n=_t(t);this.initCentroids(n);for(let i=0;i<this.maxIter;i++){let o=this.closestCentroid(n);this.clusterCenters=this.updateCentroids(n,o)}return this}predict(t){let n=_t(t);return this.closestCentroid(n)}transform(t){return this.tf.tidy(()=>{let n=_t(t),i=this.tf.expandDims(n,1),o=this.tf.expandDims(this.clusterCenters,0);return this.tf.squaredDifference(i,o).sum(2).sqrt()})}fitPredict(t){return this.fit(t).predict(t)}fitTransform(t){return this.fit(t).transform(t)}score(t){return this.tf.tidy(()=>{let n=_t(t),i=this.tf.expandDims(n,1),o=this.tf.expandDims(this.clusterCenters,0);return this.tf.squaredDifference(i,o).sum(2).min(1).sqrt().sum()})}}});function Qi(r){throw new Error(`'${r}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var zg,BZ=g(()=>{zg=class{refCount(e){return Qi("refCount")}incRef(e){return Qi("incRef")}timerAvailable(){return!0}time(e){return Qi("time")}read(e){return Qi("read")}readSync(e){return Qi("readSync")}readToGPU(e,t){return Qi("readToGPU")}numDataIds(){return Qi("numDataIds")}disposeData(e,t){return Qi("disposeData")}write(e,t,n){return Qi("write")}move(e,t,n,i,o){return Qi("move")}memory(){return Qi("memory")}floatPrecision(){return Qi("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Qi("dispose")}}});function zZ(r){let e=r.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,Rg(r,e,t)}function Nbe(r,e){if(r.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${r.length}Second array length was ${e.length}`);let t=r.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Rg(r,t,n),Rg(e,t,n)}function gl(r,e,t){return Math.max(r,Math.min(e,t))}function Sbe(r){return r%2===0?r:r+1}function Rg(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}function Abe(r){let e=0;for(let t=0;t<r.length;t++)e+=r[t];return e}function Mbe(r,e){let t=Math.random();return e*t+(1-t)*r}function Dbe(r,e){let t=0;for(let n=0;n<r.length;n++){let i=Number(r[n])-Number(e[n]);t+=i*i}return t}function W(r,e){if(!r)throw new Error(typeof e=="string"?e:e())}function Lg(r,e,t=""){W(ka(r,e),()=>t+` Shapes ${r} and ${e} must match`)}function Wp(r){W(r!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ks(r,e=[],t=!1){if(e==null&&(e=[]),Array.isArray(r)||qi(r)&&!t)for(let n=0;n<r.length;++n)Ks(r[n],e,t);else e.push(r);return e}function Yt(r){if(r.length===0)return 1;let e=r[0];for(let t=1;t<r.length;t++)e*=r[t];return e}function Ebe(r){return r.length===0}function ka(r,e){if(r===e)return!0;if(r==null||e==null||r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Pu(r){return r%1===0}function Tbe(r){if(Math.tanh!=null)return Math.tanh(r);if(r===1/0)return 1;if(r===-1/0)return-1;{let e=Math.exp(2*r);return(e-1)/(e+1)}}function Cbe(r){let e=Math.ceil(Math.sqrt(r));return[e,Math.ceil(r/e)]}function Ibe(r){let e=new Uint32Array(r);for(let t=0;t<r;++t)e[t]=t;return zZ(e),e}function $u(r,e){return e<=r.length?r:r+" ".repeat(e-r.length)}function kbe(r,e=n=>0,t){return new Promise((n,i)=>{let o=0,a=()=>{if(r()){n();return}o++;let s=e(o);if(t!=null&&o>=t){i();return}setTimeout(a,s)};a()})}function Obe(r,e){let t=1,n=-1;for(let o=0;o<r.length;++o)if(r[o]>=0)t*=r[o];else if(r[o]===-1){if(n!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${n} and dim ${o}`);n=o}else if(r[o]<0)throw Error(`Shapes can not be < 0. Found ${r[o]} at dim ${o}`);if(n===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${r}`);return r}if(t===0)throw Error(`Cannot infer the missing size in [${r}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);let i=r.slice();return i[n]=e/t,i}function En(r,e){let t=e.length;return r=r==null?e.map((n,i)=>i):[].concat(r),W(r.every(n=>n>=-t&&n<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${r}`),W(r.every(n=>Pu(n)),()=>`All values in axis param must be integers but got axis ${r}`),r.map(n=>n<0?t+n:n)}function pE(r,e){let t=[],n=[],i=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||i?null:En(e,r).sort(),a=0;for(let s=0;s<r.length;++s){if(o!=null){if(o[a]===s&&r[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${r[s]}' is not 1`);(o[a]==null||o[a]>s)&&r[s]===1&&(t.push(r[s]),n.push(s)),o[a]<=s&&a++}r[s]!==1&&(t.push(r[s]),n.push(s))}return{newShape:t,keptDims:n}}function _be(r,e){let t=null;if(r==null||r==="float32")t=new Float32Array(e);else if(r==="int32")t=new Int32Array(e);else if(r==="bool")t=new Uint8Array(e);else throw new Error(`Unknown data type ${r}`);return t}function mE(r,e){let t=null;if(r==null||r==="float32")t=new Float32Array(e);else if(r==="int32")t=new Int32Array(e);else if(r==="bool")t=new Uint8Array(e);else if(r==="string")t=new Array(e);else throw new Error(`Unknown data type ${r}`);return t}function hE(r,e){for(let t=0;t<r.length;t++){let n=r[t];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${e} being uploaded contains ${n}.`)}}function dE(r){return r==="bool"||r==="complex64"||r==="float32"||r==="int32"||r==="string"}function Fbe(r,e){return!(e==="complex64"||e==="float32"&&r!=="complex64"||e==="int32"&&r!=="float32"&&r!=="complex64"||e==="bool"&&r==="bool")}function qi(r){return r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray}function qg(r){if(r==="float32"||r==="int32")return 4;if(r==="complex64")return 8;if(r==="bool")return 1;throw new Error(`Unknown dtype ${r}`)}function gE(r){if(r==null)return 0;let e=0;return r.forEach(t=>e+=t.length),e}function vl(r){return typeof r=="string"||r instanceof String}function RZ(r){return typeof r=="boolean"}function LZ(r){return typeof r=="number"}function xl(r){return Array.isArray(r)?xl(r[0]):r instanceof Float32Array?"float32":r instanceof Int32Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray?"int32":LZ(r)?"float32":vl(r)?"string":RZ(r)?"bool":"float32"}function yl(r){return!!(r&&r.constructor&&r.call&&r.apply)}function bl(r,e){for(let t=e;t<r;++t)if(r%t===0)return t;return r}function Oa(r){let e=r.length;if(e<2)return[];let t=new Array(e-1);t[e-2]=r[e-1];for(let n=e-3;n>=0;--n)t[n]=t[n+1]*r[n+1];return t}function qZ(r,e,t,n=!1){let i=new Array;if(e.length===1){let o=e[0]*(n?2:1);for(let a=0;a<o;a++)i[a]=t[r+a]}else{let o=e[0],a=e.slice(1),s=a.reduce((u,c)=>u*c)*(n?2:1);for(let u=0;u<o;u++)i[u]=qZ(r+u*s,a,t,n)}return i}function qu(r,e,t=!1){if(r.length===0)return e[0];let n=r.reduce((i,o)=>i*o)*(t?2:1);if(n===0)return[];if(n!==e.length)throw new Error(`[${r}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return qZ(0,r,e,t)}function Hp(r,e){let t=wl(r,e);for(let n=0;n<t.length;n++)t[n]=1;return t}function wl(r,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(r);if(e==="int32")return new Int32Array(r);if(e==="bool")return new Uint8Array(r);throw new Error(`Unknown data type ${e}`)}function Bbe(r,e){let t=r.reduce((n,i)=>n*i,1);if(e==null||e==="float32")return qu(r,new Float32Array(t));if(e==="int32")return qu(r,new Int32Array(t));if(e==="bool")return qu(r,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function Kp(r){r.forEach(e=>{W(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${r}].`)})}function zbe(r,e,t){if(e===0)return 0;if(e===1)return r[0];let n=r[r.length-1];for(let i=0;i<r.length-1;++i)n+=t[i]*r[i];return n}function Rbe(r,e,t){if(e===0)return[];if(e===1)return[r];let n=new Array(e);for(let i=0;i<n.length-1;++i)n[i]=Math.floor(r/t[i]),r-=n[i]*t[i];return n[n.length-1]=r,n}function jp(r){return r&&r.then&&typeof r.then=="function"}var Zp=g(()=>{});function qbe(r){let e={};return r.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(Pbe(e,n[0],n[1]),n.join("="))),e}function Pbe(r,e,t){r[decodeURIComponent(e)]=decodeURIComponent(t||"")}function $be(r,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${r}.`)}function Ct(){return vE}function $Z(r){vE=r}var PZ,Xp,vE,jn=g(()=>{Zp();PZ="tfjsflags",Xp=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=qbe,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},this.urlFlags[e]!=null){let i=this.urlFlags[e];Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(jp(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);PZ in e&&e[PZ].split(",").forEach(n=>{let[i,o]=n.split(":");this.urlFlags[i]=$be(i,o)})}};vE=null});function yE(){if(xE==null){let r;if(typeof window<"u")r=window;else if(typeof global<"u")r=global;else if(typeof process<"u")r=process;else if(typeof self<"u")r=self;else throw new Error("Could not find a global object");xE=r}return xE}function Ube(){let r=yE();return r._tfGlobals==null&&(r._tfGlobals=new Map),r._tfGlobals}function Jp(r,e){let t=Ube();if(t.has(r))return t.get(r);{let n=e();return t.set(r,n),t.get(r)}}var xE,Pg=g(()=>{});var $g,UZ,GZ,Nl,VZ,WZ,HZ,Ug,KZ,jZ,ZZ,XZ,JZ,YZ,Gg,QZ,Vg,eX,Wg,Hg,tX,rX,Sl,nX,Kg,iX,jg,Zg,Xg,oX,Jg,Yg,aX,sX,Qg,ev,uX,tv,cX,rv,lX,fX,pX,mX,hX,nv,iv,dX,gX,vX,ov,av,xX,yX,bX,sv,uv,cv,lv,wX,NX,fv,Al,SX,AX,MX,pv,DX,EX,mv,hv,TX,CX,IX,kX,OX,dv,gv,vv,_X,xv,FX,yv,bv,wv,BX,zX,Nv,Sv,RX,LX,qX,PX,Av,Mv,Dv,Ev,Tv,Cv,$X,UX,GX,Iv,kv,Ov,VX,_v,WX,Fv,Bv,zv,Rv,HX,Lv,qv,Pv,$v,Uv,KX,Gv,Vv,Wv,Hv,Kv,jv,Zv,jX,ZX,XX,Xv,JX,Jv,Ml,YX,Yv,Qv,ex,tx,rx,QX,bE,wE,NE,fe=g(()=>{$g="Abs",UZ="Acos",GZ="Acosh",Nl="Add",VZ="AddN",WZ="All",HZ="Any",Ug="ArgMax",KZ="ArgMin",jZ="Asin",ZZ="Asinh",XZ="Atan",JZ="Atanh",YZ="Atan2",Gg="AvgPool",QZ="AvgPoolGrad",Vg="AvgPool3D",eX="AvgPool3DGrad",Wg="BatchMatMul",Hg="BatchToSpaceND",tX="Bincount",rX="BroadcastTo",Sl="Cast",nX="Ceil",Kg="ClipByValue",iX="Complex",jg="ComplexAbs",Zg="Concat",Xg="Conv2D",oX="Conv2DBackpropFilter",Jg="Conv2DBackpropInput",Yg="Conv3D",aX="Conv3DBackpropFilterV2",sX="Conv3DBackpropInputV2",Qg="Cos",ev="Cosh",uX="Cumprod",tv="Cumsum",cX="CropAndResize",rv="DepthwiseConv2dNative",lX="DepthwiseConv2dNativeBackpropFilter",fX="DepthwiseConv2dNativeBackpropInput",pX="Dilation2D",mX="Dilation2DBackpropInput",hX="Dilation2DBackpropFilter",nv="RealDiv",iv="Elu",dX="EluGrad",gX="Erf",vX="Equal",ov="Exp",av="ExpandDims",xX="Expm1",yX="Fill",bX="FlipLeftRight",sv="Floor",uv="FloorDiv",cv="FusedBatchNorm",lv="GatherV2",wX="GatherNd",NX="Greater",fv="GreaterEqual",Al="Identity",SX="IsFinite",AX="IsInf",MX="IsNan",pv="LeakyRelu",DX="Less",EX="LessEqual",mv="Log",hv="Log1p",TX="LogicalAnd",CX="LogicalNot",IX="LogSoftmax",kX="LRN",OX="LRNGrad",dv="Max",gv="Maximum",vv="MaxPool",_X="MaxPoolGrad",xv="MaxPool3D",FX="MaxPool3DGrad",yv="Mean",bv="Min",wv="Minimum",BX="MirrorPad",zX="Mod",Nv="Multiply",Sv="Neg",RX="NotEqual",LX="NonMaxSuppressionV3",qX="NonMaxSuppressionV4",PX="NonMaxSuppressionV5",Av="OnesLike",Mv="OneHot",Dv="Pack",Ev="PadV2",Tv="Pow",Cv="Prelu",$X="Prod",UX="Range",GX="Reciprocal",Iv="Relu",kv="Reshape",Ov="ResizeNearestNeighbor",VX="ResizeNearestNeighborGrad",_v="ResizeBilinear",WX="ResizeBilinearGrad",Fv="Relu6",Bv="Reverse",zv="Round",Rv="Rsqrt",HX="ScatterNd",Lv="Select",qv="Selu",Pv="Slice",$v="Sin",Uv="Sinh",KX="Sign",Gv="Sigmoid",Vv="Softplus",Wv="Sqrt",Hv="Sum",Kv="SpaceToBatchND",jv="SplitV",Zv="Softmax",jX="SparseToDense",ZX="SquaredDifference",XX="Square",Xv="Sub",JX="Tan",Jv="Tanh",Ml="Tile",YX="Transform",Yv="Transpose",Qv="Unpack",ex="UnsortedSegmentSum",tx="ZerosLike",rx="Step",QX="RotateWithOffset",bE="_FusedMatMul",wE="FusedConv2D",NE="FusedDepthwiseConv2D"});function fs(...r){Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.warn(...r)}function Gbe(...r){Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.log(...r)}var nx=g(()=>{jn();});function AE(r,e){let t=Vbe(r,e);return tJ.get(t)}function ME(r){return SE.get(r)}function DE(r){let e=tJ.entries(),t=[];for(;;){let{done:n,value:i}=e.next();if(n)break;let[o,a]=i,[s]=o.split("_");s===r&&t.push(a)}return t}function rJ(r){let{kernelName:e}=r;SE.has(e)&&Ct().getBool("DEBUG")&&fs(`Overriding the gradient for '${e}'`),SE.set(e,r)}function Vbe(r,e){return`${e}_${r}`}var tJ,SE,ix=g(()=>{jn();Pg();nx();tJ=Jp("kernelRegistry",()=>new Map),SE=Jp("gradRegistry",()=>new Map)});var mJ=Re((iut,pJ)=>{pJ.exports=Pr;var vo=null;try{vo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Pr(r,e,t){this.low=r|0,this.high=e|0,this.unsigned=!!t}Pr.prototype.__isLong__;Object.defineProperty(Pr.prototype,"__isLong__",{value:!0});function $i(r){return(r&&r.__isLong__)===!0}Pr.isLong=$i;var nJ={},iJ={};function Gu(r,e){var t,n,i;return e?(r>>>=0,(i=0<=r&&r<256)&&(n=iJ[r],n)?n:(t=$r(r,(r|0)<0?-1:0,!0),i&&(iJ[r]=t),t)):(r|=0,(i=-128<=r&&r<128)&&(n=nJ[r],n)?n:(t=$r(r,r<0?-1:0,!1),i&&(nJ[r]=t),t))}Pr.fromInt=Gu;function xo(r,e){if(isNaN(r))return e?Uu:yo;if(e){if(r<0)return Uu;if(r>=uJ)return fJ}else{if(r<=-aJ)return Pi;if(r+1>=aJ)return lJ}return r<0?xo(-r,e).neg():$r(r%El|0,r/El|0,e)}Pr.fromNumber=xo;function $r(r,e,t){return new Pr(r,e,t)}Pr.fromBits=$r;var ox=Math.pow;function TE(r,e,t){if(r.length===0)throw Error("empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return yo;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=r.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return TE(r.substring(1),e,t).neg();for(var i=xo(ox(t,8)),o=yo,a=0;a<r.length;a+=8){var s=Math.min(8,r.length-a),u=parseInt(r.substring(a,a+s),t);if(s<8){var c=xo(ox(t,s));o=o.mul(c).add(xo(u))}else o=o.mul(i),o=o.add(xo(u))}return o.unsigned=e,o}Pr.fromString=TE;function ea(r,e){return typeof r=="number"?xo(r,e):typeof r=="string"?TE(r,e):$r(r.low,r.high,typeof e=="boolean"?e:r.unsigned)}Pr.fromValue=ea;var oJ=1<<16,Wbe=1<<24,El=oJ*oJ,uJ=El*El,aJ=uJ/2,sJ=Gu(Wbe),yo=Gu(0);Pr.ZERO=yo;var Uu=Gu(0,!0);Pr.UZERO=Uu;var Dl=Gu(1);Pr.ONE=Dl;var cJ=Gu(1,!0);Pr.UONE=cJ;var EE=Gu(-1);Pr.NEG_ONE=EE;var lJ=$r(-1,2147483647,!1);Pr.MAX_VALUE=lJ;var fJ=$r(-1,-1,!0);Pr.MAX_UNSIGNED_VALUE=fJ;var Pi=$r(0,-2147483648,!1);Pr.MIN_VALUE=Pi;var tt=Pr.prototype;tt.toInt=function(){return this.unsigned?this.low>>>0:this.low};tt.toNumber=function(){return this.unsigned?(this.high>>>0)*El+(this.low>>>0):this.high*El+(this.low>>>0)};tt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Pi)){var t=xo(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=xo(ox(e,6),this.unsigned),a=this,s="";;){var u=a.div(o),c=a.sub(u.mul(o)).toInt()>>>0,l=c.toString(e);if(a=u,a.isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}};tt.getHighBits=function(){return this.high};tt.getHighBitsUnsigned=function(){return this.high>>>0};tt.getLowBits=function(){return this.low};tt.getLowBitsUnsigned=function(){return this.low>>>0};tt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Pi)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1};tt.isZero=function(){return this.high===0&&this.low===0};tt.eqz=tt.isZero;tt.isNegative=function(){return!this.unsigned&&this.high<0};tt.isPositive=function(){return this.unsigned||this.high>=0};tt.isOdd=function(){return(this.low&1)===1};tt.isEven=function(){return(this.low&1)===0};tt.equals=function(e){return $i(e)||(e=ea(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};tt.eq=tt.equals;tt.notEquals=function(e){return!this.eq(e)};tt.neq=tt.notEquals;tt.ne=tt.notEquals;tt.lessThan=function(e){return this.comp(e)<0};tt.lt=tt.lessThan;tt.lessThanOrEqual=function(e){return this.comp(e)<=0};tt.lte=tt.lessThanOrEqual;tt.le=tt.lessThanOrEqual;tt.greaterThan=function(e){return this.comp(e)>0};tt.gt=tt.greaterThan;tt.greaterThanOrEqual=function(e){return this.comp(e)>=0};tt.gte=tt.greaterThanOrEqual;tt.ge=tt.greaterThanOrEqual;tt.compare=function(e){if($i(e)||(e=ea(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};tt.comp=tt.compare;tt.negate=function(){return!this.unsigned&&this.eq(Pi)?Pi:this.not().add(Dl)};tt.neg=tt.negate;tt.add=function(e){$i(e)||(e=ea(e));var t=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,s=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,f=0,p=0,m=0;return m+=o+c,p+=m>>>16,m&=65535,p+=i+u,f+=p>>>16,p&=65535,f+=n+s,l+=f>>>16,f&=65535,l+=t+a,l&=65535,$r(p<<16|m,l<<16|f,this.unsigned)};tt.subtract=function(e){return $i(e)||(e=ea(e)),this.add(e.neg())};tt.sub=tt.subtract;tt.multiply=function(e){if(this.isZero())return yo;if($i(e)||(e=ea(e)),vo){var t=vo.mul(this.low,this.high,e.low,e.high);return $r(t,vo.get_high(),this.unsigned)}if(e.isZero())return yo;if(this.eq(Pi))return e.isOdd()?Pi:yo;if(e.eq(Pi))return this.isOdd()?Pi:yo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(sJ)&&e.lt(sJ))return xo(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,s=e.high>>>16,u=e.high&65535,c=e.low>>>16,l=e.low&65535,f=0,p=0,m=0,d=0;return d+=a*l,m+=d>>>16,d&=65535,m+=o*l,p+=m>>>16,m&=65535,m+=a*c,p+=m>>>16,m&=65535,p+=i*l,f+=p>>>16,p&=65535,p+=o*c,f+=p>>>16,p&=65535,p+=a*u,f+=p>>>16,p&=65535,f+=n*l+i*c+o*u+a*s,f&=65535,$r(m<<16|d,f<<16|p,this.unsigned)};tt.mul=tt.multiply;tt.divide=function(e){if($i(e)||(e=ea(e)),e.isZero())throw Error("division by zero");if(vo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?vo.div_u:vo.div_s)(this.low,this.high,e.low,e.high);return $r(t,vo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Uu:yo;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Uu;if(e.gt(this.shru(1)))return cJ;o=Uu}else{if(this.eq(Pi)){if(e.eq(Dl)||e.eq(EE))return Pi;if(e.eq(Pi))return Dl;var a=this.shr(1);return n=a.div(e).shl(1),n.eq(yo)?e.isNegative()?Dl:EE:(i=this.sub(e.mul(n)),o=n.add(i.div(e)),o)}else if(e.eq(Pi))return this.unsigned?Uu:yo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=yo}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:ox(2,s-48),c=xo(n),l=c.mul(e);l.isNegative()||l.gt(i);)n-=u,c=xo(n,this.unsigned),l=c.mul(e);c.isZero()&&(c=Dl),o=o.add(c),i=i.sub(l)}return o};tt.div=tt.divide;tt.modulo=function(e){if($i(e)||(e=ea(e)),vo){var t=(this.unsigned?vo.rem_u:vo.rem_s)(this.low,this.high,e.low,e.high);return $r(t,vo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};tt.mod=tt.modulo;tt.rem=tt.modulo;tt.not=function(){return $r(~this.low,~this.high,this.unsigned)};tt.and=function(e){return $i(e)||(e=ea(e)),$r(this.low&e.low,this.high&e.high,this.unsigned)};tt.or=function(e){return $i(e)||(e=ea(e)),$r(this.low|e.low,this.high|e.high,this.unsigned)};tt.xor=function(e){return $i(e)||(e=ea(e)),$r(this.low^e.low,this.high^e.high,this.unsigned)};tt.shiftLeft=function(e){return $i(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?$r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):$r(0,this.low<<e-32,this.unsigned)};tt.shl=tt.shiftLeft;tt.shiftRight=function(e){return $i(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?$r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):$r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};tt.shr=tt.shiftRight;tt.shiftRightUnsigned=function(e){if($i(e)&&(e=e.toInt()),e&=63,e===0)return this;var t=this.high;if(e<32){var n=this.low;return $r(n>>>e|t<<32-e,t>>>e,this.unsigned)}else return e===32?$r(t,0,this.unsigned):$r(t>>>e-32,0,this.unsigned)};tt.shru=tt.shiftRightUnsigned;tt.shr_u=tt.shiftRightUnsigned;tt.toSigned=function(){return this.unsigned?$r(this.low,this.high,!1):this};tt.toUnsigned=function(){return this.unsigned?this:$r(this.low,this.high,!0)};tt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};tt.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};tt.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Pr.fromBytes=function(e,t,n){return n?Pr.fromBytesLE(e,t):Pr.fromBytesBE(e,t)};Pr.fromBytesLE=function(e,t){return new Pr(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Pr.fromBytesBE=function(e,t){return new Pr(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}});function Yp(r){return Wu.fromString(r,!0,16)}function CE(r){return r.xor(r.shru(47))}function gJ(r,e,t){let n=r.slice(e,e+t);return Wu.fromBytes(Array.from(n),!0,!0)}function Br(r,e){return gJ(r,e,8)}function hJ(r,e){return gJ(r,e,4)}function Fn(r,e){return e===0?r:r.shru(e).or(r.shl(64-e))}function js(r,e,t=Yp("9ddfea08eb382d69")){let n=r.xor(e).mul(t);n=n.xor(n.shru(47));let i=e.xor(n).mul(t);return i=i.xor(i.shru(47)),i=i.mul(t),i}function Hbe(r,e,t,n,i,o){i=i.add(r),o=Fn(o.add(i).add(n),21);let a=i;return i=i.add(e),i=i.add(t),o=o.add(Fn(i,44)),[i.add(n),o.add(a)]}function ax(r,e,t,n){return Hbe(Br(r,e),Br(r,e+8),Br(r,e+16),Br(r,e+24),t,n)}function Kbe(r,e=r.length){if(e>=8){let t=pi.add(e*2),n=Br(r,0).add(pi),i=Br(r,e-8),o=Fn(i,37).mul(t).add(n),a=Fn(n,25).add(i).mul(t);return js(o,a,t)}if(e>=4){let t=pi.add(e*2),n=hJ(r,0);return js(n.shl(3).add(e),hJ(r,e-4),t)}if(e>0){let t=r[0],n=r[e>>1],i=r[e-1],o=t+(n<<8),a=e+(i<<2);return CE(pi.mul(o).xor(dJ.mul(a))).mul(pi)}return pi}function jbe(r,e=r.length){let t=pi.add(e*2),n=Br(r,0).mul(Vu),i=Br(r,8),o=Br(r,e-8).mul(t),a=Br(r,e-16).mul(pi);return js(Fn(n.add(i),43).add(Fn(o,30)).add(a),n.add(Fn(i.add(pi),18)).add(o),t)}function Zbe(r,e=r.length){let t=pi.add(e*2),n=Br(r,0).mul(pi),i=Br(r,8),o=Br(r,e-8).mul(t),a=Br(r,e-16).mul(pi),s=Fn(n.add(i),43).add(Fn(o,30)).add(a),u=js(s,n.add(Fn(i.add(pi),18)).add(o),t),c=Br(r,16).mul(t),l=Br(r,24),f=s.add(Br(r,e-32)).mul(t),p=u.add(Br(r,e-24)).mul(t);return js(Fn(c.add(l),43).add(Fn(f,30)).add(p),c.add(Fn(l.add(n),18)).add(f),t)}function Xbe(r,e=r.length){let t=Wu.fromNumber(81,!0);if(e<=32)return e<=16?Kbe(r,e):jbe(r,e);if(e<=64)return Zbe(r,e);let n=t,i=t.mul(Vu).add(113),o=CE(i.mul(pi).add(113)).mul(pi),a=[Wu.UZERO,Wu.UZERO],s=[Wu.UZERO,Wu.UZERO];n=n.mul(pi).add(Br(r,0));let u=0,c=(e-1>>6)*64,l=c+(e-1&63)-63;do n=Fn(n.add(i).add(a[0]).add(Br(r,u+8)),37).mul(Vu),i=Fn(i.add(a[1]).add(Br(r,u+48)),42).mul(Vu),n=n.xor(s[1]),i=i.add(a[0]).add(Br(r,u+40)),o=Fn(o.add(s[0]),33).mul(Vu),a=ax(r,u,a[1].mul(Vu),n.add(s[0])),s=ax(r,u+32,o.add(s[1]),i.add(Br(r,u+16))),[o,n]=[n,o],u+=64;while(u!==c);let f=Vu.add(o.and(255).shl(1));return u=l,s[0]=s[0].add(e-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),n=Fn(n.add(i).add(a[0]).add(Br(r,u+8)),37).mul(f),i=Fn(i.add(a[1]).add(Br(r,u+48)),42).mul(f),n=n.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(Br(r,u+40))),o=Fn(o.add(s[0]),33).mul(f),a=ax(r,u,a[1].mul(f),n.add(s[0])),s=ax(r,u+32,o.add(s[1]),i.add(Br(r,u+16))),[o,n]=[n,o],js(js(a[0],s[0],f).add(CE(i).mul(dJ)).add(o),js(a[1],s[1],f).add(n),f)}var IE,Wu,dJ,Vu,pi,vJ=g(()=>{IE=Si(mJ());Wu=IE.default||IE;dJ=Yp("c3a5c85c97cb3127"),Vu=Yp("b492b66fbe98f273"),pi=Yp("9ae16a3b2f90404f")});var Fe={};Is(Fe,{arraysEqual:()=>ka,assert:()=>W,assertNonNegativeIntegerDimensions:()=>Kp,assertNonNull:()=>Wp,assertShapesMatch:()=>Lg,bytesFromStringArray:()=>gE,bytesPerElement:()=>qg,checkConversionForErrors:()=>hE,clamp:()=>gl,computeStrides:()=>Oa,createScalarValue:()=>Jbe,createShuffledIndices:()=>Ibe,decodeString:()=>Il,distSquared:()=>Dbe,encodeString:()=>Cl,fetch:()=>Qbe,fingerPrint64:()=>Xbe,flatten:()=>Ks,getArrayFromDType:()=>mE,getTypedArrayFromDType:()=>_be,hasEncodingLoss:()=>Fbe,hexToLong:()=>Yp,indexToLoc:()=>Rbe,inferDtype:()=>xl,inferFromImplicitShape:()=>Obe,isBoolean:()=>RZ,isFunction:()=>yl,isInt:()=>Pu,isNumber:()=>LZ,isPromise:()=>jp,isScalarShape:()=>Ebe,isString:()=>vl,isTypedArray:()=>qi,isValidDtype:()=>dE,locToIndex:()=>zbe,makeOnesTypedArray:()=>Hp,makeZerosNestedTypedArray:()=>Bbe,makeZerosTypedArray:()=>wl,nearestDivisor:()=>bl,nearestLargerEven:()=>Sbe,now:()=>Hu,parseAxisParam:()=>En,randUniform:()=>Mbe,repeatedTry:()=>kbe,rightPad:()=>$u,shuffle:()=>zZ,shuffleCombo:()=>Nbe,sizeFromShape:()=>Yt,sizeToSquarishShape:()=>Cbe,squeezeShape:()=>pE,sum:()=>Abe,swap:()=>Rg,tanh:()=>Tbe,toNestedArray:()=>qu,toTypedArray:()=>Tl});function Jbe(r,e){return e==="string"?Cl(r):Tl([r],e)}function Ybe(r,e){return r instanceof Float32Array&&e==="float32"||r instanceof Int32Array&&e==="int32"||r instanceof Uint8Array&&e==="bool"}function Tl(r,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(r)&&(r=Ks(r)),Ct().getBool("DEBUG")&&hE(r,e),Ybe(r,e))return r;if(e==null||e==="float32"||e==="complex64")return new Float32Array(r);if(e==="int32")return new Int32Array(r);if(e==="bool"){let t=new Uint8Array(r.length);for(let n=0;n<t.length;++n)Math.round(r[n])!==0&&(t[n]=1);return t}else throw new Error(`Unknown data type ${e}`)}function Hu(){return Ct().platform.now()}function Qbe(r,e){return Ct().platform.fetch(r,e)}function Cl(r,e="utf-8"){return e=e||"utf-8",Ct().platform.encode(r,e)}function Il(r,e="utf-8"){return e=e||"utf-8",Ct().platform.decode(r,e)}var $e=g(()=>{jn();Zp();Zp();vJ();});function e1e(r,e,t){if(e!=="float32")return!1;for(let n=0;n<r.length;n++){let i=r[n];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${t}'`),!0}return!1}var sx,kE,xJ=g(()=>{jn();$e();sx=class{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new kE)}profileKernel(e,t,n){let i,o=()=>{i=n()},a,s=Hu();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(let c of i)c.dataSync();a=Promise.resolve({kernelMs:Hu()-s})}if(Ct().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){let l=i[c];l.data().then(f=>{e1e(f,l.dtype,e)})}return{kernelName:e,outputs:i,inputs:t,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:i,inputs:o,extraInfo:a}=e;n.forEach(s=>{Promise.all([s.data(),i,a]).then(u=>{this.logger.logKernelProfile(t,s,u[0],u[1],o,u[2])})})}};kE=class{logKernelProfile(e,t,n,i,o,a){let s=typeof i=="number"?$u(`${i}ms`,9):i.error,u=$u(e,25),c=t.rank,l=t.size,f=$u(t.shape.toString(),14),p="";for(let m in o){let d=o[m];if(d!=null){let h=d.shape||t.shape,x=h.length;p+=`${m}: ${x}D ${x>0?h:""} `}}console.log(`%c${u}	%c${s}	%c${c}D ${f}	%c${l}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function yJ(r,e,t){let n={},i={};for(let u=0;u<e.length;u++)n[e[u].id]=!0;for(let u=0;u<r.length;u++){let c=r[u],l=c.inputs;for(let f in l){let p=l[f],m=!1;for(let d=0;d<e.length;d++)if(n[p.id]){c.outputs.forEach(h=>n[h.id]=!0),m=!0,i[c.id]=!0;break}if(m)break}}let o={};o[t.id]=!0;let a={};for(let u=r.length-1;u>=0;u--){let c=r[u],l=c.inputs;for(let f=0;f<c.outputs.length;f++)if(o[c.outputs[f].id]){for(let p in l)o[l[p].id]=!0,a[c.id]=!0;break}}let s=[];for(let u=0;u<r.length;u++){let c=r[u];if(i[c.id]&&a[c.id]){let l={};for(let p in c.inputs){let m=c.inputs[p];n[m.id]&&(l[p]=m)}let f=Object.assign({},c);f.inputs=l,f.outputs=c.outputs,s.push(f)}}return s}function bJ(r,e,t,n){for(let i=e.length-1;i>=0;i--){let o=e[i],a=[];if(o.outputs.forEach(u=>{let c=r[u.id];c!=null?a.push(c):a.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);let s=o.gradient(a);for(let u in o.inputs){if(!(u in s))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(s)}.`);let c=t(()=>s[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let l=o.inputs[u];if(!ka(c.shape,l.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${l.shape}'`);if(r[l.id]==null)r[l.id]=c;else{let f=r[l.id];r[l.id]=n(f,c),f.dispose()}}}}var wJ=g(()=>{$e();});function SJ(r,e,t,n){let i=Oa(e),o=t1e(r,e,t,i),a=e.length,s=ux(r,e,t,i,o),u=["Tensor"];return n&&(u.push(`  dtype: ${t}`),u.push(`  rank: ${a}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(s.map(c=>"    "+c).join(`
`)),u.join(`
`)}function t1e(r,e,t,n){let i=Yt(e),o=n[n.length-1],a=new Array(o).fill(0),s=e.length,u=t==="complex64"?tm(r):r;if(s>1)for(let c=0;c<i/o;c++){let l=c*o;for(let f=0;f<o;f++)a[f]=Math.max(a[f],em(u[l+f],0,t).length)}return a}function em(r,e,t){let n;return Array.isArray(r)?n=`${parseFloat(r[0].toFixed(OE))} + ${parseFloat(r[1].toFixed(OE))}j`:vl(r)?n=`'${r}'`:t==="bool"?n=AJ(r):n=parseFloat(r.toFixed(OE)).toString(),$u(n,e)}function AJ(r){return r===0?"false":"true"}function ux(r,e,t,n,i,o=!0){let a=t==="complex64"?2:1,s=e[0],u=e.length;if(u===0){if(t==="complex64"){let h=tm(r);return[em(h[0],0,t)]}return t==="bool"?[AJ(r[0])]:[r[0].toString()]}if(u===1){if(s>NJ){let x=Qp*a,y=Array.from(r.slice(0,x)),N=Array.from(r.slice((s-Qp)*a,s*a));return t==="complex64"&&(y=tm(y),N=tm(N)),["["+y.map((v,w)=>em(v,i[w],t)).join(", ")+", ..., "+N.map((v,w)=>em(v,i[s-Qp+w],t)).join(", ")+"]"]}let h=t==="complex64"?tm(r):Array.from(r);return["["+h.map((x,y)=>em(x,i[y],t)).join(", ")+"]"]}let c=e.slice(1),l=n.slice(1),f=n[0]*a,p=[];if(s>NJ){for(let h=0;h<Qp;h++){let x=h*f,y=x+f;p.push(...ux(r.slice(x,y),c,t,l,i,!1))}p.push("...");for(let h=s-Qp;h<s;h++){let x=h*f,y=x+f;p.push(...ux(r.slice(x,y),c,t,l,i,h===s-1))}}else for(let h=0;h<s;h++){let x=h*f,y=x+f;p.push(...ux(r.slice(x,y),c,t,l,i,h===s-1))}let m=u===2?",":"";p[0]="["+p[0]+m;for(let h=1;h<p.length-1;h++)p[h]=" "+p[h]+m;let d=`,
`;for(let h=2;h<u;h++)d+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":d),p}function tm(r){let e=[];for(let t=0;t<r.length;t+=2)e.push([r[t],r[t+1]]);return e}var NJ,Qp,OE,MJ=g(()=>{$e();NJ=20,Qp=3,OE=7});function DJ(r){ta=r}function EJ(r){kl=r}function TJ(r){r1e=r}function n1e(){return Jp("Tensor",()=>Ar)}var rm,ta,kl,r1e,Ar,ps,_a=g(()=>{Pg();MJ();$e();$e();rm=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Yt(e),n!=null){let i=n.length;W(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||mE(t,this.size),this.strides=Oa(e)}set(e,...t){t.length===0&&(t=[0]),W(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(let i of e){if(i<0||i>=this.shape[t]){let o=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(o)}t++}let n=e[e.length-1];for(let i=0;i<e.length-1;++i)n+=this.strides[i]*e[i];return this.values[n]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return ta().makeTensor(this.values,this.shape,this.dtype)}},ta=null,kl=null,r1e=null;Ar=class{constructor(e,t,n,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Yt(e),this.strides=Oa(e),this.dataId=n,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return kl.buffer(this.shape,this.dtype,e)}bufferSync(){return kl.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return qu(this.shape,e,this.dtype==="complex64")}arraySync(){return qu(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=ta().read(this.dataId);if(this.dtype==="string"){let t=await e;try{return t.map(n=>Il(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ta().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=ta().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>Il(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await ta().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(ta().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return kl.print(this,e)}clone(){return this.throwIfDisposed(),kl.clone(this)}toString(e=!1){let t=this.dataSync();return SJ(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),kl.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),ta().makeVariable(this,e,t,n)}};Object.defineProperty(Ar,Symbol.hasInstance,{value:r=>!!r&&r.data!=null&&r.dataSync!=null&&r.throwIfDisposed!=null});n1e();ps=class extends Ar{constructor(e,t,n,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ka(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ta().disposeTensor(this),this.dataId=e.dataId,ta().incRef(this,null)}dispose(){ta().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(ps,Symbol.hasInstance,{value:r=>r instanceof Ar&&r.assign!=null&&r.assign instanceof Function})});function cx(r,e){if(r==="string"||e==="string"){if(r==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${r} with ${e}`)}return i1e[r][e]}var CJ,_E,FE,BE,zE,i1e,RE=g(()=>{(function(r){r.R0="R0",r.R1="R1",r.R2="R2",r.R3="R3",r.R4="R4",r.R5="R5",r.R6="R6"})(CJ||(CJ={}));(function(r){r.float32="float32",r.int32="int32",r.bool="int32",r.complex64="complex64"})(_E||(_E={}));(function(r){r.float32="float32",r.int32="int32",r.bool="bool",r.complex64="complex64"})(FE||(FE={}));(function(r){r.float32="float32",r.int32="float32",r.bool="float32",r.complex64="complex64"})(BE||(BE={}));(function(r){r.float32="complex64",r.int32="complex64",r.bool="complex64",r.complex64="complex64"})(zE||(zE={}));i1e={float32:BE,int32:_E,bool:FE,complex64:zE}});function jt(r,e){if(r.dtype===e.dtype)return[r,e];let t=cx(r.dtype,e.dtype);return[r.cast(t),e.cast(t)]}function IJ(r,e){W(r.dtype===e.dtype,()=>`The dtypes of the first(${r.dtype}) and second(${e.dtype}) input must match`)}function lx(r){let e=[];return kJ(r,e,new Set),e}function kJ(r,e,t){if(r==null)return;if(r instanceof Ar){e.push(r);return}if(!o1e(r))return;let n=r;for(let i in n){let o=n[i];t.has(o)||(t.add(o),kJ(o,e,t))}}function o1e(r){return Array.isArray(r)||typeof r=="object"}var mn=g(()=>{_a();RE();$e();});function LE(r){return r.kernelName!=null}function a1e(r){let e=Hp(Yt(r),"float32");return H.makeTensor(e,r,"float32")}function qE(){let r=yE();if(r._tfengine==null){let e=new Xp(r);r._tfengine=new Zs(e)}return $Z(r._tfengine.ENV),DJ(()=>r._tfengine),r._tfengine}function s1e(r,e){let t={a:r,b:e};return H.runKernel(Nl,t)}var fx,Zs,H,Ce=g(()=>{BZ();jn();Pg();fe();ix();nx();xJ();wJ();_a();mn();$e();$e();fx=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},Zs=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new fx}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success){await this.setBackend(n);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(fs(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new sx(this.backendInstance),!0}setupRegisteredKernels(){DE(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){DE(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=t.factory();if(n&&!(n instanceof zg)&&typeof n.then=="function"){let i=++this.pendingBackendInitId,o=n.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,fs(`Initialization of backend ${e} failed`),fs(a.stack||a.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=n,{success:!0,asyncInit:!1}}catch(n){return fs(`Initialization of backend ${e} failed`),fs(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:i,asyncInit:o}=this.initializeBackend(n);if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),i=n.backend,o=this.readSync(t),a=i.refCount(t);i.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}let i;return this.scopedRun(()=>this.startScope(n),()=>this.endScope(i),()=>(i=t(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,t,n){e();try{let i=n();return t(),i}catch(i){throw t(),i}}nextTensorId(){return Zs.nextTensorId++}nextVariableId(){return Zs.nextVariableId++}clone(e){let t=H.runKernel(Al,{x:e}),n={x:e},i=a=>({x:()=>{let s="float32",u={x:a},c={dtype:s};return H.runKernel(Sl,u,c)}}),o=[];return this.addTapeNode(this.state.activeScope.name,n,[t],i,o,{}),t}runKernel(e,t,n){if(this.backendName==null&&this.backend,!(AE(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let i=this.backend.numDataIds(),o=0;n.forEach(u=>{o+=u.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-t-o-a;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[],i=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let u,c=LE(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(LE(e)){let{kernelName:d,inputs:h,attrs:x}=e;this.backendName==null&&this.backend;let y=AE(d,this.backendName);W(y!=null,()=>`Cannot find registered kernel '${d}' for backend '${this.backendName}'`),s=()=>{let N=this.backend.numDataIds();u=y.kernelFunc({inputs:h,attrs:x,backend:this.backend});let v=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(d,N,v);let w=v.map(S=>{if(S.rank!=null)return S;let{dataId:b,shape:E,dtype:M}=S;return this.makeTensorFromDataId(b,E,M)});if(i){let S=this.getTensorsForGradient(d,h,w);n=this.saveTensorsForBackwardMode(S)}return w}}else{let{forwardFunc:d}=e,h=x=>{!i||(n=x.map(y=>this.keep(this.clone(y))))};s=()=>{let x=this.backend.numDataIds();u=this.tidy(()=>d(this.backend,h));let y=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,x,y),y}}let{inputs:l,attrs:f}=e,p=LE(e)?null:e.backwardsFunc,m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=s():(m=this.profiler.profileKernel(c,l,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),t=m.outputs)}),i&&this.addTapeNode(c,l,t,p,n,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(d=>l[d]!=null?l[d].shape:null),outputShapes:t.map(d=>d.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(u)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,t,n){let i=ME(e);if(i!=null){let o=i.inputsToSave||[],a=i.outputsToSave||[],s;i.saveAllInputs?(W(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(c=>t[c])):s=o.map(c=>t[c]);let u=n.filter((c,l)=>a[l]);return s.concat(u)}return[]}makeTensor(e,t,n,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",i=i||this.backend;let o=e;n==="string"&&vl(e[0])&&(o=e.map(u=>Cl(u)));let a=i.write(o,t,n),s=new Ar(t,n,a,this.nextTensorId());if(this.trackTensor(s,i),n==="string"){let u=this.state.tensorInfo.get(a),c=gE(o);this.state.numBytes+=c-u.bytes,u.bytes=c}return s}makeTensorFromDataId(e,t,n,i){n=n||"float32";let o=new Ar(t,n,e,this.nextTensorId());return this.trackTensor(o,i),o}makeVariable(e,t=!0,n,i){n=n||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));let o=new ps(e,t,n,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let n=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(n=e.size*qg(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof ps||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let n=e.size*qg(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,n,i,o,a){let s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},u=ME(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=c=>(c=c.map((l,f)=>{if(l==null){let p=n[f],m=wl(p.size,p.dtype);return this.makeTensor(m,p.shape,p.dtype)}return l}),i(c.length>1?c:c[0],o,a))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=lx(e),n=new Set(t.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){let a=this.state.activeScope.track[o];!a.kept&&!n.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(o=>{!o.kept&&o.scopeId===i.id&&this.track(o)})}gradients(e,t,n,i=!1){if(W(t.length>0,()=>"gradients() received an empty list of xs."),n!=null&&n.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));W(o instanceof Ar,()=>"The result y returned by f() must be a tensor.");let a=yJ(this.state.activeTape,t,o);if(!i&&a.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let s={};s[o.id]=n??a1e(o.shape),bJ(s,a,c=>this.tidy(c),s1e);let u=t.map(c=>s[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(let l of c.saved)l.dispose()}),this.state.activeTape=null),{value:o,grads:u}})}customGrad(e){return W(yl(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{W(t.every(s=>s instanceof Ar),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,i={};t.forEach((s,u)=>{i[u]=s});let o=(s,u)=>(n=e(...t,u),W(n.value instanceof Ar,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),W(yl(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),a=(s,u)=>{let c=n.gradFunc(s,u),l=Array.isArray(c)?c:[c];W(l.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),W(l.every(p=>p instanceof Ar),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let f={};return l.forEach((p,m)=>{f[m]=()=>p}),f};return this.runKernelFunc({forwardFunc:o,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=Hu(),n=await this.backend.time(e);return n.wallMs=Hu()-t,n}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new fx;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};Zs.nextTensorId=0;Zs.nextVariableId=0;H=qE()});function OJ(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var _J=g(()=>{});var bo,Ol=g(()=>{Ce();_J();jn();bo=Ct();bo.registerFlag("DEBUG",()=>!1,r=>{r&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});bo.registerFlag("IS_BROWSER",()=>OJ());bo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");bo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));bo.registerFlag("PROD",()=>!1);bo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>bo.getBool("DEBUG"));bo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);bo.registerFlag("IS_TEST",()=>!1);bo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);bo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);bo.registerFlag("ENGINE_COMPILE_ONLY",()=>!1)});function Ku(r,e){let t=r;if(qi(r))return e==="string"?[]:[r.length];if(!Array.isArray(r))return[];let n=[];for(;Array.isArray(t)||qi(t)&&e!=="string";)n.push(t.length),t=t[0];return Array.isArray(r)&&Ct().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&BJ(r,n,[]),n}function BJ(r,e,t){if(t=t||[],!Array.isArray(r)&&!qi(r)){W(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}W(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${r.length} elements`),W(r.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${r.length} elements`);let n=e.slice(1);for(let i=0;i<r.length;++i)BJ(r[i],n,t.concat(i))}function FJ(r,e,t,n){if(r!=="string_or_numeric"){if(r==null)throw new Error("Expected dtype cannot be null.");if(r!=="numeric"&&r!==e||r==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${n}' must be ${r} tensor, but got ${e} tensor`)}}function U(r,e,t,n="numeric"){if(r instanceof Ar)return FJ(n,r.dtype,e,t),r;let i=xl(r);if(i!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(i=n),FJ(n,i,e,t),r==null||!qi(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string"){let u=r==null?"null":r.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${u}'`)}let o=Ku(r,i);!qi(r)&&!Array.isArray(r)&&(r=[r]);let s=i!=="string"?Tl(r,i):Ks(r,[],!0);return H.makeTensor(s,o,i)}function px(r,e,t,n="numeric"){if(!Array.isArray(r))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return r.map((o,a)=>U(o,`${e}[${a}]`,t,n))}var ke=g(()=>{Ce();jn();_a();$e();});function J(r){let e=Object.keys(r);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0],n=r[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+c1e;let i=(...o)=>{H.startScope(t);try{let a=n(...o);return jp(a)&&console.error("Cannot return a Promise inside of tidy."),H.endScope(a),a}catch(a){throw H.endScope(null),a}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}var c1e,Te=g(()=>{Ce();$e();c1e="__op"});function l1e(r,e){let t=U(r,"real","complex"),n=U(e,"imag","complex");Lg(t.shape,n.shape,`real and imag shapes, ${t.shape} and ${n.shape}, must match in call to tf.complex().`);let i={real:t,imag:n};return H.runKernel(iX,i)}var _l,mx=g(()=>{Ce();fe();ke();$e();Te();_l=J({complex_:l1e})});function Xs(r,e,t,n){if(n==null&&(n=xl(r)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!qi(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Kp(e);let i=Yt(e),o=Yt(t);W(i===o,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${o}`);for(let a=0;a<t.length;++a){let s=t[a],u=a===t.length-1?s!==Yt(e.slice(a)):!0;W(t[a]===e[a]||!u,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!qi(r)&&!Array.isArray(r)&&(r=[r]),e=e||t,r=n!=="string"?Tl(r,n):Ks(r,[],!0),H.makeTensor(r,e,n)}var nm=g(()=>{Ce();$e();});function Fl(r,e,t){let n=Ku(r,t);return Xs(r,e,n,t)}var PE=g(()=>{ke();nm();});var im,$E=g(()=>{im={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});async function RJ(r,e){let t=[],n=[],i=Array.isArray(r)?r.map(a=>a.name):Object.keys(r);for(let a=0;a<i.length;++a){let s=i[a],u=Array.isArray(r)?r[a].tensor:r[s];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${u.dtype}`);let c={name:s,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let l=new Promise(async f=>{let p=await u.bytes(),m=p.reduce((x,y)=>x+y.length,0)+hx*p.length,d=new Uint8Array(m),h=0;for(let x=0;x<p.length;x++){let y=p[x],N=new Uint8Array(new Uint32Array([y.length]).buffer);d.set(N,h),h+=hx,d.set(y,h),h+=y.length}f(d)});n.push(l)}else n.push(u.data());e!=null&&(c.group=e),t.push(c)}let o=await Promise.all(n);return{data:f1e(o),specs:t}}function dx(r,e){let t={},n,i=0;for(let o of e){let a=o.name,s=o.dtype,u=o.shape,c=Yt(u),l;if("quantization"in o){let f=o.quantization;if(f.dtype==="uint8"||f.dtype==="uint16"){if(!("min"in f&&"scale"in f))throw new Error(`Weight ${o.name} with quantization ${f.dtype} doesn't have corresponding metadata min and scale.`)}else if(f.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${o.name} is quantized with ${f.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${o.name} has unknown quantization dtype ${f.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let p=im[f.dtype],m=r.slice(i,i+c*p),d=f.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(s==="float32")if(f.dtype==="uint8"||f.dtype==="uint16"){l=new Float32Array(d.length);for(let h=0;h<d.length;h++){let x=d[h];l[h]=x*f.scale+f.min}}else if(f.dtype==="float16")n===void 0&&(n=d1e()),l=n(d);else throw new Error(`Unsupported quantization type ${f.dtype} for weight type float32.`);else if(s==="int32"){if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error(`Unsupported quantization type ${f.dtype} for weight type int32.`);l=new Int32Array(d.length);for(let h=0;h<d.length;h++){let x=d[h];l[h]=Math.round(x*f.scale+f.min)}}else throw new Error(`Unsupported dtype in weight '${a}': ${s}`);i+=c*p}else if(s==="string"){let f=Yt(o.shape);l=[];for(let p=0;p<f;p++){let m=new Uint32Array(r.slice(i,i+hx))[0];i+=hx;let d=new Uint8Array(r.slice(i,i+m));l.push(d),i+=m}}else{let f=im[s],p=r.slice(i,i+c*f);if(s==="float32")l=new Float32Array(p);else if(s==="int32")l=new Int32Array(p);else if(s==="bool")l=new Uint8Array(p);else if(s==="complex64"){l=new Float32Array(p);let m=new Float32Array(l.length/2),d=new Float32Array(l.length/2);for(let y=0;y<m.length;y++)m[y]=l[y*2],d[y]=l[y*2+1];let h=Fl(m,u,"float32"),x=Fl(d,u,"float32");t[a]=_l(h,x),h.dispose(),x.dispose()}else throw new Error(`Unsupported dtype in weight '${a}': ${s}`);i+=c*f}s!=="complex64"&&(t[a]=Fl(l,u,s))}return t}function f1e(r){if(r===null)throw new Error(`Invalid input value: ${JSON.stringify(r)}`);let e=0,t=[];r.forEach(o=>{if(e+=o.byteLength,t.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});let n=new Uint8Array(e),i=0;return t.forEach(o=>{n.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),n.buffer}function zJ(r){return UE?Buffer.byteLength(r):new Blob([r]).size}function LJ(r){if(UE)return Buffer.from(r).toString("base64");let e=new Uint8Array(r),t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function qJ(r){if(UE){let n=Buffer.from(r,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}let e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t.set([e.charCodeAt(n)],n);return t.buffer}function Bl(r){if(r.length===1)return r[0];let e=0;r.forEach(i=>{e+=i.byteLength});let t=new Uint8Array(e),n=0;return r.forEach(i=>{t.set(new Uint8Array(i),n),n+=i.byteLength}),t.buffer}function GE(r){let e="/";for(r=r.trim();r.endsWith(e);)r=r.slice(0,r.length-1);let t=r.split(e);return t[t.length-1]}function gx(r,e){let t={modelTopology:r.modelTopology,format:r.format,generatedBy:r.generatedBy,convertedBy:r.convertedBy,weightsManifest:e};return r.signature!=null&&(t.signature=r.signature),r.userDefinedMetadata!=null&&(t.userDefinedMetadata=r.userDefinedMetadata),r.modelInitializer!=null&&(t.modelInitializer=r.modelInitializer),r.trainingConfig!=null&&(t.trainingConfig=r.trainingConfig),t}async function zl(r,e){let t={modelTopology:r.modelTopology,format:r.format,generatedBy:r.generatedBy,convertedBy:r.convertedBy};if(r.trainingConfig!=null&&(t.trainingConfig=r.trainingConfig),r.weightsManifest!=null){let[n,i]=await e(r.weightsManifest);t.weightSpecs=n,t.weightData=i}return r.signature!=null&&(t.signature=r.signature),r.userDefinedMetadata!=null&&(t.userDefinedMetadata=r.userDefinedMetadata),r.modelInitializer!=null&&(t.modelInitializer=r.modelInitializer),t}function Fa(r){if(r.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:r.modelTopology==null?0:zJ(JSON.stringify(r.modelTopology)),weightSpecsBytes:r.weightSpecs==null?0:zJ(JSON.stringify(r.weightSpecs)),weightDataBytes:r.weightData==null?0:r.weightData.byteLength}}function p1e(){let r=t=>{let n=t<<13,i=0;for(;(n&8388608)===0;)i-=8388608,n<<=1;return n&=-8388609,i+=947912704,n|i},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=r(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function m1e(){let r=new Uint32Array(64);r[0]=0,r[31]=1199570944,r[32]=2147483648,r[63]=3347054592;for(let e=1;e<31;e++)r[e]=e<<23;for(let e=33;e<63;e++)r[e]=2147483648+(e-32<<23);return r}function h1e(){let r=new Uint32Array(64);for(let e=0;e<64;e++)r[e]=1024;return r[0]=r[32]=0,r}function d1e(){let r=p1e(),e=m1e(),t=h1e();return n=>{let i=new ArrayBuffer(4*n.length),o=new Uint32Array(i);for(let a=0;a<n.length;a++){let s=n[a],u=r[t[s>>10]+(s&1023)]+e[s>>10];o[a]=u}return new Float32Array(i)}}var hx,UE,ju=g(()=>{mx();PE();$e();$E();hx=4;UE=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var vr,PJ,$J,UJ,GJ,Zu=g(()=>{vr=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return vr.instance==null&&(vr.instance=new vr),vr.instance}static registerSaveRouter(e){vr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){vr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return vr.getHandlers(e,"save")}static getLoadHandlers(e,t){return vr.getHandlers(e,"load",t)}static getHandlers(e,t,n){let i=[];return(t==="load"?vr.getInstance().loadRouters:vr.getInstance().saveRouters).forEach(a=>{let s=a(e,n);s!==null&&i.push(s)}),i}},PJ=r=>vr.registerSaveRouter(r),$J=r=>vr.registerLoadRouter(r),UJ=r=>vr.getSaveHandlers(r),GJ=(r,e)=>vr.getLoadHandlers(r,e)});function VJ(){if(!Ct().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let r=typeof window>"u"?self:window,e=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB||r.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function HE(r){let e=r.result;e.createObjectStore(Xu,{keyPath:"modelPath"}),e.createObjectStore(Js,{keyPath:"modelPath"})}function g1e(r){return new Ba(r)}function v1e(r){return r.startsWith(Ba.URL_SCHEME)?r.slice(Ba.URL_SCHEME.length):r}var VE,WE,Xu,Js,Ba,WJ,vx,KE=g(()=>{Ol();jn();ju();Zu();VE="tensorflowjs",WE=1,Xu="models_store",Js="model_info_store";Ba=class{constructor(e){if(this.indexedDB=VJ(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((n,i)=>{let o=this.indexedDB.open(VE,WE);o.onupgradeneeded=()=>HE(o),o.onsuccess=()=>{let a=o.result;if(t==null){let s=a.transaction(Xu,"readonly"),c=s.objectStore(Xu).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));n(c.result.modelArtifacts)},c.onerror=l=>(a.close(),i(c.error)),s.oncomplete=()=>a.close()}else{let s=Fa(t),u=a.transaction(Js,"readwrite"),c=u.objectStore(Js),l=c.put({modelPath:this.modelPath,modelArtifactsInfo:s}),f;l.onsuccess=()=>{f=a.transaction(Xu,"readwrite");let m=f.objectStore(Xu).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s});m.onsuccess=()=>n({modelArtifactsInfo:s}),m.onerror=d=>{c=u.objectStore(Js);let h=c.delete(this.modelPath);h.onsuccess=()=>(a.close(),i(m.error)),h.onerror=x=>(a.close(),i(m.error))}},l.onerror=p=>(a.close(),i(l.error)),u.oncomplete=()=>{f==null?a.close():f.oncomplete=()=>a.close()}}},o.onerror=a=>i(o.error)})}};Ba.URL_SCHEME="indexeddb://";WJ=r=>Ct().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(Ba.URL_SCHEME)?g1e(r.slice(Ba.URL_SCHEME.length)):null;vr.registerSaveRouter(WJ);vr.registerLoadRouter(WJ);vx=class{constructor(){this.indexedDB=VJ()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(VE,WE);n.onupgradeneeded=()=>HE(n),n.onsuccess=()=>{let i=n.result,o=i.transaction(Js,"readonly"),s=o.objectStore(Js).getAll();s.onsuccess=()=>{let u={};for(let c of s.result)u[c.modelPath]=c.modelArtifactsInfo;e(u)},s.onerror=u=>(i.close(),t(s.error)),o.oncomplete=()=>i.close()},n.onerror=i=>t(n.error)})}async removeModel(e){return e=v1e(e),new Promise((t,n)=>{let i=this.indexedDB.open(VE,WE);i.onupgradeneeded=()=>HE(i),i.onsuccess=()=>{let o=i.result,a=o.transaction(Js,"readwrite"),s=a.objectStore(Js),u=s.get(e),c;u.onsuccess=()=>{if(u.result==null)return o.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let l=s.delete(e),f=()=>{c=o.transaction(Xu,"readwrite");let m=c.objectStore(Xu).delete(e);m.onsuccess=()=>t(u.result.modelArtifactsInfo),m.onerror=d=>n(u.error)};l.onsuccess=f,l.onerror=p=>(f(),o.close(),n(u.error))}},u.onerror=l=>(o.close(),n(u.error)),a.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},i.onerror=o=>n(i.error)})}}});function KJ(r){return{info:[Rl,r,HJ].join(ms),topology:[Rl,r,x1e].join(ms),weightSpecs:[Rl,r,y1e].join(ms),weightData:[Rl,r,b1e].join(ms),modelMetadata:[Rl,r,w1e].join(ms)}}function jJ(r){for(let e of Object.values(r))window.localStorage.removeItem(e)}function N1e(r){let e=r.split(ms);if(e.length<3)throw new Error(`Invalid key format: ${r}`);return e.slice(1,e.length-1).join(ms)}function S1e(r){return r.startsWith(za.URL_SCHEME)?r.slice(za.URL_SCHEME.length):r}function A1e(r){return new za(r)}var ms,Rl,HJ,x1e,y1e,b1e,w1e,za,ZJ,xx,jE=g(()=>{Ol();jn();$e();ju();Zu();ms="/",Rl="tensorflowjs_models",HJ="info",x1e="model_topology",y1e="weight_specs",b1e="weight_data",w1e="model_metadata";za=class{constructor(e){if(!Ct().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=KJ(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),i=Fa(e);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,LJ(e.weightData));let o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw jJ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(n==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=i;let o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){let s=JSON.parse(o);t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,s.signature!=null&&(t.signature=s.signature),s.userDefinedMetadata!=null&&(t.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(t.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(t.trainingConfig=s.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=qJ(a),t}};za.URL_SCHEME="localstorage://";ZJ=r=>Ct().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(za.URL_SCHEME)?A1e(r.slice(za.URL_SCHEME.length)):null;vr.registerSaveRouter(ZJ);vr.registerLoadRouter(ZJ);xx=class{constructor(){W(Ct().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),W(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=Rl+ms,n=ms+HJ;for(let i=0;i<this.LS.length;++i){let o=this.LS.key(i);if(o.startsWith(t)&&o.endsWith(n)){let a=N1e(o);e[a]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){e=S1e(e);let t=KJ(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);let n=JSON.parse(this.LS.getItem(t.info));return jJ(t),n}}});function yx(r){if(r.indexOf(Ll)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Zn.getSchemes().join(",")}`);return{scheme:r.split(Ll)[0],path:r.split(Ll)[1]}}async function XJ(r,e,t=!1){W(r!==e,()=>`Old path and new path are the same: '${r}'`);let n=vr.getLoadHandlers(r);W(n.length>0,()=>`Copying failed because no load handler is found for source URL ${r}.`),W(n.length<2,()=>`Copying failed because more than one (${n.length}) load handlers for source URL ${r}.`);let i=n[0],o=vr.getSaveHandlers(e);W(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),W(o.length<2,()=>`Copying failed because more than one (${n.length}) save handlers for destination URL ${e}.`);let a=o[0],s=yx(r).scheme,u=yx(r).path,c=s===yx(r).scheme,l=await i.load();t&&c&&await Zn.getManager(s).removeModel(u);let f=await a.save(l);return t&&!c&&await Zn.getManager(s).removeModel(u),f.modelArtifactsInfo}async function JJ(){let r=Zn.getSchemes(),e={};for(let t of r){let n=await Zn.getManager(t).listModels();for(let i in n){let o=t+Ll+i;e[o]=n[i]}}return e}async function YJ(r){let e=yx(r);return Zn.getManager(e.scheme).removeModel(e.path)}async function QJ(r,e){return XJ(r,e,!1)}async function eY(r,e){return XJ(r,e,!0)}var Ll,Zn,ZE=g(()=>{$e();Zu();Ll="://",Zn=class{constructor(){this.managers={}}static getInstance(){return Zn.instance==null&&(Zn.instance=new Zn),Zn.instance}static registerManager(e,t){W(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Ll)&&(e=e.slice(0,e.indexOf(Ll))),W(e.length>0,()=>"scheme must not be an empty string.");let n=Zn.getInstance();W(n.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){let t=this.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}});var XE,tY=g(()=>{Ol();jn();KE();jE();ZE();XE=class{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}};if(Ct().get("IS_BROWSER")){Ct().setPlatform("browser",new XE);try{Zn.registerManager(za.URL_SCHEME,new xx)}catch{}try{Zn.registerManager(Ba.URL_SCHEME,new vx)}catch{}}});var rY=Re(()=>{});var nY=Re(()=>{});var M1e,JE,YE,iY=g(()=>{jn();M1e={importFetch:()=>rY()},YE=class{constructor(){this.util=nY(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return Ct().global.fetch!=null?Ct().global.fetch(e,t):(JE==null&&(JE=M1e.importFetch()),JE(e,t))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}};Ct().get("IS_NODE")&&!Ct().get("IS_BROWSER")&&Ct().setPlatform("node",new YE)});function Ra(r,e="float32",t){return e=e||"float32",Kp(r),new rm(r,e,t)}var ql=g(()=>{_a();$e();});function D1e(r,e){let t=U(r,"x","cast");if(!dE(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");let n={x:t},i={dtype:e};return H.runKernel(Sl,n,i)}var Le,Zt=g(()=>{Ce();fe();ke();$e();Te();Le=J({cast_:D1e})});function E1e(r){let t={x:U(r,"x","clone","string_or_numeric")};return H.runKernel(Al,t)}var eo,Pl=g(()=>{Ce();fe();ke();Te();eo=J({clone_:E1e})});function oY(r,e=!1){console.log(r.toString(e))}var aY=g(()=>{});var T1e,sY=g(()=>{Ce();Ol();tY();iY();ql();Zt();Pl();aY();_a();qE();T1e={buffer:Ra,cast:Le,clone:eo,print:oY};EJ(T1e)});function uY(r){return new Promise(e=>setTimeout(e)).then(r)}function _1e(r="model"){return new hs(r)}function cY(r){return new QE(r)}var C1e,I1e,k1e,hs,QE,O1e,lY=g(()=>{Ol();jn();ju();Zu();C1e="model",I1e=".json",k1e=".weights.bin";hs=class{constructor(e){if(!Ct().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(hs.URL_SCHEME)&&(e=e.slice(hs.URL_SCHEME.length)),(e==null||e.length===0)&&(e=C1e),this.modelJsonFileName=e+I1e,this.weightDataFileName=e+k1e}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=gx(e,n),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await uY(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=t,await uY(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Fa(e)}}}};hs.URL_SCHEME="downloads://";QE=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=i=>{let o=JSON.parse(i.target.result),a=o.modelTopology;if(a==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}let u=zl(o,c=>this.loadWeights(c));e(u)},n.onerror=i=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let a of e)t.push(...a.weights),n.push(...a.paths);let i=this.checkManifestAndWeightFiles(e),o=n.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(o).then(a=>[t,Bl(a)])}loadWeightsFile(e,t){return new Promise((n,i)=>{let o=new FileReader;o.onload=a=>{let s=a.target.result;n(s)},o.onerror=a=>i(`Failed to weights data from file of path '${e}'.`),o.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(o=>GE(o.name)),i={};for(let o of e)o.paths.forEach(a=>{let s=GE(a);if(t.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(t.push(s),n.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);i[a]=this.weightsFiles[n.indexOf(s)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}},O1e=r=>Ct().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(hs.URL_SCHEME)?_1e(r.slice(hs.URL_SCHEME.length)):null;vr.registerSaveRouter(O1e)});function eT(r,e,t,n){a(r),t=t??0,n=n??1,s(t,n);let i=0,o=u=>(u.then(c=>{let l=t+ ++i/r.length*(n-t);return e(l),c}),u);function a(u){W(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function s(u,c){W(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),W(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),W(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(r.map(o))}var fY=g(()=>{$e();});async function tT(r,e){e==null&&(e={});let t=e.fetchFunc==null?Ct().platform.fetch:e.fetchFunc,n=r.map(f=>t(f,e.requestInit,{isBinary:!0})),i=0,o=.5,s=(e.onProgress==null?await Promise.all(n):await eT(n,e.onProgress,i,o)).map(f=>f.arrayBuffer()),u=.5,c=1;return e.onProgress==null?await Promise.all(s):await eT(s,e.onProgress,u,c)}async function pY(r,e="",t,n){return rT(a=>tT(a,{requestInit:n}))(r,e,t)}function rT(r){return async(e,t="",n)=>{let i=e.map(()=>!1),o={},a=n!=null?n.map(()=>!1):[],s=[];if(e.forEach((m,d)=>{let h=0;m.weights.forEach(x=>{let y="quantization"in x?x.quantization.dtype:x.dtype,N=im[y]*Yt(x.shape),v=()=>{i[d]=!0,o[d]==null&&(o[d]=[]),o[d].push({manifestEntry:x,groupOffset:h,sizeBytes:N})};n!=null?n.forEach((w,S)=>{w===x.name&&(v(),a[S]=!0)}):v(),s.push(x.name),h+=N})}),!a.every(m=>m)){let m=n.filter((d,h)=>!a[h]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}let u=i.reduce((m,d,h)=>(d&&m.push(h),m),[]),c=[];u.forEach(m=>{e[m].paths.forEach(d=>{let h=t+(t.endsWith("/")?"":"/")+d;c.push(h)})});let l=await r(c),f={},p=0;return u.forEach(m=>{let d=e[m].paths.length,h=0;for(let w=0;w<d;w++)h+=l[p+w].byteLength;let x=new ArrayBuffer(h),y=new Uint8Array(x),N=0;for(let w=0;w<d;w++){let S=new Uint8Array(l[p+w]);y.set(S,N),N+=S.byteLength}o[m].forEach(w=>{let S=x.slice(w.groupOffset,w.groupOffset+w.sizeBytes),b=dx(S,[w.manifestEntry]);for(let E in b)f[E]=b[E]}),p+=d}),f}}var nT=g(()=>{jn();$e();ju();fY();$E();});function z1e(r){let e=r.lastIndexOf("/"),t=r.lastIndexOf("?"),n=r.substring(0,e),i=t>e?r.substring(t):"";return[n+"/",i]}function bx(r){return r.match(om.URL_SCHEME_REGEX)!=null}function wx(r,e){return new om(r,e)}function hY(r,e){return wx(r,e)}var F1e,B1e,om,mY,dY=g(()=>{jn();$e();ju();Zu();nT();F1e="application/octet-stream",B1e="application/json",om=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(W(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Ct().platform.fetch,W(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&W(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=gx(e,n);t.body.append("model.json",new Blob([JSON.stringify(i)],{type:B1e}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:F1e}),"model.weights.bin");let o=await this.fetch(this.path,t);if(o.ok)return{modelArtifactsInfo:Fa(e),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async load(){let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let n=t.modelTopology,i=t.weightsManifest;if(n==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return zl(t,o=>this.loadWeights(o))}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,i]=z1e(t),o=this.weightPathPrefix||n,a=[];for(let l of e)a.push(...l.weights);let s=[],u=[];for(let l of e)for(let f of l.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):s.push(o+f+i);this.weightUrlConverter&&s.push(...await Promise.all(u));let c=await tT(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,Bl(c)]}};om.URL_SCHEME_REGEX=/^https?:\/\//;mY=(r,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(r)?t=r.every(n=>bx(n)):t=bx(r),t)return wx(r,e)}return null};vr.registerSaveRouter(mY);vr.registerLoadRouter(mY)});function gY(r,e,t,n){return arguments.length===1?r.modelTopology!=null||r.weightSpecs!=null?new am(r):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new am({modelTopology:r})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new am({modelTopology:r,weightSpecs:e,weightData:t,trainingConfig:n}))}function vY(r){return new iT(r)}var am,iT,xY=g(()=>{am=class{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}},iT=class{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}});var Ys={};Is(Ys,{browserFiles:()=>cY,browserHTTPRequest:()=>hY,concatenateArrayBuffers:()=>Bl,copyModel:()=>QJ,decodeWeights:()=>dx,encodeWeights:()=>RJ,fromMemory:()=>gY,getLoadHandlers:()=>GJ,getModelArtifactsForJSON:()=>zl,getModelArtifactsInfoForJSON:()=>Fa,getSaveHandlers:()=>UJ,http:()=>wx,isHTTPScheme:()=>bx,listModels:()=>JJ,loadWeights:()=>pY,moveModel:()=>eY,registerLoadRouter:()=>$J,registerSaveRouter:()=>PJ,removeModel:()=>YJ,weightsLoaderFactory:()=>rT,withSaveHandler:()=>vY});var yY=g(()=>{KE();jE();lY();dY();ju();xY();Zu();nT();ZE();});function R1e(r,e,t=!1,n=!1){let i=U(r,"a","matMul"),o=U(e,"b","matMul");[i,o]=jt(i,o);let a={a:i,b:o},s={transposeA:t,transposeB:n};return H.runKernel(Wg,a,s)}var fr,sm=g(()=>{Ce();fe();mn();ke();Te();fr=J({matMul_:R1e})});function L1e(r,e,t=1,n=0){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let o={indices:U(r,"indices","oneHot","int32")},a={depth:e,onValue:t,offValue:n};return H.runKernel(Mv,o,a)}var Nx,bY=g(()=>{Ce();fe();ke();Te();Nx=J({oneHot_:L1e})});function q1e(r,e){let t=U(r,"x","transpose");if(e==null&&(e=t.shape.map((o,a)=>a).reverse()),W(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of perm ${e}.`),e.forEach(o=>{W(o>=0&&o<t.rank,()=>`All entries in 'perm' must be between 0 and ${t.rank-1} but got ${e}`)}),t.rank<=1)return t.clone();let n={x:t},i={perm:e};return H.runKernel(Yv,n,i)}var Ft,Ju=g(()=>{Ce();fe();ke();$e();Te();Ft=J({transpose_:q1e})});function P1e(r,e){let t=r.length,n=[];for(let i=0;i<t;i++){let o=t-1-i,a=r[o]||1;(e[e.length-1-i]||1)>1&&a===1&&n.unshift(o)}return n}function xr(r,e){let t=[];for(let n=0;n<e.length;n++){let i=r[r.length-n-1],o=e.length-n-1,a=e[o];(i==null||i===1&&a>1)&&t.unshift(o)}return t}function Lt(r,e){let t=[],n=Math.max(r.length,e.length);for(let i=0;i<n;i++){let o=r[r.length-i-1];o==null&&(o=1);let a=e[e.length-i-1];if(a==null&&(a=1),o===1)t.unshift(a);else if(a===1)t.unshift(o);else if(o!==a){let s=`Operands could not be broadcast together with shapes ${r} and ${e}.`;throw Error(s)}else t.unshift(o)}return t}var Ur=g(()=>{});function $1e(r,e){let t=r.shape.length,n=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(n<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${n}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[n-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[n-1]} vs. ${t}`);if(Yt(r.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${r.shape}.`);let i=e.shape,o=i[i.length-1],a=1;for(let f=0;f<i.length-1;++f)a*=i[f];let s=r.shape,u=i.slice();u.pop();let c=1;for(let f=o;f<t;++f)c*=s[f],u.push(s[f]);let l=[...Oa(r.shape).map(f=>f/c),1].slice(0,o);return[u,a,c,l]}var wY=g(()=>{$e()});function NY(r,e,t){let n=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${r}, sliceDim: ${n}, and batchDim: ${i}.`;if(t.rank<i)throw new Error(o+` update.rank < ${i}. `);if(r.length<n+(t.rank-i))throw new Error(o+` Output shape length < ${n+(t.rank-i)}`);if(t.rank!==i+r.length-n)throw new Error(o+` update.rank != ${i+r.length-n}`);for(let a=0;a<i;++a)if(t.shape[a]!==e.shape[a])throw new Error(o+` updates.shape[${a}] (${t.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<t.rank-i;++a)if(t.shape[a+i]!==r[a+n])throw new Error(o+` updates.shape[${a+i}] (${t.shape[a+i]}) != shape[${a+i}] (${r[a+i]})`)}function oT(r,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(r.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${r.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(r.size===0)throw new Error(`Updates specified for empty output. updates shape: ${r.shape}`)}NY(t,e,r)}function U1e(r,e,t){let n=e.shape.length,i=n>1?e.shape[n-1]:1,o=t.length,a=1;for(let f=i;f<o;++f)a*=t[f];let s=i<1?1:i,u=Yt(e.shape)/s,c=[...Oa(t.slice(0,i)),1],l=Yt(t);return{sliceRank:i,numUpdates:u,sliceSize:a,strides:c,outputSize:l}}var aT=g(()=>{$e()});var cT={};Is(cT,{assertParamsValid:()=>W1e,computeFlatOffset:()=>X1e,computeOutShape:()=>K1e,getNormalizedAxes:()=>j1e,isSliceContinous:()=>Z1e,maskToAxes:()=>H1e,parseSliceParams:()=>uT,sliceInfo:()=>J1e,startForAxis:()=>IY,startIndicesWithElidedDims:()=>EY,stopForAxis:()=>kY,stopIndicesWithElidedDims:()=>TY,stridesForAxis:()=>CY,stridesWithElidedDims:()=>AY});function W1e(r,e,t){let n=r.shape.length;W(n===e.length,()=>`Error in slice${n}D: Length of begin ${e} must match the rank of the array (${n}).`),W(n===t.length,()=>`Error in slice${n}D: Length of size ${t} must match the rank of the array (${n}).`);for(let i=0;i<n;++i)W(e[i]+t[i]<=r.shape[i],()=>`Error in slice${n}D: begin[${i}] + size[${i}] (${e[i]+t[i]}) would overflow input.shape[${i}] (${r.shape[i]})`)}function H1e(r){let e=[],t=0;for(;r>0;)r&1&&e.push(t),r/=2,t++;return e}function K1e(r,e,t){let n=[];for(let i=0;i<r.length;i++)n[i]=Math.ceil((e[i]-r[i])/t[i]);return n}function AY(r,e,t,n){let i=[...r];for(let o=i.length;o<n.length;o++)i.push(1);for(let o=0;o<t;o++)o===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function MY(r,e,t){return t<=r?t:t-(e-1)}function DY(r,e){let t=[];for(let n=0;n<r;n++)t.push(e+n);return t}function j1e(r,e,t,n,i,o,a,s,u){let c=r.length,l=new Array(c),f=new Array(c),p=new Array(c);if(e.length&&t>0){let m=e[0],d=t+1;l=EY(a,m,d,n,r),f=TY(s,m,d,i,r),p=AY(o,m,d,r)}else for(let m=0;m<c;m++)l[m]=IY(a,n,o,r,m,u),f[m]=kY(s,i,o,r,m,u),p[m]=CY(o,m,u);return{begin:l,end:f,strides:p}}function EY(r,e,t,n,i){let o=[...i],a=DY(t,e);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=0;else{let u=MY(e,t,s),c=n[u];r&1<<u&&(c=0),o[s]=c}return o}function TY(r,e,t,n,i){let o=[...i],a=DY(t,e);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{let u=MY(e,t,s),c=n[u];r&1<<u&&(c=Number.MAX_SAFE_INTEGER),o[s]=c}for(let s=0;s<o.length;s++){let u=i[s];o[s]<0&&(o[s]+=u),o[s]=gl(0,o[s],i[s])}return o}function CY(r,e,t){let n=r[e];return(t&1<<e||n==null)&&(n=1),n}function IY(r,e,t,n,i,o){let a=e[i],s=t[i]||1;(r&1<<i||o&1<<i||a==null)&&(s>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);let u=n[i];return a<0&&(a+=u),a=gl(0,a,u-1),a}function kY(r,e,t,n,i,o){let a=e[i],s=t[i]||1;(r&1<<i||o&1<<i||a==null)&&(s>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);let u=n[i];return a<0&&(a+=u),s>0?a=gl(0,a,u):a=gl(-1,a,u-1),a}function Z1e(r,e,t){let n=t.length;for(let i=0;i<t.length;i++)if(t[i]>1){n=i;break}for(let i=n+1;i<t.length;i++)if(e[i]>0||t[i]!==r[i])return!1;return!0}function X1e(r,e){let t=r.length>0?r[r.length-1]:1;for(let n=0;n<r.length-1;n++)t+=r[n]*e[n];return t}function uT(r,e,t){let n,i=r.shape.length;typeof e=="number"?n=[e,...new Array(i-1).fill(0)]:e.length<i?n=e.concat(new Array(i-e.length).fill(0)):n=e.slice(),n.forEach(a=>{W(a!==-1,()=>"slice() does not support negative begin indexing.")});let o;return t==null?o=new Array(i).fill(-1):typeof t=="number"?o=[t,...new Array(i-1).fill(-1)]:t.length<i?o=t.concat(new Array(i-t.length).fill(-1)):o=t,o=o.map((a,s)=>a>=0?a:(W(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${s}.`),r.shape[s]-n[s])),[n,o]}function J1e(r,e,t,n,i,o,a,s,u){let c;if(n==null?(c=new Array(e.length),c.fill(1)):c=n,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let l=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:c.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:u};for(let v=0;v<f.dims;v++)l&&(1<<v&s)!==0&&f.numAddAxisAfterEllipsis++,1<<v&a&&(l=!0);l||(f.ellipsisMask|=1<<f.dims,f.dims++);let p={dims:r.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Y1e(f,p);let m=!0,d=!0,h=!0,x=[],y=[];for(let v=0;v<r.length;++v){if(p.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);let w=!!(p.shrinkAxisMask&1<<v),S=r[v];if(S===-1){x.push(w?1:-1);continue}let b=[p.beginMask&1<<v,p.endMask&1<<v],E=[p.strides[v]>0?0:-1,p.strides[v]>0?S:S-1];if(w&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");h=h&&p.strides[v]===1;let M=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(w){let T=p.begin[v]<0?S+p.begin[v]:p.begin[v];if(p.begin[v]=T,p.end[v]=p.begin[v]+1,T<0||T>=S)throw Error(`slice index ${p.begin[v]} of dimension ${v} out of bounds.`)}else p.begin[v]=SY(p.begin[v],0,p.strides[v],S,b,E),p.end[v]=SY(p.end[v],1,p.strides[v],S,b,E);let k=p.strides[v]===1&&p.begin[v]===0&&p.end[v]===S;m=m&&k,d=d&&(v===0&&p.strides[v]===1||k)}else m=m&&p.strides[v]===1&&M,d=d&&(v===0&&p.strides[v]===1||M);let D,A=!1;if(p.beginValid&&p.endValid?(D=p.end[v]-p.begin[v],A=!0):w?(D=1,A=!0):M&&S>=0&&(p.strides[v]<0?D=-S:D=S,A=!0),A){let k;D===0||D<0!=p.strides[v]<0?k=0:k=Math.trunc(D/p.strides[v])+(D%p.strides[v]!==0?1:0),x.push(k)}else x.push(-1)}for(let v=0;v<p.finalShapeGatherIndices.length;++v){let w=p.finalShapeGatherIndices[v];w>=0?y.push(x[w]):w===sT&&y.push(1)}return{finalShapeSparse:y.filter((v,w)=>p.finalShapeGatherIndices[w]!==sT),finalShape:y,isIdentity:m,sliceDim0:d,isSimpleSlice:h,begin:p.begin,end:p.end,strides:p.strides}}function Y1e(r,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=r.begin!=null,e.endValid=r.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let n=0;n<r.dims;n++)if(1<<n&r.ellipsisMask){let i=Math.min(e.dims-(r.dims-n)+1+r.numAddAxisAfterEllipsis,e.dims);for(;t<i;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=n}else if(1<<n&r.newAxisMask)e.finalShapeGatherIndices.push(sT),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);r.begin!=null&&(e.begin[t]=r.begin[n]),r.end!=null&&(e.end[t]=r.end[n]),e.strides[t]=r.strides[n],r.beginMask&1<<n&&(e.beginMask|=1<<t),r.endMask&1<<n&&(e.endMask|=1<<t),r.shrinkAxisMask&1<<n?(e.finalShapeGatherIndices.push(V1e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(n)),e.inputShapeGatherIndicesSparse[t]=n,t++}}function SY(r,e,t,n,i,o){if(i[e])return t>0?o[e]:o[e+1&1];{let a=r<0?n+r:r;return a<o[0]?o[0]:a>o[1]?o[1]:a}}var sT,V1e,lT=g(()=>{$e();sT=-2,V1e=-1});var Ie={};Is(Ie,{Serializable:()=>um,SerializationMap:()=>La,registerClass:()=>Ti});function Ti(r){W(r.className!=null,()=>"Class being registered does not have the static className property defined."),W(typeof r.className=="string",()=>"className is required to be a string, but got type "+typeof r.className),W(r.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),La.register(r)}var um,La,qa=g(()=>{$e();um=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},La=class{constructor(){this.classNameMap={}}static getMap(){return La.instance==null&&(La.instance=new La),La.instance}static register(e){La.getMap().classNameMap[e.className]=[e,e.fromConfig]}}});function Q1e(r){Ct().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(r+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function cm(){return H.memory()}function ye(r,e){return H.tidy(r,e)}function yt(r){lx(r).forEach(t=>t.dispose())}function Xn(r){return H.keep(r)}function OY(){return H.backend}var ra=g(()=>{Ce();jn();_a();mn();TJ(Q1e)});function ewe(r,e){let t=U(r,"a","add"),n=U(e,"b","add");[t,n]=jt(t,n);let i={a:t,b:n};return H.runKernel(Nl,i)}var Oe,yn=g(()=>{Ce();fe();mn();ke();Te();Oe=J({add_:ewe})});function twe(r,e){let t=U(r,"a","floorDiv"),n=U(e,"b","floorDiv");[t,n]=jt(t,n);let i={a:t,b:n};return H.runKernel(uv,i)}var _Y,FY=g(()=>{Ce();fe();mn();ke();Te();_Y=J({floorDiv_:twe})});function rwe(r,e){let t=U(r,"a","div"),n=U(e,"b","div");if([t,n]=jt(t,n),t.dtype==="int32"&&n.dtype==="int32")return _Y(t,n);let i={a:t,b:n},o={};return H.runKernel(nv,i,o)}var Xe,Tr=g(()=>{Ce();fe();mn();ke();FY();Te();Xe=J({div_:rwe})});function nwe(r,e){let t=U(r,"a","mul"),n=U(e,"b","mul");[t,n]=jt(t,n);let i={a:t,b:n};return H.runKernel(Nv,i)}var ee,Mt=g(()=>{Ce();fe();mn();ke();Te();ee=J({mul_:nwe})});function iwe(r){let e=U(r,"x","abs");if(e.dtype==="complex64"){let t={x:e};return H.runKernel(jg,t)}else{let t={x:e};return H.runKernel($g,t)}}var bn,Sx=g(()=>{Ce();fe();ke();Te();bn=J({abs_:iwe})});function owe(r,e=null,t=!1){let i={x:U(r,"x","all","bool")},o={axis:e,keepDims:t};return H.runKernel(WZ,i,o)}var fT,BY=g(()=>{Ce();fe();ke();Te();fT=J({all_:owe})});function awe(r,e=null,t=!1){let i={x:U(r,"x","any","bool")},o={axis:e,keepDims:t};return H.runKernel(HZ,i,o)}var Ax,zY=g(()=>{Ce();fe();ke();Te();Ax=J({any_:awe})});function swe(r,e=0){let n={x:U(r,"x","argMax")},i={axis:e};return H.runKernel(Ug,n,i)}var Yu,RY=g(()=>{Ce();fe();ke();Te();Yu=J({argMax_:swe})});function uwe(r,e,t,n,i="NHWC",o){let a=r[3],s=[...e,a],u=qY(i);return ec(r,s,t,o,n,null,null,u)}function cwe(r,e,t,n,i,o,a="channelsLast"){let[s,u]=Mx(e),c;if(a==="channelsLast")c=[s,u,r[3],r[3]];else if(a==="channelsFirst")c=[s,u,r[1],r[1]];else throw new Error(`Unknown dataFormat ${a}`);return ec(r,c,t,n,i,o,!1,a)}function lwe(r,e,t,n,i,o,a="NDHWC"){let[s,u,c]=pT(e),l,f;if(a==="NDHWC")f="channelsLast",l=[s,u,c,r[4],r[4]];else if(a==="NCDHW")f="channelsFirst",l=[s,u,c,r[1],r[1]];else throw new Error(`Unknown dataFormat ${a}`);return LY(r,l,t,n,i,!1,f,o)}function ec(r,e,t,n,i,o,a=!1,s="channelsLast"){let[u,c,l,f]=[-1,-1,-1,-1];if(s==="channelsLast")[u,c,l,f]=r;else if(s==="channelsFirst")[u,f,c,l]=r;else throw new Error(`Unknown dataFormat ${s}`);let[p,m,,d]=e,[h,x]=Mx(t),[y,N]=Mx(n),v=$l(p,y),w=$l(m,N),{padInfo:S,outHeight:b,outWidth:E}=mwe(i,c,l,h,x,v,w,o,s),M=a?d*f:d,D;return s==="channelsFirst"?D=[u,M,b,E]:s==="channelsLast"&&(D=[u,b,E,M]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:f,outHeight:b,outWidth:E,outChannels:M,padInfo:S,strideHeight:h,strideWidth:x,filterHeight:p,filterWidth:m,effectiveFilterHeight:v,effectiveFilterWidth:w,dilationHeight:y,dilationWidth:N,inShape:r,outShape:D,filterShape:e}}function LY(r,e,t,n,i,o=!1,a="channelsLast",s){let[u,c,l,f,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[u,c,l,f,p]=r;else if(a==="channelsFirst")[u,p,c,l,f]=r;else throw new Error(`Unknown dataFormat ${a}`);let[m,d,h,,x]=e,[y,N,v]=pT(t),[w,S,b]=pT(n),E=$l(m,w),M=$l(d,S),D=$l(h,b),{padInfo:A,outDepth:k,outHeight:T,outWidth:L}=hwe(i,c,l,f,y,N,v,E,M,D,s),$=o?x*p:x,K;return a==="channelsFirst"?K=[u,$,k,T,L]:a==="channelsLast"&&(K=[u,k,T,L,$]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:l,inWidth:f,inChannels:p,outDepth:k,outHeight:T,outWidth:L,outChannels:$,padInfo:A,strideDepth:y,strideHeight:N,strideWidth:v,filterDepth:m,filterHeight:d,filterWidth:h,effectiveFilterDepth:E,effectiveFilterHeight:M,effectiveFilterWidth:D,dilationDepth:w,dilationHeight:S,dilationWidth:b,inShape:r,outShape:K,filterShape:e}}function fwe(r,e,t,n,i){n==null&&(n=mT(r,e,t));let o=r[0],a=r[1],s=Qu((o-e+2*n)/t+1,i),u=Qu((a-e+2*n)/t+1,i);return[s,u]}function pwe(r,e,t,n,i,o){i==null&&(i=mT(r,e,n));let a=r[0],s=r[1],u=r[2],c=Qu((a-e+2*i)/n+1,o),l=Qu((s-e+2*i)/n+1,o),f=Qu((u-e+2*i)/n+1,o);return[c,l,f,t]}function mT(r,e,t,n=1){let i=$l(e,n);return Math.floor((r[0]*(t-1)-t+i)/2)}function Mx(r){return typeof r=="number"?[r,r,r]:r.length===2?[r[0],r[1],1]:r}function pT(r){return typeof r=="number"?[r,r,r]:r}function $l(r,e){return e<=1?r:r+(r-1)*(e-1)}function mwe(r,e,t,n,i,o,a,s,u){let c,l,f;if(typeof r=="number"){c={top:r,bottom:r,left:r,right:r,type:r===0?"VALID":"NUMBER"};let m=fwe([e,t],o,n,r,s);l=m[0],f=m[1]}else if(r==="same"){l=Math.ceil(e/n),f=Math.ceil(t/i);let p=Math.max(0,(l-1)*n+o-e),m=Math.max(0,(f-1)*i+a-t),d=Math.floor(p/2),h=p-d,x=Math.floor(m/2),y=m-x;c={top:d,bottom:h,left:x,right:y,type:"SAME"}}else if(r==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-o+1)/n),f=Math.ceil((t-a+1)/i);else if(typeof r=="object"){let p=u==="channelsLast"?r[1][0]:r[2][0],m=u==="channelsLast"?r[1][1]:r[2][1],d=u==="channelsLast"?r[2][0]:r[3][0],h=u==="channelsLast"?r[2][1]:r[3][1];c={top:p,bottom:m,left:d,right:h,type:p===0&&m===0&&d===0&&h===0?"VALID":"EXPLICIT"},l=Qu((e-o+p+m)/n+1,s),f=Qu((t-a+d+h)/i+1,s)}else throw Error(`Unknown padding parameter: ${r}`);return{padInfo:c,outHeight:l,outWidth:f}}function hwe(r,e,t,n,i,o,a,s,u,c,l){let f,p,m,d;if(typeof r=="number"){f={top:r,bottom:r,left:r,right:r,front:r,back:r,type:r===0?"VALID":"NUMBER"};let x=pwe([e,t,n,1],s,1,i,r,l);p=x[0],m=x[1],d=x[2]}else if(r==="same"){p=Math.ceil(e/i),m=Math.ceil(t/o),d=Math.ceil(n/a);let h=(p-1)*i+s-e,x=(m-1)*o+u-t,y=(d-1)*a+c-n,N=Math.floor(h/2),v=h-N,w=Math.floor(x/2),S=x-w,b=Math.floor(y/2),E=y-b;f={top:w,bottom:S,left:b,right:E,front:N,back:v,type:"SAME"}}else if(r==="valid")f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/i),m=Math.ceil((t-u+1)/o),d=Math.ceil((n-c+1)/a);else throw Error(`Unknown padding parameter: ${r}`);return{padInfo:f,outDepth:p,outHeight:m,outWidth:d}}function Qu(r,e){if(!e)return Math.trunc(r);switch(e){case"round":return Math.round(r);case"ceil":return Math.ceil(r);case"floor":return Math.floor(r);default:throw new Error(`Unknown roundingMode ${e}`)}}function to(r){let[e,t,n]=Mx(r);return e===1&&t===1&&n===1}function Jn(r,e){return to(r)||to(e)}function qY(r){if(r==="NHWC")return"channelsLast";if(r==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${r}`)}function yr(r,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${r}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")W(Pu(e),()=>`Error in ${r}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(n=>{n.forEach(i=>{W(Pu(i),()=>`Error in ${r}: pad must be an integer when using dimRoundingMode ${t} but got pad ${i}.`)})});else throw Error(`Error in ${r}: Unknown padding parameter: ${e}`)}}var Tn=g(()=>{$e();});function dwe(r,e){let n={x:U(r,"x","reshape","string_or_numeric")},i={shape:e};return H.runKernel(kv,n,i)}var pe,Dt=g(()=>{Ce();fe();ke();Te();pe=J({reshape_:dwe})});function gwe(r,e,t,n,i){let o=U(r,"x","avgPool","float32"),a=1;W(Jn(t,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);let s=o,u=!1;o.rank===3&&(u=!0,s=pe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),W(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),yr("avgPool",n,i);let c={x:s},l={filterSize:e,strides:t,pad:n,dimRoundingMode:i},f=H.runKernel(Gg,c,l);return f=Le(f,o.dtype),u?pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var hT,PY=g(()=>{Ce();fe();ke();$e();Zt();Tn();Te();Dt();hT=J({avgPool_:gwe})});function vwe(r,e,t,n,i,o="NDHWC"){let a=U(r,"x","avgPool3d","float32"),s=a,u=!1;a.rank===4&&(u=!0,s=pe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),W(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),W(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),yr("avgPool3d",n,i);let c={x:s},l={filterSize:e,strides:t,pad:n,dimRoundingMode:i,dataFormat:o},f=H.runKernel(Vg,c,l);return f=Le(f,s.dtype),u?pe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var dT,$Y=g(()=>{Ce();fe();ke();$e();Tn();Zt();Te();Dt();dT=J({avgPool3d_:vwe})});function xwe(r,e=0){W(r.length>=1,()=>"Pass at least one tensor to concat");let t=px(r,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),t.length===1)return eo(t[0]);let n=t,i={axis:e};return H.runKernel(Zg,n,i)}var wn,eu=g(()=>{Ce();fe();ke();$e();Pl();Te();wn=J({concat_:xwe})});function ywe(r){let t={x:U(r,"x","sigmoid","float32")};return H.runKernel(Gv,t)}var tu,Dx=g(()=>{Ce();fe();ke();Te();tu=J({sigmoid_:ywe})});function bwe(r,e,t){let n=U(r,"x","slice","string_or_numeric");if(n.rank===0)throw new Error("Slicing scalar is not possible");let i={x:n},o={begin:e,size:t};return H.runKernel(Pv,i,o)}var ir,na=g(()=>{Ce();fe();ke();Te();ir=J({slice_:bwe})});function wwe(r){let t={x:U(r,"x","tanh","float32")};return H.runKernel(Jv,t)}var Ex,UY=g(()=>{Ce();fe();ke();Te();Ex=J({tanh_:wwe})});function Nwe(r,e,t){let n=U(r,"x","batchToSpaceND"),i=e.reduce((s,u)=>s*u);W(n.rank>=1+e.length,()=>`input rank is ${n.rank} but should be > than blockShape.length ${e.length}`),W(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),W(n.shape[0]%i===0,()=>`input tensor batch is ${n.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);let o={x:n},a={blockShape:e,crops:t};return H.runKernel(Hg,o,a)}var GY,VY=g(()=>{Ce();fe();ke();$e();Te();GY=J({batchToSpaceND_:Nwe})});function WY(r){let e;return r.rank===0||r.rank===1?e=pe(r,[1,1,1,r.size]):r.rank===2?e=pe(r,[1,1,r.shape[0],r.shape[1]]):r.rank===3?e=pe(r,[1,r.shape[0],r.shape[1],r.shape[2]]):e=r,e}var HY=g(()=>{Dt()});function Swe(r,e,t,n,i,o){o==null&&(o=.001);let a=U(r,"x","batchNorm"),s=U(e,"mean","batchNorm"),u=U(t,"variance","batchNorm"),c;i!=null&&(c=U(i,"scale","batchNorm"));let l;n!=null&&(l=U(n,"offset","batchNorm")),W(s.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),W(l==null||s.rank===l.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),W(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:WY(a),scale:c,offset:l,mean:s,variance:u},m={varianceEpsilon:o},d=H.runKernel(cv,p,m);return pe(d,a.shape)}var Ul,Tx=g(()=>{Ce();fe();ke();$e();HY();Te();Dt();Ul=J({batchNorm_:Swe})});function Awe(r,e,t,n,i,o){let a=U(r,"x","batchNorm"),s=U(e,"mean","batchNorm"),u=U(t,"variance","batchNorm"),c;i!=null&&(c=U(i,"scale","batchNorm"));let l;return n!=null&&(l=U(n,"offset","batchNorm")),W(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),W(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),W(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&W(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),l!=null&&W(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`),Ul(a,s,u,l,c,o)}var gT,KY=g(()=>{ke();$e();Tx();Te();gT=J({batchNorm2d_:Awe})});function Mwe(r,e,t,n,i,o){let a=U(r,"x","batchNorm"),s=U(e,"mean","batchNorm"),u=U(t,"variance","batchNorm"),c;i!=null&&(c=U(i,"scale","batchNorm"));let l;return n!=null&&(l=U(n,"offset","batchNorm")),W(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),W(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),W(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&W(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),l!=null&&W(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`),Ul(a,s,u,l,c,o)}var vT,jY=g(()=>{ke();$e();Tx();Te();vT=J({batchNorm3d_:Mwe})});function Dwe(r,e,t,n,i,o){let a=U(r,"x","batchNorm"),s=U(e,"mean","batchNorm"),u=U(t,"variance","batchNorm"),c;i!=null&&(c=U(i,"scale","batchNorm"));let l;return n!=null&&(l=U(n,"offset","batchNorm")),W(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),W(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),W(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&W(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),l!=null&&W(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`),Ul(a,s,u,l,c,o)}var xT,ZY=g(()=>{ke();$e();Tx();Te();xT=J({batchNorm4d_:Dwe})});function Ewe(r,e,t){let n=U(r,"x","bincount"),i=U(e,"weights","bincount");W(n.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${n.dtype}`),W(t>=0,()=>`size must be non-negative, but got ${t}.`),W(i.size===n.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${n.shape}, weights shape: ${i.shape}.`);let o={x:n,weights:i},a={size:t};return H.runKernel(tX,o,a)}var XY,JY=g(()=>{Ce();fe();ke();$e();Te();XY=J({bincount_:Ewe})});function Twe(r,e){let t=U(r,"broadcastTo","x"),n=t.shape;if(e.some(c=>!(c>0)||c%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){let c=t.shape.slice();for(;c.length<e.length;)c.unshift(1);t=pe(t,c)}let i=t.shape,o=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])o[c]=1;else if(t.shape[c]!==1)throw new Error(`broadcastTo(): [${n}] cannot be broadcast to [${e}].`);if(o.map((c,l)=>c>1?l:-1).filter(c=>c>=0).length===0)return eo(t);let s={x:t},u={reps:o};return H.runKernel(Ml,s,u)}var Cx,YY=g(()=>{Ce();fe();ke();Pl();Te();Dt();Cx=J({broadcastTo_:Twe})});function Cwe(r,e,t){let n=U(r,"x","clipByValue");W(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`);let i={x:n},o={clipValueMin:e,clipValueMax:t};return H.runKernel(Kg,i,o)}var Yn,QY=g(()=>{Ce();fe();ke();$e();Te();Yn=J({clipByValue_:Cwe})});function Iwe(r){return wn(r,0)}var yT,eQ=g(()=>{eu();Te();yT=J({concat1d_:Iwe})});function kwe(r,e){return wn(r,e)}var bT,tQ=g(()=>{eu();Te();bT=J({concat2d_:kwe})});function Owe(r,e){return wn(r,e)}var wT,rQ=g(()=>{eu();Te();wT=J({concat3d_:Owe})});function _we(r,e){return wn(r,e)}var NT,nQ=g(()=>{eu();Te();NT=J({concat4d_:_we})});function Fwe(r,e,t,n,i="NHWC",o=[1,1],a){let s=U(r,"x","conv2d","float32"),u=U(e,"filter","conv2d","float32"),c=s,l=!1;s.rank===3&&(l=!0,c=pe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),W(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),W(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),yr("conv2d",n,a);let f=i==="NHWC"?c.shape[3]:c.shape[1];W(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),W(Jn(t,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`);let p={x:c,filter:u},m={strides:t,pad:n,dataFormat:i,dilations:o,dimRoundingMode:a},d=H.runKernel(Xg,p,m);return l?pe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var No,Gl=g(()=>{Ce();fe();ke();$e();Tn();Te();Dt();No=J({conv2d_:Fwe})});function Bwe(r,e,t,n,i="NWC",o=1,a){let s=U(r,"x","conv1d"),u=U(e,"filter","conv1d"),c=s,l=!1;s.rank===2&&(l=!0,c=pe(s,[1,s.shape[0],s.shape[1]])),W(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),W(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),yr("conv1d",n,a),W(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),W(Jn(t,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${o}'`),W(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let f=pe(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=pe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),x=No(p,f,[1,t],n,"NHWC",[1,o],a);return l?pe(x,[x.shape[2],x.shape[3]]):pe(x,[x.shape[0],x.shape[2],x.shape[3]])}var ST,iQ=g(()=>{ke();$e();Gl();Tn();Te();Dt();ST=J({conv1d_:Bwe})});function zwe(r,e,t,n,i,o="NHWC",a){W(r.length===e.rank,()=>`Length of inShape (${r.length}) and rank of dy (${e.rank}) must match`);let s=r,u=e,c=!1;e.rank===3&&(c=!0,u=pe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,r[0],r[1],r[2]]),W(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),W(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),W(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);let l=o==="NHWC"?s[3]:s[1],f=o==="NHWC"?u.shape[3]:u.shape[1];W(l===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[2]}.`),W(f===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${t.shape[3]}.`),yr("conv2dDerInput",i,a);let p={dy:u,filter:t},m={strides:n,pad:i,dataFormat:o,dimRoundingMode:a,inputShape:s},d=H.runKernel(Jg,p,m);return c?pe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Vl,Ix=g(()=>{Ce();fe();$e();Tn();Te();Dt();Vl=J({conv2DBackpropInput_:zwe})});function Rwe(r,e,t,n,i,o){let a=U(r,"x","conv2dTranspose"),s=U(e,"filter","conv2dTranspose");return Vl(t,a,s,n,i,"NHWC",o)}var AT,oQ=g(()=>{ke();Ix();Te();AT=J({conv2dTranspose_:Rwe})});function Lwe(r,e,t,n,i="NDHWC",o=[1,1,1]){let a=U(r,"x","conv3d"),s=U(e,"filter","conv3d"),u=a,c=!1;a.rank===4&&(c=!0,u=pe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),W(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),W(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),W(u.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${s.shape[3]}.`),W(Jn(t,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`),W(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);let l={x:u,filter:s},f={strides:t,pad:n,dataFormat:i,dilations:o},p=H.runKernel(Yg,l,f);return c?pe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var MT,aQ=g(()=>{Ce();fe();ke();$e();Tn();Te();Dt();MT=J({conv3d_:Lwe})});function qwe(r,e,t,n,i){W(r.length===e.rank,()=>`Length of inShape (${r.length}) and rank of dy (${e.rank}) must match`);let o=r,a=e,s=!1;e.rank===4&&(s=!0,a=pe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,r[0],r[1],r[2],r[3]]);let u=o[4],c=a.shape[4];W(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),W(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),W(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),W(u===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[3]}.`),W(c===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${t.shape[4]}.`);let l={dy:a,filter:t},f={pad:i,strides:n,inputShape:o},p=H.runKernel(sX,l,f);return s?pe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var kx,DT=g(()=>{Ce();fe();$e();Te();Dt();kx=J({conv3DBackpropInput_:qwe})});function Pwe(r,e,t,n,i){let o=U(r,"x","conv3dTranspose"),a=U(e,"filter","conv3dTranspose");return kx(t,o,a,n,i)}var ET,sQ=g(()=>{ke();DT();Te();ET=J({conv3dTranspose_:Pwe})});function $we(r){let t={x:U(r,"x","cos","float32")};return H.runKernel(Qg,t)}var Ox,TT=g(()=>{Ce();fe();ke();Te();Ox=J({cos_:$we})});function Uwe(r){let t={x:U(r,"x","cosh","float32")};return H.runKernel(ev,t)}var uQ,cQ=g(()=>{Ce();fe();ke();Te();uQ=J({cosh_:Uwe})});function Gwe(r,e=0,t=!1,n=!1){let o={x:U(r,"x","cumprod")},a={axis:e,exclusive:t,reverse:n};return H.runKernel(uX,o,a)}var CT,lQ=g(()=>{Ce();fe();ke();Te();CT=J({cumprod_:Gwe})});function Vwe(r,e=0,t=!1,n=!1){let o={x:U(r,"x","cumsum")},a={axis:e,exclusive:t,reverse:n};return H.runKernel(tv,o,a)}var fQ,pQ=g(()=>{Ce();fe();ke();Te();fQ=J({cumsum_:Vwe})});function Wwe(r,e,t,n,i="NHWC",o=[1,1],a){let s=U(r,"x","depthwiseConv2d","float32"),u=U(e,"filter","depthwiseConv2d","float32"),c=s,l=!1;s.rank===3&&(l=!0,c=pe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),W(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),W(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`),W(c.shape[3]===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),yr("depthwiseConv2d",n,a);let f={x:c,filter:u},p={strides:t,pad:n,dataFormat:i,dilations:o,dimRoundingMode:a},m=H.runKernel(rv,f,p);return l?pe(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var tc,_x=g(()=>{Ce();fe();ke();$e();Tn();Te();Dt();tc=J({depthwiseConv2d_:Wwe})});function Hwe(r,e){let t=U(r,"a","equal","string_or_numeric"),n=U(e,"b","equal","string_or_numeric");[t,n]=jt(t,n),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(vX,i)}var So,IT=g(()=>{Ce();fe();mn();ke();Ur();Te();So=J({equal_:Hwe})});function Kwe(r,e,t){let n=U(e,"a","where"),i=U(t,"b","where"),o=U(r,"condition","where","bool"),a=Lt(Lt(o.shape,n.shape),i.shape),s=Cx(o,a),u=Cx(n,a),c=Cx(i,a),l={condition:s,t:u,e:c};return H.runKernel(Lv,l)}var Qr,ia=g(()=>{Ce();fe();ke();YY();Ur();Te();Qr=J({where_:Kwe})});function jwe(r){let t={x:U(r,"x","zerosLike")};return H.runKernel(tx,t)}var mt,Gr=g(()=>{Ce();fe();ke();Te();mt=J({zerosLike_:jwe})});function Zwe(r){let t={x:U(r,"x","elu","float32")};return H.runKernel(iv,t)}var rc,kT=g(()=>{Ce();fe();ke();Te();rc=J({elu_:Zwe})});function Xwe(r){let t={x:U(r,"x","exp")};return H.runKernel(ov,t)}var Ui,nc=g(()=>{Ce();fe();ke();Te();Ui=J({exp_:Xwe})});function Jwe(r,e=0){let t=U(r,"x","expandDims","string_or_numeric");W(e<=t.rank,()=>"Axis must be <= rank of the tensor");let n={input:t},i={dim:e};return H.runKernel(av,n,i)}var mi,Fx=g(()=>{Ce();fe();ke();$e();Te();mi=J({expandDims_:Jwe})});function Ywe(r,e){let t=U(r,"x","tile","string_or_numeric");W(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);let n={x:t},i={reps:e};return H.runKernel(Ml,n,i)}var hi,lm=g(()=>{Ce();fe();ke();$e();Te();hi=J({tile_:Ywe})});function Qwe(r,e,t,n="float32"){e==null&&(e=r);let i=Ra([r,e],n),o=r<=e?r:e;for(let s=0;s<o;++s)i.set(1,s,s);let a=pe(i.toTensor(),[r,e]);if(t==null)return a;if(t.length===1)return hi(mi(a,0),[t[0],1,1]);if(t.length===2)return hi(mi(mi(a,0),0),[t[0],t[1],1,1]);if(t.length===3)return hi(mi(mi(mi(a,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}var Wl,OT=g(()=>{ql();Fx();Te();Dt();lm();Wl=J({eye_:Qwe})});function ic(r,e,t){let n={shape:r,value:e,dtype:t};return H.runKernel(yX,{},n)}var Bx=g(()=>{Ce();fe();});function eNe(r){let t={x:U(r,"x","floor","float32")};return H.runKernel(sv,t)}var oc,zx=g(()=>{Ce();fe();ke();Te();oc=J({floor_:eNe})});function tNe(r,e,t=0,n=0){let i=U(r,"x","gather"),o=U(e,"indices","gather","int32"),a={x:i,indices:o},s={axis:t,batchDims:n};return H.runKernel(lv,a,s)}var fm,_T=g(()=>{Ce();fe();ke();Te();fm=J({gather_:tNe})});function rNe(r,e){let t=U(r,"a","greater","string_or_numeric"),n=U(e,"b","greater","string_or_numeric");[t,n]=jt(t,n),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(NX,i)}var hn,ds=g(()=>{Ce();fe();mn();ke();Ur();Te();hn=J({greater_:rNe})});function nNe(r,e){let t=U(r,"a","greaterEqual","string_or_numeric"),n=U(e,"b","greaterEqual","string_or_numeric");[t,n]=jt(t,n),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(fv,i)}var oa,Hl=g(()=>{Ce();fe();mn();ke();Ur();Te();oa=J({greaterEqual_:nNe})});function iNe(r,e=.2){let n={x:U(r,"x","leakyRelu")},i={alpha:e};return H.runKernel(pv,n,i)}var pm,FT=g(()=>{Ce();fe();ke();Te();pm=J({leakyRelu_:iNe})});function oNe(r,e){let t=U(r,"a","less","string_or_numeric"),n=U(e,"b","less","string_or_numeric");[t,n]=jt(t,n),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(DX,i)}var mQ,hQ=g(()=>{Ce();fe();mn();ke();Ur();Te();mQ=J({less_:oNe})});function aNe(r,e){let t=U(r,"a","lessEqual","string_or_numeric"),n=U(e,"b","lessEqual","string_or_numeric");[t,n]=jt(t,n),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(EX,i)}var Pa,Kl=g(()=>{Ce();fe();mn();ke();Ur();Te();Pa=J({lessEqual_:aNe})});function sNe(r){let t={x:U(r,"x","log","float32")};return H.runKernel(mv,t)}var Ao,Rx=g(()=>{Ce();fe();ke();Te();Ao=J({log_:sNe})});function uNe(r){let t={x:U(r,"x","log1p")};return H.runKernel(hv,t)}var BT,dQ=g(()=>{Ce();fe();ke();Te();BT=J({log1p_:uNe})});function zT(r,e){W(yl(r),()=>"The f passed in variableGrads(f) must be a function"),W(e==null||Array.isArray(e)&&e.every(c=>c instanceof ps),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let t=e!=null;if(!t){e=[];for(let c in H.registeredVariables)e.push(H.registeredVariables[c])}let n=t?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),W(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let o=!0,{value:a,grads:s}=H.gradients(r,e,null,o);W(s.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),W(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);let u={};return e.forEach((c,l)=>{s[l]!=null&&(u[c.name]=s[l])}),n?.forEach(c=>u[c.name]=null),{value:a,grads:u}}function aa(r){return H.customGrad(r)}var jl=g(()=>{Ce();_a();$e();});function cNe(r){let t={x:U(r,"x","neg")};return H.runKernel(Sv,t)}var br,Gi=g(()=>{Ce();fe();ke();Te();br=J({neg_:cNe})});function lNe(r){let t={x:U(r,"x","softplus")};return H.runKernel(Vv,t)}var Zl,gQ=g(()=>{Ce();fe();ke();Te();Zl=J({softplus_:lNe})});function fNe(r,e=null,t=!1){let i={x:U(r,"x","max")},o={reductionIndices:e,keepDims:t};return H.runKernel(dv,i,o)}var ro,Lx=g(()=>{Ce();fe();ke();Te();ro=J({max_:fNe})});function pNe(r,e){let t=U(r,"a","sub"),n=U(e,"b","sub");[t,n]=jt(t,n);let i={a:t,b:n};return H.runKernel(Xv,i)}var it,on=g(()=>{Ce();fe();mn();ke();Te();it=J({sub_:pNe})});function mNe(r,e=null,t=!1){let n=U(r,"x","sum");n.dtype==="bool"&&(n=Le(n,"int32"));let i={x:n},o={axis:e,keepDims:t};return H.runKernel(Hv,i,o)}var rt,Cn=g(()=>{Ce();fe();ke();Zt();Te();rt=J({sum_:mNe})});function hNe(r,e=-1){let t=U(r,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return aa((i,o)=>{let s=ro(i,e,!0),u=it(i,s),c=it(Le(u,"float32"),Ao(rt(Ui(u),e,!0)));return o([c]),{value:c,gradFunc:(f,p)=>{let[m]=p,d=!0,h=Ui(m);return it(f,ee(rt(f,e,d),h))}}})(t)}var RT,vQ=g(()=>{jl();ke();Zt();nc();Rx();Lx();Mt();Te();on();Cn();RT=J({logSoftmax_:hNe})});function LT(r,e){for(let t=0;t<r.length;++t)if(r[r.length-t-1]!==e-1-t)return!1;return!0}function xQ(r,e,t){let n=r.length+e.length,i=[],o=0,a=0;for(let s=0;s<n;s++)t.indexOf(s)===-1?i.push(r[o++]):i.push(e[a++]);return i}function qT(r,e){let t=[],n=r.length;for(let o=0;o<n;o++)e.indexOf(o)===-1&&t.push(r[o]);let i=e.map(o=>r[o]);return[t,i]}function ru(r,e){let t=e.map(n=>1);return xQ(r,t,e)}function dNe(r,e,t){W(LT(e,t),()=>`${r} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function PT(r,e){if(LT(r,e))return null;let t=[];for(let n=0;n<e;++n)r.indexOf(n)===-1&&t.push(n);return r.forEach(n=>t.push(n)),t}function mm(r){return r.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function gNe(r,e){let t=[];for(let n=e-r;n<e;++n)t.push(n);return t}var gs=g(()=>{$e();});function vNe(r,e){let t=U(r,"a","logicalAnd","bool"),n=U(e,"b","logicalAnd","bool");Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(TX,i)}var Mo,hm=g(()=>{Ce();fe();ke();Ur();Te();Mo=J({logicalAnd_:vNe})});function xNe(r){let t={x:U(r,"x","logicalNot","bool")};return H.runKernel(CX,t)}var yQ,bQ=g(()=>{Ce();fe();ke();Te();yQ=J({logicalNot_:xNe})});function yNe(r,e,t,n,i){let o=U(r,"x","maxPool"),a=1,s=o,u=!1;o.rank===3&&(u=!0,s=pe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),W(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),W(Jn(t,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),yr("maxPool",n,i);let c={x:s},l={filterSize:e,strides:t,pad:n,dimRoundingMode:i},f=H.runKernel(vv,c,l);return u?pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var UT,wQ=g(()=>{Ce();fe();ke();$e();Tn();Te();Dt();UT=J({maxPool_:yNe})});function bNe(r,e=[1,1,1],t,n,i,o="NDHWC"){let a=U(r,"x","maxPool3d"),s=a,u=!1;a.rank===4&&(u=!0,s=pe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),W(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),W(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),yr("maxPool3d",n,i);let c={x:s},l={filterSize:e,strides:t,pad:n,dimRoundingMode:i,dataFormat:o},f=H.runKernel(xv,c,l);return u?pe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var GT,NQ=g(()=>{Ce();fe();ke();$e();Tn();Te();Dt();GT=J({maxPool3d_:bNe})});function wNe(r,e){let t=U(r,"a","maximum"),n=U(e,"b","maximum");[t,n]=jt(t,n),t.dtype==="bool"&&(t=Le(t,"int32"),n=Le(n,"int32")),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(gv,i)}var Do,qx=g(()=>{Ce();fe();mn();ke();Ur();Zt();Te();Do=J({maximum_:wNe})});function NNe(r,e=null,t=!1){let i={x:U(r,"x","mean")},o={axis:e,keepDims:t};return H.runKernel(yv,i,o)}var Vr,VT=g(()=>{Ce();fe();ke();Te();Vr=J({mean_:NNe})});function Wr(r,e="float32"){if(e==="complex64"){let n=Wr(r,"float32"),i=Wr(r,"float32");return _l(n,i)}let t=wl(Yt(r),e);return H.makeTensor(t,r,e)}var dm=g(()=>{Ce();$e();mx();});function Vi(r,e="float32"){if(e==="complex64"){let n=Vi(r,"float32"),i=Wr(r,"float32");return _l(n,i)}let t=Hp(Yt(r),e);return H.makeTensor(t,r,e)}var gm=g(()=>{Ce();$e();mx();dm();});function SNe(r,e=null,t=!1){let i={x:U(r,"x","min")},o={axis:e,keepDims:t};return H.runKernel(bv,i,o)}var WT,SQ=g(()=>{Ce();fe();ke();Te();WT=J({min_:SNe})});function ANe(r,e){let t=U(r,"a","minimum"),n=U(e,"b","minimum");[t,n]=jt(t,n),t.dtype==="bool"&&(t=Le(t,"int32"),n=Le(n,"int32")),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(wv,i)}var vm,AQ=g(()=>{Ce();fe();mn();ke();Ur();Zt();Te();vm=J({minimum_:ANe})});function MNe(r){let e=U(r,"x","square"),t={};return H.runKernel("Square",{x:e},t)}var $t,In=g(()=>{Ce();ke();Te();$t=J({square_:MNe})});function DNe(r,e=null,t=!1){r=U(r,"x","moments");let n=En(e,r.shape),i=Vr(r,n,t),o=i.shape;t||(o=ru(i.shape,n));let a=$t(it(Le(r,"float32"),pe(i,o))),s=Vr(a,n,t);return{mean:i,variance:s}}var Xl,MQ=g(()=>{ke();$e();gs();Zt();VT();Te();Dt();In();on();Xl=J({moments_:DNe})});function ENe(r,e){let t=U(r,"a","notEqual","string_or_numeric"),n=U(e,"b","notEqual","string_or_numeric");[t,n]=jt(t,n),Lt(t.shape,n.shape);let i={a:t,b:n};return H.runKernel(RX,i)}var Jl,DQ=g(()=>{Ce();fe();mn();ke();Ur();Te();Jl=J({notEqual_:ENe})});function TNe(r){let t={x:U(r,"x","onesLike")};return H.runKernel(Av,t)}var Un,EQ=g(()=>{Ce();fe();ke();Te();Un=J({onesLike_:TNe})});function CNe(r,e,t=0){let n=U(r,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let i={paddings:e,constantValue:t},o={x:n};return H.runKernel(Ev,o,i)}var xm,HT=g(()=>{Ce();fe();ke();Te();xm=J({pad_:CNe})});function INe(r,e,t){let n=U(r,"x","spaceToBatchND");W(n.rank>=1+e.length,()=>`input rank ${n.rank} should be > than [blockShape] ${e.length}`),W(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),W(n.shape.reduce((a,s,u)=>u>0&&u<=e.length?a&&(s+t[u-1][0]+t[u-1][1])%e[u-1]===0:a,!0),()=>`input spatial dimensions ${n.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);let i={x:n},o={blockShape:e,paddings:t};return H.runKernel(Kv,i,o)}var TQ,CQ=g(()=>{Ce();fe();ke();$e();Te();TQ=J({spaceToBatchND_:INe})});function kNe(r,e){let t=U(r,"base","pow"),n=U(e,"exp","pow");[t,n]=jt(t,n);let i={a:t,b:n};return H.runKernel(Tv,i)}var Eo,Yl=g(()=>{Ce();fe();mn();ke();Te();Eo=J({pow_:kNe})});function ONe(r,e){let t=U(r,"x","prelu"),n=U(e,"alpha","prelu"),i={x:t,alpha:n};return H.runKernel(Cv,i)}var ym,KT=g(()=>{Ce();fe();ke();Te();ym=J({prelu_:ONe})});var kQ=Re((IQ,jT)=>{(function(r,e,t){function n(s){var u=this,c=a();u.next=function(){var l=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=l-(u.c=l|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(s),u.s0<0&&(u.s0+=1),u.s1-=c(s),u.s1<0&&(u.s1+=1),u.s2-=c(s),u.s2<0&&(u.s2+=1),c=null}function i(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function o(s,u){var c=new n(s),l=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,l&&(typeof l=="object"&&i(l,c),f.state=function(){return i(c,{})}),f}function a(){var s=4022871197,u=function(c){c=c.toString();for(var l=0;l<c.length;l++){s+=c.charCodeAt(l);var f=.02519603282416938*s;s=f>>>0,f-=s,f*=s,s=f>>>0,f-=s,s+=f*4294967296}return(s>>>0)*23283064365386963e-26};return u}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(IQ,typeof jT=="object"&&jT,typeof define=="function"&&define)});var _Q=Re((OQ,ZT)=>{(function(r,e,t){function n(a){var s=this,u="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var l=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^l^l>>>8},a===(a|0)?s.x=a:u+=a;for(var c=0;c<u.length+64;c++)s.x^=u.charCodeAt(c)|0,s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function o(a,s){var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(OQ,typeof ZT=="object"&&ZT,typeof define=="function"&&define)});var BQ=Re((FQ,XT)=>{(function(r,e,t){function n(a){var s=this,u="";s.next=function(){var l=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^(l^l<<1))|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,a===(a|0)?s.x=a:u+=a;for(var c=0;c<u.length+64;c++)s.x^=u.charCodeAt(c)|0,c==u.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function o(a,s){var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})(FQ,typeof XT=="object"&&XT,typeof define=="function"&&define)});var RQ=Re((zQ,JT)=>{(function(r,e,t){function n(a){var s=this;s.next=function(){var c=s.x,l=s.i,f,p,m;return f=c[l],f^=f>>>7,p=f^f<<24,f=c[l+1&7],p^=f^f>>>10,f=c[l+3&7],p^=f^f>>>3,f=c[l+4&7],p^=f^f<<7,f=c[l+7&7],f=f^f<<13,p^=f^f<<9,c[l]=p,s.i=l+1&7,p};function u(c,l){var f,p,m=[];if(l===(l|0))p=m[0]=l;else for(l=""+l,f=0;f<l.length;++f)m[f&7]=m[f&7]<<15^l.charCodeAt(f)+m[f+1&7]<<13;for(;m.length<8;)m.push(0);for(f=0;f<8&&m[f]===0;++f);for(f==8?p=m[7]=-1:p=m[f],c.x=m,c.i=0,f=256;f>0;--f)c.next()}u(s,a)}function i(a,s){return s.x=a.x.slice(),s.i=a.i,s}function o(a,s){a==null&&(a=+new Date);var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(c.x&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})(zQ,typeof JT=="object"&&JT,typeof define=="function"&&define)});var qQ=Re((LQ,YT)=>{(function(r,e,t){function n(a){var s=this;s.next=function(){var c=s.w,l=s.X,f=s.i,p,m;return s.w=c=c+1640531527|0,m=l[f+34&127],p=l[f=f+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=l[f]=m^p,s.i=f,m+(c^c>>>16)|0};function u(c,l){var f,p,m,d,h,x=[],y=128;for(l===(l|0)?(p=l,l=null):(l=l+"\0",p=0,y=Math.max(y,l.length)),m=0,d=-32;d<y;++d)l&&(p^=l.charCodeAt((d+32)%l.length)),d===0&&(h=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,d>=0&&(h=h+1640531527|0,f=x[d&127]^=p+h,m=f==0?m+1:0);for(m>=128&&(x[(l&&l.length||0)&127]=-1),m=127,d=4*128;d>0;--d)p=x[m+34&127],f=x[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,x[m]=p^f;c.w=h,c.X=x,c.i=m}u(s,a)}function i(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function o(a,s){a==null&&(a=+new Date);var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(c.X&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(LQ,typeof YT=="object"&&YT,typeof define=="function"&&define)});var $Q=Re((PQ,QT)=>{(function(r,e,t){function n(a){var s=this,u="";s.next=function(){var l=s.b,f=s.c,p=s.d,m=s.a;return l=l<<25^l>>>7^f,f=f-p|0,p=p<<24^p>>>8^m,m=m-l|0,s.b=l=l<<20^l>>>12^f,s.c=f=f-p|0,s.d=p<<16^f>>>16^m,s.a=m-l|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,a===Math.floor(a)?(s.a=a/4294967296|0,s.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)s.b^=u.charCodeAt(c)|0,s.next()}function i(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function o(a,s){var u=new n(a),c=s&&s.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&i(c,u),l.state=function(){return i(u,{})}),l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(PQ,typeof QT=="object"&&QT,typeof define=="function"&&define)});var UQ=Re((wyt,Px)=>{(function(r,e){var t=this,n=256,i=6,o=52,a="random",s=e.pow(n,i),u=e.pow(2,o),c=u*2,l=n-1,f;function p(v,w,S){var b=[];w=w==!0?{entropy:!0}:w||{};var E=x(h(w.entropy?[v,N(r)]:v??y(),3),b),M=new m(b),D=function(){for(var A=M.g(i),k=s,T=0;A<u;)A=(A+T)*n,k*=n,T=M.g(1);for(;A>=c;)A/=2,k/=2,T>>>=1;return(A+T)/k};return D.int32=function(){return M.g(4)|0},D.quick=function(){return M.g(4)/4294967296},D.double=D,x(N(M.S),r),(w.pass||S||function(A,k,T,L){return L&&(L.S&&d(L,M),A.state=function(){return d(M,{})}),T?(e[a]=A,k):A})(D,E,"global"in w?w.global:this==e,w.state)}e["seed"+a]=p;function m(v){var w,S=v.length,b=this,E=0,M=b.i=b.j=0,D=b.S=[];for(S||(v=[S++]);E<n;)D[E]=E++;for(E=0;E<n;E++)D[E]=D[M=l&M+v[E%S]+(w=D[E])],D[M]=w;(b.g=function(A){for(var k,T=0,L=b.i,$=b.j,K=b.S;A--;)k=K[L=l&L+1],T=T*n+K[l&(K[L]=K[$=l&$+k])+(K[$]=k)];return b.i=L,b.j=$,T})(n)}function d(v,w){return w.i=v.i,w.j=v.j,w.S=v.S.slice(),w}function h(v,w){var S=[],b=typeof v,E;if(w&&b=="object")for(E in v)try{S.push(h(v[E],w-1))}catch{}return S.length?S:b=="string"?v:v+"\0"}function x(v,w){for(var S=v+"",b,E=0;E<S.length;)w[l&E]=l&(b^=w[l&E]*19)+S.charCodeAt(E++);return N(w)}function y(){try{var v;return f&&(v=f.randomBytes)?v=v(n):(v=new Uint8Array(n),(t.crypto||t.msCrypto).getRandomValues(v)),N(v)}catch{var w=t.navigator,S=w&&w.plugins;return[+new Date,t,S,t.screen,N(r)]}}function N(v){return String.fromCharCode.apply(0,v)}if(x(e.random(),r),typeof Px=="object"&&Px.exports){Px.exports=p;try{f=pM()}catch{}}else typeof define=="function"&&define.amd&&define(function(){return p})})([],Math)});var VQ=Re((Nyt,GQ)=>{var _Ne=kQ(),FNe=_Q(),BNe=BQ(),zNe=RQ(),RNe=qQ(),LNe=$Q(),ac=UQ();ac.alea=_Ne;ac.xor128=FNe;ac.xorwow=BNe;ac.xorshift7=zNe;ac.xor4096=RNe;ac.tychei=LNe;GQ.exports=ac});var eC,Ql,$x,Ux=g(()=>{eC=Si(VQ());Ql=class{constructor(e,t,n,i,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let a=o||Math.random();this.random=eC.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){let i=this.nextVal;return this.nextVal=NaN,i}let e,t,n=!1;for(;!n;){let i,o,a;do i=2*this.random()-1,o=2*this.random()-1,a=i*i+o*o;while(a>=1||a===0);let s=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*i*s,t=this.mean+this.stdDev*o*s,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},$x=class{constructor(e=0,t=1,n,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=n,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=eC.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function qNe(r,e=0,t=1,n,i){if(n!=null&&n==="bool")throw new Error(`Unsupported data type ${n}`);let o=new Ql(e,t,n,!1,i),a=Ra(r,n);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}var Gx,WQ=g(()=>{ql();Te();Ux();Gx=J({randomNormal_:qNe})});function PNe(r,e=0,t=1,n="float32",i){let o=Ra(r,n),a=new $x(e,t,null,i);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}var vs,tC=g(()=>{ql();Te();Ux();vs=J({randomUniform_:PNe})});function ef(r,e,t=1,n="float32"){if(t===0)throw new Error("Cannot have a step of zero");let i={start:r,stop:e,step:t,dtype:n};return H.runKernel(UX,{},i)}var rC=g(()=>{Ce();fe();});function $Ne(r){let t={x:U(r,"x","relu")};return H.runKernel(Iv,t)}var To,nC=g(()=>{Ce();fe();ke();Te();To=J({relu_:$Ne})});function UNe(r){let t={x:U(r,"x","relu6")};return H.runKernel(Fv,t)}var HQ,KQ=g(()=>{Ce();fe();ke();Te();HQ=J({relu6_:UNe})});function GNe(r,e){let n={x:U(r,"x","reverse")},i={dims:e};return H.runKernel(Bv,n,i)}var nu,iC=g(()=>{Ce();fe();ke();Te();nu=J({reverse_:GNe})});function VNe(r){let t={x:U(r,"x","round")};return H.runKernel(zv,t)}var jQ,ZQ=g(()=>{Ce();fe();ke();Te();jQ=J({round_:VNe})});function WNe(r){let t={x:U(r,"x","rsqrt","float32")};return H.runKernel(Rv,t)}var XQ,JQ=g(()=>{Ce();fe();ke();Te();XQ=J({rsqrt_:WNe})});function bt(r,e){if((qi(r)&&e!=="string"||Array.isArray(r))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&qi(r)&&!(r instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Xs(r,[],[],e)}var Nn=g(()=>{$e();nm();});function HNe(r){let t={x:U(r,"x","selu")};return H.runKernel(qv,t)}var oC,YQ=g(()=>{Ce();fe();ke();Te();oC=J({selu_:HNe})});function KNe(r,e,t,n,i,o=[1,1],a="NHWC"){let s=U(r,"x","separableConv2d"),u=U(e,"depthwiseFilter","separableConv2d"),c=U(t,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(s.rank===3&&(f=!0,l=pe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");W(l.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`),W(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),W(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),W(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),W(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=u.shape[2],m=u.shape[3];W(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);let d=tc(l,u,n,i,a,o),x=No(d,c,1,"valid",a);return f?pe(x,[x.shape[1],x.shape[2],x.shape[3]]):x}var aC,QQ=g(()=>{ke();$e();Gl();_x();Te();Dt();aC=J({separableConv2d_:KNe})});function jNe(r){let t={x:U(r,"x","sin","float32")};return H.runKernel($v,t)}var eee,tee=g(()=>{Ce();fe();ke();Te();eee=J({sin_:jNe})});function ZNe(r){let t={x:U(r,"x","sinh")};return H.runKernel(Uv,t)}var ree,nee=g(()=>{Ce();fe();ke();Te();ree=J({sinh_:ZNe})});function XNe(r,e,t){let n=U(r,"x","slice1d");return W(n.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${n.rank} tensor`),ir(n,[e],[t])}var bm,iee=g(()=>{ke();$e();Te();na();bm=J({slice1d_:XNe})});function JNe(r,e,t){let n=U(r,"x","slice2d");return W(n.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${n.rank} tensor`),ir(n,e,t)}var Vx,oee=g(()=>{ke();$e();Te();na();Vx=J({slice2d_:JNe})});function YNe(r,e,t){let n=U(r,"x","slice3d");return W(n.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${n.rank} tensor`),ir(n,e,t)}var wm,aee=g(()=>{ke();$e();Te();na();wm=J({slice3d_:YNe})});function QNe(r,e,t){let n=U(r,"x","slice4d");return W(n.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${n.rank} tensor`),ir(n,e,t)}var tf,see=g(()=>{ke();$e();Te();na();tf=J({slice4d_:QNe})});function eSe(r,e=-1){let t=U(r,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);let n={logits:t},i={dim:e};return H.runKernel(Zv,n,i)}var Nm,uee=g(()=>{Ce();fe();ke();Te();Nm=J({softmax_:eSe})});function tSe(r,e,t=0){let i={x:U(r,"x","split")},o={numOrSizeSplits:e,axis:t};return H.runKernel(jv,i,o)}var di,Sm=g(()=>{Ce();fe();ke();Te();di=J({split_:tSe})});function rSe(r){let t={x:U(r,"x","sqrt","float32")};return H.runKernel(Wv,t)}var Ir,sa=g(()=>{Ce();fe();ke();Te();Ir=J({sqrt_:rSe})});function nSe(r,e){let t=U(r,"x","squeeze");return pe(t,pE(t.shape,e).newShape)}var xs,sC=g(()=>{ke();$e();Te();Dt();xs=J({squeeze_:nSe})});function iSe(r,e=0){let t=px(r,"tensors","stack","string_or_numeric");W(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&W(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");let n=t,i={axis:e};return H.runKernel(Dv,n,i)}var Co,rf=g(()=>{Ce();fe();ke();$e();Te();Co=J({stack_:iSe})});function oSe(r,e=0){let n={x:U(r,"x","step")},i={alpha:e};return H.runKernel(rx,n,i)}var iu,Am=g(()=>{Ce();fe();ke();Te();iu=J({step_:oSe})});function dn(r,e){Wp(r);let t=Ku(r,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Xs(r,null,t,e)}var nf=g(()=>{ke();$e();nm();});function Wx(r,e,t){if(Wp(r),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let n=Ku(r,t);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Xs(r,e,n,t)}var cee=g(()=>{ke();$e();nm();});function aSe(r,e=0,t=1,n,i){if(n!=null&&n==="bool")throw new Error("Unsupported data type $ { dtype }");let o=new Ql(e,t,n,!0,i),a=Ra(r,n);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}var Mm,lee=g(()=>{ql();Te();Ux();Mm=J({truncatedNormal_:aSe})});function sSe(r,e,t){let n=U(r,"x","unsortedSegmentSum"),i=U(e,"segmentIds","unsortedSegmentSum","int32");W(Pu(t),()=>"numSegments must be of dtype int");let o={x:n,segmentIds:i},a={numSegments:t};return H.runKernel(ex,o,a)}var fee,pee=g(()=>{Ce();fe();ke();$e();Te();fee=J({unsortedSegmentSum_:sSe})});function uSe(r,e=0){let t=U(r,"x","unstack","string_or_numeric");W(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);let n={value:t},i={axis:e};return H.runKernel(Qv,n,i)}var $a,Dm=g(()=>{Ce();fe();ke();$e();Te();$a=J({unstack_:uSe})});function uC(r,e=!0,t,n){return H.makeVariable(r,e,t,n)}var mee=g(()=>{Ce();});var hee=g(()=>{});function cSe(r,e="euclidean",t=null,n=!1){r=U(r,"x","norm");let i=dee(r,e,t),o=i.shape;if(n){let a=En(t,r.shape);o=ru(i.shape,a)}return pe(i,o)}function dee(r,e,t=null){if(r.rank===0)return bn(r);if(r.rank!==1&&t===null)return dee(pe(r,[-1]),e,t);if(r.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return rt(bn(r),t);if(e===1/0)return ro(bn(r),t);if(e===-1/0)return WT(bn(r),t);if(e==="euclidean"||e===2)return Ir(rt(Eo(bn(r),bt(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return ro(rt(bn(r),t[0]),t[1]-1);if(e===1/0)return ro(rt(bn(r),t[1]),t[0]);if(e===-1/0)return WT(rt(bn(r),t[1]),t[0]);if(e==="fro"||e==="euclidean")return Ir(rt($t(r),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}var Hx,Kx=g(()=>{ke();$e();Sx();gs();Lx();SQ();Te();Yl();Dt();Nn();sa();In();Cn();Hx=J({norm_:cSe})});function lSe(r,e,t,n,i=!0){let o=U(r,"v","movingAverage"),a=U(e,"x","movingAverage"),s=U(t,"decay","movingAverage");IJ(o,a),W(ka(o.shape,a.shape),()=>"Shape mismatch in v and x");let u=bt(1),c=it(u,s),l=ee(it(a,o),c);if(i){W(n!=null,()=>"When using zeroDebias: true, step is required.");let f=U(n,"step","movingAverage");l=Xe(l,it(u,Eo(s,f)))}return Oe(o,l)}var g1t,gee=g(()=>{mn();ke();$e();yn();Tr();Mt();Te();Yl();Nn();on();g1t=J({movingAverage_:lSe})});function fSe(r,e,t){let n=U(r,"indices","scatterND","int32"),i=U(e,"updates","scatterND");oT(i,n,t);let o={indices:n,updates:i},a={shape:t};return H.runKernel(HX,o,a)}var N1t,vee=g(()=>{Ce();fe();ke();Te();aT();N1t=J({scatterND_:fSe})});function xee(r,e,t,n){if(r.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${r.dtype}.`);if(r.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${r.shape}.`);let i=r.rank>0?r.shape[0]:1,o=r.rank>1?r.shape[1]:1;if(t.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${o}.`);let a=e.size;if(!(e.rank===0||e.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==n.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var yee=g(()=>{});function mSe(r,e,t,n=0){let i=U(r,"sparseIndices","sparseToDense","int32"),o=U(e,"sparseValues","sparseToDense"),a=U(n,"defaultValue","sparseToDense",o.dtype);xee(i,o,t,a);let s={sparseIndices:i,sparseValues:o,defaultValue:a},u={outputShape:t};return H.runKernel(jX,s,u)}var T1t,bee=g(()=>{Ce();fe();yee();ke();Te();T1t=J({sparseToDense_:mSe})});function hSe(r,e){let t=U(e,"indices","gatherND","int32"),i={params:U(r,"x","gatherND","string_or_numeric"),indices:t};return H.runKernel(wX,i)}var F1t,wee=g(()=>{Ce();fe();ke();Te();F1t=J({gatherND_:hSe})});function Nee(r,e){if(e==null)return r.shape.slice();if(ka(r.shape,e))return e;if(r.shape.length===e.length){let t=[];for(let n=0;n<r.shape.length;n++)e[n]==null&&r.shape[n]!=null?t.push(r.shape[n]):t.push(e[n]);return t}return e}var See=g(()=>{$e();});function dSe(r,e,t,n){let i=U(r,"x","dropout");if(W(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),W(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return r instanceof Ar?i.clone():i;let o=Nee(i,t),a=1-e,s=Xe(oc(Oe(vs(o,0,1,"float32",n),a)),a);return ee(i,s)}var Aee,Mee=g(()=>{_a();ke();$e();yn();Tr();See();zx();Mt();Te();tC();Aee=J({dropout_:dSe})});var Dee=g(()=>{});var Eee=g(()=>{});function gSe(r,e,t,n,i,o="NHWC",a){let s=r;r.rank===3&&(s=pe(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let u=e;u.rank===3&&(u=pe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),W(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),W(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),W(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);let c=o==="NHWC"?s.shape[3]:s.shape[1],l=o==="NHWC"?u.shape[3]:u.shape[1];W(c===t[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${t[2]}.`),W(l===t[3],()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${t[3]}).`),yr("conv2dDerFilter",i,a);let f={x:s,dy:u},p={strides:n,pad:i,dataFormat:o,dimRoundingMode:a,filterShape:t};return H.runKernel(oX,f,p)}var of,jx=g(()=>{Ce();fe();$e();Tn();Te();Dt();of=J({conv2DBackpropFilter_:gSe})});function sc(r,e,t){if(t==null||t==="linear")return r;if(t==="relu")return ee(r,iu(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function uc(r,e){let t=e,n=xr(r.shape,e.shape);return n.length>0&&(t=rt(t,n)),pe(t,r.shape)}function cc(r,e,t,n){if(e==="linear")return r;if(e==="relu")return To(r);if(e==="elu")return rc(r);if(e==="relu6")return HQ(r);if(e==="prelu")return ym(r,t);if(e==="leakyrelu")return pm(r,n);if(e==="sigmoid")return tu(r);throw new Error(`Unknown fused activation ${e}.`)}var lc,af=g(()=>{Ur();kT();FT();Mt();KT();nC();KQ();Dt();Dx();Am();Cn();lc=(r,e)=>!(r>0)||e==="linear"});function vSe({x:r,filter:e,strides:t,pad:n,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:l}){if(u=u||"linear",lc(H.state.gradientDepth,u)===!1){let S=No(r,e,t,n,i,o,a);return s!=null&&(S=Oe(S,s)),cc(S,u,c,l)}let f=U(r,"x","conv2d","float32"),p=U(e,"filter","conv2d","float32"),m=f,d=!1;f.rank===3&&(d=!0,m=pe(f,[1,f.shape[0],f.shape[1],f.shape[2]])),W(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),W(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),yr("fused conv2d",n,a),W(m.shape[3]===p.shape[2],()=>`Error in conv2d: depth of input (${m.shape[3]}) must match input depth for filter ${p.shape[2]}.`),W(Jn(t,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`),W(i==="NHWC",()=>`Error in conv2d: got dataFormat of ${i} but only NHWC is currently supported.`);let h=ec(m.shape,p.shape,t,o,n,a),x;s!=null&&(x=U(s,"bias","fused conv2d"),[x]=jt(x,f),Lt(h.outShape,x.shape));let y;c!=null&&(y=U(c,"prelu weights","fused conv2d"));let N=(S,b)=>{let[E,M,D,A]=b,k=sc(S,D,u);W(to(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let T=Vl(M.shape,k,E,t,n),L=of(M,k,E.shape,t,n),$=[T,L];if(A!=null){let K=uc(A,k);$.push(K)}return $},v={x:m,filter:p,bias:x,preluActivationWeights:y},w={strides:t,pad:n,dataFormat:i,dilations:o,dimRoundingMode:a,activation:u,leakyreluAlpha:l};return s==null?aa((b,E,M)=>{let D=H.runKernel(wE,v,w);return M([E,b,D]),d&&(D=pe(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:N}})(m,p):aa((b,E,M,D)=>{let A=H.runKernel(wE,v,w);return D([E,b,A,M]),d&&(A=pe(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:N}})(m,p,x)}var Tee,Cee=g(()=>{Ce();jl();fe();mn();ke();$e();yn();Ur();Gl();jx();Ix();Tn();af();Te();Dt();Tee=J({fusedConv2d_:vSe})});function xSe(r,e,t,n,i,o=[1,1],a){let s=r;r.rank===3&&(s=pe(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let u=e;u.rank===3&&(u=pe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={x:s,dy:u},l={strides:n,pad:i,dimRoundingMode:a,dilations:o,filterShape:t};return H.runKernel(lX,c,l)}var Zx,cC=g(()=>{Ce();fe();Te();Dt();Zx=J({depthwiseConv2dNativeBackpropFilter_:xSe})});function ySe(r,e,t,n,i,o=[1,1],a){let s=e,u=!1;e.rank===3&&(u=!0,s=pe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={dy:s,filter:t},l={strides:n,pad:i,dimRoundingMode:a,dilations:o,inputShape:r},f=H.runKernel(fX,c,l);return u?pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Xx,lC=g(()=>{Ce();fe();Te();Dt();Xx=J({depthwiseConv2dNativeBackpropInput_:ySe})});function bSe({x:r,filter:e,strides:t,pad:n,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:l}){if(lc(H.state.gradientDepth,u)===!1){let S=tc(r,e,t,n,i,o,a);return s!=null&&(S=Oe(S,s)),cc(S,u,c,l)}let f=U(r,"x","depthwiseConv2d","float32"),p=U(e,"filter","depthwiseConv2d","float32"),m=f,d=!1;f.rank===3&&(d=!0,m=pe(f,[1,f.shape[0],f.shape[1],f.shape[2]])),W(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),W(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),W(m.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),o==null&&(o=[1,1]),W(Jn(t,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`),yr("fused depthwiseConv2d",n,a);let h=ec(m.shape,p.shape,t,o,n,a,!0),x;s!=null&&(x=U(s,"bias","fused conv2d"),[x]=jt(x,f),Lt(h.outShape,x.shape));let y;c!=null&&(y=U(c,"prelu weights","fused depthwiseConv2d"));let N=(S,b)=>{W(to(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[E,M,D,A]=b,k=sc(S,D,u),T=Xx(M.shape,k,E,t,n,o,a),L=Zx(M,k,E.shape,t,n,o,a);if(A!=null){let $=uc(x,k);return[T,L,$]}return[T,L]},v={x:m,filter:p,bias:x,preluActivationWeights:y},w={strides:t,pad:n,dataFormat:i,dilations:o,dimRoundingMode:a,activation:u,leakyreluAlpha:l};return s==null?aa((b,E,M)=>{let D=H.runKernel(NE,v,w);return M([E,b,D]),d&&(D=pe(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:N}})(m,p):aa((b,E,M,D)=>{let A=H.runKernel(NE,v,w);return D([E,b,A,M]),d&&(A=pe(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:N}})(m,p,x)}var Iee,kee=g(()=>{Ce();jl();fe();mn();ke();$e();yn();Ur();Tn();_x();cC();lC();af();Te();Dt();Iee=J({fusedDepthwiseConv2d_:bSe})});function wSe({a:r,b:e,transposeA:t=!1,transposeB:n=!1,bias:i,activation:o="linear",preluActivationWeights:a,leakyreluAlpha:s}){if(lc(H.state.gradientDepth,o)===!1){let k=fr(r,e,t,n);return i!=null&&(k=Oe(k,i)),cc(k,o,a,s)}let u=U(r,"a","fused matMul"),c=U(e,"b","fused matMul");[u,c]=jt(u,c);let l=t?u.shape[u.rank-2]:u.shape[u.rank-1],f=n?c.shape[c.rank-1]:c.shape[c.rank-2],p=t?u.shape[u.rank-1]:u.shape[u.rank-2],m=n?c.shape[c.rank-2]:c.shape[c.rank-1],d=u.shape.slice(0,-2),h=c.shape.slice(0,-2),x=Yt(d),y=Yt(h);W(l===f,()=>`Error in fused matMul: inner shapes (${l}) and (${f}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${t} and transposeB=${n} must match.`);let v=Lt(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),w=t?pe(u,[x,l,p]):pe(u,[x,p,l]),S=n?pe(c,[y,m,f]):pe(c,[y,f,m]),b;i!=null&&(b=U(i,"bias","fused matMul"),[b]=jt(b,u),Lt(v,b.shape));let E;a!=null&&(E=U(a,"prelu weights","fused matMul"));let M=(k,T)=>{let[L,$,K,V]=T,z=sc(pe(k,K.shape),K,o),Q,_;if(!t&&!n?(Q=fr(z,$,!1,!0),_=fr(L,z,!0,!1)):!t&&n?(Q=fr(z,$,!1,!1),_=fr(z,L,!0,!1)):t&&!n?(Q=fr($,z,!1,!0),_=fr(L,z,!1,!1)):(Q=fr($,z,!0,!0),_=fr(z,L,!0,!0)),i!=null){let te=uc(V,z);return[Q,_,te]}else return[Q,_]},D={a:w,b:S,bias:b,preluActivationWeights:E},A={transposeA:t,transposeB:n,activation:o,leakyreluAlpha:s};return i==null?aa((T,L,$)=>{let K=H.runKernel(bE,D,A);return $([T,L,K]),{value:pe(K,v),gradFunc:M}})(w,S):aa((T,L,$,K)=>{let V=H.runKernel(bE,D,A);return K([T,L,V,$]),{value:pe(V,v),gradFunc:M}})(w,S,b)}var Oee,_ee=g(()=>{Ce();jl();fe();mn();ke();$e();yn();Ur();af();sm();Te();Dt();Oee=J({fusedMatMul_:wSe})});var fc={};Is(fc,{conv2d:()=>Tee,depthwiseConv2d:()=>Iee,matMul:()=>Oee});var Fee=g(()=>{Cee();kee();_ee();});function NSe(r,e,t,n,i="bilinear",o=0){let a=U(r,"image","cropAndResize"),s=U(e,"boxes","cropAndResize","float32"),u=U(t,"boxInd","cropAndResize","int32"),c=s.shape[0];W(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),W(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${s.shape}.`),W(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${s.shape}.`),W(n.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${n.length}.`),W(n[0]>=1&&n[1]>=1,()=>`cropSize must be atleast [1,1], but was ${n}`),W(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);let l={image:a,boxes:s,boxInd:u},f={method:i,extrapolationValue:o,cropSize:n};return H.runKernel(cX,l,f)}var Bee,zee=g(()=>{Ce();fe();ke();$e();Te();Bee=J({cropAndResize_:NSe})});function SSe(r){let e=U(r,"image","flipLeftRight","float32");W(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);let t={image:e};return H.runKernel(bX,t,{})}var Ree,Lee=g(()=>{Ce();fe();ke();$e();Te();Ree=J({flipLeftRight_:SSe})});function ASe(r){let e=U(r,"image","grayscaleToRGB"),t=e.rank-1,n=e.shape[t];W(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),W(n===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${n}.`);let i=new Array(e.rank);return i.fill(1,0,t),i[t]=3,hi(e,i)}var qee,Pee=g(()=>{ke();$e();Te();lm();qee=J({grayscaleToRGB_:ASe})});function MSe(r,e,t=0,n=.5){let i=U(r,"image","rotateWithOffset","float32");W(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);let o={image:i},a={radians:e,fillValue:t,center:n};return H.runKernel(QX,o,a)}var $ee,Uee=g(()=>{Ce();fe();ke();$e();Te();$ee=J({rotateWithOffset_:MSe})});function Io(r,e,t,n,i,o){n==null&&(n=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);let a=r.shape[0];return t=Math.min(t,a),W(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),W(r.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${r.rank}'`),W(r.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${r.shape[1]}`),W(e.rank===1,()=>"scores must be a 1D tensor"),W(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),W(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:t,iouThreshold:n,scoreThreshold:i,softNmsSigma:o}}var pc=g(()=>{$e();});function DSe(r,e,t,n=.5,i=Number.NEGATIVE_INFINITY){let o=U(r,"boxes","nonMaxSuppression","float32"),a=U(e,"scores","nonMaxSuppression","float32"),s=Io(o,a,t,n,i);t=s.maxOutputSize,n=s.iouThreshold,i=s.scoreThreshold;let u={maxOutputSize:t,iouThreshold:n,scoreThreshold:i};return H.runKernel(LX,{boxes:o,scores:a},u)}var Gee,Vee=g(()=>{Ce();fe();ke();pc();Te();Gee=J({nonMaxSuppression_:DSe})});function Wee(r,e,t){let n=ESe(r,e,t),i=n<0?-(n+1):n;r.splice(i,0,e)}function ESe(r,e,t){return CSe(r,e,t||TSe)}function TSe(r,e){return r>e?1:r<e?-1:0}function CSe(r,e,t){let n=0,i=r.length,o=0,a=!1;for(;n<i;){o=n+(i-n>>>1);let s=t(e,r[o]);s>0?n=o+1:(i=o,a=!s)}return a?n:-n-1}var Hee=g(()=>{});function jee(r,e,t,n,i){return fC(r,e,t,n,i,0)}function Zee(r,e,t,n,i,o){return fC(r,e,t,n,i,0,!1,o,!0)}function Xee(r,e,t,n,i,o){return fC(r,e,t,n,i,o,!0)}function fC(r,e,t,n,i,o,a=!1,s=!1,u=!1){let c=[];for(let x=0;x<e.length;x++)e[x]>i&&c.push({score:e[x],boxIndex:x,suppressBeginIndex:0});c.sort(Kee);let l=o>0?-.5/o:0,f=[],p=[];for(;f.length<t&&c.length>0;){let x=c.pop(),{score:y,boxIndex:N,suppressBeginIndex:v}=x;if(y<i)break;let w=!1;for(let S=f.length-1;S>=v;--S){let b=ISe(r,N,f[S]);if(b>=n){w=!0;break}if(x.score=x.score*kSe(n,l,b),x.score<=i)break}x.suppressBeginIndex=f.length,w||(x.score===y?(f.push(N),p.push(x.score)):x.score>i&&Wee(c,x,Kee))}let m=f.length,d=t-m;s&&d>0&&(f.push(...new Array(d).fill(0)),p.push(...new Array(d).fill(0)));let h={selectedIndices:f};return a&&(h.selectedScores=p),u&&(h.validOutputs=m),h}function ISe(r,e,t){let n=r.subarray(e*4,e*4+4),i=r.subarray(t*4,t*4+4),o=Math.min(n[0],n[2]),a=Math.min(n[1],n[3]),s=Math.max(n[0],n[2]),u=Math.max(n[1],n[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),m=(s-o)*(u-a),d=(f-c)*(p-l);if(m<=0||d<=0)return 0;let h=Math.max(o,c),x=Math.max(a,l),y=Math.min(s,f),N=Math.min(u,p),v=Math.max(y-h,0)*Math.max(N-x,0);return v/(m+d-v)}function kSe(r,e,t){let n=Math.exp(e*t*t);return t<=r?n:0}function Kee(r,e){return r.score-e.score||r.score===e.score&&e.boxIndex-r.boxIndex}var Jx=g(()=>{Hee();});async function OSe(r,e,t,n=.5,i=Number.NEGATIVE_INFINITY){let o=U(r,"boxes","nonMaxSuppressionAsync"),a=U(e,"scores","nonMaxSuppressionAsync"),s=Io(o,a,t,n,i);t=s.maxOutputSize,n=s.iouThreshold,i=s.scoreThreshold;let u=await Promise.all([o.data(),a.data()]),c=u[0],l=u[1],{selectedIndices:f}=jee(c,l,t,n,i);return o!==r&&o.dispose(),a!==e&&a.dispose(),dn(f,"int32")}var Jee,Yee=g(()=>{Jx();ke();pc();nf();Jee=OSe});function _Se(r,e,t,n=.5,i=Number.NEGATIVE_INFINITY,o=0){let a=U(r,"boxes","nonMaxSuppression"),s=U(e,"scores","nonMaxSuppression"),u=Io(a,s,t,n,i,o);t=u.maxOutputSize,n=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma;let c={boxes:a,scores:s},l={maxOutputSize:t,iouThreshold:n,scoreThreshold:i,softNmsSigma:o},f=H.runKernel(PX,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}var Qee,ete=g(()=>{Ce();fe();ke();pc();Te();Qee=J({nonMaxSuppressionWithScore_:_Se})});async function FSe(r,e,t,n=.5,i=Number.NEGATIVE_INFINITY,o=0){let a=U(r,"boxes","nonMaxSuppressionAsync"),s=U(e,"scores","nonMaxSuppressionAsync"),u=Io(a,s,t,n,i,o);t=u.maxOutputSize,n=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma;let c=await Promise.all([a.data(),s.data()]),l=c[0],f=c[1],{selectedIndices:p,selectedScores:m}=Xee(l,f,t,n,i,o);return a!==r&&a.dispose(),s!==e&&s.dispose(),{selectedIndices:dn(p,"int32"),selectedScores:dn(m)}}var tte,rte=g(()=>{Jx();ke();pc();nf();tte=FSe});function BSe(r,e,t,n=.5,i=Number.NEGATIVE_INFINITY,o=!1){let a=U(r,"boxes","nonMaxSuppression"),s=U(e,"scores","nonMaxSuppression"),u=Io(a,s,t,n,i,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,p={boxes:a,scores:s},m={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:o},d=H.runKernel(qX,p,m);return{selectedIndices:d[0],validOutputs:d[1]}}var nte,ite=g(()=>{Ce();fe();ke();pc();Te();nte=J({nonMaxSuppressionPadded_:BSe})});async function zSe(r,e,t,n=.5,i=Number.NEGATIVE_INFINITY,o=!1){let a=U(r,"boxes","nonMaxSuppressionAsync"),s=U(e,"scores","nonMaxSuppressionAsync"),u=Io(a,s,t,n,i,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,[p,m]=await Promise.all([a.data(),s.data()]),{selectedIndices:d,validOutputs:h}=Zee(p,m,c,l,f,o);return a!==r&&a.dispose(),s!==e&&s.dispose(),{selectedIndices:dn(d,"int32"),validOutputs:bt(h,"int32")}}var ote,ate=g(()=>{Jx();ke();pc();Nn();nf();ote=zSe});function RSe(r,e,t=!1,n=!1){let i=U(r,"images","resizeBilinear");W(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),W(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),W(n===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=i,a=!1;i.rank===3&&(a=!0,o=pe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=e,s={images:o},u={alignCorners:t,halfPixelCenters:n,size:e},c=H.runKernel(_v,s,u);return a?pe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var ste,ute=g(()=>{Ce();fe();ke();$e();Te();Dt();ste=J({resizeBilinear_:RSe})});function LSe(r,e,t=!1,n=!1){let i=U(r,"images","resizeNearestNeighbor");W(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),W(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),W(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),W(n===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=i,a=!1;i.rank===3&&(a=!0,o=pe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=e,s={images:o},u={alignCorners:t,halfPixelCenters:n,size:e},c=H.runKernel(Ov,s,u);return a?pe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var cte,lte=g(()=>{Ce();fe();ke();$e();Te();Dt();cte=J({resizeNearestNeighbor_:LSe})});function qSe(r,e="binary",t=!1,n=.5){let i=U(r,"image","threshold"),o=.2989,a=.587,s=.114,u=i.shape[0]*i.shape[1],c=ee(dn([n]),255),l,f,p,m;if(W(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),W(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),W(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),W(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[l,f,p]=di(i,[1,1,1],-1);let x=ee(l,o),y=ee(f,a),N=ee(p,s);m=Oe(Oe(x,y),N)}else m=r;if(e==="otsu"){let x=XY(Le(jQ(m),"int32"),Fl([]),256);c=PSe(x,u)}let d=t?Pa(m,c):hn(m,c);return Le(ee(d,255),"int32")}function PSe(r,e){let t=dn([-1]),n=dn([0]),i=dn([0]),o,a,s,u,c,l;for(let f=0;f<r.size-1;f++){o=ir(r,0,f+1),a=ir(r,f+1),c=Xe(rt(o),e),l=Xe(rt(a),e);let p=rt(ee(o,ef(0,o.size)));s=Xe(p,rt(o));let m=ic(a.shape,o.size),d=Oe(ef(0,a.size),m),h=ee(a,d);u=Xe(rt(h),rt(a));let x=it(s,u),y=it(s,u),N=ee(c,l);i=ee(ee(N,x),y);let v=hn(i,n);n=Qr(v,i,n),t=Qr(v,dn([f]),t)}return t}var fte,pte=g(()=>{nf();Te();Zt();Sm();JY();Kl();ds();Cn();yn();Mt();Tr();on();ZQ();ia();Bx();na();rC();PE();$e();ke();fte=J({threshold_:qSe})});function $Se(r,e,t="nearest",n="constant",i=0,o){let a=U(r,"image","transform","float32"),s=U(e,"transforms","transform","float32");W(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),W(s.rank===2&&(s.shape[0]===a.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),W(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);let u={image:a,transforms:s},c={interpolation:t,fillMode:n,fillValue:i,outputShape:o};return H.runKernel(YX,u,c)}var mte,hte=g(()=>{Ce();fe();ke();$e();Te();mte=J({transform_:$Se})});function USe(r,e,t){W(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),W(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`);let n=U(r,"a","bandPart");W(n.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${n.rank}.`);let i=n.shape,[o,a]=n.shape.slice(-2);if(!(e<=o))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${o}).`);if(!(t<=a))throw new Error(`bandPart(): numUpper (${t}) must not be greater than the number of columns (${a}).`);e<0&&(e=o),t<0&&(t=a);let s=pe(ef(0,o,1,"int32"),[-1,1]),u=ef(0,a,1,"int32"),c=it(s,u),l=Mo(Pa(c,bt(+e,"int32")),oa(c,bt(-t,"int32"))),f=Wr([o,a],n.dtype);return pe(Co($a(pe(n,[-1,o,a])).map(p=>Qr(l,p,f))),i)}var dte,gte=g(()=>{ke();$e();Hl();Kl();hm();Te();rC();Dt();Nn();rf();on();Dm();ia();dm();dte=J({bandPart_:USe})});function GSe(r){let e;if(Array.isArray(r)){e=!1,W(r!=null&&r.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let i=r[0].shape[0];for(let o=1;o<r.length;++o)W(r[o].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${r[o].shape[0]} vs. ${i})`)}else e=!0,r=di(r,r.shape[0],0).map(i=>xs(i,[0]));W(r.length<=r[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${r.length}) exceeds number of dimensions (${r[0].shape[0]}).`);let t=[],n=r;for(let i=0;i<r.length;++i)t.push(H.tidy(()=>{let o=n[i];if(i>0)for(let a=0;a<i;++a){let s=ee(rt(ee(t[a],o)),t[a]);o=it(o,s)}return Xe(o,Hx(o,"euclidean"))}));return e?Co(t,0):t}var vte,xte=g(()=>{Ce();$e();Tr();Mt();Kx();Te();Sm();sC();rf();on();Cn();vte=J({gramSchmidt_:GSe})});function VSe(r,e=!1){if(W(r.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${r.rank}`),r.rank===2)return yte(r,e);{let t=r.shape.slice(0,r.shape.length-2).reduce((u,c)=>u*c),n=$a(pe(r,[t,r.shape[r.shape.length-2],r.shape[r.shape.length-1]]),0),i=[],o=[];n.forEach(u=>{let[c,l]=yte(u,e);i.push(c),o.push(l)});let a=pe(Co(i,0),r.shape),s=pe(Co(o,0),r.shape);return[a,s]}}function yte(r,e=!1){return H.tidy(()=>{W(r.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${r.shape.length}D Tensor.`);let t=r.shape[0],n=r.shape[1],i=Wl(t),o=eo(r),a=Wx([[1]],[1,1]),s=eo(a),u=t>=n?n:t;for(let c=0;c<u;++c){let l=o,f=s,p=i;[s,o,i]=H.tidy(()=>{let m=ir(o,[c,c],[t-c,1]),d=Hx(m),h=ir(o,[c,c],[1,1]),x=Qr(hn(h,0),Wx([[-1]]),Wx([[1]])),y=it(h,ee(x,d)),N=Xe(m,y);N.shape[0]===1?s=eo(a):s=wn([a,ir(N,[1,0],[N.shape[0]-1,N.shape[1]])],0);let v=br(Xe(fr(x,y),d)),w=ir(o,[c,0],[t-c,n]),S=ee(v,s),b=Ft(s);if(c===0)o=it(w,fr(S,fr(b,w)));else{let D=it(w,fr(S,fr(b,w)));o=wn([ir(o,[0,0],[c,n]),D],0)}let E=Ft(S),M=ir(i,[0,c],[t,i.shape[1]-c]);if(c===0)i=it(M,fr(fr(M,s),E));else{let D=it(M,fr(fr(M,s),E));i=wn([ir(i,[0,0],[t,c]),D],1)}return[s,o,i]}),yt([l,f,p])}return!e&&t>n&&(i=ir(i,[0,0],[t,n]),o=ir(o,[0,0],[n,n])),[i,o]})}var bte,wte=g(()=>{Ce();ra();$e();Pl();eu();Tr();OT();ds();sm();Mt();Gi();Kx();Te();Dt();na();rf();on();cee();Ju();Dm();ia();bte=J({qr_:VSe})});var Em,Nte,Yx=g(()=>{Sx();yn();BY();zY();RY();PY();$Y();KY();jY();ZY();Zt();QY();Pl();eu();eQ();tQ();rQ();nQ();iQ();Gl();oQ();aQ();sQ();_x();Tr();kT();IT();nc();Fx();OT();Bx();zx();_T();ds();Hl();FT();Rx();dQ();vQ();hm();sm();Lx();wQ();NQ();qx();VT();AQ();MQ();Mt();Gi();DQ();bY();gm();EQ();HT();KT();WQ();tC();nC();Dt();iC();Nn();YQ();QQ();Dx();na();iee();oee();aee();see();uee();gQ();Sm();sa();sC();rf();on();Cn();UY();nf();lm();lee();Dm();mee();ia();dm();Gr();hee();Ju();Kx();gee();vee();bee();wee();Mee();Dee();Eee();Fee();zee();Lee();Pee();Uee();Vee();Yee();ete();rte();ite();ate();ute();lte();pte();hte();gte();xte();wte();Em={flipLeftRight:Ree,grayscaleToRGB:qee,resizeNearestNeighbor:cte,resizeBilinear:ste,rotateWithOffset:$ee,cropAndResize:Bee,nonMaxSuppression:Gee,nonMaxSuppressionAsync:Jee,nonMaxSuppressionWithScore:Qee,nonMaxSuppressionWithScoreAsync:tte,nonMaxSuppressionPadded:nte,nonMaxSuppressionPaddedAsync:ote,threshold:fte,transform:mte},Nte={bandPart:dte,gramSchmidt:vte,qr:bte}});var Gn,ou=g(()=>{ra();jl();Yx();qa();Gn=class extends um{minimize(e,t=!1,n){let{value:i,grads:o}=this.computeGradients(e,n);if(n!=null){let a=n.map(s=>({name:s.name,tensor:o[s.name]}));this.applyGradients(a)}else this.applyGradients(o);return yt(o),t?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return zT(e,t)}dispose(){this.iterations_!=null&&yt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:bt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Gn,Symbol.hasInstance,{value:r=>r.minimize!=null&&r.computeGradients!=null&&r.applyGradients!=null})});var sf,Ste=g(()=>{Ce();ra();yn();Tr();Mt();Yx();In();Gr();qa();ou();sf=class extends Gn{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],n==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,i)=>{let o=H.registeredVariables[n],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${n}/accum_grad`,variable:ye(()=>mt(o).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${n}/accum_var`,variable:ye(()=>mt(o).variable(a))});let s=Array.isArray(e)?e[i].tensor:e[n];if(s==null)return;let u=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;ye(()=>{let l=Oe(ee(u,this.rho),ee($t(s),1-this.rho)),f=ee(Xe(Ir(Oe(c,this.epsilon)),Ir(Oe(u,this.epsilon))),s),p=Oe(ee(c,this.rho),ee($t(f),1-this.rho));u.assign(l),c.assign(p);let m=Oe(ee(f,-this.learningRate),o);o.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(yt(this.accumulatedGrads.map(e=>e.variable)),yt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=e.length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}};sf.className="Adadelta";Ti(sf)});var uf,Ate=g(()=>{Ce();ra();yn();Tr();Bx();Mt();sa();In();qa();ou();uf=class extends Gn{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,i)=>{let o=H.registeredVariables[n];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${n}/accumulator`,variable:ye(()=>ic(o.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(e)?e[i].tensor:e[n];if(a==null)return;let s=this.accumulatedGrads[i].variable;ye(()=>{let u=Oe(s,$t(a));s.assign(u);let c=Oe(ee(Xe(a,Ir(Oe(u,H.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&yt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulatedGrads=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}};uf.className="Adagrad";Ti(uf)});var cf,Mte=g(()=>{Ce();ra();yn();Tr();Mt();Yl();Nn();sa();In();on();Gr();qa();ou();cf=class extends Gn{constructor(e,t,n,i=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ye(()=>{this.accBeta1=bt(t).variable(),this.accBeta2=bt(n).variable()}),i==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);ye(()=>{let n=it(1,this.accBeta1),i=it(1,this.accBeta2);t.forEach((o,a)=>{let s=H.registeredVariables[o],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${o}/m`,variable:ye(()=>mt(s).variable(u))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${o}/v`,variable:ye(()=>mt(s).variable(u))});let c=Array.isArray(e)?e[a].tensor:e[o];if(c==null)return;let l=this.accumulatedFirstMoment[a].variable,f=this.accumulatedSecondMoment[a].variable,p=Oe(ee(l,this.beta1),ee(c,1-this.beta1)),m=Oe(ee(f,this.beta2),ee($t(c),1-this.beta2)),d=Xe(p,n),h=Xe(m,i);l.assign(p),f.assign(m);let x=Oe(ee(Xe(d,Oe(Ir(h),this.epsilon)),-this.learningRate),s);s.assign(x)}),this.accBeta1.assign(ee(this.accBeta1,this.beta1)),this.accBeta2.assign(ee(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&yt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&yt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),ye(()=>{this.accBeta1.assign(Eo(this.beta1,this.iterations_+1)),this.accBeta2.assign(Eo(this.beta2,this.iterations_+1))});let t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}};cf.className="Adam";Ti(cf)});var lf,Dte=g(()=>{Ce();ra();Sx();yn();Tr();qx();Mt();Nn();on();Gr();qa();ou();lf=class extends Gn{constructor(e,t,n,i=null,o=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=i,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ye(()=>{this.iteration=bt(0).variable(),this.accBeta1=bt(t).variable()}),i==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);ye(()=>{let n=it(1,this.accBeta1),i=Xe(-this.learningRate,Oe(ee(this.iteration,this.decay),1));t.forEach((o,a)=>{let s=H.registeredVariables[o],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${o}/m`,variable:mt(s).variable(u)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${o}/v`,variable:mt(s).variable(u)});let c=Array.isArray(e)?e[a].tensor:e[o];if(c==null)return;let l=this.accumulatedFirstMoment[a].variable,f=this.accumulatedWeightedInfNorm[a].variable,p=Oe(ee(l,this.beta1),ee(c,1-this.beta1)),m=ee(f,this.beta2),d=bn(c),h=Do(m,d);l.assign(p),f.assign(h);let x=Oe(ee(Xe(i,n),Xe(p,Oe(h,this.epsilon))),s);s.assign(x)}),this.iteration.assign(Oe(this.iteration,1)),this.accBeta1.assign(ee(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&yt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&yt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}};lf.className="Adamax";Ti(lf)});var au,pC=g(()=>{Ce();ra();yn();Mt();Nn();qa();ou();au=class extends Gn{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,i)=>{let o=Array.isArray(e)?e[i].tensor:e[n];if(o==null)return;let a=H.registeredVariables[n];ye(()=>{let s=Oe(ee(this.c,o),a);a.assign(s)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Xn(bt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}};au.className="SGD";Ti(au)});var ff,Ete=g(()=>{Ce();ra();yn();Mt();Nn();Gr();qa();pC();ff=class extends au{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=bt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,i)=>{let o=H.registeredVariables[n];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${n}/momentum`,variable:ye(()=>mt(o).variable(!1))});let a=this.accumulations[i].variable,s=Array.isArray(e)?e[i].tensor:e[n];s!=null&&ye(()=>{let u,c=Oe(ee(this.m,a),s);this.useNesterov?u=Oe(ee(this.c,Oe(s,ee(c,this.m))),o):u=Oe(ee(this.c,c),o),a.assign(c),o.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&yt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulations=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}};ff.className="Momentum";Ti(ff)});var pf,Tte=g(()=>{Ce();ra();yn();Tr();Mt();sa();In();on();Gr();qa();ou();pf=class extends Gn{constructor(e,t=.9,n=0,i=null,o=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,i==null&&(this.epsilon=H.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,i)=>{let o=H.registeredVariables[n],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${n}/rms`,variable:ye(()=>mt(o).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${n}/momentum`,variable:ye(()=>mt(o).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${n}/mg`,variable:ye(()=>mt(o).variable(a))});let s=Array.isArray(e)?e[i].tensor:e[n];if(s==null)return;let u=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;ye(()=>{let l=Oe(ee(u,this.decay),ee($t(s),1-this.decay));if(this.centered){let f=this.accumulatedMeanGrads[i].variable,p=Oe(ee(f,this.decay),ee(s,1-this.decay)),m=Xe(ee(s,this.learningRate),Ir(it(l,Oe($t(p),this.epsilon)))),d=Oe(ee(c,this.momentum),m);u.assign(l),f.assign(p),c.assign(d);let h=it(o,d);o.assign(h)}else{let f=Oe(ee(u,this.decay),ee($t(s),1-this.decay)),p=Oe(ee(c,this.momentum),Xe(ee(s,this.learningRate),Ir(Oe(f,this.epsilon))));u.assign(f),c.assign(p);let m=it(o,p);o.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&yt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&yt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&yt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(i=>({originalName:i.name,variable:i.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}};pf.className="RMSProp";Ti(pf)});var Ua,Cte=g(()=>{Ste();Ate();Mte();Dte();Ete();Tte();pC();Ua=class{static sgd(e){return new au(e)}static momentum(e,t,n=!1){return new ff(e,t,n)}static rmsprop(e,t=.9,n=0,i=null,o=!1){return new pf(e,t,n,i,o)}static adam(e=.001,t=.9,n=.999,i=null){return new cf(e,t,n,i)}static adadelta(e=.001,t=.95,n=null){return new sf(e,t,n)}static adamax(e=.002,t=.9,n=.999,i=null,o=0){return new lf(e,t,n,i,o)}static adagrad(e,t=.1){return new uf(e,t)}}});var mc,Ite=g(()=>{Cte();mc={sgd:Ua.sgd,momentum:Ua.momentum,adadelta:Ua.adadelta,adagrad:Ua.adagrad,rmsprop:Ua.rmsprop,adamax:Ua.adamax,adam:Ua.adam}});function mC(){return new Promise(r=>WSe(()=>r()))}var WSe,kte=g(()=>{WSe=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:r=>r())()});function HSe(r,e){let t=r[0].length;r.forEach((i,o)=>{W(i.length===t,()=>`Error in concat${t}D: rank of tensors[${o}] must be the same as the rank of the rest (${t})`)}),W(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);let n=r[0];r.forEach((i,o)=>{for(let a=0;a<t;a++)W(a===e||i[a]===n[a],()=>`Error in concat${t}D: Shape of tensors[${o}] (${i}) does not match the shape of the rest (${n}) along the non-concatenated axis ${o}.`)})}function KSe(r,e){let t=r[0].slice();for(let n=1;n<r.length;n++)t[e]+=r[n][e];return t}var Ote=g(()=>{$e();});function jSe(r){return r<=Qx?r:bl(r,Math.floor(Math.sqrt(r)))}var Qx,hC=g(()=>{$e();Qx=30});function ZSe(r,e,t){let n=t*(typeof r=="number"?r:r[0]),i=e*(typeof r=="number"?r:r[1]);return[n,i]}var _te=g(()=>{});function XSe(r,e,t,n=!0){let i=[];if(n)i=i.concat(e.slice(0)),i.push(r[0]/t),i=i.concat(r.slice(1));else{i=i.concat(r[0]);let o=e.length;for(let a=0;a<o;++a)i=i.concat([r[a+1]/e[a],e[a]]);i=i.concat(r.slice(o+1))}return i}function JSe(r,e,t=!0){let n=[];if(t){n.push(e);for(let i=e+1;i<r;++i)i<=2*e?(n.push(i),n.push(i-(e+1))):n.push(i)}else{let i=[],o=[];for(let a=1;a<r;++a)a>=e*2+1||a%2===1?o.push(a):i.push(a);n.push(...i),n.push(0),n.push(...o)}return n}function YSe(r,e,t,n=!0){let i=[];n?i.push(r[0]/t):i.push(r[0]*t);for(let o=1;o<r.length;++o)o<=e.length?n?i.push(e[o-1]*r[o]):i.push(r[o]/e[o-1]):i.push(r[o]);return i}function QSe(r,e){let t=[0];for(let n=0;n<e;++n)t.push(r[n][0]);return t}function eAe(r,e,t){let n=r.slice(0,1);for(let i=0;i<t;++i)n.push(r[i+1]-e[i][0]-e[i][1]);return n}var Fte=g(()=>{});var dC,gC,vC=g(()=>{dC=1.7580993408473768,gC=1.0507009873554805});var tAe,rAe,nAe,iAe,oAe,aAe,Bte=g(()=>{tAe=.3275911,rAe=.254829592,nAe=-.284496736,iAe=1.421413741,oAe=-1.453152027,aAe=1.061405429});function sAe(r,e){if(r.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${r.length}, imag: ${e.length}.`);let t=new Float32Array(r.length*2);for(let n=0;n<t.length;n+=2)t[n]=r[n/2],t[n+1]=e[n/2];return t}function uAe(r){let e=new Float32Array(r.length/2),t=new Float32Array(r.length/2);for(let n=0;n<r.length;n+=2)e[n/2]=r[n],t[n/2]=r[n+1];return{real:e,imag:t}}function cAe(r){let e=Math.ceil(r.length/4),t=new Float32Array(e),n=new Float32Array(e);for(let i=0;i<r.length;i+=4)t[Math.floor(i/4)]=r[i],n[Math.floor(i/4)]=r[i+1];return{real:t,imag:n}}function lAe(r){let e=Math.floor(r.length/4),t=new Float32Array(e),n=new Float32Array(e);for(let i=2;i<r.length;i+=4)t[Math.floor(i/4)]=r[i],n[Math.floor(i/4)]=r[i+1];return{real:t,imag:n}}function fAe(r,e){let t=r[e*2],n=r[e*2+1];return{real:t,imag:n}}function pAe(r,e,t,n){r[n*2]=e,r[n*2+1]=t}function mAe(r,e){let t=new Float32Array(r/2),n=new Float32Array(r/2);for(let i=0;i<Math.ceil(r/2);i++){let o=(e?2:-2)*Math.PI*(i/r);t[i]=Math.cos(o),n[i]=Math.sin(o)}return{real:t,imag:n}}function hAe(r,e,t){let n=(t?2:-2)*Math.PI*(r/e),i=Math.cos(n),o=Math.sin(n);return{real:i,imag:o}}var zte=g(()=>{});function gAe(r,e){r=r.replace(/\s/g,"");let t=(r.length-r.replace(dAe,"").length)/xC.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${xC}").`);let[n,i]=r.split(xC);W(n.indexOf(Lte)===-1,()=>`The ellipsis notation ("${Lte}") is not supported yet.`);let o=n.split(Rte),a=o.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let s=[];for(let p=0;p<i.length;++p){let m=i[p];if(!o.some(d=>d.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);s.indexOf(m)===-1&&s.push(m)}for(let p=0;p<n.length;++p){let m=n[p];s.indexOf(m)===-1&&m!==Rte&&s.push(m)}let u=new Array(o.length);for(let p=0;p<a;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error(`Found duplicate axes in input component ${o[p]}. Support for duplicate axes in input is not implemented yet.`);u[p]=[];for(let m=0;m<o[p].length;++m)u[p].push(s.indexOf(o[p][m]))}let c=s.length,l=i.length,f=[];for(let p=l;p<c;++p)f.push(p);return{allDims:s,summedDims:f,idDims:u}}function vAe(r,e){let t=new Array(r);t.fill(-1);for(let i=0;i<e.length;++i)t[e[i]]=i;let n=[];for(let i=0;i<r;++i)t[i]===-1&&n.push(i);return t=t.filter(i=>i!==-1),{permutationIndices:t,expandDims:n}}function xAe(r,e,t){let n=new Array(r);for(let i=0;i<t.length;++i){let o=t[i].shape;for(let a=0;a<e[i].length;++a)n[e[i][a]]===void 0?n[e[i][a]]=o[a]:W(n[e[i][a]]===o[a],()=>`Expected dimension ${n[e[i][a]]} at axis ${a} of input shaped ${JSON.stringify(o)}, but got dimension ${o[a]}`)}}function yAe(r,e){let t=r,n=[],i=0;r.length===0&&t.push(-1),i=r.length+1;for(let a=0;a<i;++a)n.push([]);let o=[];for(let a=0;a<t.length;++a){let s=t[a],u=wAe(e,s);for(let c of u)o.indexOf(c)===-1&&(n[a].push(c),o.push(c))}return{path:t,steps:n}}function bAe(r){return r.every((e,t)=>e===t)}function wAe(r,e){let t=[];for(let n=0;n<r.length;++n)(r[n].length===0||r[n].indexOf(e)!==-1||e===-1)&&t.push(n);return t}var xC,dAe,Rte,Lte,qte=g(()=>{Zp();xC="->",dAe=/->/g,Rte=",",Lte="..."});function NAe(r,e,t=0){let n=[];if(typeof e=="number")W(r.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),n=new Array(e).fill(r.shape[t]/e);else{let i=e.reduce((a,s)=>(s===-1&&(a+=1),a),0);W(i<=1,()=>"There should be only one negative value in split array.");let o=e.indexOf(-1);if(o!==-1){let a=e.reduce((s,u)=>u>0?s+u:s);e[o]=r.shape[t]-a}W(r.shape[t]===e.reduce((a,s)=>a+s),()=>"The sum of sizes must match the size of the axis dimension."),n=e}return n}var Pte=g(()=>{$e()});function SAe(r){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${r}`}function AAe(r,e){return`indices(${r}, 0) is invalid: ${e} < 0`}function MAe(r,e,t){return`indices(${r}, 0) is invalid: ${e} >= ${t}`}var $te=g(()=>{});function DAe(r,e){return`only one output dimension may be -1, not both ${r} and ${e}`}function EAe(r,e){return`size ${r} must be non-negative, not ${e}`}function TAe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function CAe(r,e){let t=Yt(r),n=Yt(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${n}. inputShape=${r} outputShape= ${e}`}function IAe(r,e){let t=Yt(r),n=Yt(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${n}. inputShape=${r} outputShape=${e}`}var Ute=g(()=>{$e();});function kAe(){return"segment ids must be >= 0"}function OAe(){return"segment ids are not increasing"}function _Ae(r,e){return`Segment id ${r} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function FAe(r,e,t){return`Bad: indices[${r}] == ${e} out of range [0, ${t})`}var Gte=g(()=>{});var yC={};Is(yC,{collectGatherOpShapeInfo:()=>RAe,computeOutShape:()=>zAe,segOpComputeOptimalWindowSize:()=>BAe});function BAe(r,e){let t=!1,n;for(r<=Qx?(n=r,t=!0):n=bl(r,Math.floor(Math.sqrt(r)));!t;)n>e||n===r?t=!0:n=bl(r,n+1);return n}function zAe(r,e,t){let n=[],i=r.length;for(let o=0;o<i;o++)o!==e?n.push(r[o]):n.push(t);return n}function RAe(r,e,t,n){let i=e.shape.length,o=r.shape.length;if(n!==0&&(n<-i||n>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${n}`);if(n<0&&(n+=i),n>o)throw new Error(`batchDims (${n}) must be less than rank(x) (
    ${o}).`);if(t<n)throw new Error(`batchDims (${n}) must be less than or equal to axis (${t}).`);for(let f=0;f<n;++f)if(r.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${r.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);let a=r.shape[t],s=[],u=1,c=1,l=1;for(let f=0;f<n;++f)s.push(r.shape[f]),u*=r.shape[f];for(let f=n;f<t;f++)s.push(r.shape[f]),c*=r.shape[f];for(let f=n;f<i;f++)s.push(e.shape[f]);for(let f=t+1;f<o;f++)s.push(r.shape[f]),l*=r.shape[f];return{batchSize:u,sliceSize:l,outerSize:c,dimSize:a,outputShape:s}}var Vte=g(()=>{$e();hC();});var Tm={};Is(Tm,{ERF_A1:()=>rAe,ERF_A2:()=>nAe,ERF_A3:()=>iAe,ERF_A4:()=>oAe,ERF_A5:()=>aAe,ERF_P:()=>tAe,PARALLELIZE_THRESHOLD:()=>Qx,SELU_SCALE:()=>gC,SELU_SCALEALPHA:()=>dC,applyActivation:()=>cc,assertAndGetBroadcastShape:()=>Lt,assertAxesAreInnerMostDims:()=>dNe,assertParamsConsistent:()=>HSe,assignToTypedArray:()=>pAe,axesAreInnerMostDims:()=>LT,calculateShapes:()=>U1e,checkEinsumDimSizes:()=>xAe,checkPadOnDimRoundingMode:()=>yr,combineLocations:()=>xQ,complexWithEvenIndex:()=>cAe,complexWithOddIndex:()=>lAe,computeConv2DInfo:()=>ec,computeConv3DInfo:()=>LY,computeDefaultPad:()=>mT,computeDilation2DInfo:()=>uwe,computeOptimalWindowSize:()=>jSe,computeOutAndReduceShapes:()=>qT,computeOutShape:()=>KSe,computePool2DInfo:()=>cwe,computePool3DInfo:()=>lwe,convertConv2DDataFormat:()=>qY,decodeEinsumEquation:()=>gAe,eitherStridesOrDilationsAreOne:()=>Jn,expandShapeToKeepDim:()=>ru,exponent:()=>hAe,exponents:()=>mAe,fromStringArrayToUint8:()=>qAe,fromUint8ToStringArray:()=>LAe,getAxesPermutation:()=>PT,getBroadcastDims:()=>P1e,getComplexWithIndex:()=>fAe,getEinsumComputePath:()=>yAe,getEinsumPermutation:()=>vAe,getFusedBiasGradient:()=>uc,getFusedDyActivation:()=>sc,getImageCenter:()=>ZSe,getInnerMostAxes:()=>gNe,getPermuted:()=>JSe,getReductionAxes:()=>xr,getReshaped:()=>XSe,getReshapedPermuted:()=>YSe,getSliceBeginCoords:()=>QSe,getSliceSize:()=>eAe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>SAe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>AAe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>MAe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>TAe,getSparseReshapeInputOutputMismatchErrorMessage:()=>IAe,getSparseReshapeInputOutputMultipleErrorMessage:()=>CAe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>DAe,getSparseReshapeNegativeOutputDimErrorMessage:()=>EAe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>FAe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>kAe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>OAe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>_Ae,getUndoAxesPermutation:()=>mm,isIdentityPermutation:()=>bAe,log:()=>Gbe,mergeRealAndImagArrays:()=>sAe,prepareAndValidate:()=>$1e,prepareSplitSize:()=>NAe,segment_util:()=>yC,shouldFuse:()=>lc,slice_util:()=>cT,splitRealAndImagArrays:()=>uAe,tupleValuesAreOne:()=>to,upcastType:()=>cx,validateInput:()=>oT,validateUpdateShape:()=>NY,warn:()=>fs});function LAe(r){try{return r.map(e=>Il(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function qAe(r){return r.map(e=>Cl(e))}var Wte=g(()=>{$e();gs();Ur();Ote();Tn();af();hC();lT();RE();_te();Fte();wY();aT();vC();af();Bte();nx();zte();qte();Pte();$te();Ute();Gte();Vte();});var bC=g(()=>{yY();qa();$e();ou();_a();Yx();Ite();ra();ix();jn();kte();Wte();fe();});var dt=g(()=>{sY();bC();});var Ci,Vn,ce,pt,mf,ur=g(()=>{Ci=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ci.prototype)}},Vn=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Vn.prototype)}},ce=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ce.prototype)}},pt=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,pt.prototype)}},mf=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,mf.prototype)}}});var Cm,Hte=g(()=>{Cm=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}});function Oo(r,e){if(Array.isArray(r)){let t=[];for(let n=0;n<e;n++)t=t.concat(r);return t}else{let t=new Array(e);return t.fill(r),t}}function no(r,e){if(!r)throw new mf(e)}function NC(r,e){let t=0;for(let n of r)n===e&&t++;return t}function kn(r){return r.length===1?r[0]:r}function pr(r){return Array.isArray(r)?r:[r]}function _o(r){let t=r.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function ys(r){return r.length<=1||r.indexOf("_")===-1?r:r.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}function hf(r){if(r==null)return null;let e={};return e.className=r.getClassName(),e.config=r.getConfig(),e}function wC(r){if(!(r==null||typeof r!="object"))if(Array.isArray(r))r.forEach(e=>wC(e));else{let e=Object.keys(r);for(let t of e){let n=r[t];n!=null&&typeof n=="object"&&(!Array.isArray(n)&&n.type==="ndarray"&&typeof n.value=="number"?r[t]=n.value:wC(n))}}}function Ga(r,e={},t={},n="object",i=!1){if(typeof r=="string"){let o=r,a;if(o in t)a=t[o];else if(o in ko)a=ko[o];else if(a=e[o],a==null)throw new ce(`Unknown ${n}: ${r}. This may be due to one of the following reasons:
1. The ${n} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${n} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{let o=r;if(o.className==null||o.config==null)throw new ce(`${n}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);let a=o.className,s,u;if(a in t?[s,u]=t[a]:a in ko?[s,u]=ko.className:a in e&&([s,u]=e[a]),s==null)throw new ce(`Unknown ${n}: ${a}. This may be due to one of the following reasons:
1. The ${n} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${n} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){let c={};for(let m of Object.keys(ko))c[m]=ko[m];for(let m of Object.keys(t))c[m]=t[m];let l=o.config;l.customObjects=c;let f=Object.assign({},ko);for(let m of Object.keys(t))ko[m]=t[m];wC(o.config);let p=u(s,o.config,t,i);return ko=Object.assign({},f),p}else{let c=Object.assign({},ko);for(let f of Object.keys(t))ko[f]=t[f];let l=new s(o.config);return ko=Object.assign({},c),l}}}function PAe(r,e){return r<e?-1:r>e?1:0}function Im(r,e){return-1*PAe(r,e)}function Fo(r){if(r==null)return r;let e=[];for(let t of r)e.indexOf(t)===-1&&e.push(t);return e}function Kte(r){if(r==null)throw new ce(`Invalid value in obj: ${JSON.stringify(r)}`);for(let e in r)if(r.hasOwnProperty(e))return!1;return!0}function Va(r,e,t){if(t!=null&&r.indexOf(t)<0)throw new ce(`${t} is not a valid ${e}.  Valid values are ${r} or null/undefined.`)}function ey(r,e,t=0,n=1/0){return no(t>=0),no(n>=t),Array.isArray(r)&&r.length>=t&&r.length<=n&&r.every(i=>typeof i===e)}function Xr(r,e){Array.isArray(r)?(Fe.assert(r.length>0,()=>`${e} is unexpectedly an empty array.`),r.forEach((t,n)=>Xr(t,`element ${n+1} of ${e}`))):Fe.assert(Number.isInteger(r)&&r>0,()=>`Expected ${e} to be a positive integer, but got ${jte(r)}.`)}function jte(r){return r===null?"null":Array.isArray(r)?"["+r.map(e=>jte(e)).join(",")+"]":typeof r=="string"?`"${r}"`:`${r}`}function Zte(r,e,t){let n=t!=null?t():Fe.now(),i;return(...a)=>{let s=t!=null?t():Fe.now();return s-n<e||(n=s,i=r(...a)),i}}function ty(r){return r==="relu"?"relu":r==="linear"?"linear":r==="elu"?"elu":null}var ko,Hr=g(()=>{dt();ur();ko={}});function ny(){return $Ae++}function su(r=""){return r in ry||(ry[r]=0),ry[r]+=1,r+ry[r].toString()}var $Ae,ry,df=g(()=>{$Ae=0;ry={}});var Xte,Jte,Yte,Qte,ere,iy=g(()=>{Xte=["channelsFirst","channelsLast"],Jte=["nearest","bilinear"],Yte=["valid","same","causal"],Qte=["max","avg"],ere=["sum","mul","concat","ave"]});function kr(r){Va(Xte,"DataFormat",r)}function rre(r){Va(Jte,"InterpolationFormat",r)}function gi(r){Va(Yte,"PaddingMode",r)}function SC(r){Va(Qte,"PoolMode",r)}function ca(r,e){km.push(r);try{let t=e();return km.pop(),t}catch(t){throw km.pop(),t}}function UAe(){return km.length===0?"":km.join(tre)+tre}function oy(r){if(!nre(r))throw new Error("Not a valid tensor name: '"+r+"'");return UAe()+r}function ay(r){if(!nre(r))throw new Error("Not a valid tensor name: '"+r+"'");gf.has(r)||gf.set(r,0);let e=gf.get(r);if(gf.set(r,gf.get(r)+1),e>0){let t=`${r}_${e}`;return gf.set(t,1),t}else return r}function nre(r){return!!r.match(GAe)}var gf,km,tre,GAe,Bo=g(()=>{iy();Hr();gf=new Map;km=[],tre="/";GAe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/)});function ire(r){return r===parseInt(r.toString(),10)}function zo(r,e,t){e==null&&(e=0),t==null&&(t=r.length);let n=1;for(let i=e;i<t;++i)n*=r[i];return n}function hc(r){if(r.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let t=0;t<r.length;t++){let n=r[t];n<e&&(e=n)}return e}function la(r){if(r.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let t=0;t<r.length;t++){let n=r[t];n>e&&(e=n)}return e}function Qn(r,e){if(e<r)throw new ce(`end (${e}) < begin (${r}) is forbidden.`);let t=[];for(let n=r;n<e;++n)t.push(n);return t}var Wa=g(()=>{ur();});function an(){return AC==null&&(AC=OY().epsilon()),AC}function vi(){return"channelsLast"}var AC,bs=g(()=>{dt();});function dc(r,e){return Le(r,e)}function Ns(r,e=-1){let t=r.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),pe(r,t)}function ore(r,e){return ye(()=>{if(r.shape.length!==2)throw new ce(`repeat() expects a rank-2 tensor, but received a rank-${r.shape.length} tensor.`);let t=Ns(r,1);return uy(t,[1,e,1])})}function are(r){let e=[zo(r.shape)];return pe(r,e)}function sre(r){if(r.rank<=1)throw new ce(`batchFlatten requires a minimum rank of 2. Got rank: ${r.rank}.`);let e=[r.shape[0],zo(r.shape,1)];return pe(r,e)}function ws(r,e,t){return ye(()=>{switch(r.rank){case 1:return bm(r,e,t);case 2:return Vx(r,[e,0],[t,r.shape[1]]);case 3:return wm(r,[e,0,0],[t,r.shape[1],r.shape[2]]);case 4:return tf(r,[e,0,0,0],[t,r.shape[1],r.shape[2],r.shape[3]]);case 5:return ir(r,[e,0,0,0,0],[t,r.shape[1],r.shape[2],r.shape[3],r.shape[4]]);case 6:return ir(r,[e,0,0,0,0,0],[t,r.shape[1],r.shape[2],r.shape[3],r.shape[4],r.shape[5]]);default:throw new ce(`sliceAlongFirstAxis() received an unsupported tensor rank: ${r.rank}`)}})}function MC(r,e,t){return ye(()=>{switch(r.rank){case 1:return bm(r,e,t);case 2:return Vx(r,[0,e],[r.shape[0],t]);case 3:return wm(r,[0,0,e],[r.shape[0],r.shape[1],t]);case 4:return tf(r,[0,0,0,e],[r.shape[0],r.shape[1],r.shape[2],t]);default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${r.rank}`)}})}function Om(r,e,t,n){return ye(()=>{switch(r.rank){case 1:return bm(r,e,t);case 2:switch(n){case 1:return ws(r,e,t);case 2:return MC(r,e,t);default:throw new ce(`The axis is not within the rank of the tensor ${n}`)}case 3:switch(n){case 1:return ws(r,e,t);case 2:return wm(r,[0,e,0],[r.shape[0],t,r.shape[2]]);case 3:return MC(r,e,t);default:throw new ce(`The axis is not within the rank of the tensor ${n}`)}case 4:switch(n){case 1:return ws(r,e,t);case 2:return tf(r,[0,e,0,0],[r.shape[0],t,r.shape[2],r.shape[3]]);case 3:return tf(r,[0,0,e,0],[r.shape[0],r.shape[1],t,r.shape[3]]);case 4:return MC(r,e,t);default:throw new ce(`The axis is not within the rank of the tensor ${n}`)}default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${r.rank}`)}})}function vf(r,e=-1){let t;return e<0&&(t=r[0].rank,t!==0?e=t:e=0),e===r[0].rank&&(e=-1),wn(r,e)}function EC(r,e){switch(r.rank){case 1:return yT([r,e]);case 2:return bT([r,e],0);case 3:return wT([r,e],0);case 4:return NT([r,e],0);default:throw new ce(`concatAlongFirstAxis() received an unsupported tensor rank: ${r.rank}`)}}function uy(r,e){if(Array.isArray(e)||(e=[e]),r.rank!==e.length)throw new ce(`The length of input n (${e.length}) does not match the number of dimensions in input x (${r.rank})`);return hi(r,e)}function xf(r,e=0,t=1,n,i){return Gx(r,e,t,n,i)}function Ro(r,e,t,n){if(r.rank<2||e.rank<2)throw new pt(`dot requires both inputs to be rank >= 2 but got x shape = ${r.shape} and y shape = ${e.shape}`);if(e.rank>=3){let i=r.shape.slice(-1)[0],o=e.shape.slice(-2)[0];if(i!==o)throw new pt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${r.shape} and  y shape = ${e.shape}`)}if(r.rank===2&&e.rank===2)return fc.matMul({a:r,b:e,transposeA:!1,transposeB:!1,bias:n?DC(r.rank,n,vi()):null,activation:t});{let i=r.shape.slice(),o=i.pop();r=pe(r,[-1,o]);let a=e.shape.slice(),s=a.pop(),u=a.pop(),c=[...a,s],l=Array.from({length:e.rank},(d,h)=>h===0?e.rank-2:h<=e.rank-2?h-1:h);e=pe(Ft(e,l),[u,-1]);let f=[...i,...c],p=!1,m=!1;return pe(fc.matMul({a:r,b:e,transposeA:p,transposeB:m,bias:n?DC(r.rank,n,vi()):null,activation:t}),f)}}function cy(r,e,t){return ye(()=>(Array.isArray(e)?e=dn(e,"int32"):e=Le(e,"int32"),fm(r,e,t)))}function gc(r){return ee(r,r)}function DC(r,e,t){let n=e.shape;if(e.rank!==1&&e.rank!==r)throw new ce(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${r}`);if(r===5){if(t==="channelsFirst")return n.length===1?pe(e,[1,n[0],1,1,1]):pe(e,[1,n[3],n[0],n[1],n[2]]);if(t==="channelsLast")return n.length===1?pe(e,[1,1,1,1,n[0]]):pe(e,[1].concat(n))}else if(r===4){if(t==="channelsFirst")return n.length===1?pe(e,[1,n[0],1,1]):pe(e,[1,n[2],n[0],n[1]]);if(t==="channelsLast")return n.length===1?pe(e,[1,1,1,n[0]]):pe(e,[1].concat(n))}else if(r===3){if(t==="channelsFirst")return n.length===1?pe(e,[1,n[0],1]):pe(e,[1,n[1],n[0]]);if(t==="channelsLast")return n.length===1?pe(e,[1,1,n[0]]):pe(e,[1].concat(n))}else if(r<3)return e;throw new ce(`Unsupported input rank by biasAdd: ${e.rank}`)}function xi(r,e,t){return ye(()=>(t==null&&(t=vi()),kr(t),Oe(r,DC(r.rank,e,t))))}function ure(r,e=1){if(e!==1)throw new pt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return rc(r)}function cre(r){return ye(()=>Xe(r,Oe(bn(r),1)))}function ly(r,e,t,n){return ye(()=>Aee(r,e,t,n))}function lre(r){return ye(()=>{let e=Oe(.5,ee(.2,r));return Yn(e,0,1)})}function uu(r,e,t=!1){return t?r():e()}var Wn=g(()=>{dt();dt();Bo();ur();Wa();bs();});var fre,pre,mre=g(()=>{fre=["fanIn","fanOut","fanAvg"],pre=["normal","uniform","truncatedNormal"]});function VAe(r){Va(fre,"FanMode",r)}function WAe(r){Va(pre,"Distribution",r)}function HAe(r,e="channelsLast"){let t,n;if(kr(e),r.length===2)t=r[0],n=r[1];else if([3,4,5].indexOf(r.length)!==-1){if(e==="channelsFirst"){let i=zo(r,2);t=r[1]*i,n=r[0]*i}else if(e==="channelsLast"){let i=zo(r,0,r.length-2);t=r[r.length-2]*i,n=r[r.length-1]*i}}else{let i=zo(r);t=Math.sqrt(i),n=Math.sqrt(i)}return[t,n]}function dre(r,e={}){return Ga(r,Ie.SerializationMap.getMap().classNameMap,e,"initializer")}function wr(r){return hf(r)}function cr(r){if(typeof r=="string"){let e=r in hre?hre[r]:r;if(e==="GlorotNormal")return new bf;if(e==="GlorotUniform")return new yf;if(e==="HeNormal")return new wf;if(e==="HeUniform")return new Nf;if(e==="LeCunNormal")return new Sf;if(e==="LeCunUniform")return new Af;{let t={};return t.className=e,t.config={},dre(t)}}else return r instanceof bi?r:dre(r)}var bi,_m,vc,Fm,Bm,zm,Rm,Lm,ei,yf,bf,wf,Nf,Sf,Af,qm,hre,fa=g(()=>{dt();Wn();Bo();ur();mre();Hr();Wa();bi=class extends Ie.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},_m=class extends bi{apply(e,t){return Wr(e,t)}};_m.className="Zeros";Ie.registerClass(_m);vc=class extends bi{apply(e,t){return Vi(e,t)}};vc.className="Ones";Ie.registerClass(vc);Fm=class extends bi{constructor(e){if(super(),typeof e!="object")throw new ce(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ce(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return ye(()=>ee(bt(this.value),Vi(e,t)))}getConfig(){return{value:this.value}}};Fm.className="Constant";Ie.registerClass(Fm);Bm=class extends bi{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return vs(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};Bm.className="RandomUniform";Ie.registerClass(Bm);zm=class extends bi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new pt(`randomNormal does not support dType ${t}.`);return xf(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};zm.className="RandomNormal";Ie.registerClass(zm);Rm=class extends bi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new pt(`truncatedNormal does not support dType ${t}.`);return Mm(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};Rm.className="TruncatedNormal";Ie.registerClass(Rm);Lm=class extends bi{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return ye(()=>{if(e.length!==2||e[0]!==e[1])throw new ce("Identity matrix initializer can only be used for 2D square matrices.");return ee(this.gain,Wl(e[0]))})}getConfig(){return{gain:this.gain}}};Lm.className="Identity";Ie.registerClass(Lm);ei=class extends bi{constructor(e){if(super(),e.scale<0)throw new ce(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,VAe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,WAe(this.distribution),this.seed=e.seed}apply(e,t){let n=HAe(e),i=n[0],o=n[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,o):a/=Math.max(1,(i+o)/2),this.distribution==="normal"){let s=Math.sqrt(a);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new pt(`${this.getClassName()} does not support dType ${t}.`);return Mm(e,0,s,t,this.seed)}else{let s=Math.sqrt(3*a);return vs(e,-s,s,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};ei.className="VarianceScaling";Ie.registerClass(ei);yf=class extends ei{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ei.className}};yf.className="GlorotUniform";Ie.registerClass(yf);bf=class extends ei{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ei.className}};bf.className="GlorotNormal";Ie.registerClass(bf);wf=class extends ei{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ei.className}};wf.className="HeNormal";Ie.registerClass(wf);Nf=class extends ei{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ei.className}};Nf.className="HeUniform";Ie.registerClass(Nf);Sf=class extends ei{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ei.className}};Sf.className="LeCunNormal";Ie.registerClass(Sf);Af=class extends ei{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ei.className}};Af.className="LeCunNormal";Ie.registerClass(Af);qm=class extends bi{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,this.seed!=null)throw new pt("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return ye(()=>{if(e.length<2)throw new pt("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);let n=e[0]>e[1]?[e[1],e[0]]:e,i=xf(n,0,1,"float32"),o=Nte.gramSchmidt(i);return e[0]>e[1]&&(o=Ft(o)),ee(this.gain,o)})}getConfig(){return{gain:this.gain,seed:this.seed}}};qm.className="Orthogonal";Ie.registerClass(qm);hre={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"}});function fy(r){return Array.isArray(r)&&Array.isArray(r[0])}function Mf(r){return r.length===0?[]:Array.isArray(r[0])?r:[r]}function St(r){let e;if(Array.isArray(r)){if(r.length!==1)throw new ce(`Expected Tensor length to be 1; got ${r.length}`);e=r[0]}else e=r;return e}function Ut(r){if(Array.isArray(r)&&Array.isArray(r[0])){if(r.length===1)return r=r,r[0];throw new ce(`Expected exactly 1 Shape; got ${r.length}`)}else return r}var ti=g(()=>{ur();});function Df(r){let e=0;for(let t of r)t.shape.length===0?e+=1:e+=t.shape.reduce((n,i)=>n*i);return e}var TC=g(()=>{});function jAe(r,e){if(r.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(r.shape)+" vs. "+JSON.stringify(e.shape))}function $m(r){return r.map(e=>e.read())}function Ef(r){r.forEach(e=>{e[0].write(e[1])})}var vre,Pm,Um=g(()=>{dt();dt();df();Bo();ur();vre="Variable",Pm=class{constructor(e,t="float32",n=vre,i=!0,o=null){this.dtype=t??"float32",this.shape=e.shape,this.id=ny(),n=n??vre,this.originalName=oy(n),this.name=ay(this.originalName),this.trainable_=i,this.constraint=o,this.val=uC(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),jAe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}});function JAe(r){r=pr(r);let e=[];for(let t of r)e.push(t.shape);return kn(e)}function YAe(r){return"float32"}function CC(r,e,t){if((e==null||t!=null&&t>0)&&(e=r.sourceLayer,t=r.nodeIndex),e.inboundNodes.length===0)return[r];{let n=e.inboundNodes[t];if(n.inboundLayers.length===0)return n.inputTensors;{let i=[];for(let o=0;o<n.inboundLayers.length;o++){let a=n.inputTensors[o],s=n.inboundLayers[o],u=n.nodeIndices[o],c=CC(a,s,u);for(let l of c)i.indexOf(l)===-1&&i.push(l)}return i}}}var mr,ri,ZAe,Ss,XAe,It,Sn=g(()=>{dt();df();Bo();ur();fa();Hr();ti();TC();Um();mr=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},ri=class{constructor(e,t,n,i,o,a,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=i,this.callArgs=o,this.outputTensorIndex=s,this.id=ny(),a!=null&&(this.originalName=oy(a),this.name=ay(this.originalName)),this.rank=t.length}},ZAe=0,Ss=class{constructor(e,t){this.callArgs=t,this.id=ZAe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)n?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},XAe=0,It=class extends Ie.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=XAe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let n=this.getClassName();t=_o(n)+"_"+su(n)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let n;if(e.batchInputShape!=null)n=e.batchInputShape;else if(e.inputShape!=null){let o=null;e.batchSize!=null&&(o=e.batchSize),n=[o].concat(e.inputShape)}this.batchInputShape=n;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Vn(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new ce(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return kn(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return kn(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ci(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ci(`Layer ${this.name} is not connected, no input to return.`);return kn(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ci(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ci(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return kn(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=pr(e),this.inputSpec==null||this.inputSpec.length===0)return;let t=pr(this.inputSpec);if(e.length!==t.length)throw new ce(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){let i=e[n],o=t[n];if(o==null)continue;let a=i.rank;if(o.ndim!=null&&a!==o.ndim)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&i.dtype!==o.dtype)throw new ce(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${i.dtype}.`);if(o.axes){let s=i.shape;for(let u in o.axes){let c=Number(u),l=o.axes[u],f=c>=0?s[c]:s[s.length+c];if(l!=null&&[l,null].indexOf(f)===-1)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${l} but got shape ${s}.`)}}if(o.shape!=null)for(let s=0;s<o.shape.length;++s){let u=o.shape[s],c=i.shape[s];if(u!=null&&c!=null&&u!==c)throw new ce(`Input ${n} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${i.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=pr(e),i=!0;for(let a of n)if(!(a instanceof ri)){i=!1;break}let o=!0;for(let a of n)if(a instanceof ri){o=!1;break}if(i===o)throw new ce("Arguments to apply() must be all SymbolicTensors or all Tensors");return ca(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let a=[];for(let s of pr(e))a.push(s.shape);this.build(kn(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let a=this.call(e,t),s=pr(a),u=[];for(let c of s)n.indexOf(c)!==-1&&(c=c.clone()),u.push(c);if(a=kn(u),this.activityRegularizer!=null)throw new pt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{let a=JAe(e),s=this.computeOutputShape(a),u,c=YAe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),s!=null&&s.length>0&&Array.isArray(s[0])?u=s.map((l,f)=>new ri(c,l,this,pr(e),t,this.name,f)):u=new ri(c,s,this,pr(e),t,this.name),this.addInboundNode(e,u,null,null,a,s,t),this._refCount++,this.activityRegularizer!=null)throw new pt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,i)=>{n!=null&&e[i]!=null&&e[i]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ci(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);e.indexOf(n)===-1&&e.push(n)}if(e.length===1){let t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new Ci(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Vn(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Df(this.weights)}build(e){this.built=!0}getWeights(e=!1){return $m(e?this.trainableWeights:this.weights)}setWeights(e){ye(()=>{let t=this.weights;if(t.length!==e.length)throw new ce(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;let n=[],i=$m(t);for(let o=0;o<i.length;++o){let a=i[o],s=t[o],u=e[o];if(!Fe.arraysEqual(a.shape,u.shape))throw new ce(`Layer weight shape ${a.shape} not compatible with provided weight shape ${u.shape}`);n.push([s,u])}Ef(n)})}addWeight(e,t,n,i,o,a,s,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new ce(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),n==null&&(n="float32"),this.fastWeightInitDuringBuild&&(i=u!=null?u():cr("zeros"));let c=i.apply(t,n),l=new Pm(c,n,e,a,s);return c.dispose(),o!=null&&this.addLoss(()=>o.apply(l.read())),a==null&&(a=!0),a?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=pr(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(n=>{if(n!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}addInboundNode(e,t,n,i,o,a,s=null){let u=pr(e);t=pr(t),n=pr(n),i=pr(i),o=Mf(o),a=Mf(a);let c=[],l=[],f=[];for(let p of u)c.push(p.sourceLayer),l.push(p.nodeIndex),f.push(p.tensorIndex);new Ss({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:f,inputTensors:u,outputTensors:t,inputMasks:n,outputMasks:i,inputShapes:o,outputShapes:a},s);for(let p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}getConfig(){let e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}});function IC(r){if(r.batchShape==null&&r.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(r.batchShape!=null&&r.shape!=null)throw new ce("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=r.batchShape;r.shape!=null&&e==null&&(e=[null].concat(r.shape));let t=r.dtype;return t==null&&(t="float32"),new Ha({batchInputShape:e,name:r.name,dtype:t,sparse:r.sparse}).inboundNodes[0].outputTensors[0]}var Ha,Tf=g(()=>{dt();df();ur();Sn();Ha=class extends It{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:su("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ce("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new ce("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ce("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let i=new ri(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new Ss({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new ce(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};Ha.className="InputLayer";Ie.registerClass(Ha)});function QAe(r,e){if(r.dtype==null||r.dtype===e.dtype)return e;try{return Le(e,r.dtype)}catch{throw new ce(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${r.name}' (${r.dtype}).`)}}function yre(r){py?.setMaxEntries(r),my?.setMaxEntries(r)}function xc(r,e,t,n){let i=t==null?!1:t.training,o=Array.isArray(r),a=o?r:[r],s=a.map(d=>d.name),u=[],c=e.names();for(let d of s)c.indexOf(d)!==-1?u.push(e.getValue(d)):u.push(null);n!=null&&(n.maxNumTensors=-1/0,n.minNumTensors=1/0);let l=s.join(",")+"|"+e.names().join(","),f=py.get(l),p;if(f==null){let d=eMe(a,e);f=d.sorted,p=d.recipientCounts,py.put(l,f),my.put(l,p)}p={},i||Object.assign(p,my.get(l));let m=new Lo(e);for(let d=0;d<f.length;++d){if(n!=null){let D=cm().numTensors;D>n.maxNumTensors&&(n.maxNumTensors=D),D<n.minNumTensors&&(n.minNumTensors=D)}let h=f[d],x=h.sourceLayer;if(x instanceof Ha)continue;let y=[],N=[],v=[],w=!1;for(let D of h.inputs){let A=m.getValue(D),k=m.getMask(D);y.push(A),N.push(k),k!=null&&(w=!0),i||(p[D.name]--,p[D.name]===0&&!e.hasKey(D)&&s.indexOf(D.name)===-1&&!A.isDisposed&&D.sourceLayer.stateful!==!0&&v.push(A))}w&&(t=t||{},t.mask=N[0]);let S=pr(x.apply(y,t)),b=null;x.supportsMasking&&(b=x.computeMask(y,N));let E=rMe(h),M=Array.isArray(E)?E:[E];for(let D=0;D<M.length;++D){m.hasKey(M[D])||m.add(M[D],S[D],Array.isArray(b)?b[0]:b);let A=s.indexOf(M[D].name);A!==-1&&(u[A]=S[D])}i||yt(v)}return m.disposeMasks(),o?u:u[0]}function eMe(r,e){Fe.assert(r!=null&&r.length>0,()=>"Expected at least one fetch, got none");let t=[],n={};if(r.length===1){let i=xre(r[0],e);t=i.sorted,n=i.recipientMap}else{let i=new Set;for(let o of r){let{sorted:a,recipientMap:s}=xre(o,e);for(let u of a)i.has(u.name)||(t.push(u),i.add(u.name));for(let u in s)n[u]==null&&(n[u]=new Set),s[u].forEach(c=>n[u].add(c))}}return{sorted:t,recipientCounts:tMe(n)}}function tMe(r){let e={};for(let t in r)e[t]=r[t].size;return e}function xre(r,e){let t=new Set,n=[],i={};for(let s of e.names())t.add(s);let o=[],a=[];for(o.push(r);o.length>0;){let s=o[o.length-1];if(t.has(s.name)){o.pop();continue}let u=a[a.length-1]===o.length-1;if(s.inputs.length===0||u)o.pop(),n.push(s),t.add(s.name),u&&a.pop();else{a.push(o.length-1);for(let c of s.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(s.name),!t.has(c.name)&&o.push(c)}}return{sorted:n,recipientMap:i}}function rMe(r){let e;if(r.sourceLayer.inboundNodes.length===1)e=r.sourceLayer.output;else{let t=null;for(let n=0;n<r.sourceLayer.inboundNodes.length;++n)for(let i of r.sourceLayer.inboundNodes[n].outputTensors)if(i.id===r.id){t=n;break}e=r.sourceLayer.getOutputAt(t)}return e}var Lo,py,my,hy=g(()=>{dt();ur();Hte();Hr();Tf();Sn();Lo=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Lo)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(this.id2Value[e.id]==null)this.id2Value[e.id]=QAe(e,t),this.name2Id[e.name]=e.id,n!=null&&(this.id2Mask[e.id]=n);else throw new ce(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof ri){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{let t=this.name2Id[e];if(t==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof ri){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{let t=this.name2Id[e];if(t==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&yt(this.id2Mask)}},py=new Cm,my=new Cm});var nMe,bre=g(()=>{dt();hy();nMe=Ct();nMe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,yre)});var dy,kC=g(()=>{fe();Zt();Mt();Am();dy={kernelName:$g,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(r,iu(Le(t,"float32"),-1))}}}});var wre,Nre=g(()=>{fe();Zt();Tr();Gi();Nn();sa();In();on();wre={kernelName:UZ,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=$t(Le(t,"float32")),i=Ir(it(bt(1),n));return br(Xe(r,i))}}}}});var Sre,Are=g(()=>{fe();Zt();Tr();sa();In();on();Sre={kernelName:GZ,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=Ir(it($t(Le(t,"float32")),1));return Xe(r,n)}}}}});var Mre,Dre=g(()=>{fe();Ur();Dt();Cn();Mre={kernelName:Nl,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=Lt(t.shape,n.shape);return{a:()=>{let s=r,u=xr(t.shape,i);return u.length>0&&(s=rt(s,u)),pe(s,t.shape)},b:()=>{let s=r,u=xr(n.shape,i);return u.length>0&&(s=rt(s,u)),pe(s,n.shape)}}}}});var Ere,Tre=g(()=>{fe();Ere={kernelName:VZ,saveAllInputs:!0,gradFunc:(r,e)=>{let t={};return e.forEach((n,i)=>{t[i]=()=>r.clone()}),t}}});var Cre,Ire=g(()=>{fe();Gr();Cre={kernelName:Ug,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>mt(t)}}}});var kre,Ore=g(()=>{fe();Gr();kre={kernelName:KZ,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>mt(t)}}}});var _re,Fre=g(()=>{fe();Zt();Tr();Nn();sa();In();on();_re={kernelName:jZ,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,Ir(it(bt(1),$t(Le(t,"float32")))))}}}});var Bre,zre=g(()=>{fe();yn();Zt();Tr();Nn();sa();In();Bre={kernelName:ZZ,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=Ir(Oe(bt(1),$t(Le(t,"float32"))));return Xe(r,n)}}}}});var Rre,Lre=g(()=>{fe();yn();Ur();Tr();Mt();Gi();Dt();In();Cn();Rre={kernelName:YZ,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=Lt(t.shape,n.shape);return{a:()=>{let s=Oe($t(t),$t(n)),u=ee(r,Xe(n,s)),c=xr(t.shape,i);return c.length>0&&(u=rt(u,c)),pe(u,t.shape)},b:()=>{let s=Oe($t(t),$t(n)),u=br(ee(r,Xe(t,s))),c=xr(n.shape,i);return c.length>0&&(u=rt(u,c)),pe(u,n.shape)}}}}});var qre,Pre=g(()=>{fe();yn();Zt();Tr();In();qre={kernelName:XZ,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,Oe($t(Le(t,"float32")),1))}}}});var $re,Ure=g(()=>{fe();Zt();Tr();In();on();Nn();$re={kernelName:JZ,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,it(bt(1),$t(Le(t,"float32"))))}}}});function iMe(r,e,t,n,i,o){let a=U(r,"dy","avgPool3dGrad"),s=U(e,"input","avgPool3dGrad"),u=a,c=s,l=!1;s.rank===4&&(l=!0,u=pe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=pe(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),W(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),W(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),yr("avgPool3dGrad",i,o);let f={dy:u,input:c},p={filterSize:t,strides:n,pad:i,dimRoundingMode:o},m=H.runKernel(eX,f,p);return l?pe(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}var Gre,Vre=g(()=>{Ce();fe();ke();$e();Tn();Te();Dt();Gre=J({avgPool3dGrad_:iMe})});var Wre,Hre=g(()=>{fe();Vre();Wre={kernelName:Vg,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:s}=t;return{x:()=>Gre(r,n,i,o,a,s)}}}});function oMe(r,e,t,n,i){let o=U(r,"dy","avgPoolGrad"),a=U(e,"input","avgPoolGrad");W(a.rank===o.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${o.rank})`);let s=a,u=o,c=!1;a.rank===3&&(c=!0,s=pe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=pe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),W(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),W(s.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);let l={dy:u,input:s},f={filterSize:t,strides:n,pad:i},p=H.runKernel(QZ,l,f);return c?pe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Kre,jre=g(()=>{Ce();fe();ke();$e();Te();Dt();Kre=J({avgPoolGrad_:oMe})});var Zre,Xre=g(()=>{fe();jre();Zre={kernelName:Gg,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{filterSize:i,strides:o,pad:a}=t;return{x:()=>Kre(r,n,i,o,a)}}}});var Jre,Yre=g(()=>{fe();sm();Jre={kernelName:Wg,inputsToSave:["a","b"],gradFunc:(r,e,t)=>{let[n,i]=e,{transposeA:o,transposeB:a}=t;return!o&&!a?{a:()=>fr(r,i,!1,!0),b:()=>fr(n,r,!0,!1)}:!o&&a?{a:()=>fr(r,i,!1,!1),b:()=>fr(r,n,!0,!1)}:o&&!a?{a:()=>fr(i,r,!1,!0),b:()=>fr(n,r,!1,!1)}:{a:()=>fr(i,r,!0,!0),b:()=>fr(r,n,!0,!0)}}}});var Qre,ene=g(()=>{fe();CQ();Qre={kernelName:Hg,gradFunc:(r,e,t)=>{let{blockShape:n,crops:i}=t;return{x:()=>TQ(r,n,i)}}}});var tne,rne=g(()=>{fe();Cn();tne={kernelName:rX,gradFunc:(r,e,t)=>{let n=t,i=n.inputShape,o=n.shape,a=Array.from(o);for(let u=i.length-1;u>=0;u--)if(i[u]===o[u])a[u]=1;else if(i[u]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${o}].`);let s=[];for(let u=0;u<a.length;u++)a[u]>1&&s.push(u);return{x:()=>rt(r,s,!0)}}}});var nne,ine=g(()=>{fe();nne={kernelName:Sl,gradFunc:r=>({x:()=>r.clone()})}});var one,ane=g(()=>{fe();Gr();one={kernelName:nX,gradFunc:r=>({x:()=>mt(r)})}});var sne,une=g(()=>{fe();Hl();Kl();hm();ia();Gr();sne={kernelName:Kg,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{clipValueMin:i,clipValueMax:o}=t;return{x:()=>Qr(Mo(oa(n,i),Pa(n,o)),r,mt(r))}}}});var cne,lne=g(()=>{fe();kC();cne={kernelName:jg,inputsToSave:["x"],gradFunc:dy.gradFunc}});var fne,pne=g(()=>{fe();Sm();$e();fne={kernelName:Zg,saveAllInputs:!0,gradFunc:(r,e,t)=>{let n=e.map(u=>u.shape),{axis:i}=t,o=En(i,e[0].shape)[0],a=n.map(u=>u[o]);return di(r,a,o).map(u=>()=>u)}}});var mne,hne=g(()=>{fe();jx();Ix();Tn();$e();mne={kernelName:Xg,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let[n,i]=e,{dilations:o,strides:a,pad:s,dataFormat:u}=t;return W(to(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>Vl(n.shape,r,i,a,s,u),filter:()=>of(n,r,i.shape,a,s,u)}}}});var dne,gne=g(()=>{fe();Gl();jx();dne={kernelName:Jg,inputsToSave:["dy","filter"],gradFunc:(r,e,t)=>{let[n,i]=e,{strides:o,pad:a,dataFormat:s,dimRoundingMode:u}=t;return{dy:()=>No(r,i,o,a,s,1,u),filter:()=>of(r,n,i.shape,o,a,s,u)}}}});function aMe(r,e,t,n,i){let o=r;r.rank===4&&(o=pe(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));let a=e;a.rank===4&&(a=pe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),W(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),W(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),W(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),W(o.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${t[3]}.`),W(a.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${t[4]}).`);let s={x:o,dy:a},u={strides:n,pad:i,filterShape:t};return H.runKernel(aX,s,u)}var vne,xne=g(()=>{Ce();fe();$e();Te();Dt();vne=J({conv3DBackpropFilter_:aMe})});var yne,bne=g(()=>{fe();xne();DT();Tn();$e();yne={kernelName:Yg,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let{dilations:n,strides:i,pad:o}=t;W(to(n),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${n}'`);let[a,s]=e;return{x:()=>kx(a.shape,r,s,i,o),filter:()=>vne(a,r,s.shape,i,o)}}}});var wne,Nne=g(()=>{fe();Zt();Mt();Gi();tee();wne={kernelName:Qg,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(br(eee(Le(t,"float32"))),r)}}}});var Sne,Ane=g(()=>{fe();Zt();Mt();nee();Sne={kernelName:ev,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(ree(Le(t,"float32")),r)}}}});var Mne,Dne=g(()=>{fe();gs();pQ();Ju();Mne={kernelName:tv,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{axis:i,exclusive:o,reverse:a}=t;return{x:()=>{let s=PT([i],n.rank),u=fQ(r,i,o,!a);return s!=null&&(u=Ft(u,s)),u}}}}});var Ene,Tne=g(()=>{fe();Tn();cC();lC();$e();Ene={kernelName:rv,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let{dilations:n,strides:i,pad:o,dimRoundingMode:a}=t,s=n??[1,1];W(to(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[u,c]=e;return W(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),W(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),W(u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),W(Jn(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),yr("depthwiseConv2d",o,a),{x:()=>Xx(u.shape,r,c,i,o,s,a),filter:()=>Zx(u,r,c.shape,i,o,s,a)}}}});var Cne,Ine=g(()=>{Ce();fe();Cne={kernelName:pX,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let[n,i]=e,o={x:n,filter:i,dy:r},a={x:n,filter:i,dy:r};return{x:()=>H.runKernel(mX,o,t),filter:()=>H.runKernel(hX,a,t)}}}});var kne,One=g(()=>{Ce();fe();kne={kernelName:iv,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e,n={dy:r,y:t};return{x:()=>H.runKernel(dX,n)}}}});var _ne,Fne=g(()=>{fe();nc();Mt();Gi();In();_ne={kernelName:gX,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e,n=ee(Ui(br($t(t))),2/Math.sqrt(Math.PI));return{x:()=>ee(r,n)}}}});var Bne,zne=g(()=>{fe();Mt();Bne={kernelName:ov,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(r,t)}}}});var Rne,Lne=g(()=>{fe();Dt();Rne={kernelName:av,inputsToSave:["input"],gradFunc:(r,e)=>{let[t]=e;return{input:()=>pe(r,t.shape)}}}});var qne,Pne=g(()=>{fe();nc();Mt();qne={kernelName:xX,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(r,Ui(t))}}}});var $ne,Une=g(()=>{fe();Gr();$ne={kernelName:sv,gradFunc:r=>({x:()=>mt(r)})}});var Gne,Vne=g(()=>{fe();Ur();Zt();Tr();Mt();Gi();Dt();In();Cn();Gne={kernelName:uv,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=Lt(t.shape,n.shape);return{a:()=>{let s=Xe(r,Le(n,"float32")),u=xr(t.shape,i);return u.length>0?pe(rt(s,u),t.shape):s},b:()=>{let s=ee(r,Le(t,"float32")),u=xr(n.shape,i);u.length>0&&(s=pe(rt(s,u),n.shape));let c=$t(n);return br(Xe(s,Le(c,"float32")))}}}}});var Wne,Hne=g(()=>{fe();yn();Ur();Mt();Dt();JQ();Nn();on();Cn();lm();Wne={kernelName:cv,inputsToSave:["x","mean","variance","scale"],gradFunc:(r,e,t)=>{let{varianceEpsilon:n}=t,[i,o,a,s]=e,u=s??bt(1),c=xr(o.shape,i.shape),l=[];if(o.rank===1){for(let w=0;w<i.shape.length-1;++w)l.push(i.shape[w]);l.push(1)}let f=it(i,o),p=ee(r,u),m=XQ(Oe(a,bt(n))),d=ee(ee(ee(m,m),m),bt(-.5));return{x:()=>o.rank===1?pe(ee(ee(r,hi(pe(m,[1,1,1,o.shape[0]]),l)),u),i.shape):pe(ee(ee(r,m),u),i.shape),mean:()=>{let w=ee(ee(m,bt(-1)),p);return o.rank===1&&(w=rt(w,c)),pe(w,o.shape)},variance:()=>{let w=ee(ee(d,f),p);return o.rank===1&&(w=rt(w,c)),pe(w,o.shape)},scale:()=>{let w=ee(f,m),S=ee(r,w);return o.rank===1&&(S=rt(S,c)),pe(S,o.shape)},offset:()=>{let w=r;return o.rank===1&&(w=rt(w,c)),pe(w,o.shape)}}}}});function Kne(r,e){let t=[];for(let n=r;n<e;++n)t.push(n);return t}function jne(r){let e=[];for(let t=0;t<r.length;++t)for(let n=0;n<r[t].length;++n)e.push(r[t][n]);return e}var Zne,Xne=g(()=>{fe();gs();Dt();Ju();pee();$e();Zne={kernelName:lv,inputsToSave:["x","indices"],gradFunc:(r,e,t)=>{let[n,i]=e,{axis:o}=t,a=En(o,n.shape)[0];return{x:()=>{let u=n.shape,c=i.size,l=u.slice(0,a),f=l.length,p=u.slice(o,u.length).slice(1),m=p.length,d=Kne(0,f),h=Kne(f+1,f+1+m),x=jne([l,[c],p]),y=pe(r,x),N=pe(i,[c]),v=jne([[f],d,h]),w=Ft(y,v),S=fee(w,N,n.shape[a]),b=mm(v);return S=Ft(S,b),S},indices:()=>i}}}});var Jne,Yne=g(()=>{fe();Gr();Jne={kernelName:fv,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e;return{a:()=>mt(t),b:()=>mt(n)}}}});var Qne,eie=g(()=>{fe();Zt();Qne={kernelName:Al,gradFunc:r=>({x:()=>Le(r,"float32")})}});var tie,rie=g(()=>{fe();Gr();tie={kernelName:SX,gradFunc:r=>({x:()=>mt(r)})}});var nie,iie=g(()=>{fe();Gr();nie={kernelName:AX,gradFunc:r=>({x:()=>mt(r)})}});var oie,aie=g(()=>{fe();Gr();oie={kernelName:MX,gradFunc:r=>({x:()=>mt(r)})}});var sie,uie=g(()=>{fe();ds();Mt();ia();sie={kernelName:pv,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{alpha:i}=t,o=hn(n,0);return{x:()=>Qr(o,r,ee(r,i))}}}});var cie,lie=g(()=>{fe();yn();Tr();cie={kernelName:hv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,Oe(t,1))}}}});var fie,pie=g(()=>{fe();Zt();Tr();fie={kernelName:mv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,Le(t,"float32"))}}}});var mie,hie=g(()=>{fe();nc();Mt();on();Cn();mie={kernelName:IX,inputsToSave:[],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n]=e,{axis:i}=t;return{logits:()=>{let a=Ui(n);return it(r,ee(rt(r,i,!0),a))}}}}});function sMe(r,e,t,n=5,i=1,o=1,a=.5){let s={x:r,y:e,dy:t},u={depthRadius:n,bias:i,alpha:o,beta:a};return H.runKernel(OX,s,u)}var die,gie=g(()=>{Ce();fe();Te();die=J({localResponseNormalizationBackprop_:sMe})});var vie,xie=g(()=>{fe();gie();vie={kernelName:kX,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n,i]=e,{depthRadius:o,bias:a,alpha:s,beta:u}=t;return{x:()=>die(n,i,r,o,a,s,u)}}}});function gy(r,e,t,n){return e.rank<t.rank&&(e=pe(e,ru(e.shape,n))),r.rank<t.rank&&(r=pe(r,ru(r.shape,n))),{x:()=>ee(r,Le(So(t,e),r.dtype))}}var OC=g(()=>{gs();Zt();IT();Mt();Dt();});var _C,yie=g(()=>{fe();$e();OC();_C={kernelName:dv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let n=t,{reductionIndices:i}=n,o=e[0],a=e[1],s=En(i,o.shape),u=gy(r,a,o,s);return{x:()=>u.x()}}}});var bie,wie=g(()=>{fe();Zt();Hl();hQ();Mt();bie={kernelName:gv,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e;return{a:()=>ee(r,Le(oa(t,n),"float32")),b:()=>ee(r,Le(mQ(t,n),"float32"))}}}});function uMe(r,e,t,n,i,o,a){let s=U(r,"dy","maxPool3dGrad"),u=U(e,"input","maxPool3dGrad"),c=U(t,"output","maxPool3dGrad"),l=s,f=u,p=c,m=!1;u.rank===4&&(m=!0,l=pe(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=pe(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=pe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),W(l.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),W(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),W(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),yr("maxPool3dGrad",o,a);let d={dy:l,input:f,output:p},h={filterSize:n,strides:i,pad:o,dimRoundingMode:a},x=H.runKernel(FX,d,h);return m?pe(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}var Nie,Sie=g(()=>{Ce();fe();ke();$e();Tn();Te();Dt();Nie=J({maxPool3dGrad_:uMe})});var Aie,Mie=g(()=>{fe();Sie();Aie={kernelName:xv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n,i]=e,{filterSize:o,strides:a,pad:s,dimRoundingMode:u}=t;return{x:()=>Nie(r,n,i,o,a,s,u)}}}});function cMe(r,e,t,n,i,o,a){let s=U(r,"dy","maxPoolGrad"),u=U(e,"input","maxPoolGrad"),c=U(t,"output","maxPoolGrad");W(u.rank===s.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${s.rank})`),W(s.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),W(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),yr("maxPoolGrad",o,a);let l={dy:s,input:u,output:c},f={filterSize:n,strides:i,pad:o,dimRoundingMode:a};return H.runKernel(_X,l,f)}var Die,Eie=g(()=>{Ce();fe();ke();$e();Tn();Te();Die=J({maxPoolGrad_:cMe})});var Tie,Cie=g(()=>{fe();Eie();Tie={kernelName:vv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n,i]=e,{filterSize:o,strides:a,pad:s}=t;return{x:()=>Die(r,n,i,o,a,s)}}}});var Iie,kie=g(()=>{fe();gs();Tr();Mt();gm();Dt();$e();Iie={kernelName:yv,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{axis:i}=t,o=En(i,n.shape),s=qT(n.shape,o)[1],u=Yt(s);return{x:()=>{let l=n.shape.slice();o.forEach(m=>{l[m]=1});let f=pe(r,l);return Xe(ee(f,Vi(n.shape,"float32")),u)}}}}});var Oie,_ie=g(()=>{fe();$e();OC();Oie={kernelName:bv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let n=t,{axis:i}=n,[o,a]=e,s=En(i,o.shape),u=gy(r,a,o,s);return{x:()=>u.x()}}}});var Fie,Bie=g(()=>{fe();Zt();ds();Kl();Mt();Fie={kernelName:wv,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e;return{a:()=>ee(r,Le(Pa(t,n),"float32")),b:()=>ee(r,Le(hn(t,n),"float32"))}}}});var zie,Rie=g(()=>{fe();na();zie={kernelName:BX,inputsToSave:["x"],gradFunc:(r,e,t)=>{let n=e[0],{paddings:i}=t,o=i.map(a=>a[0]);return{x:()=>ir(r,o,n.shape)}}}});var Lie,qie=g(()=>{fe();Ur();Tr();zx();Mt();Gi();Dt();Cn();Lie={kernelName:zX,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=Lt(t.shape,n.shape);return{a:()=>{let s=xr(t.shape,i);return s.length>0?pe(rt(r,s),t.shape):r},b:()=>{let s=ee(r,br(oc(Xe(t,n)))),u=xr(n.shape,i);return u.length>0?pe(rt(s,u),n.shape):s}}}}});var Pie,$ie=g(()=>{fe();Ur();Zt();Mt();Dt();Cn();Pie={kernelName:Nv,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=Lt(t.shape,n.shape);return{a:()=>{let s=ee(r,Le(n,"float32")),u=xr(t.shape,i);return u.length>0?pe(rt(s,u),t.shape):s},b:()=>{let s=ee(r,Le(t,"float32")),u=xr(n.shape,i);return u.length>0?pe(rt(s,u),n.shape):s}}}}});var Uie,Gie=g(()=>{fe();Gi();Uie={kernelName:Sv,gradFunc:r=>({x:()=>br(r)})}});var Vie,Wie=g(()=>{fe();dm();Vie={kernelName:Mv,inputsToSave:["indices"],gradFunc:(r,e)=>{let t=e[0];return{indices:()=>Wr(t.shape,"float32")}}}});var Hie,Kie=g(()=>{fe();Gr();Hie={kernelName:Av,gradFunc:r=>({x:()=>mt(r)})}});var jie,Zie=g(()=>{fe();Dm();jie={kernelName:Dv,saveAllInputs:!0,gradFunc:(r,e,t)=>{let{axis:n}=t;return $a(r,n).map(o=>()=>o)}}});var FC,Xie=g(()=>{fe();na();FC={kernelName:Ev,inputsToSave:["x"],gradFunc:(r,e,t)=>{let n=e[0],{paddings:i}=t,o=i.map(a=>a[0]);return{x:()=>ir(r,o,n.shape)}}}});var Jie,Yie=g(()=>{fe();Ur();Zt();ds();Rx();Mt();Yl();Dt();Nn();on();Cn();ia();Gr();Jie={kernelName:Tv,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(r,e)=>{let[t,n,i]=e,o=t,a=n,s=Lt(o.shape,a.shape);return{a:()=>{let l=Le(a,"float32"),f=ee(r,ee(l,Eo(o,it(l,bt(1))))),p=xr(o.shape,s);return p.length>0&&(f=rt(f,p)),pe(f,o.shape)},b:()=>{let l=hn(o,0),f=Qr(l,Ao(o),mt(o)),p=ee(r,ee(i,f)),m=xr(a.shape,s);return m.length>0&&(p=rt(p,m)),pe(p,a.shape)}}}}});var Qie,eoe=g(()=>{fe();Ur();ds();Mt();Dt();Cn();ia();Gr();Qie={kernelName:Cv,inputsToSave:["x","alpha"],gradFunc:(r,e)=>{let[t,n]=e,i=hn(t,0);return{x:()=>Qr(i,r,ee(r,n)),alpha:()=>{let o=Qr(i,mt(r),ee(r,t)),a=xr(n.shape,r.shape);return a.length>0&&(o=rt(o,a)),pe(o,n.shape)}}}}});function lMe(r,e,t){let n=r.shape.slice();n[t]=1;let i=pe(e,n),o=CT(r,t,!0,!1),a=CT(r,t,!0,!0),s=ee(o,a);return ee(i,s)}function fMe(r,e,t){let n=r.shape.length,i=n-t.length,o=Tm.getAxesPermutation(t,n),a=r;o!=null&&(a=Ft(r,o));let s=a.shape.slice(),c=s.splice(n-t.length,t.length).reduce((p,m)=>p*m,1);s.push(c);let l=a.reshape(s),f=lMe(l,e,i);if(f=f.reshape(a.shape),o!=null){let p=Tm.getUndoAxesPermutation(o);f=Ft(f,p)}return f}var toe,roe=g(()=>{bC();fe();lQ();Mt();Dt();Ju();toe={kernelName:$X,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{axis:i}=t,o=[];return i==null?o=n.shape.map((a,s)=>s):typeof i=="number"?o=[i]:o=i,{x:()=>fMe(n,r,o)}}}});var noe,ioe=g(()=>{fe();Ur();Zt();Tr();Mt();Gi();Dt();In();Cn();noe={kernelName:nv,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=Lt(t.shape,n.shape);return{a:()=>{let s=Xe(r,Le(n,"float32")),u=xr(t.shape,i);return u.length>0?pe(rt(s,u),t.shape):s},b:()=>{let s=ee(r,Le(t,"float32")),u=xr(n.shape,i);u.length>0&&(s=pe(rt(s,u),n.shape));let c=$t(n);return br(Xe(s,Le(c,"float32")))}}}}});var ooe,aoe=g(()=>{fe();Tr();Gi();In();ooe={kernelName:GX,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,br($t(t)))}}}});var soe,uoe=g(()=>{fe();Zt();Kl();Mt();Am();soe={kernelName:Fv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e,n=ee(Pa(t,6),iu(t));return{x:()=>ee(r,Le(n,"float32"))}}}});var coe,loe=g(()=>{fe();Zt();Mt();Am();coe={kernelName:Iv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(r,Le(iu(t),"float32"))}}}});var foe,poe=g(()=>{fe();Dt();foe={kernelName:kv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>pe(r,t.shape)}}}});var moe,hoe=g(()=>{Ce();fe();moe={kernelName:_v,inputsToSave:["images"],gradFunc:(r,e,t)=>{let[n]=e,i={dy:r,images:n};return{images:()=>H.runKernel(WX,i,t)}}}});var doe,goe=g(()=>{Ce();fe();doe={kernelName:Ov,inputsToSave:["images"],gradFunc:(r,e,t)=>{let[n]=e,i={dy:r,images:n};return{images:()=>H.runKernel(VX,i,t)}}}});var voe,xoe=g(()=>{fe();iC();$e();voe={kernelName:Bv,gradFunc:(r,e,t)=>{let{dims:n}=t,i=En(n,r.shape);return{x:()=>nu(r,i)}}}});var yoe,boe=g(()=>{fe();Gr();yoe={kernelName:zv,gradFunc:r=>({x:()=>mt(r)})}});var woe,Noe=g(()=>{fe();Tr();Mt();Gi();Yl();woe={kernelName:Rv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>br(Xe(r,ee(Eo(t,1.5),2)))}}}});var Soe,Aoe=g(()=>{fe();Zt();bQ();Mt();Gr();Soe={kernelName:Lv,inputsToSave:["condition"],gradFunc:(r,e)=>{let[t]=e;return{condition:()=>Le(mt(t),"float32"),t:()=>ee(r,Le(t,r.dtype)),e:()=>ee(r,Le(yQ(t),r.dtype))}}}});var Moe,Doe=g(()=>{fe();Zt();nc();ds();Mt();Nn();vC();ia();Moe={kernelName:qv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=hn(t,bt(0)),i=bt(dC),o=bt(gC),a=ee(r,o),s=ee(ee(r,i),Ui(Le(t,"float32")));return Qr(n,a,s)}}}}});var Eoe,Toe=g(()=>{fe();Mt();Nn();on();Eoe={kernelName:Gv,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(r,ee(t,it(bt(1),t)))}}}});var Coe,Ioe=g(()=>{fe();Gr();Coe={kernelName:KX,gradFunc:r=>({x:()=>mt(r)})}});var koe,Ooe=g(()=>{fe();Zt();TT();Mt();koe={kernelName:$v,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(Ox(Le(t,"float32")),r)}}}});var _oe,Foe=g(()=>{fe();Zt();cQ();Mt();_oe={kernelName:Uv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(uQ(Le(t,"float32")),r)}}}});var Boe,zoe=g(()=>{fe();HT();lT();Boe={kernelName:Pv,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{begin:i,size:o}=t,a=n.shape,[s,u]=uT(n,i,o),c=[];for(let l=0;l<r.rank;l++)c.push([s[l],a[l]-s[l]-u[l]]);return{x:()=>xm(r,c)}}}});var Roe,Loe=g(()=>{fe();Mt();on();Cn();Roe={kernelName:Zv,outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n]=e,{dim:i}=t,o=!0,a=ee(r,n);return{logits:()=>it(a,ee(rt(a,[i],o),n))}}}});var qoe,Poe=g(()=>{fe();Mt();Dx();qoe={kernelName:Vv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(r,tu(t))}}}});var BC,$oe=g(()=>{fe();VY();BC={kernelName:Kv,gradFunc:(r,e,t)=>{let{blockShape:n,paddings:i}=t;return{x:()=>GY(r,n,i)}}}});var zC,Uoe=g(()=>{fe();eu();zC={kernelName:jv,gradFunc:(r,e,t)=>{let{axis:n}=t;return{x:()=>wn(r,n)}}}});var Goe,Voe=g(()=>{fe();Zt();Tr();Mt();sa();Goe={kernelName:Wv,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,ee(Ir(Le(t,"float32")),2))}}}});var Woe,Hoe=g(()=>{fe();Zt();Mt();Woe={kernelName:XX,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(r,ee(Le(t,"float32"),2))}}}});var Koe,joe=g(()=>{fe();Mt();Nn();on();Koe={kernelName:ZX,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=bt(2);return{a:()=>ee(r,ee(i,it(t,n))),b:()=>ee(r,ee(i,it(n,t)))}}}});var Zoe,Xoe=g(()=>{fe();Gr();Zoe={kernelName:rx,gradFunc:r=>({x:()=>mt(r)})}});var Joe,Yoe=g(()=>{fe();Ur();Gi();Dt();Cn();Joe={kernelName:Xv,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,i=Lt(t.shape,n.shape);return{a:()=>{let s=r,u=xr(t.shape,i);return u.length>0&&(s=rt(s,u)),pe(s,t.shape)},b:()=>{let s=r,u=xr(n.shape,i);return u.length>0&&(s=rt(s,u)),pe(br(s),n.shape)}}}}});var Qoe,eae=g(()=>{fe();Mt();gm();Dt();$e();Qoe={kernelName:Hv,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,i=n.shape.slice(),{axis:o}=t;En(o,n.shape).forEach(c=>{i[c]=1});let s=pe(r,i),u=ee(s,Vi(n.shape,"float32"));return{x:()=>u}}}});var tae,rae=g(()=>{fe();TT();Tr();In();tae={kernelName:JX,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Xe(r,$t(Ox(t)))}}}});var nae,iae=g(()=>{fe();Mt();Nn();In();on();nae={kernelName:Jv,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ee(it(bt(1),$t(t)),r)}}}});var oae,aae=g(()=>{fe();yn();na();Gr();oae={kernelName:Ml,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{reps:i}=t;return{x:()=>{let a=mt(n);if(n.rank===1)for(let s=0;s<i[0];++s)a=Oe(a,ir(r,[s*n.shape[0]],[n.shape[0]]));else if(n.rank===2)for(let s=0;s<i[0];++s)for(let u=0;u<i[1];++u)a=Oe(a,ir(r,[s*n.shape[0],u*n.shape[1]],[n.shape[0],n.shape[1]]));else if(n.rank===3)for(let s=0;s<i[0];++s)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)a=Oe(a,ir(r,[s*n.shape[0],u*n.shape[1],c*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else if(n.rank===4)for(let s=0;s<i[0];++s)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)for(let l=0;l<i[3];++l)a=Oe(a,ir(r,[s*n.shape[0],u*n.shape[1],c*n.shape[2],l*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${n.rank} tensors yet.`);return a}}}}});var sae,uae=g(()=>{fe();gs();Ju();sae={kernelName:Yv,gradFunc:(r,e,t)=>{let n=t,{perm:i}=n,o=mm(i);return{x:()=>Ft(r,o)}}}});var cae,lae=g(()=>{fe();rf();cae={kernelName:Qv,gradFunc:(r,e,t)=>{let n=t,{axis:i}=n;return{value:()=>Co(r,i)}}}});function pMe(r,e){let t=Do(e,mt(e)),n=fm(r,t),i=oa(e,bt(0,"int32")),o=n.rank-i.rank;for(let s=0;s<o;++s)i=mi(i,s+1);i=Mo(i,Vi(n.shape,"bool"));let a=mt(n);return Qr(i,n,a)}var fae,pae=g(()=>{fe();Fx();_T();Hl();hm();qx();gm();Nn();ia();Gr();fae={kernelName:ex,inputsToSave:["segmentIds"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>pMe(r,t)}}}});var mae,hae=g(()=>{fe();Gr();mae={kernelName:tx,gradFunc:r=>({x:()=>mt(r)})}});var mMe,dae=g(()=>{kC();Nre();Are();Dre();Tre();Ire();Ore();Fre();zre();Lre();Pre();Ure();Hre();Xre();Yre();ene();rne();ine();ane();une();lne();pne();hne();gne();bne();Nne();Ane();Dne();Tne();Ine();One();Fne();zne();Lne();Pne();Une();Vne();Hne();Xne();Yne();eie();rie();iie();aie();uie();lie();pie();hie();xie();yie();wie();Mie();Cie();kie();_ie();Bie();Rie();qie();$ie();Gie();Wie();Kie();Zie();Xie();Yie();eoe();roe();ioe();aoe();uoe();loe();poe();hoe();goe();xoe();boe();Noe();Aoe();Doe();Toe();Ioe();Ooe();Foe();zoe();Loe();Poe();$oe();Uoe();Voe();Hoe();joe();Xoe();Yoe();eae();rae();iae();aae();uae();lae();pae();hae();ix();mMe=[dy,wre,Sre,Mre,Ere,Cre,kre,_re,Bre,Rre,qre,$re,Wre,Zre,Jre,Qre,tne,nne,one,sne,cne,fne,dne,mne,yne,wne,Sne,Mne,Ene,Cne,noe,kne,_ne,Bne,Rne,qne,Gne,$ne,Wne,Zne,Jne,Qne,tie,nie,oie,sie,cie,fie,mie,vie,_C,_C,bie,Aie,Tie,Iie,Oie,Fie,zie,Lie,Pie,Uie,Vie,Hie,jie,FC,FC,Jie,Qie,toe,ooe,soe,coe,foe,moe,doe,voe,yoe,woe,Soe,Moe,Eoe,Coe,koe,_oe,Boe,Roe,qoe,BC,BC,zC,zC,Goe,Koe,Woe,Zoe,Joe,Qoe,tae,nae,oae,sae,cae,fae,mae];for(let r of mMe)rJ(r)});function RC(r,e){return ye(()=>Ir(rt(ee(r,r),e,!0)))}function zr(r){return hf(r)}function vae(r,e={}){return Ga(r,Ie.SerializationMap.getMap().classNameMap,e,"constraint")}function Rr(r){if(r==null)return null;if(typeof r=="string"){let t={className:r in gae?gae[r]:r,config:{}};return vae(t)}else return r instanceof yc?r:vae(r)}var yc,Gm,Vm,Wm,Hm,gae,As=g(()=>{dt();dt();bs();Hr();yc=class extends Ie.Serializable{getConfig(){return{}}},Gm=class extends yc{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ye(()=>{let t=RC(e,this.axis),n=Yn(t,0,this.maxValue);return ee(e,Xe(n,Oe(an(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};Gm.className="MaxNorm";Ie.registerClass(Gm);Vm=class extends yc{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ye(()=>Xe(e,Oe(an(),RC(e,this.axis))))}getConfig(){return{axis:this.axis}}};Vm.className="UnitNorm";Ie.registerClass(Vm);Wm=class extends yc{apply(e){return To(e)}};Wm.className="NonNeg";Ie.registerClass(Wm);Hm=class extends yc{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ye(()=>{let t=RC(e,this.axis),n=Oe(ee(this.rate,Yn(t,this.minValue,this.maxValue)),ee(1-this.rate,t));return ee(e,Xe(n,Oe(an(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};Hm.className="MinMaxNorm";Ie.registerClass(Hm);gae={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"}});var xae=g(()=>{As();});var yae=g(()=>{fa();});async function Ms(r){if(r==null)return;let e=[],t=[],n=[];for(let i in r){let o=r[i];if(typeof o!="number"){let a=o;e.push(a.data()),t.push(i),n.push(a)}}if(e.length>0){let i=await Promise.all(e);for(let o=0;o<i.length;++o)r[t[o]]=i[o][0];yt(n)}}function vy(r){if(r!=null)for(let e in r){let t=r[e];typeof t!="number"&&t.dispose()}}var Cf=g(()=>{dt();});function wy(r,e){return r==null&&(r={}),r instanceof cu?[r]:Array.isArray(r)&&r[0]instanceof cu?r:pr(r).map(n=>new by(n,e))}function Ny(r,e,t,n,i,o,a,s,u){let c=new yy,l=[new LC,...Ii.createCallbacks(e)];r!=null&&l.push(...r),l.push(c);let f=new xy(l);return f.setParams({epochs:t,initialEpoch:n,samples:i,steps:o,batchSize:a,verbose:e,doValidation:s,metrics:u}),{callbackList:f,history:c}}var bae,gMe,cu,xy,LC,yy,by,Ii,If=g(()=>{dt();ur();Cf();Hr();(function(r){r[r.SILENT=0]="SILENT",r[r.VERBOSE=1]="VERBOSE"})(bae||(bae={}));gMe=125,cu=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},xy=class{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},LC=class extends cu{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});let n=t.size==null?0:t.size;this.seen+=n;for(let i in t){let o=t[i];if(typeof o=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+o*n;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;let s=ye(()=>Oe(this.totals[i],ee(o,n)));this.totals[i]=s,a?.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(let n of this.params.metrics)this.totals[n]!=null&&(typeof this.totals[n]=="number"?t[n]=this.totals[n]/this.seen:ye(()=>{let i=ee(Xe(1,this.seen),this.totals[n]);t[n]=i,this.totals[n].dispose(),Xn(t[n])}))}},yy=class extends cu{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(let n in t)this.history[n]==null&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let o in this.history){let a=this.history[o];for(let s=0;s<a.length;++s)if(typeof a[s]!="number"){let u=a[s];e.push(u.data()),t.push(o),n.push(s)}}let i=await Promise.all(e);for(let o=0;o<i.length;++o)this.history[t[o]][n[o]].dispose(),this.history[t[o]][n[o]]=i[o][0]}},by=class extends cu{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||mC,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=gMe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Fe.isNumber(this.yieldEvery)&&(this.maybeWait=Zte(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let i=[];this.yield!=null&&(await Ms(n),i.push(this.yield(e,t,n))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await Ms(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];this.epochEnd!=null&&(await Ms(t),n.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){this.batchBegin!=null&&(await Ms(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];this.batchEnd!=null&&(await Ms(t),n.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?n.push(this.nextFrameFunc()):Fe.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){this.trainBegin!=null&&(await Ms(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Ms(e),await this.trainEnd(e))}};Ii=class{constructor(){}static registerCallbackConstructor(e,t){Fe.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ii.checkForDuplicate(t),Ii.constructors[e]==null&&(Ii.constructors[e]=[]),Ii.constructors[e].push(t)}static checkForDuplicate(e){for(let t in Ii.constructors)Ii.constructors[+t].forEach(i=>{if(i===e)throw new ce("Duplicate callback constructor.")})}static clear(){Ii.constructors={}}static createCallbacks(e){let t=[];for(let n in Ii.constructors){let i=+n;e>=i&&t.push(...Ii.constructors[i])}return t.map(n=>new n)}};Ii.constructors={}});function Wi(r,e={},t=!1){return Ga(r,Ie.SerializationMap.getMap().classNameMap,e,"layer",t)}var kf=g(()=>{dt();Hr();});function Km(r,e){return ye(()=>{r.dtype!=="float32"&&(r=Le(r,"float32"));let t=rt(gc(r),e,!0),n=ic(t.shape,an()),i=Ir(Do(t,n));return Xe(r,i)})}function bc(r,e){return ye(()=>Vr(gc(it(e,r)),-1))}function Zm(r,e){return ye(()=>Vr(bn(it(e,r)),-1))}function Xm(r,e){return ye(()=>{let t=it(r,e),n=Yn(bn(r),an(),Number.MAX_VALUE),i=bn(Xe(t,n));return ee(100,Vr(i,-1))})}function vMe(r,e){return ye(()=>{let t=Yn(e,an(),Number.MAX_VALUE),n=Ao(Oe(1,t)),i=Yn(r,an(),Number.MAX_VALUE),o=Ao(Oe(1,i));return Vr(gc(it(n,o)),-1)})}function xMe(r,e){return ye(()=>{let t=Do(0,it(1,ee(r,e)));return Vr(gc(t),-1)})}function yMe(r,e){return ye(()=>{let t=Do(0,it(1,ee(r,e)));return Vr(t,-1)})}function bMe(r,e){return ye(()=>{let t=rt(ee(r,e),-1),n=ro(ee(it(1,r),e),-1);return Do(0,Oe(1,it(n,t)))})}function wMe(r,e){return ye(()=>{let t=Math.log(2),n=it(e,r),i=it(Oe(n,Zl(ee(-2,n))),t);return Vr(i,-1)})}function wc(r,e,t=!1){return ye(()=>{if(t)e=Nm(e);else{let n=rt(e,e.shape.length-1,!0);e=Xe(e,n)}return e=Yn(e,an(),1-an()),br(rt(ee(Le(r,"float32"),Ao(e)),e.shape.length-1))})}function Of(r,e,t=!1){return ye(()=>{let n=Le(oc(are(r)),"int32");e=Yn(e,an(),1-an());let i=e.shape,o=pe(Nx(n,i[i.length-1]),i);return wc(o,e,t)})}function NMe(r,e){if(!Fe.arraysEqual(r.shape,e.shape))throw new ce(`logits and labels must have the same shape, but got shapes ${JSON.stringify(r.shape)} and ${JSON.stringify(e.shape)}`);return ye(()=>{let t=To(e),n=br(bn(e));return Oe(it(t,ee(e,r)),BT(Ui(n)))})}function _f(r,e){return ye(()=>{let t;return t=Yn(e,an(),1-an()),t=Ao(Xe(t,it(1,t))),Vr(NMe(r,t),-1)})}function SMe(r,e){return ye(()=>{let t=Yn(r,an(),1),n=Yn(e,an(),1);return rt(ee(r,Ao(Xe(t,n))),-1)})}function AMe(r,e){return ye(()=>{let t=Ao(Oe(an(),e));return Vr(it(e,ee(r,t)),-1)})}function Sy(r,e){return ye(()=>{let t=Km(r,-1),n=Km(e,-1),i=ee(t,n);return br(rt(i,-1))})}function Ay(r){if(typeof r=="string"){if(r in jm)return jm[r];let e=`Unknown loss ${r}`;throw r.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${r}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ce(e)}else return r}var jm,Nc=g(()=>{dt();dt();bs();Wn();ur();jm={meanSquaredError:bc,meanAbsoluteError:Zm,meanAbsolutePercentageError:Xm,meanSquaredLogarithmicError:vMe,squaredHinge:xMe,hinge:yMe,categoricalHinge:bMe,logcosh:wMe,categoricalCrossentropy:wc,sparseCategoricalCrossentropy:Of,binaryCrossentropy:_f,kullbackLeiblerDivergence:SMe,poisson:AMe,cosineProximity:Sy}});function Dy(r,e){return ye(()=>{let t=ee(.5,Un(e)),n=dc(hn(e,t),r.dtype);return Vr(So(r,n),-1)})}function Ey(r,e){return ye(()=>dc(So(Yu(r,-1),Yu(e,-1)),"float32"))}function MMe(r,e){return ye(()=>Le(rt(Mo(So(r,1),So(e,1))),"float32"))}function DMe(r,e){return ye(()=>Le(rt(Mo(So(r,0),So(e,1))),"float32"))}function Nae(r,e){return ye(()=>{let t=MMe(r,e),n=DMe(r,e),i=Oe(t,n);return Le(Qr(hn(i,0),Xe(t,i),0),"float32")})}function qC(r,e){return _f(r,e)}function PC(r,e){return r.rank===e.rank&&(r=xs(r,[r.rank-1])),e=Yu(e,-1),e.dtype!==r.dtype&&(e=Le(e,r.dtype)),Le(So(r,e),"float32")}function Sae(r){if(typeof r=="string"&&r in My)return My[r];if(typeof r!="string"&&r!=null)return r;throw new ce(`Unknown metric ${r}`)}function Jm(r){if(no(r!==null,`Unknown LossOrMetricFn ${r}`),typeof r=="string")return r;{let e;for(let t of Object.keys(jm))if(jm[t]===r){e=t;break}if(e!==void 0)return e;for(let t of Object.keys(My))if(My[t]===r){e=t;break}return e!==void 0?e:r.name}}var EMe,TMe,CMe,IMe,kMe,OMe,Ty,_Me,$C,My,UC=g(()=>{dt();dt();Wn();ur();Nc();Nc();Nc();Hr();EMe=bc,TMe=bc,CMe=Zm,IMe=Zm,kMe=Xm,OMe=Xm,Ty=wc,_Me=Sy,$C=Of,My={binaryAccuracy:Dy,categoricalAccuracy:Ey,precision:Nae,categoricalCrossentropy:Ty,sparseCategoricalCrossentropy:$C,mse:EMe,MSE:TMe,mae:CMe,MAE:IMe,mape:kMe,MAPE:OMe,cosine:_Me}});function Mae(r){let e={Adagrad:()=>mc.adagrad(.01),Adadelta:()=>mc.adadelta(1,.95,an()),Adam:()=>mc.adam(.001,.9,.999,an()),Adamax:()=>mc.adamax(.002,.9,.999,an(),0),RMSProp:()=>mc.rmsprop(.001,.9,0,an()),SGD:()=>mc.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,r in e)return e[r]();throw new ce(`Unknown Optimizer ${r}`)}var Dae=g(()=>{dt();bs();ur();});function VC(r,e,t=!1){if(r==null||typeof r!="object"||Object.getPrototypeOf(r)!==Object.prototype||!GC(r))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){let n=JSON.stringify(r);n.length>1048576&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${1048576}.`)}}function GC(r){if(r===null)return!0;if(typeof r=="object")if(Object.getPrototypeOf(r)===Object.prototype){let e=Object.keys(r);for(let t of e)if(typeof t!="string"||!GC(r[t]))return!1;return!0}else if(Array.isArray(r)){for(let e of r)if(!GC(e))return!1;return!0}else return!1;else{let e=typeof r;return e==="string"||e==="number"||e==="boolean"}}var Eae=g(()=>{});function Tae(r,e,t,n=console.log){let i=zMe(r),o=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,t=t||[.32,.61,.89,1]):(e=e||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(l=>Math.floor(e*l)));let a;if(!i){o.push("Receives inputs"),a=[];for(let l in r.nodesByDepth)a.push(...r.nodesByDepth[l])}n("_".repeat(e)),Cy(o,t,n),n("=".repeat(e));let s=r.layers;for(let l=0;l<s.length;++l)i?RMe(s[l],t,n):LMe(s[l],t,a,n),n((l===s.length-1?"=":"_").repeat(e));r.checkTrainableWeightsConsistency();let u=BMe(r),c=Df(r.nonTrainableWeights);n(`Total params: ${u+c}`),n(`Trainable params: ${u}`),n(`Non-trainable params: ${c}`),n("_".repeat(e))}function BMe(r){let e;return r.collectedTrainableWeights!=null?e=Df(r.collectedTrainableWeights):e=Df(r.trainableWeights),e}function zMe(r){let e=!0,t=[],n=[];for(let i in r.nodesByDepth)t.push(r.nodesByDepth[i]);for(let i of t){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}n.push(...i)}if(e)for(let i of r.layers){let o=!1;for(let a of i.inboundNodes)if(n.indexOf(a)!==-1)if(o){e=!1;break}else o=!0;if(!e)break}return e}function Cy(r,e,t=console.log){let n="";for(let i=0;i<r.length;++i)i>0&&(n=n.slice(0,n.length-1)+" "),n+=r[i],n=n.slice(0,e[i]),n+=" ".repeat(e[i]-n.length);t(n)}function RMe(r,e,t){let n,i;try{i=r.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{i="multiple"}try{n=JSON.stringify(r.outputShape)}catch{n="multiple"}let o=r.name,a=r.getClassName(),s=[`${o} (${a})`,i,n,r.countParams().toString()];Cy(s,e,t)}function LMe(r,e,t,n){let i,o;try{o=r.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{o="multiple"}try{i=JSON.stringify(r.outputShape)}catch{i="multiple"}let a=[];for(let f of r.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(f)===-1))for(let p=0;p<f.inboundLayers.length;++p){let m=f.inboundLayers[p].name,d=f.nodeIndices[p],h=f.tensorIndices[p];a.push(`${m}[${d}][${h}]`)}let s=r.name,u=r.getClassName(),c=a.length===0?"":a[0],l=[`${s} (${u})`,o,i,r.countParams().toString(),c];Cy(l,e,n);for(let f=1;f<a.length;++f)Cy(["","","","",a[f]],e,n)}var Cae=g(()=>{TC();});function Iae(r,e,t){return(r==="inboundNodes"||r==="outputLayers"||r==="inputLayers")&&e===0&&typeof t=="string"}function Ym(r,e){if(r===null)return null;if(typeof r=="string")return ys(r);if(typeof r=="number"||typeof r=="boolean")return r;if(r instanceof Array){let t=[],n=r.length;for(let i=0;i<n;++i){let o=r[i];Iae(e,i,o)?t.push(o):t.push(Ym(o,e))}return t}else{let t={};for(let n of Object.keys(r)){let i=r[n];if(n==="name"&&typeof i=="string")t[n]=i;else{let o=ys(n);t[o]=Ym(i,o)}}return t}}function Iy(r,e){if(r==null)return null;if(typeof r=="string")return _o(r);if(typeof r=="number"||typeof r=="boolean")return r;if(r instanceof Array){let t=[],n=r.length;for(let i=0;i<n;++i){let o=r[i];Iae(e,i,o)?t.push(o):t.push(Iy(o,e))}return t}else{let t={};for(let n of Object.keys(r)){let i=r[n],o=_o(n);(n==="name"||n==="className")&&typeof i=="string"?t[o]=i:t[o]=Iy(i,n)}return t}}var ky=g(()=>{Hr();});var Qm,Oy=g(()=>{Qm="3.16.0"});var Hi,kae=g(()=>{dt();df();ur();kf();Hr();ky();ti();Um();Oy();hy();Tf();Sn();Hi=class extends It{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){let N=this.getClassName().toLowerCase();this.name=su(N)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Fo(this.inputs).length!==this.inputs.length)throw new ce(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(N=>N.name)}`);Fo(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(N=>N.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let N of this.outputs){let v=N.sourceLayer,w=N.nodeIndex,S=N.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(S)}for(let N of this.inputs){let v=N.sourceLayer,w=N.nodeIndex,S=N.tensorIndex;no(w===0,"input layer has >1 nodes"),no(S===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(S)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let N=0;N<this.inputLayers.length;N++){let v=this.inputLayers[N];if(!(v instanceof Ha))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${N} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(let N of this.outputLayers)this.outputNames.push(N.name);this.internalInputShapes=this.inputs.map(N=>N.shape),this.internalOutputShapes=this.outputs.map(N=>N.shape);let t={},n={},i={},o={},a={},s=[],u=(N,v,w,S,b,E)=>{(S==null||b==null||E==null)&&(S=N.sourceLayer,b=N.nodeIndex,E=N.tensorIndex);let M=S.inboundNodes[b];if(w.indexOf(M)!==-1)throw new Vn(`The tensor ${N.name} at layer "${S.name}" is part of a cycle.`);if(v.indexOf(M)!==-1)return;this.containerNodes.add(Hi.nodeKey(S,b)),S.id in a||(a[S.id]=Object.keys(a).length),w.indexOf(M)===-1&&w.push(M);let D=M.inboundLayers.length;for(let A=0;A<D;A++){let k=M.inputTensors[A],T=M.inboundLayers[A],L=M.nodeIndices[A],$=M.tensorIndices[A];u(k,v,w,T,L,$)}for(v.push(M);w.indexOf(M)>=0;)w.splice(w.indexOf(M),1);s.push(M)},c=[],l=[];for(let N of this.outputs)u(N,c,l);let f=s.slice().reverse();for(let N of f){n[N.id]=N,N.id in t||(t[N.id]=0);let v=t[N.id],w=i[N.outboundLayer.id]==null?0:i[N.outboundLayer.id];v=Math.max(v,w),i[N.outboundLayer.id]=v,o[N.outboundLayer.id]=N.outboundLayer,t[N.id]=v;for(let S=0;S<N.inboundLayers.length;S++){let b=N.inboundLayers[S],E=N.nodeIndices[S],M=b.inboundNodes[E],D=t[M.id]==null?0:t[M.id];t[M.id]=Math.max(v+1,D),n[M.id]=M}}let p={};for(let N in t){let v=t[N];v in p||(p[v]=[]),p[v].push(n[N])}let m={};for(let N in i){let v=i[N];v in m||(m[v]=[]),m[v].push(o[N])}let d=Object.keys(m).map(N=>parseInt(N,10)).sort(Im);this.layers=[];for(let N of d){let v=m[N];v.sort((w,S)=>{let b=a[w.id],E=a[S.id];return b<E?-1:b>E?1:0});for(let w of v)w instanceof Hi&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=m,d=Object.keys(p).map(N=>parseInt(N,10)).sort(Im);let h=this.inputs.slice(),x=[];for(let N of d)for(let v of p[N]){let w=v.outboundLayer;if(w!=null){for(let S of v.inputTensors)if(h.indexOf(S)===-1)throw new Vn(`Graph disconnected: cannot obtain value for tensor ${S} at layer "${w.name}". The following previous layers were accessed without issue: ${x}`);for(let S of v.outputTensors)h.push(S);x.push(w.name)}}this.nodesByDepth=p;let y=this.layers.map(N=>N.name);for(let N of y){let v=y.filter(w=>w===N).length;if(v!==1)throw new Vn(`The name "${N}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Ss({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(N=>null),outputMasks:this.outputs.map(N=>null),inputShapes:this.inputs.map(N=>N.shape),outputShapes:this.outputs.map(N=>N.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(n=>n.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ce("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.layers)t.push(...n.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){let n={},i=0;for(let a of this.layers)for(let s of a.weights){if(n[s.originalName]!=null)throw new ce(`Duplicate weight name: ${s.originalName}`);n[s.originalName]=s,i++}let o=[];for(let a in e){let s=a;if(n[a]==null){let u=a.split("/");s=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(n[s]!=null)o.push([n[s],e[a]]);else if(t)throw new ce(`Provided weight data has no target variable: ${a}`);delete n[s]}if(t){let a=[];for(let s in n)a.push(s);if(a.length>0)throw new ce(`${a.length} of ${i} weights are not set: ${a}`)}Ef(o)}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${Qm}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){let n=Iy(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return ye(()=>{e=pr(e);let n=new Lo;for(let i=0;i<this.inputs.length;++i)n.add(this.inputs[i],e[i]);return xc(this.outputs,n,t)})}computeMask(e,t){return ye(()=>{e=pr(e);let n;return t==null?n=Oo(null,e.length):n=pr(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let t=Mf(e);if(t.length!==this.inputLayers.length)throw new ce(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);let n={};for(let s=0;s<t.length;s++){let u=this.inputLayers[s],c=t[s],l=u.name+"_0_0";n[l]=c}let i=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(Im);if(i.length>1)for(let s of i){let u=this.nodesByDepth[s];for(let c of u){let l=c.outboundLayer;if(this.inputLayers.map(h=>h.id).indexOf(l.id)!==-1)continue;let f=[];for(let h=0;h<c.inboundLayers.length;h++){let x=c.inboundLayers[h],y=c.nodeIndices[h],N=c.tensorIndices[h],v=`${x.name}_${y}_${N}`,w=n[v];f.push(w)}let p=l.computeOutputShape(kn(f)),m=Mf(p),d=l.inboundNodes.indexOf(c);for(let h=0;h<m.length;h++){let x=`${l.name}_${d}_${h}`;n[x]=m[h]}}}let o=[],a=[];for(let s=0;s<this.outputLayers.length;s++){let u=this.outputLayers[s],c=this.outputLayersNodeIndices[s],l=this.outputLayersTensorIndices[s],f=`${u.name}_${c}_${l}`;a.push(f)}for(let s=0;s<a.length;s++){let u=a[s];no(u in n),o.push(n[u])}return kn(o)}runInternalGraph(e,t){t==null&&(t=Oo(null,e.length));let n={};for(let u=0;u<this.inputs.length;++u){let c=this.inputs[u],l=e[u],f=t[u];n[c.id]=[l,f]}let i=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(Im);for(let u of i){let c=this.nodesByDepth[u];for(let l of c){let f=l.outboundLayer,p=l.inputTensors,m=l.outputTensors,d=new Array;for(let h of p)h.id in n&&d.push(n[h.id]);if(d.length===p.length){let h={},x,y,N,v;if(l.callArgs!=null&&(h=l.callArgs),d.length===1){let[w,S]=d[0];h.mask==null&&(h.mask=S),N=pr(f.call(w,h)),v=pr(f.computeMask(w,S)),x=[w],y=[S]}else x=d.map(w=>w[0]),y=d.map(w=>w[1]),h.mask==null&&(h.mask=y),N=pr(f.call(x,h)),v=pr(f.computeMask(x,y));if(f.activityRegularizer)throw new pt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<m.length;++w){let S=m[w],b=N[w],E=v[w];n[S.id]=[b,E]}}}}let o=[],a=[],s=[];for(let u of this.outputs){no(u.id in n,`Could not compute output ${u.name} : ${u.id}`);let[c,l]=n[u.id];s.push(c.shape),o.push(c),a.push(l)}return[o,a,s]}buildNodeConversionMap(e){let t={},n;for(let i of this.layers){n=i instanceof Hi?1:0;for(let o=0;o<i.inboundNodes.length;o++){let a=Hi.nodeKey(i,o);this.containerNodes.has(a)&&(t[a]=n,n+=1)}}return t}getLayer(e,t){if(t!=null){if(this.layers.length<=t)throw new ce(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}else if(e==null)throw new ce("Provide either a layer name or layer index");for(let n of this.layers)if(n.name===e)return n;throw new ce(`No such layer: ${e}`)}calculateLosses(){return ye(()=>{let e=[];for(let t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){let i=Hi.nodeKey(t,n);this.containerNodes.has(i)&&e.push(...t.calculateLosses())}return e})}getConfig(){let e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(let a of this.layers){let s=a.getClassName(),u=a.getConfig(),c=[];for(let f=0;f<a.inboundNodes.length;f++){let p=a.inboundNodes[f],m=Hi.nodeKey(a,f),d={};if(this.containerNodes.has(m)){if(p.callArgs)try{JSON.stringify(p.callArgs),d=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),d={}}if(p.inboundLayers.length>0){let h=[];for(let x=0;x<p.inboundLayers.length;x++){let y=p.inboundLayers[x],N=p.nodeIndices[x],v=p.tensorIndices[x],w=Hi.nodeKey(y,N),S=t[w];S==null&&(S=0),h.push([y.name,S,v,d])}c.push(h)}}}let l={};l.name=a.name,l.className=s,l.config=u,l.inboundNodes=c,n.push(l)}e.layers=n;let i=[];for(let a=0;a<this.inputLayers.length;a++){let s=this.inputLayers[a],u=this.inputLayersNodeIndices[a],c=Hi.nodeKey(s,u);if(!this.containerNodes.has(c))continue;let l=t[c];l==null&&(l=0);let f=this.inputLayersTensorIndices[a];i.push([s.name,l,f])}e.inputLayers=i;let o=[];for(let a=0;a<this.outputLayers.length;a++){let s=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=Hi.nodeKey(s,u);if(!this.containerNodes.has(c))continue;let l=t[c];l==null&&(l=0);let f=this.outputLayersTensorIndices[a];o.push([s.name,l,f])}return e.outputLayers=o,e}static fromConfig(e,t,n={},i=!1){let o={},a={};function s(x,y){x.name in a?a[x.name].push(y):a[x.name]=[y]}function u(x,y){let N=[],v;for(let w of y){let S=w[0],b=w[1],E=w[2];if(v=w[3]==null?{}:w[3],!(S in o)){s(x,y);return}let M=o[S];if(M.inboundNodes.length<=b){s(x,y);return}let D=M.inboundNodes[b];N.push(D.outputTensors[E])}N.length>0&&x.apply(kn(N),v)}function c(x){let y=x.name,N=Wi(x,t.customObjects!=null?t.customObjects:{});N.setFastWeightInitDuringBuild(i),o[y]=N,x.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new ce(`Corrupted configuration, expected array for nodeData: ${w}`);s(N,w)})}let l=t.name,f=t.layers;for(let x of f)c(x);for(;!Kte(a);)for(let x of f){let y=o[x.name];if(y.name in a){let N=a[y.name];delete a[y.name];for(let v of N)u(y,v)}}let p=[],m=[],d=t.inputLayers;for(let x of d){let y=x[0],N=x[1],v=x[2];no(y in o);let S=o[y].inboundNodes[N].outputTensors;p.push(S[v])}let h=t.outputLayers;for(let x of h){let y=x[0],N=x[1],v=x[2];no(y in o);let S=o[y].inboundNodes[N].outputTensors;m.push(S[v])}return new e({inputs:p,outputs:m,name:l})}get stateful(){if(this._stateful)throw new ce("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ye(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}});function qMe(r,e,t){let n=e.length;if(r==null||Array.isArray(r)&&r.length===0)return e.map(i=>null);if(n===1)return Array.isArray(r)&&r.length===1?r:typeof r=="object"&&e[0]in r?[r[e[0]]]:[r];if(Array.isArray(r)){if(r.length!==n)throw new Error(`Provided ${t} is an array of ${r.length} element(s), but the model has ${n} outputs. Make sure a set of weights is provided for each model output.`);return r}else if(typeof r=="object"&&Object.keys(r).length>0&&typeof r[Object.keys(r)[0]]=="object"){let i=[];return e.forEach(o=>{o in r?i.push(r[o]):i.push(null)}),i}else throw new Error(`The model has multiple (${n}) outputs, so ${t} must be either an array with ${n} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(r)}`)}function _y(r,e){return qMe(r,e,"classWeight")}async function Fy(r,e,t,n){if(e!=null||n!=null)throw new Error("Support sampleWeight is not implemented yet");if(t!=null){let i=ye(()=>{if(r.shape.length===1)return eo(r);if(r.shape.length===2){if(r.shape[1]>1)return Yu(r,1);if(r.shape[1]===1)return pe(r,[r.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${r.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${r.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(await i.data());yt(i);let a=[];return o.forEach(s=>{if(t[s]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${s} exists in the data but not in classWeight`);a.push(t[s])}),dn(a,"float32")}else return null}function Oae(r,e){return ee(r,e)}var By=g(()=>{dt();});function Bae(r,e){let t,n,i=e;t=i.xs,n=i.ys,Fe.assert(t!=null&&n!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);let o=_ae("input",r.inputNames,t),a=_ae("output",r.outputNames,n),s=o[0].shape[0];Fe.assert(o.length===r.inputs.length,()=>`LayersModel has ${r.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(r.inputNames)})`),Fe.assert(a.length===r.outputs.length,()=>`LayersModel has ${r.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(r.outputNames)})`);for(let u=0;u<o.length;u++)Fe.assert(o[u].shape[0]===s,()=>`Batch size mismatch: input ${r.inputNames[u]} has ${o[u].shape[0]}; expected  ${s} based on input ${r.inputNames[0]}.`);for(let u=0;u<a.length;u++)Fe.assert(a[u].shape[0]===s,()=>`Batch size mismatch: output ${r.outputNames[u]} has ${a[u].shape[0]}; expected  ${s} based on input ${r.inputNames[0]}.`);return{xs:o,ys:a}}function _ae(r,e,t){if(t instanceof Ar)return[t];if(Array.isArray(t))return Fe.assert(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${r} keys ${e}.`),t;{let n=[];for(let i of e){if(t[i]==null)throw new ce(`The feature data generated by the dataset lacks the required ${r} key '${i}'.`);n.push(t[i])}return n}}function $Me(r){if(r.length===3)throw new pt("Validation with sample weights is not implemented yet.");return{xs:r[0],ys:r[1]}}async function zae(r,e,t){let n=t.batchesPerEpoch!=null;if(Fe.assert(r.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Fe.assert(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Fe.assert(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),Fe.assert(!n||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),Fe.assert(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),r.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");r.isTraining=!0;try{let i=t.validationData!=null,o,a;if(i)if(Fae(t.validationData))Fe.assert(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{let x=$Me(t.validationData);o=x.xs,a=x.ys}let s=r.makeTrainFunction(),u=r.getDedupedMetricsNames(),c;i?c=u.slice().concat(u.map(x=>"val_"+x)):c=u.slice();let l=wy(t.callbacks,t.yieldEvery),f=t.verbose==null?1:t.verbose,{callbackList:p,history:m}=Ny(l,f,t.epochs,null,null,UMe(e,t),null,i,c);p.setModel(r),r.history=m,await p.onTrainBegin(),r.stopTraining_=!1;let d=t.initialEpoch==null?0:t.initialEpoch,h=await e.iterator();for(;d<t.epochs;){let x={};await p.onEpochBegin(d);let y=0,N=0;for(n||(h=await e.iterator());!n||y<t.batchesPerEpoch;){let v=await h.next();if(n&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){let{xs:w,ys:S}=Bae(r,v.value),b={};b.batch=N,b.size=w[0].shape[0],await p.onBatchBegin(N,b);let E=[];if(t.classWeight!=null){let A=_y(t.classWeight,r.outputNames);for(let k=0;k<A.length;++k)E.push(await Fy(S[k],null,A[k]))}let M=w.concat(S).concat(E),D=s(M);yt(M);for(let A=0;A<u.length;++A){let k=u[A],T=D[A];b[k]=T,Xn(T)}await p.onBatchEnd(N,b),vy(b),N++,y++}if(n?y>=t.batchesPerEpoch:v.done){if(i){let w;Fae(t.validationData)?w=pr(await r.evaluateDataset(t.validationData,{batches:t.validationBatches})):w=pr(r.evaluate(o,a,{batchSize:t.validationBatchSize==null?PMe:t.validationBatchSize,verbose:0}));for(let S=0;S<r.metricsNames.length;++S)x[`val_${r.metricsNames[S]}`]=w[S]}break}if(r.stopTraining_)break}if(await p.onEpochEnd(d,x),d++,r.stopTraining_)break}return await p.onTrainEnd(),await r.history.syncData(),r.history}finally{r.isTraining=!1}}function UMe(r,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(r.size)&&(t=r.size),t}function Fae(r){return typeof r.iterator=="function"}function GMe(r){return typeof r.next=="function"}async function Rae(r,e,t){t=t||{};let n=t.batches!=null,i=r.testFunction,o=[];if(t.verbose>0)throw new pt("Verbose mode is not implemented yet.");Fe.assert(!n||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);let a=GMe(e)?e:await e.iterator(),s=0,u=0;for(;!n||u<t.batches;){let c=await a.next();if(o=ye(()=>{if(c.value){let{xs:l,ys:f}=Bae(r,c.value),p=l.concat(f),m=ye(()=>i(p));if(yt(p),u===0)for(let h=0;h<m.length;++h)o.push(bt(0));let d=p[0].shape[0];for(let h=0;h<m.length;++h){let x=m[h],y=o[h];o[h]=ye(()=>Oe(o[h],ee(d,x))),u>0&&yt(y)}yt(m),s+=d,++u}return o}),c.done){n&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<o.length;++c){let l=o[c];o[c]=Xe(o[c],s),yt(l)}return kn(o)}var PMe,WC=g(()=>{dt();dt();If();ur();Cf();Hr();By();PMe=32});function zy(r){Fe.assert(r>0&&Number.isInteger(r),()=>`batchSize is required to be a positive integer, but got ${r}`)}function Ff(r,e,t){return r==null?[null]:Array.isArray(r)?r.map(n=>ws(n,e,t-e)):ws(r,e,t-e)}function Ry(r,e){return ye(()=>r==null?null:Array.isArray(r)?r.map(t=>Ry(t,e)):cy(r,e.dtype==="int32"?e:Le(e,"int32")))}function Ly(r,e){let t=[],n=0,i=null;for(;n<r;)i=n+e,i>=r&&(i=r),t.push([n,i]),n=i;return t}async function VMe(r,e,t,n,i,o,a,s,u,c,l,f,p,m,d){i==null&&(i=32),o==null&&(o=1),l==null&&(l=!0),p==null&&(p=0);let h=!1;if(u!=null&&c!=null&&(h=!0),d!=null&&(h=!0,m==null))throw new ce("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let x=r.checkNumSamples(t,i,m,"steps_per_epoch"),y;x!=null&&(y=Qn(0,x)),a==null&&(a=1);let{callbackList:N,history:v}=Ny(s,a,o,p,x,m,i,h,f);N.setModel(r),r.history=v,await N.onTrainBegin(),r.stopTraining_=!1;for(let w=p;w<o;++w){await N.onEpochBegin(w);let S={};if(m!=null)throw new pt("stepsPerEpoch mode is not implemented yet.");{if(l==="batch")throw new pt("batch shuffling is not implemneted yet");l&&Fe.shuffle(y);let b=dn(y),E=Ly(x,i);for(let M=0;M<E.length;++M){let D={};if(await N.onBatchBegin(M,D),ye(()=>{let A=E[M][0],k=E[M][1],T=ws(b,A,k-A);D.batch=M,D.size=k-A;let L=Ry(t,T),$=e(L);for(let K=0;K<n.length;++K){let V=n[K],z=$[K];D[V]=z,Xn(z)}if(M===E.length-1&&h){let K=r.testLoop(u,c,i);for(let V=0;V<n.length;++V){let z=n[V],Q=K[V];Xn(Q),S["val_"+z]=Q}}}),await N.onBatchEnd(M,D),vy(D),r.stopTraining_)break}b.dispose()}if(await N.onEpochEnd(w,S),r.stopTraining_)break}return await N.onTrainEnd(),await r.history.syncData(),r.history}async function Lae(r,e,t,n={}){if(r.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");r.isTraining=!0;let i,o,a,s,u,c,l,f,p;try{let m=n.batchSize==null?32:n.batchSize;zy(m);let d=!1,h=await r.standardizeUserData(e,t,n.sampleWeight,n.classWeight,d,m);i=h[0],o=h[1],p=h[2];let x=!1,y;if(n.validationData!=null&&n.validationData.length>0){if(x=!0,n.validationData.length===2)u=n.validationData[0],c=n.validationData[1];else throw n.validationData.length===3?new pt("validationData including sample weights is not supported yet."):new ce(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${n.validationData} is invalid.`);let D=!0,A=await r.standardizeUserData(u,c,null,null,D,m);l=A[0],f=A[1],y=l.concat(f)}else if(n.validationSplit!=null&&n.validationSplit>0&&n.validationSplit<1){x=!0;let D=Math.floor(i[0].shape[0]*(1-n.validationSplit)),A=i[0].shape[0];l=Ff(i,D,A),a=i,i=Ff(i,0,D),f=Ff(o,D,A),s=o,o=Ff(o,0,D),y=l.concat(f)}else n.validationSteps!=null&&(x=!0);let N=i.concat(o).concat(p);r.checkTrainableWeightsConsistency();let v=r.makeTrainFunction(),w=r.getDedupedMetricsNames(),S,b;x?(r.makeTestFunction(),S=r.testFunction,b=w.slice().concat(w.map(D=>"val_"+D))):(S=null,y=[],b=w.slice());let E=wy(n.callbacks,n.yieldEvery);return await VMe(r,v,N,w,m,n.epochs,n.verbose,E,S,y,n.shuffle,b,n.initialEpoch,null,null)}finally{r.isTraining=!1,qo(i,e),qo(o,t),qo(a,e),qo(s,t),qo(l,u),qo(f,c),p!=null&&yt(p)}}function HC(r){let e=[];r instanceof Ar&&(r=[r]);for(let t=0;t<r.length;++t){let n=r[t];if(n.rank===1)e.push(Ns(n,1));else{if(n.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(n)}}return e}function qo(r,e){if(r==null)return;let t=[];if(e instanceof Ar)t.push(e.id);else if(Array.isArray(e))e.forEach(i=>t.push(i.id));else if(e!=null)for(let i in e){let o=e[i];t.push(o.id)}let n=[];if(r instanceof Ar)t.indexOf(r.id)===-1&&n.push(r);else if(Array.isArray(r))r.forEach(i=>{t.indexOf(i.id)===-1&&n.push(i)});else if(r!=null)for(let i in r){let o=r[i];t.indexOf(o.id)===-1&&n.push(o)}n.forEach(i=>{i.isDisposed||i.dispose()})}var KC=g(()=>{dt();dt();Wn();If();ur();Cf();Wa();});function WMe(r){return r instanceof Ar}function jC(r){return Array.isArray(r)}function qae(r){return!WMe(r)&&!jC(r)}function Pae(r,e,t,n=!0,i=""){if(e==null||e.length===0){if(r!=null){let a=!1;if(jC(r)&&r.length>0)a=!0;else if(qae(r)){for(let s in r)if(r.hasOwnProperty(s)){a=!0;break}}else a=!0;if(a)throw new ce(`Error when checking model ${i} expected no data, but got ${r}`)}return[]}if(r==null)return e.map(a=>null);let o;if(qae(r)){r=r,o=[];for(let a of e){if(r[a]==null)throw new ce(`No data provided for "${a}". Need data for each key in: ${e}`);o.push(r[a])}}else if(jC(r)){if(r=r,r.length!==e.length)throw new ce(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${r}`);o=r}else{if(r=r,e.length>1)throw new ce(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${r.shape}`);o=[r]}if(o=HC(o),t!=null)for(let a=0;a<e.length;++a){if(t[a]==null)continue;let s=o[a];if(s.shape.length!==t[a].length)throw new ce(`Error when checking ${i}: expected ${e[a]} to have ${t[a].length} dimension(s). but got array with shape ${s.shape}`);for(let u=0;u<t[a].length;++u){if(u===0&&!n)continue;let c=s.shape[u],l=t[a][u];if(l!=null&&l>=0&&c!==l)throw new ce(`${i} expected a batch of elements where each example has shape [${t[a].slice(1,t[a].length)}] (i.e.,tensor shape [*,${t[a].slice(1,t[a].length)}]) but the ${i} received an input with ${s.shape[0]} examples, each with shape [${s.shape.slice(1,s.shape.length)}] (tensor shape [${s.shape}])`)}}return o}function HMe(r,e,t){let n=Fo(r.map(o=>o.shape[0]));n.sort();let i=Fo(e.map(o=>o.shape[0]));if(i.sort(),n.length>1)throw new ce(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(r.map(o=>o.shape))}`);if(i.length>1)throw new ce(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(o=>o.shape))}`);if(n.length>0&&i.length>0&&!Fe.arraysEqual(n,i))throw new ce(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${i[0]} target sample(s).`)}function KMe(r,e,t){let n=[bc,_f,wc];for(let i=0;i<r.length;++i){let o=r[i],a=e[i],s=t[i];if(a!=null){if(a===wc&&o.shape[o.shape.length-1]===1)throw new ce(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(n.indexOf(a)!==-1){let u=o.shape.slice(1),c=s.slice(1);for(let l=0;l<u.length;++l){let f=u[l],p=c[l];if(p!=null&&f!==p)throw new ce(`A target Tensor with shape ${o.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function $ae(r,e,t,n=!0,i=""){let o;if(Array.isArray(r)){if(r.length!==e.length)throw new ce(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${r.length} Tensors(s).`);o=r}else{if(e.length>1)throw new ce(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(r.shape)}.`);o=[r]}if(t!=null)for(let a=0;a<e.length;++a){if(t[a]==null)continue;let s=o[a];if(s.shape.length!==t[a].length)throw new ce(`Error when checking ${i}: expected ${e[a]} to have ${t[a].length} dimension(s), but got array with shape ${JSON.stringify(s.shape)}`);for(let u=0;u<t[a].length;++u){if(u===0&&!n)continue;let c=s.shape[u],l=t[a][u];if(l!=null&&l!==c)throw new ce(`Error when checking ${i}: expected ${e[a]} to have shape ${JSON.stringify(t[a])} but got array with shape ${JSON.stringify(s.shape)}.`)}}}function jMe(r,e){if(r==null||Array.isArray(r)&&r.length===0)return e.map(n=>[]);let t;if(typeof r=="string"||typeof r=="function")t=[r];else if(Array.isArray(r)||typeof r=="object")t=r;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${r}`);if(Array.isArray(t))return e.map(n=>t);{let n=[];for(let i of e){let o=t.hasOwnProperty(i)?t[i]:[];Array.isArray(o)||(o=[o]),n.push(o)}return n}}var ZMe,Po,qy,eh=g(()=>{dt();dt();Wn();Bo();ur();kf();Nc();UC();Dae();Eae();Hr();Cae();Wa();ky();Oy();kae();hy();WC();KC();By();ZMe="layers-model",Po=class extends Hi{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new ce("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Tae(this,e,t,n)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Mae(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Gn))throw new ce("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new ce(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),t.push(Ay(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ce(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(s=>Ay(s))}else{let a=Ay(e.loss);this.outputs.forEach(s=>{t.push(a)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let s=this.internalOutputShapes[a],u=this.outputNames[a];this.feedOutputNames.push(u),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[a])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ca("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(n.indexOf(a)!==-1)continue;let s=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([s,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let i=jMe(e.metrics,this.outputNames),o=(a,s,u)=>{this.outputNames.length>1&&(s=this.outputNames[a]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([u,a])};ca("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(n.indexOf(a)!==-1)continue;let s=i[a];(c=>{let l="",f,p,m;for(let d of c){if(typeof d=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(d)!==-1){let x=this.internalOutputShapes[a];x[x.length-1]===1||this.lossFunctions[a]===_f?["accuracy","acc"].indexOf(d)!==-1?p=Dy:["crossentropy","ce"].indexOf(d)!==-1&&(p=qC):this.lossFunctions[a]===Of?["accuracy","acc"].indexOf(d)!==-1?p=PC:["crossentropy","ce"].indexOf(d)!==-1&&(p=$C):["accuracy","acc"].indexOf(d)!==-1?p=Ey:["crossentropy","ce"].indexOf(d)!==-1&&(p=Ty);let y;["accuracy","acc"].indexOf(d)!==-1?y="acc":["crossentropy","ce"].indexOf(d)!==-1&&(y="ce"),m=p,f=l+y}else m=Sae(d),f=l+Jm(d);let h;ca(f,()=>{h=m}),o(a,f,h)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){let i=n.batchSize==null?32:n.batchSize;zy(i);let o=!0,a=this.standardizeUserDataXY(e,t,o,i);try{let s=a[0].concat(a[1]);this.makeTestFunction();let u=this.testFunction,c=this.testLoop(u,s,i,n.verbose,n.steps);return kn(c)}finally{qo(a[0],e),qo(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),Rae(this,e,t)}checkNumSamples(e,t,n,i="steps"){let o;if(n!=null){if(o=null,t!=null)throw new ce(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?o=e[0].shape[0]:o=e.shape[0];else throw new ce(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return o}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new ce("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),i=n?t:[t],o=this.retrieveSymbolicTensors(i),a=new Lo;if(e instanceof Ar&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ce(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)a.add(this.inputs[u],e[u])}else for(let u of this.inputs){let c=e[u.name];if(c==null)throw new ce(`No value is provided for the model's input ${u.name}`);a.add(u,c)}let s=xc(o,a);return n?s:s[0]}retrieveSymbolicTensors(e){let t=Oo(null,e.length),n=e.length;for(let i of this.layers){let o=Array.isArray(i.output)?i.output:[i.output],a=o.map(s=>s.name);for(let s=0;s<e.length;++s){let u=a.indexOf(e[s]);if(u!==-1&&(t[s]=o[u],n--),n===0)break}if(n===0)break}if(n>0){let i=[];throw t.forEach((o,a)=>{o==null&&i.push(e[a])}),new ce(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return t}predictLoop(e,t=32,n=!1){return ye(()=>{let i=this.checkNumSamples(e);if(n)throw new pt("Verbose predictLoop() is not implemented yet.");let o=Ly(i,t),a=this.outputs.map(s=>[]);for(let s=0;s<o.length;++s)ye(()=>{let c=o[s][0],l=o[s][1],f=Ff(e,c,l),p=[];if(Array.isArray(f))for(let d=0;d<f.length;++d)p.push({key:this.inputs[d],value:f[d]});else p.push({key:this.inputs[0],value:f});let m=new Lo(p);return xc(this.outputs,m)}).forEach((c,l)=>a[l].push(c));return kn(a.map(s=>wn(s,0)))})}predict(e,t={}){let n=HC(e);$ae(n,this.inputNames,this.feedInputShapes,!1);try{let i=t.batchSize==null?32:t.batchSize;return zy(i),this.predictLoop(n,i)}finally{qo(n,e)}}predictOnBatch(e){$ae(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,i){if(this.optimizer_==null)throw new Vn("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let o=[];for(let a=0;a<this.feedOutputShapes.length;++a){let s=this.feedOutputShapes[a];this.feedLossFns[a]===Of?o.push(s.slice(0,s.length-1).concat([1])):o.push(s)}if(e=Pae(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Pae(t,this.feedOutputNames,o,!1,"target"),HMe(e,t,null),KMe(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new ce(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,i,o=!0,a){let[s,u]=this.standardizeUserDataXY(e,t,o,a);if(n!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){let l=_y(i,this.outputNames);c=[];for(let f=0;f<l.length;++f)c.push(await Fy(u[f],null,l[f]))}return[s,u,c]}testLoop(e,t,n,i=0,o){return ye(()=>{let a=this.checkNumSamples(t,n,o,"steps"),s=[];if(i>0)throw new pt("Verbose mode is not implemented yet.");if(o!=null)throw new pt("steps mode in testLoop() is not implemented yet");{let u=Ly(a,n),c=dn(Qn(0,a));for(let l=0;l<u.length;++l){let f=u[l][0],p=u[l][1],m=ws(c,f,p-f),d=Ry(t,m),h=e(d);if(l===0)for(let x=0;x<h.length;++x)s.push(bt(0));for(let x=0;x<h.length;++x){let y=h[x];s[x]=Oe(s[x],ee(p-f,y))}}for(let l=0;l<s.length;++l)s[l]=Xe(s[l],a)}return s})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let i=e[n],o=i;NC(e,i)>1&&(o+=`_${NC(e.slice(0,n),i)}`),t.push(o)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],s=()=>{let f=[];for(let h=0;h<this.inputs.length;++h)f.push({key:this.inputs[h],value:n[h]});let p=new Lo(f),m=xc(this.outputs,p,{training:!0}),d;for(let h=0;h<this.lossFunctions.length;++h){let y=this.lossFunctions[h](i[h],m[h]);o[h]!=null&&(y=Oae(y,o[h]));let N=Vr(y);t.push(N),h===0?d=y:d=Oe(d,y)}for(let h=0;h<this.metricsTensors.length;++h){let x;if(this.outputs.length>1&&h<this.outputs.length)x=t[h];else{let y=this.metricsTensors[h][0],N=this.metricsTensors[h][1];x=Vr(y(i[N],m[N]))}Xn(x),a.push(x)}return d=Vr(d),this.calculateLosses().forEach(h=>{d=Oe(d,h)}),d},u=this.collectedTrainableWeights.map(f=>f.read()),c=!0;return[this.optimizer_.minimize(s,c,u)].concat(a)}}makeTestFunction(){this.testFunction=e=>ye(()=>{let t=[],n,i=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let c=0;c<this.inputs.length;++c)a.push({key:this.inputs[c],value:i[c]});let s=new Lo(a),u=xc(this.outputs,s);for(let c=0;c<this.lossFunctions.length;++c){let l=this.lossFunctions[c],f=Vr(l(o[c],u[c]));c===0?n=f:n=Oe(n,f),t.push(n)}for(let c=0;c<this.metricsTensors.length;++c){let l=this.metricsTensors[c][0],f=this.metricsTensors[c][1],p=Vr(l(o[f],u[f]));t.push(p)}return t})}async fit(e,t,n={}){return Lae(this,e,t,n)}async fitDataset(e,t){return zae(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),i=n[0],o=n[1],s=this.makeTrainFunction()(i.concat(o)),u=[];for(let c of s){let l=await c.data();u.push(l[0])}return yt(s),qo(n[0],e),qo(n[1],t),kn(u)}getNamedWeights(e){let t=[],n=e!=null&&e.trainableOnly,i=n?this.trainableWeights:this.weights,o=this.getWeights(n);for(let a=0;a<i.length;++a)n&&!i[a].trainable||t.push({name:i[a].originalName,tensor:o[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let t=cm().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-cm().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=_o(this.loss);else if(Array.isArray(this.loss)){for(let t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>_o(t))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let i of t)if(typeof n[i]=="string")e[i]=_o(n[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[_o(Jm(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>_o(Jm(e)));{let e={};for(let t in this.metrics)e[t]=_o(Jm(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let t=Ym(e.optimizer_config),n=Wi(t),i;if(typeof e.loss=="string")i=ys(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>ys(a));else if(e.loss!=null){i={};for(let a in e.loss)i[a]=ys(e.loss[a])}let o;if(Array.isArray(e.metrics))o=e.metrics.map(a=>ys(a));else if(e.metrics!=null){o={};for(let a in e.metrics)o[a]=ys(e.metrics[a])}this.compile({loss:i,metrics:o,optimizer:n})}async save(e,t){if(typeof e=="string"){let c=Ys.getSaveHandlers(e);if(c.length===0)throw new ce(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ce(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ce("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Ys.encodeWeights(this.getNamedWeights(t)),i=!1,o=null,s={modelTopology:this.toJSON(o,i),format:ZMe,generatedBy:`TensorFlow.js tfjs-layers v${Qm}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){s.trainingConfig=this.getTrainingConfig();let c="optimizer",{data:l,specs:f}=await Ys.encodeWeights(await this.optimizer.getWeights(),c);n.specs.push(...f),n.data=Ys.concatenateArrayBuffers([n.data,l])}return this.userDefinedMetadata!=null&&(VC(this.userDefinedMetadata,this.name,!0),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=n.data,s.weightSpecs=n.specs,e.save(s)}setUserDefinedMetadata(e){VC(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};Po.className="Model";Ie.registerClass(Po);qy=class extends Po{};qy.className="Functional";Ie.registerClass(qy)});var Ds,Py=g(()=>{dt();df();Tf();Sn();eh();ur();kf();Hr();ky();ti();Ds=class extends Po{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:su("sequential_"),e.layers!=null)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(n=>n<0))throw new ce(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t=e instanceof Ds||e instanceof Po,n;if(t){if(n=e,n.outputs.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(n.inputs.length!==1)throw new ce("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ce("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let i=IC({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(e.inboundNodes.length!==1)throw new ce(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=CC(this.outputs[0])}this.inboundNodes=[],new Ss({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Oo(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{let i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(Ut(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Po({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new Vn("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new Vn("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new Vn("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new Vn("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},i=!1){let o,a={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new ce("Legacy serialization format not supported yet.");o=t}else Fe.assert(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=t.layers,delete t.layers,a=t;let s=new e(a);if(!(s instanceof Ds))throw new pt(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(let u of o){let l=Wi(u,void 0,i);i&&l.setFastWeightInitDuringBuild(!0),s.add(l)}return s}set stopTraining(e){if(this.model==null)throw new ce("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ce("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}};Ds.className="Sequential";Ie.registerClass(Ds)});var ZC=g(()=>{If();Tf();eh();Py();});function pa(r){return r.getClassName()}function XC(r,e={}){return Ga(r,Ie.SerializationMap.getMap().classNameMap,e,"activation")}function ma(r){if(r==null){let e={};return e.className="linear",e.config={},XC(e)}if(typeof r=="string"){let e={};return e.className=r,e.config={},XC(e)}else return r instanceof ni?r:XC(r)}var ni,$y,Uy,Gy,Vy,Wy,Hy,Ky,jy,Zy,Xy,Bf,Jy,Yy,Qy,th=g(()=>{dt();dt();Wn();Hr();ni=class extends Ie.Serializable{getConfig(){return{}}},$y=class extends ni{apply(e,t=1){return ure(e,t)}};$y.className="elu";Ie.registerClass($y);Uy=class extends ni{apply(e){return oC(e)}};Uy.className="selu";Ie.registerClass(Uy);Gy=class extends ni{apply(e){return To(e)}};Gy.className="relu";Ie.registerClass(Gy);Vy=class extends ni{apply(e){return ye(()=>vm(6,To(e)))}};Vy.className="relu6";Ie.registerClass(Vy);Wy=class extends ni{apply(e){return e}};Wy.className="linear";Ie.registerClass(Wy);Hy=class extends ni{apply(e){return tu(e)}};Hy.className="sigmoid";Ie.registerClass(Hy);Ky=class extends ni{apply(e){return lre(e)}};Ky.className="hardSigmoid";Ie.registerClass(Ky);jy=class extends ni{apply(e){return Zl(e)}};jy.className="softplus";Ie.registerClass(jy);Zy=class extends ni{apply(e){return cre(e)}};Zy.className="softsign";Ie.registerClass(Zy);Xy=class extends ni{apply(e){return Ex(e)}};Xy.className="tanh";Ie.registerClass(Xy);Bf=class extends ni{apply(e,t=-1){return Nm(e,t)}};Bf.className="softmax";Ie.registerClass(Bf);Jy=class extends ni{apply(e,t=-1){return RT(e,t)}};Jy.className="logSoftmax";Ie.registerClass(Jy);Yy=class extends ni{apply(e,t=1){return ye(()=>ee(tu(ee(e,t)),e))}};Yy.className="swish";Ie.registerClass(Yy);Qy=class extends ni{apply(e){return ye(()=>ee(e,Ex(Zl(e))))}};Qy.className="mish";Ie.registerClass(Qy)});function XMe(r){if(r!=null&&typeof r!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${r}`)}function rr(r){return hf(r)}function Gae(r,e={}){return Ga(r,Ie.SerializationMap.getMap().classNameMap,e,"regularizer")}function hr(r){if(r==null)return null;if(typeof r=="string"){let t={className:r in Uae?Uae[r]:r,config:{}};return Gae(t)}else return r instanceof e0?r:Gae(r)}var e0,rh,Uae,Ka=g(()=>{dt();dt();Wn();Hr();e0=class extends Ie.Serializable{},rh=class extends e0{constructor(e){super(),XMe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ye(()=>{let t=Wr([1]);return this.hasL1&&(t=Oe(t,rt(ee(this.l1,bn(e))))),this.hasL2&&(t=Oe(t,rt(ee(this.l2,gc(e))))),pe(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};rh.className="L1L2";Ie.registerClass(rh);Uae={l1l2:"L1L2"}});var nh,ih,oh,ah,sh,uh,Vae=g(()=>{dt();th();As();Sn();ur();fa();Ka();ti();nh=class extends It{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=St(e);let n=To(e);return this.maxValue!=null&&(n=Yn(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};nh.className="ReLU";Ie.registerClass(nh);ih=class extends It{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=St(e);return pm(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};ih.className="LeakyReLU";Ie.registerClass(ih);oh=class extends It{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=cr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=hr(e.alphaRegularizer),this.alphaConstraint=Rr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ce(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ut(e);let t=e.slice(1);if(this.sharedAxes!=null)for(let i of this.sharedAxes)t[i-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)n[i]=e[i];this.inputSpec=[new mr({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=St(e),ym(e,this.alpha.read())}getConfig(){let e={alphaInitializer:wr(this.alphaInitializer),alphaRegularizer:rr(this.alphaRegularizer),alphaConstraint:zr(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};oh.className="PReLU";Ie.registerClass(oh);ah=class extends It{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new pt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=St(e);return rc(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};ah.className="ELU";Ie.registerClass(ah);sh=class extends It{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){let n=St(e);return ee(n,Le(hn(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};sh.className="ThresholdedReLU";Ie.registerClass(sh);uh=class extends It{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new Bf().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){let n=St(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};uh.className="Softmax";Ie.registerClass(uh)});function lu(r,e,t){if(typeof r=="number")return Oo(r,e);if(r.length!==e)throw new ce(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${r.length} elements.`);for(let n=0;n<e;++n){let i=r[n];if(!ire(i))throw new ce(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(r)} including a non-integer number ${i}`)}return r}function ki(r,e,t,n,i=1){if(r==null)return r;let o=e+(e-1)*(i-1),a;return t==="same"?a=r:a=r-o+1,Math.floor((a+n-1)/n)}function ha(r,e,t,n){if(r==null)return null;if(n==="valid")r=r*e+la([t-e,0]);else if(n==="same")r=r*e;else throw new ce(`Unsupport padding mode: ${n}.`);return r}var ch=g(()=>{ur();Hr();Wa();});function dh(r,e){return ye(()=>(kr(e),e==="channelsFirst"?Ft(r,[0,2,3,1]):r))}function JC(r,e){return ye(()=>(kr(e),e==="channelsFirst"?Ft(r,[0,2,3,4,1]):r))}function YMe(r,e,t,n=1,i="valid",o,a=1){return ye(()=>{if(o==null&&(o=vi()),kr(o),r.shape.length!==3)throw new ce(`The input of a conv1dWithBias operation should be 3, but is ${r.shape.length} instead.`);if(e.shape.length!==3)throw new ce(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new ce(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(o==="channelsFirst"&&(r=Ft(r,[0,2,1])),i==="causal")throw new pt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=ST(r,e,n,i==="same"?"same":"valid","NWC",a);return t!=null&&(s=xi(s,t)),s})}function Wae(r,e,t,n=[1,1],i="valid",o,a,s=null){return ye(()=>{if(o==null&&(o=vi()),kr(o),r.rank!==3&&r.rank!==4)throw new ce(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${r.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ce(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${r.rank}.`);let u=dh(r,o);if(i==="causal")throw new pt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=fc.conv2d({x:u,filter:e,strides:n,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:t,activation:s}),o==="channelsFirst"&&(u=Ft(u,[0,3,1,2])),u})}function QMe(r,e,t,n=[1,1,1],i="valid",o,a){return ye(()=>{if(o==null&&(o=vi()),kr(o),r.rank!==4&&r.rank!==5)throw new ce(`conv3dWithBias expects input to be of rank 4 or 5, but received ${r.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ce(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${r.rank}.`);let s=JC(r,o);if(i==="causal")throw new pt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=MT(s,e,n,i==="same"?"same":"valid","NDHWC",a),t!=null&&(s=xi(s,t)),o==="channelsFirst"&&(s=Ft(s,[0,4,1,2,3])),s})}var Sc,fu,pu,mu,lh,fh,t0,ph,Ac,mh,hh,r0=g(()=>{dt();dt();th();bs();Wn();Bo();As();Sn();ur();fa();Ka();ch();Hr();ti();Sc=class extends It{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Sc.verifyArgs(t),this.rank=e,Xr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new pt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=lu(t.kernelSize,e,"kernelSize"),this.strides=lu(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,gi(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,kr(this.dataFormat),this.activation=ma(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=cr(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Rr(t.biasConstraint),this.biasRegularizer=hr(t.biasRegularizer),this.activityRegularizer=hr(t.activityRegularizer),this.dilationRate=lu(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ce(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ce(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ce(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(no("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!ey(e.kernelSize,"number",1,3))throw new ce(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:pa(this.activation),useBias:this.useBias,biasInitializer:wr(this.biasInitializer),biasRegularizer:rr(this.biasRegularizer),activityRegularizer:rr(this.activityRegularizer),biasConstraint:zr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},fu=class extends Sc{constructor(e,t){super(e,t),this.kernel=null,fu.verifyArgs(t),this.filters=t.filters,Xr(this.filters,"filters"),this.kernelInitializer=cr(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Rr(t.kernelConstraint),this.kernelRegularizer=hr(t.kernelRegularizer)}build(e){e=Ut(e);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[t]}`);let n=e[t],i=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return ye(()=>{e=St(e);let n,i=this.bias==null?null:this.bias.read(),o=ty(this.activation.getClassName());if(o!=null&&this.rank===2)n=Wae(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)n=YMe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)n=Wae(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)n=QMe(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new pt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(n=this.activation.apply(n))}return n})}computeOutputShape(e){e=Ut(e);let t=[],n=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<n.length;++o){let a=ki(n[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);t.push(a)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(t),i.push(this.filters)):(i.push(this.filters),i=i.concat(t)),i}getConfig(){let e={filters:this.filters,kernelInitializer:wr(this.kernelInitializer),kernelRegularizer:rr(this.kernelRegularizer),kernelConstraint:zr(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ce(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}},pu=class extends fu{constructor(e){super(2,e),pu.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!ey(e.kernelSize,"number",1,2))throw new ce(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}};pu.className="Conv2D";Ie.registerClass(pu);mu=class extends fu{constructor(e){super(3,e),mu.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ce(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}};mu.className="Conv3D";Ie.registerClass(mu);lh=class extends pu{constructor(e){if(super(e),this.inputSpec=[new mr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ut(e),e.length!==4)throw new ce("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],i=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new mr({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return ye(()=>{let n=St(e);if(n.shape.length!==4)throw new ce(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${n.shape.length}`);let i=n.shape,o=i[0],a,s;this.dataFormat==="channelsFirst"?(a=2,s=3):(a=1,s=2);let u=i[a],c=i[s],l=this.kernelSize[0],f=this.kernelSize[1],p=this.strides[0],m=this.strides[1],d=ha(u,p,l,this.padding),h=ha(c,m,f,this.padding),x=[o,d,h,this.filters];this.dataFormat!=="channelsLast"&&(n=Ft(n,[0,2,3,1]));let y=AT(n,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Ft(y,[0,3,1,2])),this.bias!=null&&(y=xi(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=Ut(e);let t=e.slice(),n,i,o;this.dataFormat==="channelsFirst"?(n=1,i=2,o=3):(n=3,i=1,o=2);let a=this.kernelSize[0],s=this.kernelSize[1],u=this.strides[0],c=this.strides[1];return t[n]=this.filters,t[i]=ha(t[i],u,a,this.padding),t[o]=ha(t[o],c,s,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};lh.className="Conv2DTranspose";Ie.registerClass(lh);fh=class extends mu{constructor(e){if(super(e),this.inputSpec=[new mr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ut(e),e.length!==5)throw new ce("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],i=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new mr({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return ye(()=>{let n=St(e);if(n.shape.length!==5)throw new ce(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${n.shape.length}`);let i=n.shape,o=i[0],a,s,u;this.dataFormat==="channelsFirst"?(u=2,a=3,s=4):(u=1,a=2,s=3);let c=i[u],l=i[a],f=i[s],p=this.kernelSize[0],m=this.kernelSize[1],d=this.kernelSize[2],h=this.strides[0],x=this.strides[1],y=this.strides[2],N=ha(c,h,p,this.padding),v=ha(l,x,m,this.padding),w=ha(f,y,d,this.padding),S=[o,N,v,w,this.filters];this.dataFormat!=="channelsLast"&&(n=Ft(n,[0,2,3,4,1]));let b=ET(n,this.kernel.read(),S,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=Ft(b,[0,4,1,2,3])),this.bias!==null&&(b=xi(b,this.bias.read(),this.dataFormat)),this.activation!==null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=Ut(e);let t=e.slice(),n,i,o,a;this.dataFormat==="channelsFirst"?(n=1,i=2,o=3,a=4):(n=4,i=1,o=2,a=3);let s=this.kernelSize[0],u=this.kernelSize[1],c=this.kernelSize[2],l=this.strides[0],f=this.strides[1],p=this.strides[2];return t[n]=this.filters,t[i]=ha(t[i],l,s,this.padding),t[o]=ha(t[o],f,u,this.padding),t[a]=ha(t[a],p,c,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};fh.className="Conv3DTranspose";Ie.registerClass(fh);t0=class extends fu{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new ce("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new ce("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new ce(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=cr(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=hr(t.depthwiseRegularizer),this.depthwiseConstraint=Rr(t.depthwiseConstraint),this.pointwiseInitializer=cr(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=hr(t.pointwiseRegularizer),this.pointwiseConstraint=Rr(t.pointwiseConstraint)}build(e){if(e=Ut(e),e.length<this.rank+2)throw new ce(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new ce(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);let n=e[t],i=this.kernelSize.concat([n,this.depthMultiplier]),o=[];for(let s=0;s<this.rank;++s)o.push(1);o.push(n*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new mr({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return ye(()=>{e=St(e);let n;if(this.rank===1)throw new pt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ft(e,[0,2,3,1])),n=aC(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(n=xi(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),this.dataFormat==="channelsFirst"&&(n=Ft(n,[0,3,1,2])),n})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=wr(this.depthwiseInitializer),e.pointwiseInitializer=wr(this.pointwiseInitializer),e.depthwiseRegularizer=rr(this.depthwiseRegularizer),e.pointwiseRegularizer=rr(this.pointwiseRegularizer),e.depthwiseConstraint=zr(this.depthwiseConstraint),e.pointwiseConstraint=zr(this.pointwiseConstraint),e}};t0.className="SeparableConv";ph=class extends t0{constructor(e){super(2,e)}};ph.className="SeparableConv2D";Ie.registerClass(ph);Ac=class extends fu{constructor(e){super(1,e),Ac.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!ey(e.kernelSize,"number",1,1))throw new ce(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}};Ac.className="Conv1D";Ie.registerClass(Ac);mh=class extends It{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return ye(()=>{if(e=St(e),this.dataFormat==="channelsLast"){let n=Om(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Om(n,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let n=Om(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Om(n,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};mh.className="Cropping2D";Ie.registerClass(mh);hh=class extends It{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,kr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,rre(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let t=e[2]==null?null:this.size[0]*e[2],n=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,n]}else{let t=e[1]==null?null:this.size[0]*e[1],n=e[2]==null?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return ye(()=>{let n=St(e),i=n.shape;if(this.dataFormat==="channelsFirst"){n=Ft(n,[0,2,3,1]);let o=this.size[0]*i[2],a=this.size[1]*i[3],s=this.interpolation==="nearest"?Em.resizeNearestNeighbor(n,[o,a]):Em.resizeBilinear(n,[o,a]);return Ft(s,[0,3,1,2])}else{let o=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?Em.resizeNearestNeighbor(n,[o,a]):Em.resizeBilinear(n,[o,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};hh.className="UpSampling2D";Ie.registerClass(hh)});function e2e(r,e,t=[1,1],n="valid",i,o){return ye(()=>{i==null&&(i=vi()),kr(i);let a=dh(r,i);if(r.rank!==4)throw new ce(`Input for depthwiseConv2d is required to be 4-D, but is instead ${r.rank}-D`);if(e.rank!==4)throw new ce(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=tc(a,e,t,n==="same"?"same":"valid","NHWC",o),i==="channelsFirst"&&(a=Ft(a,[0,3,1,2])),a})}var gh,Hae=g(()=>{dt();dt();bs();Wn();Bo();As();ur();fa();Ka();ch();ti();r0();gh=class extends Sc{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=cr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Rr(e.depthwiseConstraint),this.depthwiseRegularizer=hr(e.depthwiseRegularizer)}build(e){if(e=Ut(e),e.length<4)throw new ce(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new ce(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t],i=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ye(()=>{e=St(e);let n=e2e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(n=xi(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),n})}computeOutputShape(e){e=Ut(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=ki(t,this.kernelSize[0],this.padding,this.strides[0]),a=ki(n,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,o,a]:[e[0],o,a,i]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=wr(this.depthwiseInitializer),e.depthwiseRegularizer=rr(this.depthwiseRegularizer),e.depthwiseConstraint=zr(this.depthwiseRegularizer),e}};gh.className="DepthwiseConv2D";Ie.registerClass(gh)});function YC(r,e,t,n){if(Array.isArray(r)){if(e!=null||t!=null)throw new ce("When inputs is an array, neither initialState or constants should be provided");n!=null&&(t=r.slice(r.length-n,r.length),r=r.slice(0,r.length-n)),r.length>1&&(e=r.slice(1,r.length)),r=r[0]}function i(o){return o==null||Array.isArray(o)?o:[o]}return e=i(e),t=i(t),{inputs:r,initialState:e,constants:t}}function QC(r,e,t,n=!1,i,o,a=!1,s=!1){return ye(()=>{let u=e.shape.length;if(u<3)throw new ce(`Input should be at least 3D, but is ${u}D.`);let c=[1,0].concat(Qn(2,u));if(e=Ft(e,c),o!=null)throw new pt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Le(Le(i,"bool"),"float32"),i.rank===u-1&&(i=mi(i,-1)),i=Ft(i,c)),n&&(e=nu(e,0),i!=null&&(i=nu(i,0)));let l=[],f,p=t,m=e.shape[0],d=$a(e),h;i!=null&&(h=$a(i));for(let y=0;y<m;++y){let N=d[y],v=ye(()=>r(N,p));if(i==null)f=v[0],p=v[1];else{let w=ye(()=>{let S=h[y],b=it(Un(S),S),E=Oe(ee(v[0],S),ee(p[0],b)),M=p.map((D,A)=>Oe(ee(v[1][A],S),ee(D,b)));return{output:E,newStates:M}});f=w.output,p=w.newStates}s&&l.push(f)}let x;return s&&(x=Co(l,1)),[f,x,p]})}function Es(r){let{ones:e,rate:t,training:n=!1,count:i=1,dropoutFunc:o}=r,a=()=>o!=null?o(e(),t):ly(e(),t),s=()=>uu(a,e,n);return!i||i<=1?Xn(s().clone()):Array(i).fill(void 0).map(s).map(c=>Xn(c.clone()))}var io,hu,zf,vh,Rf,xh,du,yh,Lf,bh=g(()=>{dt();dt();th();Wn();Bo();As();Sn();Sn();ur();fa();Ka();Hr();Wa();ti();Um();kf();io=class extends It{constructor(e){super(e);let t;if(e.cell==null)throw new ce("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new Lf({cells:e.cell}):t=e.cell,t.stateSize==null)throw new ce("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new mr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Qn(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){fy(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let n=t[0],i;if(this.returnSequences?i=[e[0],e[1],n]:i=[e[0],n],this.returnState){let o=[];for(let a of t)o.push([e[0],a]);return[i].concat(o)}else return i}computeMask(e,t){return ye(()=>{Array.isArray(t)&&(t=t[0]);let n=this.returnSequences?t:null;if(this.returnState){let i=this.states.map(o=>null);return[n].concat(i)}else return n})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new pt("Constants support is not implemented in RNN yet.");fy(e)&&(e=e[0]),e=e;let n=this.stateful?e[0]:null,i=e.slice(2);this.inputSpec[0]=new mr({shape:[n,null,...i]});let o=[e[0]].concat(e.slice(2));this.cell.build(o);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Fe.arraysEqual(this.stateSpec.map(s=>s.shape[s.shape.length-1]),a))throw new ce(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(s=>new mr({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){ye(()=>{if(!this.stateful)throw new Ci("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(n==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Wr([n,i])):this.states_=[Wr([n,this.cell.stateSize])];else if(e==null)yt(this.states_),this.keptStates!=null&&(yt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Wr([n,i])):this.states_[0]=Wr([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):yt(this.states_);for(let i=0;i<this.states_.length;++i){let o=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,s=[n,a];if(!Fe.arraysEqual(o.shape,s))throw new ce(`State ${i} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${o.shape}`);this.states_[i]=o}}this.states_=this.states_.map(i=>Xn(i.clone()))})}apply(e,t){let n=t==null?null:t.initialState,i=t==null?null:t.constants;t==null&&(t={});let o=YC(e,n,i,this.numConstants);e=o.inputs,n=o.initialState,i=o.constants;let a=[],s=[];if(n!=null){t.initialState=n,a=a.concat(n),this.stateSpec=[];for(let c of n)this.stateSpec.push(new mr({shape:c.shape}));s=s.concat(this.stateSpec)}if(i!=null&&(t.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof ri){let c=[e].concat(a),l=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=l;let p=super.apply(c,t);return this.inputSpec=f,p}else return super.apply(e,t)}call(e,t){return ye(()=>{let n=t==null?null:t.mask,i=t==null?null:t.training,o=t==null?null:t.initialState;e=St(e),o==null&&(this.stateful?o=this.states_:o=this.getInitialState(e));let a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==a)throw new ce(`RNN Layer has ${a} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let s={training:i},c=QC((d,h)=>{let x=this.cell.call([d].concat(h),s);return[x[0],x.slice(1)]},e,o,this.goBackwards,n,null,this.unroll,this.returnSequences),l=c[0],f=c[1],p=c[2];this.stateful&&this.resetStates(p,i);let m=this.returnSequences?f:l;return this.returnState?[m].concat(p):m})}getInitialState(e){return ye(()=>{let t=Wr(e.shape);return t=rt(t,[1,2]),t=Ns(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(n=>n>1?uy(t,[1,n]):t):this.cell.stateSize>1?[uy(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);let n=this.cell.getConfig();return this.getClassName()===io.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,t)}static fromConfig(e,t,n={}){let i=t.cell,o=Wi(i,n);return new e(Object.assign(t,{cell:o}))}};io.className="RNN";Ie.registerClass(io);hu=class extends It{},zf=class extends hu{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Xr(this.units,"units"),this.activation=ma(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hr(e.kernelRegularizer),this.recurrentRegularizer=hr(e.recurrentRegularizer),this.biasRegularizer=hr(e.biasRegularizer),this.kernelConstraint=Rr(e.kernelConstraint),this.recurrentConstraint=Rr(e.recurrentConstraint),this.biasConstraint=Rr(e.biasConstraint),this.dropout=hc([1,la([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=hc([1,la([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ut(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ye(()=>{if(e=e,e.length!==2)throw new ce(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];let i=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Es({ones:()=>Un(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Es({ones:()=>Un(n),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let o,a=this.dropoutMask,s=this.recurrentDropoutMask;a!=null?o=Ro(ee(e,a),this.kernel.read()):o=Ro(e,this.kernel.read()),this.bias!=null&&(o=xi(o,this.bias.read())),s!=null&&(n=ee(n,s));let u=Oe(o,Ro(n,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:pa(this.activation),useBias:this.useBias,kernelInitializer:wr(this.kernelInitializer),recurrentInitializer:wr(this.recurrentInitializer),biasInitializer:wr(this.biasInitializer),kernelRegularizer:rr(this.kernelRegularizer),recurrentRegularizer:rr(this.recurrentRegularizer),biasRegularizer:rr(this.biasRegularizer),activityRegularizer:rr(this.activityRegularizer),kernelConstraint:zr(this.kernelConstraint),recurrentConstraint:zr(this.recurrentConstraint),biasConstraint:zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}};zf.className="SimpleRNNCell";Ie.registerClass(zf);vh=class extends io{constructor(e){e.cell=new zf(e),super(e)}call(e,t){return ye(()=>{this.cell.dropoutMask!=null&&(yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,i=t==null?null:t.training,o=t==null?null:t.initialState;return super.call(e,{mask:n,training:i,initialState:o})})}static fromConfig(e,t){return new e(t)}};vh.className="SimpleRNN";Ie.registerClass(vh);Rf=class extends hu{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ce("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Xr(this.units,"units"),this.activation=ma(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ma(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hr(e.kernelRegularizer),this.recurrentRegularizer=hr(e.recurrentRegularizer),this.biasRegularizer=hr(e.biasRegularizer),this.kernelConstraint=Rr(e.kernelConstraint),this.recurrentConstraint=Rr(e.recurrentConstraint),this.biasConstraint=Rr(e.biasConstraint),this.dropout=hc([1,la([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=hc([1,la([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ut(e);let t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ye(()=>{if(e=e,e.length!==2)throw new ce(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training==null?!1:t.training,i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Es({ones:()=>Un(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Es({ones:()=>Un(i),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,a=this.recurrentDropoutMask,s,u,c;0<this.dropout&&this.dropout<1&&(e=ee(e,o[0]));let l=Ro(e,this.kernel.read());this.useBias&&(l=xi(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ee(i,a[0]));let f=this.recurrentKernel.read(),[p,m]=di(f,[2*this.units,this.units],f.rank-1),d=Ro(i,p),[h,x,y]=di(l,3,l.rank-1),[N,v]=di(d,2,d.rank-1);s=this.recurrentActivation.apply(Oe(h,N)),u=this.recurrentActivation.apply(Oe(x,v));let w=Ro(ee(u,i),m);c=this.activation.apply(Oe(y,w));let S=Oe(ee(s,i),ee(Oe(1,br(s)),c));return[S,S]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:pa(this.activation),recurrentActivation:pa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:wr(this.kernelInitializer),recurrentInitializer:wr(this.recurrentInitializer),biasInitializer:wr(this.biasInitializer),kernelRegularizer:rr(this.kernelRegularizer),recurrentRegularizer:rr(this.recurrentRegularizer),biasRegularizer:rr(this.biasRegularizer),activityRegularizer:rr(this.activityRegularizer),kernelConstraint:zr(this.kernelConstraint),recurrentConstraint:zr(this.recurrentConstraint),biasConstraint:zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}};Rf.className="GRUCell";Ie.registerClass(Rf);xh=class extends io{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Rf(e),super(e)}call(e,t){return ye(()=>{this.cell.dropoutMask!=null&&(yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,i=t==null?null:t.training,o=t==null?null:t.initialState;return super.call(e,{mask:n,training:i,initialState:o})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};xh.className="GRU";Ie.registerClass(xh);du=class extends hu{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Xr(this.units,"units"),this.activation=ma(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ma(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=hr(e.kernelRegularizer),this.recurrentRegularizer=hr(e.recurrentRegularizer),this.biasRegularizer=hr(e.biasRegularizer),this.kernelConstraint=Rr(e.kernelConstraint),this.recurrentConstraint=Rr(e.recurrentConstraint),this.biasConstraint=Rr(e.biasConstraint),this.dropout=hc([1,la([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=hc([1,la([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=Ut(e);let n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){let o=this.biasInitializer,a=this.units;i=new(t=class extends bi{apply(u,c){let l=o.apply([a]),f=new vc().apply([a]),p=o.apply([a*2]);return EC(EC(l,f),p)}},t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return ye(()=>{let n=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new ce(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1],o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Es({ones:()=>Un(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Es({ones:()=>Un(i),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,s=this.recurrentDropoutMask,u,c,l,f;0<this.dropout&&this.dropout<1&&(e=ee(e,a[0]));let p=Ro(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ee(i,s[0])),p=Oe(p,Ro(i,this.recurrentKernel.read())),this.useBias&&(p=xi(p,this.bias.read()));let[m,d,h,x]=di(p,4,p.rank-1);u=this.recurrentActivation.apply(m),c=this.recurrentActivation.apply(d),l=Oe(ee(c,o),ee(u,this.activation.apply(h))),f=this.recurrentActivation.apply(x);let y=ee(f,this.activation.apply(l));return[y,y,l]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:pa(this.activation),recurrentActivation:pa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:wr(this.kernelInitializer),recurrentInitializer:wr(this.recurrentInitializer),biasInitializer:wr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:rr(this.kernelRegularizer),recurrentRegularizer:rr(this.recurrentRegularizer),biasRegularizer:rr(this.biasRegularizer),activityRegularizer:rr(this.activityRegularizer),kernelConstraint:zr(this.kernelConstraint),recurrentConstraint:zr(this.recurrentConstraint),biasConstraint:zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}};du.className="LSTMCell";Ie.registerClass(du);yh=class extends io{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new du(e),super(e)}call(e,t){return ye(()=>{this.cell.dropoutMask!=null&&(yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,i=t==null?null:t.training,o=t==null?null:t.initialState;return super.call(e,{mask:n,training:i,initialState:o})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};yh.className="LSTM";Ie.registerClass(yh);Lf=class extends hu{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return ye(()=>{e=e;let n=e.slice(1),i=[];for(let s of this.cells.slice().reverse())Array.isArray(s.stateSize)?i.push(n.splice(0,s.stateSize.length)):i.push(n.splice(0,1));i.reverse();let o=[],a;for(let s=0;s<this.cells.length;++s){let u=this.cells[s];n=i[s],s===0?a=[e[0]].concat(n):a=[a[0]].concat(n),a=u.call(a,t),o.push(a.slice(1))}n=[];for(let s of o.slice().reverse())n.push(...s);return[a[0]].concat(n)})}build(e){fy(e)&&(e=e[0]),e=e;let t;this.cells.forEach((n,i)=>{ca(`RNNCell_${i}`,()=>{n.build(e),Array.isArray(n.stateSize)?t=n.stateSize[0]:t=n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t=o=>({className:o.getClassName(),config:o.getConfig()}),i={cells:this.cells.map(t)};return Object.assign({},e,i)}static fromConfig(e,t,n={}){let i=[];for(let o of t.cells)i.push(Wi(o,n));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.cells)t.push(...n.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return $m(e)}setWeights(e){let t=[];for(let n of this.cells){let i=n.weights.length,o=e.splice(i);for(let a=0;a<n.weights.length;++a)t.push([n.weights[a],o[a]])}Ef(t)}};Lf.className="StackedRNNCells";Ie.registerClass(Lf)});var t2e,n0,qf,wh,Kae=g(()=>{dt();dt();Wn();Bo();Sn();ur();fa();ch();Hr();ti();bh();t2e=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},n0=class extends io{constructor(e){if(e.unroll)throw new pt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new pt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new mr({ndim:5})]}call(e,t){return ye(()=>{if(this.cell.dropoutMask!=null&&(yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new ce("ConvRNN2D cell does not support constants");let n=t==null?null:t.mask,i=t==null?null:t.training,o=t==null?null:t.initialState;return super.call(e,{mask:n,training:i,initialState:o})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return ye(()=>{let{stateSize:t}=this.cell,n=e.shape,i=this.computeSingleOutputShape(n),o=[i[0],...i.slice(2)],a=Wr(o);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e,t=!1){ye(()=>{if(!this.stateful)throw new Ci("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,i=this.computeSingleOutputShape(n),o=[i[0],...i.slice(2)];if(n[0]==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Wr(o)):this.states_=[Wr(o)];else if(e==null)yt(this.states_),this.keptStates!=null&&(yt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Wr(o)):this.states_[0]=Wr(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):yt(this.states_);for(let s=0;s<this.states_.length;++s){let u=e[s],c=o;if(!Fe.arraysEqual(u.shape,c))throw new ce(`State ${s} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${u.shape}`);this.states_[s]=u}}this.states_=this.states_.map(s=>Xn(s.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:i,padding:o,strides:a,dilationRate:s}=this.cell,u=t==="channelsFirst",c=e[u?3:2],l=e[u?4:3],f=ki(c,i[0],o,a[0],s[0]),p=ki(l,i[1],o,a[1],s[1]);return[...e.slice(0,2),...u?[n,f,p]:[f,p,n]]}};n0.className="ConvRNN2D";qf=class extends du{constructor(e){let{filters:t,kernelSize:n,strides:i,padding:o,dataFormat:a,dilationRate:s}=e;super(Object.assign({},e,{units:t})),this.filters=t,Xr(this.filters,"filters"),this.kernelSize=lu(n,2,"kernelSize"),this.kernelSize.forEach(u=>Xr(u,"kernelSize")),this.strides=lu(i||1,2,"strides"),this.strides.forEach(u=>Xr(u,"strides")),this.padding=o||"valid",gi(this.padding),this.dataFormat=a||"channelsLast",kr(this.dataFormat),this.dilationRate=lu(s||1,2,"dilationRate"),this.dilationRate.forEach(u=>Xr(u,"dilationRate"))}build(e){var t;e=Ut(e);let n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[n]}`);let i=e[n],o=4,a=this.kernelSize.concat([i,this.filters*o]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let s=this.kernelSize.concat([this.filters,this.filters*o]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){let c=this.biasInitializer,l=this.filters;u=new(t=class extends bi{apply(p,m){let d=c.apply([l]),h=Vi([l]),x=c.apply([l*2]);return vf([d,h,x])}},t.className="CustomInit",t)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*o],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return ye(()=>{if(e.length!==3)throw new ce(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,i=e[0],o=e[1],a=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Es({ones:()=>Un(i),rate:this.dropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let u=this.dropoutMask,c=(te,he,Ne)=>!he||!he[Ne]?te:ee(he[Ne],te),l=c(i,u,0),f=c(i,u,1),p=c(i,u,2),m=c(i,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Es({ones:()=>Un(o),rate:this.recurrentDropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let d=this.recurrentDropoutMask,h=c(o,d,0),x=c(o,d,1),y=c(o,d,2),N=c(o,d,3),v=3,[w,S,b,E]=di(this.kernel.read(),s,v),[M,D,A,k]=this.useBias?di(this.bias.read(),s):[null,null,null,null];l=this.inputConv(l,w,M,this.padding),f=this.inputConv(f,S,D,this.padding),p=this.inputConv(p,b,A,this.padding),m=this.inputConv(m,E,k,this.padding);let[T,L,$,K]=di(this.recurrentKernel.read(),s,v);h=this.recurrentConv(h,T),x=this.recurrentConv(x,L),y=this.recurrentConv(y,$),N=this.recurrentConv(N,K);let V=this.recurrentActivation.apply(Oe(l,h)),z=this.recurrentActivation.apply(Oe(f,x)),Q=Oe(ee(z,a),ee(V,this.activation.apply(Oe(p,y)))),_=ee(this.recurrentActivation.apply(Oe(m,N)),this.activation.apply(Q));return[_,_,Q]})}getConfig(){let e=super.getConfig(),{units:t}=e,n=t2e(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,i)}inputConv(e,t,n,i){let o=No(e,t,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return n?xi(o,n,this.dataFormat):o}recurrentConv(e,t){return No(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}};qf.className="ConvLSTM2DCell";Ie.registerClass(qf);wh=class extends n0{constructor(e){let t=new qf(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}};wh.className="ConvLSTM2D";Ie.registerClass(wh)});var Pf,Nh,Sh,Ah,Mh,Dh,Eh,Th,Ch,jae=g(()=>{dt();th();Wn();As();Sn();ur();fa();Ka();Hr();Wa();ti();Pf=class extends It{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let t=e.shape,n=[];for(let i=0;i<this.noiseShape.length;++i)n.push(this.noiseShape[i]==null?t[i]:this.noiseShape[i]);return n}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e);if(0<this.rate&&this.rate<1){let i=t.training==null?!1:t.training,o=this.getNoiseShape(n);return uu(()=>ly(n,this.rate,o,this.seed),()=>n,i)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};Pf.className="Dropout";Ie.registerClass(Pf);Nh=class extends Pf{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};Nh.className="SpatialDropout1D";Ie.registerClass(Nh);Sh=class extends It{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Xr(this.units,"units"),this.activation=ma(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Rr(e.kernelConstraint),this.biasConstraint=Rr(e.biasConstraint),this.kernelRegularizer=hr(e.kernelRegularizer),this.biasRegularizer=hr(e.biasRegularizer),this.activityRegularizer=hr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ut(e);let t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=Ut(e);let t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e),i=ty(this.activation.getClassName()),o;return i!=null?o=Ro(n,this.kernel.read(),i,this.bias?this.bias.read():null):(o=Ro(n,this.kernel.read()),this.bias!=null&&(o=xi(o,this.bias.read())),this.activation!=null&&(o=this.activation.apply(o))),o})}getConfig(){let e={units:this.units,activation:pa(this.activation),useBias:this.useBias,kernelInitializer:wr(this.kernelInitializer),biasInitializer:wr(this.biasInitializer),kernelRegularizer:rr(this.kernelRegularizer),biasRegularizer:rr(this.biasRegularizer),activityRegularizer:rr(this.activityRegularizer),kernelConstraint:zr(this.kernelConstraint),biasConstraint:zr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};Sh.className="Dense";Ie.registerClass(Sh);Ah=class extends It{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ut(e);for(let t of e.slice(1))if(t==null)throw new ce(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],zo(e,1)]}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e);if(this.dataFormat==="channelsFirst"&&n.rank>1){let i=[0];for(let o=2;o<n.rank;++o)i.push(o);i.push(1),n=Ft(n,i)}return sre(n)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};Ah.className="Flatten";Ie.registerClass(Ah);Mh=class extends It{constructor(e){super(e),this.supportsMasking=!0,this.activation=ma(e.activation)}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e);return this.activation.apply(n)})}getConfig(){let e={activation:pa(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};Mh.className="Activation";Ie.registerClass(Mh);Dh=class extends It{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return ye(()=>(e=St(e),ore(e,this.n)))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};Dh.className="RepeatVector";Ie.registerClass(Dh);Eh=class extends It{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",i=t.slice(),o=1,a=null;for(let u=0;u<i.length;++u){let c=i[u];if(this.isUnknown(c))if(a===null)a=u;else throw new ce("Can only specifiy one unknown dimension.");else o*=c}let s=zo(e);if(a!==null){if(o===0||s%o!==0)throw new ce(n);i[a]=s/o}else if(s!==o)throw new ce(n);return i}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e),i=n.shape,o=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return pe(n,o)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};Eh.className="Reshape";Ie.registerClass(Eh);Th=class extends It{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=Qn(1,e.dims.length+1);if(!Fe.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new mr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ut(e);let t=e.slice();return this.dims.forEach((n,i)=>{t[i+1]=e[n]}),t}call(e,t){return Ft(St(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};Th.className="Permute";Ie.registerClass(Th);Ch=class extends It{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=St(e),i=-1;return Ax(Jl(n,this.maskValue),i)}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e),i=-1,o=!0,a=Ax(Jl(n,this.maskValue),i,o);return ee(n,Le(a,n.dtype))})}};Ch.className="Masking";Ie.registerClass(Ch)});var Ih,Zae=g(()=>{dt();Wn();As();Sn();ur();fa();Ka();Hr();ti();Ih=class extends It{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(pr(e.inputLength))}this.inputDim=e.inputDim,Xr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Xr(this.outputDim,"outputDim"),this.embeddingsInitializer=cr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=hr(e.embeddingsRegularizer),this.activityRegularizer=hr(e.activityRegularizer),this.embeddingsConstraint=Rr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return ye(()=>this.maskZero?(e=St(e),Jl(e,mt(e))):null)}computeOutputShape(e){if(e=Ut(e),this.inputLength==null)return[...e,this.outputDim];let t=pr(this.inputLength);if(t.length!==e.length-1)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let i=0;i<t.length;++i){let o=t[i],a=e[i+1];if(o!=null&&a!=null&&o!==a)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);o==null&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e);n.dtype!=="int32"&&(n=dc(n,"int32"));let i=cy(this.embeddings.read(),pe(n,[n.size]));return pe(i,Ut(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:wr(this.embeddingsInitializer),embeddingsRegularizer:rr(this.embeddingsRegularizer),activityRegularizer:rr(this.activityRegularizer),embeddingsConstraint:zr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};Ih.className="Embedding";Ie.registerClass(Ih)});function kh(r,e){for(;r<0;)r+=e;return r}function r2e(r,e,t){if(r.shape.length>3||e.shape.length>3)throw new pt("batchDot is not implemented for tensors of 4D or higher rank yet");if(Fe.assert(r.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${r.shape.length}`),Fe.assert(r.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),r.dtype==="complex64"||e.dtype==="complex64")throw new pt("batchDot is not implemented for complex64-type Tensors yet.");let n=r.shape.length,i=e.shape.length;t==null&&(t=[n-1,i-2]);let o=t;return ye(()=>{let a;if(n>i){a=n-i;let u=[];for(let c=0;c<a;++c)u.push(1);e=pe(e,e.shape.concat(u))}else if(i>n){a=i-n;let u=[];for(let c=0;c<a;++c)u.push(1);r=pe(r,r.shape.concat(u))}else a=0;let s;if(r.shape.length===2&&e.shape.length===2)o[0]===o[1]?s=rt(ee(r,e),o[0]):s=rt(ee(Ft(r,[1,0]),e),o[1]);else{let u=o[0]!==r.shape.length-1,c=o[1]===e.shape.length-1;s=fr(r,e,u,c)}if(a>0){let u;n>i?u=n+i-3:u=n-1;let c=[];for(let l=u;l<u+a;++l)c.push(l);s=xs(s,c)}return s.shape.length===1&&(s=mi(s,1)),s})}var Ts,Oh,_h,Fh,Bh,zh,Rh,Lh,Xae=g(()=>{dt();dt();Wn();Sn();ur();Nc();Hr();Wa();ti();Ts=class extends It{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new pt}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;let n=e.slice(0,e.length-t.length);for(let i=0;i<t.length;++i){let o=e[e.length-t.length+i],a=t[i];if(o==null||a==null||o<0||a<0)n.push(null);else if(o===1)n.push(a);else if(a===1)n.push(o);else{if(o!==a)throw new ce("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(o)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ut(e)]),e=e,e.length<2)throw new ce(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let o of e)o!=null&&o[0]!==null&&t.push(o[0]);if(t=Fo(t),t.length>1)throw new ce(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=e[0]==null?null:e[0].slice(1);for(let o=1;o<e.length;++o){let a=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let i=e.map(o=>o.length);e.indexOf(null)===-1&&Fo(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return ye(()=>{if(e=e,this.reshapeRequired){let n=[],i=e.map(o=>o.rank);if(i.indexOf(null)===-1){let o=la(i);for(let a of e){let s=a.rank;for(let u=0;u<o-s;++u)a=Ns(a,1);n.push(a)}return this.mergeFunction(n)}else{let o=!1;for(let u of e){let c=u.rank;if(c==null){let l=u.shape,f=l[0],p=l.slice(1).concat([f]),m=pe(u,[f].concat(zo(l.slice(1))));m=Ft(m,[1,0]),m=pe(m,p),n.push(m),o=!0}else if(c>1){let l=Qn(1,c).concat([0]);n.push(Ft(u,l)),o=!0}else n.push(u)}let a=this.mergeFunction(n),s=a.rank;if(o){if(s==null){let u=a.shape,c=u.length,l=u[c-1],f=[l].concat(u.slice(0,u.length-1));a=pe(Ft(pe(a,[-1,l]),[1,0]),f)}else if(s>1){let u=[s-1].concat(Qn(0,s-1));a=Ft(a,u)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let i=1;i<e.length;++i){let o=e[i]==null?null:e[i].slice(1);t=this.computeElementwiseOpOutputShape(t,o)}let n=[];for(let i of e)i!=null&&i[0]!==null&&n.push(i[0]);return n=Fo(n),n.length===1?t=n.concat(t):t=[null].concat(t),t}computeMask(e,t){return ye(()=>{if(t==null)return null;if(!Array.isArray(t))throw new ce("`mask` should be an Array");if(!Array.isArray(e))throw new ce("`inputs` should be an Array");if(t.length!==e.length)throw new ce(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(i=>i==null))return null;t=t.map(i=>i==null?i:mi(i,0));let n=t[0];for(let i=1;i<t.length-1;++i)n=Mo(n,t[i]);return n})}},Oh=class extends Ts{constructor(e){super(e)}mergeFunction(e){return ye(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Oe(t,e[n]);return t})}};Oh.className="Add";Ie.registerClass(Oh);_h=class extends Ts{constructor(e){super(e)}mergeFunction(e){return ye(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=ee(t,e[n]);return t})}};_h.className="Multiply";Ie.registerClass(_h);Fh=class extends Ts{constructor(e){super(e)}mergeFunction(e){return ye(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Oe(t,e[n]);return ee(1/e.length,t)})}};Fh.className="Average";Ie.registerClass(Fh);Bh=class extends Ts{constructor(e){super(e)}mergeFunction(e){return ye(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Do(t,e[n]);return t})}};Bh.className="Maximum";Ie.registerClass(Bh);zh=class extends Ts{constructor(e){super(e)}mergeFunction(e){return ye(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=vm(t,e[n]);return t})}};zh.className="Minimum";Ie.registerClass(zh);Rh=class extends Ts{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ce("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let i of e)if(i!=null){t=!1;break}if(t)return;let n=[];for(let i=0;i<e.length;++i){let o=e[i].slice();o.splice(this.axis,1);let a=!1;for(let s of n)if(Fe.arraysEqual(s,o)){a=!0;break}a||n.push(o)}if(n.length>1)throw new ce("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ye(()=>vf(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ce("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),i=this.axis<0?n.length+this.axis:this.axis;for(let o of t.slice(1)){if(n[i]==null||o[i]==null){n[i]=null;break}n[i]+=o[i]}return n}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new ce("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ce("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new ce(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return ye(()=>{let n=!0;if(t.forEach(a=>{if(a!=null){n=!1;return}}),n)return null;let i=[];for(let a=0;a<e.length;++a)t[a]==null?i.push(Le(Un(e[a]),"bool")):t[a].rank<e[a].rank?i.push(mi(t[a],-1)):i.push(t[a]);let o=wn(i,this.axis);return fT(o,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};Rh.className="Concatenate";Ie.registerClass(Rh);Lh=class extends Ts{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Fe.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new pt("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(t,n);if(t[i[0]]!==n[i[1]])throw new ce(`Dimension incompatibility: ${t[i[0]]} !== ${n[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ce(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],n=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((o,a)=>kh(o,e[a].shape.length)):i=[kh(this.axes,t.shape.length),kh(this.axes,n.shape.length)],this.normalize&&(t=Km(t,i[0]),n=Km(n,i[1])),r2e(t,n,i)}interpretAxes(e,t){let n;return Array.isArray(this.axes)?n=this.axes:n=[kh(this.axes,e.length),kh(this.axes,t.length)],n}computeOutputShape(e){Fe.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new pt("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(t,n);t.splice(i[0],1),n.splice(i[1],1),n.splice(0,1);let o=t.concat(n);return o.length===1&&o.push(1),o}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};Lh.className="Dot";Ie.registerClass(Lh)});var qh,Ph,$h,Jae=g(()=>{dt();Wn();Sn();ti();qh=class extends It{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e);return uu(()=>Oe(xf(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}};qh.className="GaussianNoise";Ie.registerClass(qh);Ph=class extends It{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ye(()=>{this.invokeCallHook(e,t);let n=St(e);return this.rate>0&&this.rate<1?uu(()=>{let o=Math.sqrt(this.rate/(1-this.rate));return ee(n,xf(n.shape,1,o))},()=>n,t.training||!1):n})}};Ph.className="GaussianDropout";Ie.registerClass(Ph);$h=class extends It{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||St(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ye(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return uu(()=>{let o=St(e),a=1.6732632423543772,s=1.0507009873554805,u=-a*s,c=oa(vs(n),this.rate);c=dc(c,"float32");let l=((1-this.rate)*(1+this.rate*u**2))**-.5,f=-l*u*this.rate,p=Oe(ee(o,c),ee(Oe(c,-1),u));return Oe(ee(p,l),f)},()=>St(e),t.training||!1)}return e})}};$h.className="AlphaDropout";Ie.registerClass($h)});function Uh(r,e,t,n,i,o=.001){let a;if(r.rank===2)a=gT(r,e,t,n,i,o);else if(r.rank===3)a=vT(r,e,t,n,i,o);else if(r.rank===4)a=xT(r,e,t,n,i,o);else throw new pt(`batchNormalization is not implemented for array of rank ${r.rank} yet`);return a}function n2e(r,e,t,n,i=.001){return ye(()=>{let o=Xl(r,n),a=o.mean,s=o.variance;return[Uh(r,a,s,t,e,i),a,s]})}function i2e(r,e,t,n,i=.001){return ye(()=>{let o=Xl(r,n),a=o.mean,s=o.variance,u=[];for(let d of Qn(0,r.rank))n.indexOf(d)!==-1?u.push(1):u.push(r.shape[d]);let c=pe(a,u),l=pe(s,u),f=e==null?null:pe(e,u),p=t==null?null:pe(t,u);return[Uh(r,c,l,p,f,i),a,s]})}function o2e(r,e,t,n,i=.001){return Fe.arraysEqual(n.slice().sort(),Qn(0,r.rank-1))?n2e(r,e,t,n,i):i2e(r,e,t,n,i)}var Gh,Vh,Yae=g(()=>{dt();dt();As();Sn();ur();fa();Ka();Hr();Wa();ti();Gh=class extends It{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=cr(e.betaInitializer||"zeros"),this.gammaInitializer=cr(e.gammaInitializer||"ones"),this.movingMeanInitializer=cr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=cr(e.movingVarianceInitializer||"ones"),this.betaConstraint=Rr(e.betaConstraint),this.gammaConstraint=Rr(e.gammaConstraint),this.betaRegularizer=hr(e.betaRegularizer),this.gammaRegularizer=hr(e.gammaRegularizer)}build(e){e=Ut(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(n==null)throw new ce(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new mr({ndim:e.length,axes:{[t]:n}})];let i=[n];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return ye(()=>{let n=t.training==null?!1:t.training,i=St(e),o=i.shape,a=o.length,s=Qn(0,a),u=this.axis>=0?this.axis:this.axis+a;s.splice(u,1);let c=Oo(1,a);c[u]=o[u];let l=s.slice();l.sort();let f=!Fe.arraysEqual(l,Qn(0,a).slice(0,a-1)),p=()=>{if(f){let N=pe(this.movingMean.read(),c),v=pe(this.movingVariance.read(),c),w=this.center?pe(this.beta.read(),c):null,S=this.scale?pe(this.gamma.read(),c):null;return Uh(i,N,v,w,S,this.epsilon)}else return Uh(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!n)return p();let[m,d,h]=o2e(i,this.gamma.read(),this.beta.read(),s,this.epsilon),x=(N,v,w)=>{ye(()=>{let S=1-w,b=N.read(),E=ee(it(b,v),S);N.write(it(b,E))})};return(()=>{x(this.movingMean,d,this.momentum),x(this.movingVariance,h,this.momentum)})(),m})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:wr(this.betaInitializer),gammaInitializer:wr(this.gammaInitializer),movingMeanInitializer:wr(this.movingMeanInitializer),movingVarianceInitializer:wr(this.movingVarianceInitializer),betaRegularizer:rr(this.betaRegularizer),gammaRegularizer:rr(this.gammaRegularizer),betaConstraint:zr(this.betaConstraint),gammaConstraint:zr(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};Gh.className="BatchNormalization";Ie.registerClass(Gh);Vh=class extends It{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=cr(e.betaInitializer||"zeros"),this.gammaInitializer=cr(e.gammaInitializer||"ones"),this.betaRegularizer=hr(e.betaRegularizer),this.gammaRegularizer=hr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ut(e);let t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=t);for(let o of this.axis)if(o<0||o>=t)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==Fo(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let n=this.axis.map(o=>e[o]),i=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,t){let n=St(e),i=n.shape,o=i.length;return ye(()=>{let{mean:s,variance:u}=Xl(n,this.axis,!0),c=Oo(1,o);for(let h of this.axis)c[h]=i[h];let l=h=>h!=null&&h.shape.length!==o?pe(h,c):h,f=l(this.gamma.read()),p=l(this.beta.read()),m=[],d=[];for(let h=0;h<o;++h)this.axis.indexOf(h)!==-1?(m.push(i[h]),d.push(1)):(m.push(1),d.push(i[h]));return s=hi(s,m),u=hi(u,m),f=hi(f,d),p=hi(p,d),Uh(n,s,u,p,f,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:wr(this.betaInitializer),gammaInitializer:wr(this.gammaInitializer),betaRegularizer:rr(this.betaRegularizer),gammaRegularizer:rr(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};Vh.className="LayerNormalization";Ie.registerClass(Vh)});function a2e(r,e,t){return ye(()=>{if(r.rank!==4)throw new ce(`temporalPadding expects input tensor to be 4-D, but received a ${r.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ce("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=vi()),t!=="channelsLast"&&t!=="channelsFirst")throw new ce(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let n;return t==="channelsFirst"?n=[[0,0],[0,0],e[0],e[1]]:n=[[0,0],e[0],e[1],[0,0]],xm(r,n)})}var Wh,Qae=g(()=>{dt();dt();bs();Sn();ur();ti();Wh=class extends It{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?vi():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ce(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ce(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new ce(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new mr({ndim:4})]}computeOutputShape(e){e=Ut(e);let t,n;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?n=e[3]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],e[1],t,n]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?n=e[2]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],t,n,e[3]])}call(e,t){return ye(()=>a2e(St(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};Wh.className="ZeroPadding2D";Ie.registerClass(Wh)});function c0(r,e,t,n,i,o){return ye(()=>{kr(i),SC(o),gi(n),t==null&&(t=[1,1]),n==null&&(n="valid"),i==null&&(i=vi()),o==null&&(o="max"),r=dh(r,i);let a,s=n==="same"?"same":"valid";return o==="max"?a=UT(r,e,t,s):a=hT(r,e,t,s),i==="channelsFirst"&&(a=Ft(a,[0,3,1,2])),a})}function ese(r,e,t,n,i,o){return ye(()=>{kr(i),SC(o),gi(n),t==null&&(t=[1,1,1]),n==null&&(n="valid"),i==null&&(i=vi()),o==null&&(o="max"),r=JC(r,i);let a,s=n==="same"?"same":"valid";return o==="max"?a=GT(r,e,t,s):a=dT(r,e,t,s),i==="channelsFirst"&&(a=Ft(a,[0,4,1,2,3])),a})}var i0,Hh,Kh,o0,jh,Zh,a0,Xh,Jh,s0,Yh,Qh,u0,ed,td,tse=g(()=>{dt();dt();bs();Wn();Bo();Sn();Sn();ur();ch();Hr();ti();r0();i0=class extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ce(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Xr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ce(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Xr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,gi(this.padding),this.inputSpec=[new mr({ndim:3})]}computeOutputShape(e){e=Ut(e);let t=ki(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return ye(()=>{this.invokeCallHook(e,t),e=Ns(St(e),2);let n=this.poolingFunction(St(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return xs(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},Hh=class extends i0{constructor(e){super(e)}poolingFunction(e,t,n,i,o){return kr(o),gi(i),c0(e,t,n,i,o,"max")}};Hh.className="MaxPooling1D";Ie.registerClass(Hh);Kh=class extends i0{constructor(e){super(e)}poolingFunction(e,t,n,i,o){return kr(o),gi(i),c0(e,t,n,i,o,"avg")}};Kh.className="AveragePooling1D";Ie.registerClass(Kh);o0=class extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ce(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Xr(this.poolSize,"poolSize"),Xr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,kr(this.dataFormat),gi(this.padding),this.inputSpec=[new mr({ndim:4})]}computeOutputShape(e){e=Ut(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=ki(t,this.poolSize[0],this.padding,this.strides[0]),n=ki(n,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return ye(()=>(this.invokeCallHook(e,t),this.poolingFunction(St(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},jh=class extends o0{constructor(e){super(e)}poolingFunction(e,t,n,i,o){return kr(o),gi(i),c0(e,t,n,i,o,"max")}};jh.className="MaxPooling2D";Ie.registerClass(jh);Zh=class extends o0{constructor(e){super(e)}poolingFunction(e,t,n,i,o){return kr(o),gi(i),c0(e,t,n,i,o,"avg")}};Zh.className="AveragePooling2D";Ie.registerClass(Zh);a0=class extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ce(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Xr(this.poolSize,"poolSize"),Xr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,kr(this.dataFormat),gi(this.padding),this.inputSpec=[new mr({ndim:5})]}computeOutputShape(e){e=Ut(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=ki(t,this.poolSize[0],this.padding,this.strides[0]),n=ki(n,this.poolSize[1],this.padding,this.strides[1]),i=ki(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n,i]:[e[0],t,n,i,e[4]]}call(e,t){return ye(()=>(this.invokeCallHook(e,t),this.poolingFunction(St(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},Xh=class extends a0{constructor(e){super(e)}poolingFunction(e,t,n,i,o){return kr(o),gi(i),ese(e,t,n,i,o,"max")}};Xh.className="MaxPooling3D";Ie.registerClass(Xh);Jh=class extends a0{constructor(e){super(e)}poolingFunction(e,t,n,i,o){return kr(o),gi(i),ese(e,t,n,i,o,"avg")}};Jh.className="AveragePooling3D";Ie.registerClass(Jh);s0=class extends It{constructor(e){super(e),this.inputSpec=[new mr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new pt}},Yh=class extends s0{constructor(e){super(e||{})}call(e,t){return ye(()=>{let n=St(e);return Vr(n,1)})}};Yh.className="GlobalAveragePooling1D";Ie.registerClass(Yh);Qh=class extends s0{constructor(e){super(e||{})}call(e,t){return ye(()=>{let n=St(e);return ro(n,1)})}};Qh.className="GlobalMaxPooling1D";Ie.registerClass(Qh);u0=class extends It{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,kr(this.dataFormat),this.inputSpec=[new mr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new pt}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},ed=class extends u0{call(e,t){return ye(()=>{let n=St(e);return this.dataFormat==="channelsLast"?Vr(n,[1,2]):Vr(n,[2,3])})}};ed.className="GlobalAveragePooling2D";Ie.registerClass(ed);td=class extends u0{call(e,t){return ye(()=>{let n=St(e);return this.dataFormat==="channelsLast"?ro(n,[1,2]):ro(n,[2,3])})}};td.className="GlobalMaxPooling2D";Ie.registerClass(td)});function s2e(r){Va(ere,"BidirectionalMergeMode",r)}var l0,rd,u2e,nd,rse=g(()=>{dt();dt();Wn();Bo();Sn();ur();iy();Hr();ti();bh();kf();l0=class extends It{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let i=t.layer,o=Wi(i,n);delete t.layer;let a={layer:o};return Object.assign(a,t),new e(a)}},rd=class extends l0{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ut(e),e.length<3)throw new ce(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ut(e);let t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),i=e[1];return[n[0],i].concat(n.slice(1))}call(e,t){return ye(()=>(e=St(e),QC((a,s)=>[St(this.layer.call(a,t)),[]],e,[],!1,null,null,!1,!0)[1]))}};rd.className="TimeDistributed";Ie.registerClass(rd);u2e="concat",nd=class extends l0{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=Wi(n),t.goBackwards=t.goBackwards!==!0;let i={};if(i.className=e.layer.getClassName(),i.config=t,this.backwardLayer=Wi(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?u2e:e.mergeMode,s2e(this.mergeMode),e.weights)throw new pt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let n,i,o;return this.returnState&&(o=t.slice(1)),n=t[0],n=n,this.mergeMode==="concat"?(n[n.length-1]*=2,i=[n]):this.mergeMode==null?i=[n,n.slice()]:i=[n],this.returnState?this.mergeMode==null?i.concat(o).concat(o.slice()):[n].concat(o).concat(o.slice()):kn(i)}apply(e,t){let n=t==null?null:t.initialState,i=t==null?null:t.constants;t==null&&(t={});let o=YC(e,n,i,this.numConstants);if(e=o.inputs,n=o.initialState,i=o.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(n==null||n.length===0)&&i==null)return super.apply(e,t);let a=[],s=[];if(n!=null){let c=n.length;if(c%2>0)throw new ce("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);let l=n.map(f=>new mr({shape:f.shape}));this.forwardLayer.stateSpec=l.slice(0,c/2),this.backwardLayer.stateSpec=l.slice(c/2),s.push(...l)}if(i!=null)throw new pt("Support for constants in Bidirectional layers is not implemented yet.");let u=a[0]instanceof ri;for(let c of a)if(c instanceof ri!==u)throw new ce("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){let c=[e].concat(a),l=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=l;let p=super.apply(c,t);return this.inputSpec=f,p}else return super.apply(e,t)}call(e,t){return ye(()=>{let n=t.initialState,i,o;if(n==null)i=this.forwardLayer.call(e,t),o=this.backwardLayer.call(e,t);else{let u=n.slice(0,n.length/2),c=n.slice(n.length/2);i=this.forwardLayer.call(e,Object.assign(t,{initialState:u})),o=this.backwardLayer.call(e,Object.assign(t,{initialState:c}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(o.slice(1))),i=i[0],o=o[0]),this.returnSequences&&(o=nu(o,1));let s;return this.mergeMode==="concat"?s=vf([i,o]):this.mergeMode==="sum"?s=Oe(i,o):this.mergeMode==="ave"?s=ee(.5,Oe(i,o)):this.mergeMode==="mul"?s=ee(i,o):this.mergeMode==null&&(s=[i,o]),this.returnState?this.mergeMode==null?s.concat(a):[s].concat(a):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){ca(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),ca(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let n;if(this.returnSequences?this.mergeMode==null?n=[t,t]:n=t:this.mergeMode==null?n=[null,null]:n=null,this.returnState){let o=this.forwardLayer.states.map(a=>null);return Array.isArray(n)?n.concat(o).concat(o):[n].concat(o).concat(o)}else return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=Wi(t.layer);if(delete t.layer,t.numConstants!=null)throw new pt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let i=t;return i.layer=n,new e(i)}};nd.className="Bidirectional";Ie.registerClass(nd)});var nse=g(()=>{Tf();Sn();ZC();Vae();r0();Hae();Kae();jae();Zae();Xae();Jae();Yae();Qae();tse();bh();rse();});var ise=g(()=>{Nc();UC()});var ose=g(()=>{Py();});var ase=g(()=>{Ka();Ka();});var sse=g(()=>{If();eh();ur();Cf();});var use=g(()=>{bre();dt();dae();xae();yae();nse();ise();ose();ase();If();sse();Sn();eh();WC();KC();By();ZC();iy();bh();Cf();Py();Um();Oy();});var cse=g(()=>{use();});var h2e,lse=g(()=>{h2e={loadBoston:"http://scikitjs.org/data/boston.csv",loadIris:"http://scikitjs.org/data/iris.csv",loadWine:"http://scikitjs.org/data/wine.csv",loadDiabetes:"http://scikitjs.org/data/diabetes.csv",loadBreastCancer:"http://scikitjs.org/data/breast_cancer.csv",loadDigits:"http://scikitjs.org/data/digits.csv",fetchCaliforniaHousing:"http://scikitjs.org/data/california_housing.csv"}});function d2e(...r){let e=[];for(let t=0;t<r.length;t++){let n=r[t];e.push([n.name,n])}return new f0({estimators:e})}var f0,fse=g(()=>{Ai();Pt();f0=class extends ks{constructor({estimators:t=[],weights:n=void 0}={}){super();this.name="VotingRegressor";this.tf=qe(),this.estimators=t,this.weights=n}fit(t,n){return Qt(this,null,function*(){var i;for(let o=0;o<((i=this.estimators)==null?void 0:i.length);o++){let[a,s]=this.estimators[o];yield s.fit(t,n)}return this})}predict(t){let n=[],i=this.estimators.length,o=this.weights||Array(i).fill(1/i);for(let a=0;a<i;a++){let[s,u]=this.estimators[a],c=o[a];n.push(u.predict(t).mul(c))}return this.tf.addN(n)}transform(t){let n=[],i=this.estimators.length;for(let o=0;o<i;o++){let[a,s]=this.estimators[o];n.push(s.predict(t))}return n}fitTransform(t,n){return Qt(this,null,function*(){return(yield this.fit(t,n)).transform(t)})}}});function g2e(...r){let e=[];for(let t=0;t<r.length;t++){let n=r[t];e.push([n.name,n])}return new p0({estimators:e})}var p0,pse=g(()=>{Pt();Ai();Fg();p0=class extends Os{constructor({estimators:t=[],weights:n=void 0,voting:i="hard"}={}){super();this.name="VotingClassifier";this.tf=qe(),this.estimators=t,this.weights=n,this.voting=i,this.le=new Lu}fit(t,n){return Qt(this,null,function*(){var o;let i=this.le.fitTransform(n);for(let a=0;a<((o=this.estimators)==null?void 0:o.length);a++){let[s,u]=this.estimators[a];yield u.fit(t,i)}return this})}predictProba(t){let n=[],i=this.estimators.length,o=this.weights||Array(i).fill(1/i);for(let a=0;a<i;a++){let[s,u]=this.estimators[a],c=o[a];n.push(u.predictProba(t).mul(c))}return this.tf.addN(n)}predict(t){let n=[],i=this.estimators.length,o=this.weights||Array(i).fill(1/i);if(this.voting==="hard"){for(let a=0;a<i;a++){let[s,u]=this.estimators[a],c=o[a],l=u.predict(t).toInt(),f=this.tf.oneHot(l,this.le.classes.length);n.push(f.mul(c))}return this.tf.tensor1d(this.le.inverseTransform(this.tf.addN(n).argMax(1)))}else{for(let a=0;a<i;a++){let[s,u]=this.estimators[a],c=o[a],l=u.predictProba(t);n.push(l.mul(c))}return this.tf.tensor1d(this.le.inverseTransform(this.tf.addN(n).argMax(1)))}}transform(t){let n=[],i=this.estimators.length;if(this.voting==="hard"){for(let o=0;o<i;o++){let[a,s]=this.estimators[o];n.push(s.predict(t))}return n}else{for(let o=0;o<i;o++){let[a,s]=this.estimators[o];n.push(s.predictProba(t))}return n}}fitTransform(t,n){return Qt(this,null,function*(){return(yield this.fit(t,n)).transform(t)})}}});var m0,mse=g(()=>{Dr();Pt();m0=class{constructor({metric:e,entries:t}){this._metric=e,this._entries=t,this.tf=qe()}kNearest(e,t){let{_metric:n,_entries:i}=this;return Ge(i.shape[1]==t.shape[1],"X_train.shape[1] must equal X_predict.shape[1]"),this.tf.tidy(()=>{let o=this.tf.unstack(t).map(a=>this.tf.tidy(()=>{let s=n.tensorDistance(a,i).neg(),{values:u,indices:c}=this.tf.topk(s,e);return[u,c]}));return{distances:this.tf.stack(o.map(a=>a[0])).neg(),indices:this.tf.stack(o.map(a=>a[1]))}})}}});var h0,id,v2e,x2e,y2e,hse=g(()=>{Dr();Pt();h0=r=>(e,t)=>{var a,s;let n=qe(),i=(a=e.shape[e.rank-1])!=null?a:NaN,o=(s=t.shape[t.rank-1])!=null?s:NaN;return Ge(i===o,`minkowskiDistance(${r}).tensorDistance(u,v): u.shape[-1] must equal v.shape[-1].`),n.tidy(()=>n.norm(n.sub(e,t),r,-1))},id=r=>{switch(r){case 1:return v2e;case 2:return x2e;case 1/0:return y2e}Ge(1<=r,"minkowskiMetric(p): Invalid p.");let e={tensorDistance:h0(r),distance(t,n){let i=t.length;if(i!==n.length)throw new Error(`minkowskiMetric(${r}).treeMetric(u,v): u and v must have same length.`);let o=0;for(let a=0;a<i;a++)o+=Wf(Math.abs(t[a]-n[a]),r);return Wf(o,1/r)},distToBBox(t,n){if(t.length*2!=n.length)throw new Error(`minkowskiMetric(${r}).treeMetric.minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.`);let i=0;for(let o=0,a=0;a<t.length;a++){let s=Math.max(0,n[o++]-t[a],t[a]-n[o++]);i+=Wf(s,r)}return Wf(i,1/r)},name:`minkowskiMetric(${r})`,toString(){return this.name}};return Object.freeze(e)},v2e=Object.freeze({tensorDistance:h0(1),distance(r,e){let t=r.length;if(t!==e.length)throw new Error("minkowskiMetric(1).distance(u,v): u and v must have same length.");let n=0;for(let i=0;i<t;i++)n+=Math.abs(r[i]-e[i]);return n},minDistToBBox(r,e){let t=e.length;if(t!==r.length<<1)throw new Error("minkowskiMetric(1).minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.");let n=0;for(let i=0;i<t;){let o=r[i>>>1],a=e[i++]-o,s=o-e[i++];n+=.5*(Math.abs(a)+a+(Math.abs(s)+s))}return n},name:"manhattanMetric",toString(){return this.name}}),x2e=Object.freeze({tensorDistance:h0(2),distance(r,e){let t=r.length;if(t!==e.length)throw new Error("minkowskiMetric(2).distance(u,v): u and v must have same length.");let n=0;for(let i=0;i<t;i++){let o=r[i]-e[i];n+=o*o}return Math.sqrt(n)},minDistToBBox(r,e){let t=e.length;if(t!==r.length*2)throw new Error("minkowskiMetric(2).minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.");let n=0;for(let i=0;i<t;){let o=r[i>>>1],a=e[i++]-o,s=o-e[i++],u=.5*(Math.abs(a)+a+(Math.abs(s)+s));n+=u*u}return Math.sqrt(n)},name:"euclideanMetric",toString(){return this.name}}),y2e=Object.freeze({tensorDistance:h0(1/0),distance(r,e){let t=r.length;if(t!==e.length)throw new Error("minkowskiMetric(Infinity).distance(u,v): u and v must have same length.");let n=0;for(let i=0;i<t;i++){let o=Math.abs(r[i]-e[i]);n=Math.max(n,o)}return n},minDistToBBox(r,e){let t=e.length;if(t!==r.length*2)throw new Error("minkowskiMetric(Infinity).minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.");let n=-1/0;for(let i=0;i<t;){let o=r[i>>>1],a=e[i++]-o,s=o-e[i++],u=.5*(Math.abs(a)+a+(Math.abs(s)+s));n=Math.max(n,u)}return n},name:"chebyshevMetric",toString(){return this.name}})});function b2e(r,e,t){let n=t&&t.state;n&&(typeof n=="object"&&e.copy(n,e),r.state=()=>e.copy(e,{}))}function tI(r,e){let t=new eI(r),n=()=>t.next();return b2e(n,t,e),n}var eI,dse,rI,gse,d0=g(()=>{eI=class{constructor(e){e==null&&(e=+new Date);let t=4022871197;this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(e),this.s0<0&&(this.s0+=1),this.s1-=n(e),this.s1<0&&(this.s1+=1),this.s2-=n(e),this.s2<0&&(this.s2+=1);function n(i){i=String(i);for(let o=0;o<i.length;o++){t+=i.charCodeAt(o);let a=.02519603282416938*t;t=a>>>0,a-=t,a*=t,t=a>>>0,a-=t,t+=a*4294967296}return(t>>>0)*23283064365386963e-26}}next(){let{c:e,s0:t,s1:n,s2:i}=this,o=2091639*t+e*23283064365386963e-26;return this.s0=n,this.s1=i,this.s2=o-(this.c=o|0)}copy(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}},dse=r=>tI(r==null?void 0:r.toString()),rI=r=>(e,t)=>{if(e>=t)throw new Error("randInt(rng)(from,until): from must be less than until.");let n=Math.floor(e+(t-e)*r());return n===t?n-1:n},gse=r=>e=>{let t=rI(r);for(let n=e.length;n>1;n--){let i=t(0,n),o=e[n-1];e[n-1]=e[i],e[i]=o}}});var g0,xse=g(()=>{Dr();g0=class{constructor(e,t){let n=e.length;Ge(n>0,"new CappedMaxHeap(keys,vals): keys.length must be positive."),Ge(n===t.length,"new CappedMaxHeap(keys,vals): keys.length must equal vals.length."),e[0]=NaN,this._keys=e,this._vals=t,this._pos=n}get maxKey(){return this._keys[0]}add(e,t){let{_keys:n,_vals:i,_pos:o}=this;if(0<o)this._pos=--o;else if(n[0]<=e)return;let a=n.length-1;for(;;){let s=(o<<1)+1;if(s>a||(s+=+(s<a&&n[s]<n[s+1]),n[s]<=e))break;n[o]=n[s],i[o]=i[s],o=s}n[o]=e,i[o]=t}sort(){let{_keys:e,_vals:t,_pos:n}=this;Ge(n===0,"CappedMaxHeap().sort(): Heap is not full yet.");let i=(u,c)=>{let l=e[u];e[u]=e[c],e[c]=l;let f=t[u];t[u]=t[c],t[c]=f},o=u=>{e[u]>e[u+1]&&i(u,u+1)},a=u=>{o(u),e[u+1]>e[u+2]&&(i(u+1,u+2),o(u))},s=(u,c)=>{switch(c-u){case 0:return;case 1:return;case 2:return o(u);case 3:return a(u)}let l=u+c>>>1;a(l-1);let f=e[l];i(u,l);let p=u,m=u+1;for(let d=m;d<c;d++){let h=e[d];h<=f&&(i(d,m),h<f&&i(p++,m),m++)}s(u,p),s(m,c)};s(0,e.length)}}});var yse,w2e,N2e,$f,bse=g(()=>{Dr();d0();d0();xse();Pt();yse=r=>(r<<1)+1,w2e=r=>r-1>>1,N2e=r=>(Ge(0<=r&&r<=1073741824,"ceilPow2(x): x must be in range [0, 1<<30]."),r=Math.ceil(r),r=Math.max(r,1),2147483648>>>-1+Math.clz32(r-1)),$f=class{constructor(e,t,n,i,o,a,s){this.tf=qe(),this._nSamples=e,this._nFeatures=t,this._metric=n,this._points=i,this._bBoxes=o,this._offsets=a,this._indices=s,Object.freeze(this)}static build(i){return Qt(this,arguments,function*({metric:e,entries:t,leafSize:n=16}){Ge(1<n,"new KdTree({leafSize=16}): leafSize must be a positive number."),Ge(typeof e.minDistToBBox=="function","new KdTree({metric}): metric must implement `minDistToBBox` function.");let[o,a]=t.shape,s=new Int32Array(o);for(let v=0;v<o;v++)s[v]=v;let u=(yield t.data()).slice(),c=Array.from(s,(v,w)=>u.subarray(a*w,a*++w)),l=N2e(o/n),f=l*2-1,p=f-l,m=new Int32Array(l+1),d=function(){let v=a*2,w=new Float32Array(f*v),S=[];for(let b=0;b<f;)S.push(w.subarray(v*b,v*++b));return S}(),h=rI(tI(`KdTree[${o},${a}]`)),x=(v,w)=>{let S=s[v];s[v]=s[w],s[w]=S},y=(v,w,S)=>{let b=d[v];for(let A=0;A<b.length;A++)b[A]=A%2?-1/0:1/0;for(let A=w;A<S;A++){let k=a*s[A];for(let T=0;T<b.length;){let L=u[k+(T>>>1)];b[T]=Math.min(b[T++],L),b[T]=Math.max(b[T++],L)}}if(p<=v){let A=v-p;m[A]=w,m[A+1]=S;return}let E=function(){let A=0,k=-1/0;for(let T=b.length;T>0;){let L=b[--T]-b[--T];L>k&&(k=L,A=T>>>1)}return A}(),M=w+S>>>1;for(let A=w,k=S;;){let T=u[a*s[h(A,k)]+E],L=A,$=A;for(let K=A;K<k;K++){let V=u[a*s[K]+E];V<=T&&(x(K,$),V<T&&x(L++,$),$++)}if(L>M)k=L;else if($<M)A=$;else break}let D=yse(v);y(D,w,M),y(D+1,M,S)};y(0,0,o);let N=(v,w)=>{v*=a,w*=a;for(let S=v+a;v<S;v++,w++){let b=u[v];u[v]=u[w],u[w]=b}};for(let v=s.slice(),w=0;w<o;w++)for(let S=w;;){let b=v[S];if(v[S]=S,b===w)break;N(S,S=b)}return new $f(o,a,e,c,d,m,s)})}kNearest(e,t){let{_nSamples:n,_nFeatures:i,_metric:o,_points:a,_bBoxes:s,_offsets:u,_indices:c}=this;e=Math.min(e,n);let[l,f]=t.shape;Ge(i===f,"KNeighbors: X_train.shape[1] must equal X_predict.shape[1].");let p=new Float32Array(l*e),m=new Int32Array(l*e),d=w2e(s.length-1)+1;if(0<e&&0<l){let h=t.dataSync(),x,y,N=(v,w)=>{if(!(w>=x.maxKey))if(v<d){let S=yse(v),b=o.minDistToBBox(y,s[S]),E=o.minDistToBBox(y,s[S+1]);b<=E?(N(S,b),N(S+1,E)):(N(S+1,E),N(S,b))}else{v-=d;let S=u[v],b=u[v+1];for(let E=S;E<b;E++){let M=o.distance(y,a[E]);x.add(M,c[E])}}};for(let v=0;v<l;v++){y=h.subarray(f*v,f*(v+1));let w=e*v,S=e+w;x=new g0(p.subarray(w,S),m.subarray(w,S)),N(0,o.minDistToBBox(y,s[0]))}}return{distances:this.tf.tensor2d(p,[l,e],"float32"),indices:this.tf.tensor2d(m,[l,e],"int32")}}}});var wse,Nse,od,Mc,nI=g(()=>{mse();hse();Kr();Dr();bse();Pt();so();wse={uniform(r){let e=qe(),{shape:t}=r;return e.fill(t,1/t[1])},distance(r){let e=qe();return e.tidy(()=>{let t=r.min(1,!0),n=e.divNoNan(t.toFloat(),r),i=r.lessEqual(0).toFloat(),o=e.where(t.lessEqual(0),i,n),a=o.sum(1,!0);return o.div(a)})}},Nse={minkowski:r=>id(r),manhattan:()=>id(1),euclidean:()=>id(2),chebyshev:()=>id(1/0)},od={kdTree:$f.build,brute:r=>Qt(void 0,null,function*(){return new m0(r)}),auto:r=>typeof r.metric.minDistToBBox=="function"?od.kdTree(r):od.brute(r)},Mc=class extends qr{constructor(t={}){super();Object.assign(this,t)}_getFitParams(){let{_neighborhood:t,_y:n,nNeighbors:i=5,weights:o="uniform"}=this;Ge(0<=i&&i%1===0,"KNeighbors({nNeighbors})::predict(X): nNeighbors must be a positive int."),Ge(Object.keys(wse).includes(o),"KNeighbors({weights})::predict(X): invalid weights."),Ge(t!=null&&n!=null,"KNeighbors::predict(X): model not trained yet. Call `await fit(x, y)` first.");let a=wse[o];return{nNeighbors:i,weightsFn:a,neighborhood:t,y:n}}fit(t,n){return Qt(this,null,function*(){let{algorithm:i="auto",metric:o="minkowski",p:a=2,leafSize:s}=this;Ge(Object.keys(Nse).includes(o),"KNeighbors({metric}).fit(X,y): invalid metric."),Ge(Object.keys(od).includes(i),"KNeighbors({algorithm}).fit(X,y): invalid algorithm.");let u=Nse[o](a),c=_t(t);return this._neighborhood=yield od[i]({entries:c,metric:u,leafSize:s}),this._y=Ya(n),this})}};Mc.SUPPORTED_ALGORITHMS=Object.freeze(Object.keys(od))});var iI,Sse=g(()=>{nI();Kr();Pt();iI=class extends Mc{constructor(){super(...arguments);this.name="KNeighborsRegressor"}predict(t){let n=qe(),{neighborhood:i,y:o,nNeighbors:a,weightsFn:s}=this._getFitParams();return n.tidy(()=>{let u=_t(t),{distances:c,indices:l}=i.kNearest(a,u),f=o.gather(l),p=s(c);return n.matMul(f.reshape([-1,1,a]),p.reshape([-1,a,1])).as1D()})}}});function v0(r){r.engine().backendNames().includes("tensorflow")&&!r.getKernel("Unique","tensorflow")&&(console.info("[scikit.js] Installing tfjs-node polyfill for tf.unique()."),r.registerKernel({kernelName:"Unique",backendName:"tensorflow",kernelFunc:e=>{let t=e.inputs.x,n=e.backend,{axis:i}=e.attrs,o=r.tensor1d([i],"int32"),a={float32:n.binding.TF_FLOAT,float64:n.binding.TF_DOUBLE,int32:n.binding.TF_INT32,int64:n.binding.TF_INT64,complex64:n.binding.TF_COMPLEX64,bool:n.binding.TF_BOOL,string:n.binding.TF_STRING};Ge(Object.keys(a).includes(t.dtype),"Unexpected dtype.");try{let s=[{value:a[t.dtype],name:"T",type:n.binding.TF_ATTR_TYPE},{value:a.int32,name:"Taxis",type:n.binding.TF_ATTR_TYPE},{value:a.int32,name:"out_idx",type:n.binding.TF_ATTR_TYPE}];return n.executeMultipleOutputs("UniqueV2",s,[t,o],2)}finally{o.dispose()}}}))}var oI=g(()=>{Dr();});function Ase(r,e){let t=qe();return t.tidy(()=>{e=Go(e);let n=this.predict(r);return t.equal(e,n).sum().div(e.shape[0])})}var Mse=g(()=>{Pt();Kr();});var ad,Dse=g(()=>{nI();Kr();oI();Mse();Pt();ad=class extends Mc{constructor(){super(...arguments);this.score=Ase;this.name="KNeighborsClassifier"}predictProba(t){var c;let{neighborhood:n,y:i,nNeighbors:o,weightsFn:a}=this._getFitParams(),[s]=(c=this.classes_)==null?void 0:c.shape,u=qe();return u.tidy(()=>{let l=_t(t),f=l.shape[0],{distances:p,indices:m}=n.kNearest(o,l),d=i.gather(m),h=a(p),x=u.oneHot(d,s);return u.mul(x.reshape([f,o,s]),h.reshape([f,o,1])).sum(1)})}predict(t){let n=this.classes_;return qe().tidy(()=>{let a=this.predictProba(t).argMax(1);return n.gather(a)})}fit(t,n){return Qt(this,null,function*(){let i=qe(),{values:o,indices:a}=i.tidy(()=>{let s=Go(n);return v0(i),i.unique(s)});return yield yI(ad.prototype,this,"fit").call(this,t,a),this.classes_=o,this})}}});var aI,Ese=g(()=>{rb();Pt();aI=class extends zc{constructor({penalty:e="l2",C:t=1,fitIntercept:n=!0}={}){let i=qe();super({modelCompileArgs:{optimizer:i.train.adam(.1),loss:i.losses.hingeLoss,metrics:["accuracy"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[i.callbacks.earlyStopping({monitor:"loss",patience:50})]},denseLayerArgs:{units:1,useBias:Boolean(n),activation:"softmax",kernelInitializer:i.initializers.zeros(),biasInitializer:i.initializers.zeros(),kernelRegularizer:e==="l2"?i.regularizers.l2({l2:t}):e==="l1"?i.regularizers.l1({l1:t}):void 0},isClassification:!0,optimizerType:"adam",lossType:"hingeLoss"}),this.name="LinearSVC"}}});var sI,Tse=g(()=>{Bc();Pt();sI=class extends uo{constructor({epsilon:e=0,C:t=1,fitIntercept:n=!0}={}){let i=qe();super({modelCompileArgs:{optimizer:i.train.adam(.1),loss:function(o,a){return i.abs(i.sub(o,a)).sub(e).maximum(0)},metrics:["accuracy"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[i.callbacks.earlyStopping({monitor:"loss",patience:50})]},denseLayerArgs:{units:1,useBias:Boolean(n),kernelRegularizer:i.regularizers.l2({l2:t})},optimizerType:"adam",lossType:"custom"}),this.name="LinearSVR"}}});var x0,Cse=g(()=>{oI();Kr();Pt();so();x0=class extends qr{constructor(t={}){super();this.tf=qe(),this.classes=this.tf.tensor1d([]),this.means=[],this.variances=[],t.priors&&(this.priors=Go(t.priors)),this.varSmoothing=t.varSmoothing?t.varSmoothing:1e-9}fit(t,n){return Qt(this,null,function*(){let i=_t(t),o=Go(n),{values:a,meansByLabel:s,variancesByLabel:u}=this.tf.tidy(()=>{v0(this.tf);let c=[],l=[],{values:f}=this.tf.unique(o),{variance:p}=this.tf.moments(i,0),m=p.max().mul(this.varSmoothing);return this.tf.unstack(f).forEach(d=>{let h=this.tf.equal(o,d).toFloat(),x=this.tf.sum(h),y=this.tf.mul(i,h.expandDims(1)).sum(0).div(x),N=this.tf.sub(i,y).mul(h.expandDims(1)).pow(2).sum(0).div(x).add(m);c.push(y),l.push(N)}),{values:f,meansByLabel:c,variancesByLabel:l}});return this.classes=a,this.means=s,this.variances=u,this})}predictProba(t){let n=_t(t);return this.tf.tidy(()=>{let o=[];this.classes.unstack().forEach((s,u)=>{let c=this.means[u],l=this.variances[u],f=this.kernel(n,c,l);o.push(f)});let a=this.tf.stack(o,1);return this.priors?a.mul(this.priors):a})}predict(t){return this.predictProba(t).argMax(1)}}});var uI,Ise=g(()=>{Cse();Pt();uI=class extends x0{constructor(){super(...arguments);this.name="GaussianNB"}kernel(t,n,i){let o=qe();return o.tidy(()=>o.sub(t,n.expandDims(0)).pow(2).div(i.expandDims(0).mul(-2)).exp().div(i.mul(2*Math.PI).expandDims(0).sqrt()).prod(1))}}});function kse(r,e){let t=0;for(let n=0;n<r.length;n++)t+=r[n]*r[n];return 1-t/(e*e)}function Ose(r,e){let t=0;for(let n=0;n<r.length;n++){let i=r[n];i>0&&(i/=e,t-=i*Math.log2(i))}return t}function _se(r,e,t){let n=e/t;return r/t-n*n}function S2e(r){let e=Number.NEGATIVE_INFINITY;for(let t=0;t<r.length;t++)r[t]>e&&(e=r[t]);return e}var Dc,Ec,cI=g(()=>{so();Dc=class extends qr{constructor({impurityMeasure:t,y:n}){super();this.start=0;this.end=0;this.pos=0;this.labelFreqsTotal=[];this.labelFreqsLeft=[];this.labelFreqsRight=[];this.nSamples=0;this.nSamplesLeft=0;this.nSamplesRight=0;this.name="ClassificationCriterion";this.impurityMeasure=t,this.nLabels=S2e(n)+1,this.y=n,this.labelFreqsTotal=new Array(this.nLabels).fill(0),this.labelFreqsLeft=new Array(this.nLabels).fill(0),this.labelFreqsRight=new Array(this.nLabels).fill(0)}init(t,n,i){this.start=t,this.end=n,this.nSamples=n-t,this.labelFreqsTotal=this.labelFreqsTotal.fill(0),this.labelFreqsLeft=this.labelFreqsLeft.fill(0),this.labelFreqsRight=this.labelFreqsRight.fill(0);for(let o=t;o<n;o++){let a=i[o];this.labelFreqsTotal[this.y[a]]+=1}}reset(){this.pos=this.start,this.labelFreqsLeft=this.labelFreqsLeft.fill(0),this.labelFreqsRight=this.labelFreqsRight.fill(0)}update(t,n){for(let i=this.pos;i<t;i++){let o=n[i];this.labelFreqsLeft[this.y[o]]+=1}for(let i=0;i<this.labelFreqsTotal.length;i++)this.labelFreqsRight[i]=this.labelFreqsTotal[i]-this.labelFreqsLeft[i];this.pos=t,this.nSamplesLeft=this.pos-this.start,this.nSamplesRight=this.end-this.pos}childrenImpurities(){let t=this.impurityMeasure==="gini"?kse:Ose;return{impurityLeft:t(this.labelFreqsLeft,this.nSamplesLeft),impurityRight:t(this.labelFreqsRight,this.nSamplesRight)}}impurityImprovement(){let{impurityLeft:t,impurityRight:n}=this.childrenImpurities();return-this.nSamplesLeft*t-this.nSamplesRight*n}nodeImpurity(){return(this.impurityMeasure==="gini"?kse:Ose)(this.labelFreqsTotal,this.nSamples)}nodeValue(){return this.labelFreqsTotal}static fromJson(t){let n=JSON.parse(t),i=new Dc({impurityMeasure:n.impurityMeasure,y:n.y});return Object.assign(i,n)}},Ec=class extends qr{constructor({impurityMeasure:t,y:n}){super();this.start=0;this.end=0;this.pos=0;this.squaredSum=0;this.squaredSumLeft=0;this.squaredSumRight=0;this.sumTotal=0;this.sumTotalLeft=0;this.sumTotalRight=0;this.nSamples=0;this.nSamplesLeft=0;this.nSamplesRight=0;this.name="RegressionCriterion";this.impurityMeasure=t,this.y=n}init(t,n,i){this.sumTotal=0,this.squaredSum=0,this.start=t,this.end=n,this.nSamples=n-t;for(let o=t;o<n;o++){let a=i[o],s=this.y[a];this.sumTotal+=s,this.squaredSum+=s*s}}reset(){this.pos=this.start,this.squaredSumLeft=0,this.sumTotalLeft=0,this.squaredSumRight=0,this.sumTotalRight=0}update(t,n){for(let i=this.pos;i<t;i++){let o=n[i],a=this.y[o];this.sumTotalLeft+=a,this.squaredSumLeft+=a*a}this.sumTotalRight=this.sumTotal-this.sumTotalLeft,this.squaredSumRight=this.squaredSum-this.squaredSumLeft,this.pos=t,this.nSamplesLeft=this.pos-this.start,this.nSamplesRight=this.end-this.pos}childrenImpurities(){let t=_se;return{impurityLeft:t(this.squaredSumLeft,this.sumTotalLeft,this.nSamplesLeft),impurityRight:t(this.squaredSumRight,this.sumTotalRight,this.nSamplesRight)}}impurityImprovement(){let{impurityLeft:t,impurityRight:n}=this.childrenImpurities();return-this.nSamplesLeft*t-this.nSamplesRight*n}nodeImpurity(){return _se(this.squaredSum,this.sumTotal,this.nSamples)}nodeValue(){return[this.sumTotal/this.nSamples]}static fromJson(t){let n=JSON.parse(t),i=new Ec({impurityMeasure:n.impurityMeasure,y:n.y});return Object.assign(i,n)}}});var Bse=Re((GUt,Fse)=>{function A2e(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}Fse.exports=A2e});var lI=Re((VUt,zse)=>{var M2e=ZD();function D2e(r,e){var t=-1,n=r.length,i=n-1;for(e=e===void 0?n:e;++t<e;){var o=M2e(t,i),a=r[o];r[o]=r[t],r[t]=a}return r.length=e,r}zse.exports=D2e});var Lse=Re((WUt,Rse)=>{var E2e=Bse(),T2e=lI();function C2e(r){return T2e(E2e(r))}Rse.exports=C2e});var Pse=Re((HUt,qse)=>{var I2e=lI(),k2e=QD();function O2e(r){return I2e(k2e(r))}qse.exports=O2e});var Use=Re((KUt,$se)=>{var _2e=Lse(),F2e=Pse(),B2e=Og();function z2e(r){var e=B2e(r)?_2e:F2e;return e(r)}$se.exports=z2e});function y0(){return{feature:0,threshold:0,pos:-1,impurityLeft:Number.POSITIVE_INFINITY,impurityRight:Number.POSITIVE_INFINITY,foundSplit:!1}}var Gse,sd,b0=g(()=>{cI();Gse=Si(Use());so();sd=class extends qr{constructor({X:t,y:n,minSamplesLeaf:i,impurityMeasure:o,maxFeatures:a,samplesSubset:s=[]}){super();this.name="Splitter";if(this.X=t,this.y=n,this.nFeatures=t[0].length,this.minSamplesLeaf=i,this.maxFeatures=Math.min(a,this.nFeatures),this.shuffleFeatures=a<this.nFeatures,this.sampleMap=new Int32Array(t.length),this.start=0,this.end=0,this.kMinSplitDiff=1e-8,s.length===0){this.nSamplesTotal=t.length;for(let u=0;u<this.nSamplesTotal;u++)this.sampleMap[u]=u}else{this.nSamplesTotal=s.length;for(let u=0;u<this.nSamplesTotal;u++)this.sampleMap[u]=s[u]}o==="squared_error"?this.criterion=new Ec({impurityMeasure:o,y:n}):this.criterion=new Dc({impurityMeasure:o,y:n}),this.featureOrder=[];for(let u=0;u<this.nFeatures;u++)this.featureOrder.push(u);this.resetSampleRange(0,this.nSamplesTotal)}resetSampleRange(t,n){this.start=t,this.end=n,this.criterion.init(t,n,this.sampleMap)}splitNode(){let t=y0(),n=y0(),i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=0,s=0;for(t.foundSplit=!1,this.shuffleFeatures&&(this.featureOrder=(0,Gse.default)(this.featureOrder));a<this.maxFeatures;){s=this.featureOrder[a];let u=new Float32Array(this.end-this.start);for(let l=this.start;l<this.end;l++){let p=this.X[this.sampleMap[l]][s];u[l-this.start]=p}if(u.sort(),this.criterion.reset(),this.sampleMap.subarray(this.start,this.end).sort((l,f)=>this.X[l][s]-this.X[f][s]),u[0]===u[u.length-1]){a+=1;continue}let c=this.start+1;for(;c<this.end;){for(;c<this.end&&u[c-this.start]<=u[c-this.start-1]+this.kMinSplitDiff;)c++;if(c===this.end){c++;continue}c-this.start<this.minSamplesLeaf||this.end-c<this.minSamplesLeaf||(t.pos=c,this.criterion.update(t.pos,this.sampleMap),i=this.criterion.impurityImprovement(),i>o&&(o=i,t.foundSplit=!0,t.feature=s,t.threshold=(u[c-this.start-1]+u[c-this.start])/2,n=Object.assign({},t))),c+=1}a+=1}if(t.foundSplit){if(n.pos<this.end&&s!==n.feature){let l=this.start,f=this.end,p=0;for(;l<f;)this.X[this.sampleMap[l]][n.feature]<=n.threshold?l+=1:(f-=1,p=this.sampleMap[l],this.sampleMap[l]=this.sampleMap[f],this.sampleMap[f]=p)}this.criterion.reset(),this.criterion.update(n.pos,this.sampleMap);let{impurityLeft:u,impurityRight:c}=this.criterion.childrenImpurities();return n.impurityLeft=u,n.impurityRight=c,n}else return t}}});function w0(r){if(r.length===0)throw new Error(`X can not be empty, but it has a length of 0. It is ${r}.`);for(let e=0;e<r.length;e++){let t=r[e];if(t.length===0)throw new Error(`Rows in X can not be empty, but row ${e} in X is ${t}.`);for(let n=0;n<t.length;n++)if(typeof t[n]!="number"||!Number.isFinite(t[n]))throw new Error(`X must contain finite non-NaN numbers, but the element at X[${e}][${n}] is ${t[n]}`)}}function Vse(r){if(r.length===0)throw new Error(`y can not be empty, but it has a length of 0. It is ${r}.`);for(let e=0;e<r.length;e++){let t=r[e];if(!Number.isSafeInteger(t))throw new Error(`Some y values are not an integer. Found ${t} but must be an integer only`)}}var Wse=g(()=>{});function R2e(r){return r.map((e,t)=>[e,t]).reduce((e,t)=>t[0]>e[0]?t:e)[1]}var N0,ud,fI,pI,mI=g(()=>{b0();wd();b0();Dr();Wse();Kr();Fg();so();N0=class{constructor(){this.nodes=[];this.isBuilt=!1;this.name="DecisionTree"}getLeafNodes(e){let t=[];for(let n=0;n<e.length;n++){let i=0;for(;!this.nodes[i].isLeaf;)e[n][this.nodes[i].splitFeature]<=this.nodes[i].threshold?i=this.nodes[i].leftChildId:i=this.nodes[i].rightChildId;t.push(i)}return t}populateChildIds(){for(let e=1;e<this.nodes.length;e++)this.nodes[e].isLeft?this.nodes[this.nodes[e].parentId].leftChildId=e:this.nodes[this.nodes[e].parentId].rightChildId=e}predictProba(e){if(!this.isBuilt)throw new Error("Decision tree must be built with BuildTree method before predictions can be made.");let t=this.getLeafNodes(e),n=[];for(let i=0;i<t.length;i++){let o=[],a=t[i];for(let s=0;s<this.nodes[0].value.length;s++)o.push(this.nodes[a].value[s]/this.nodes[a].nSamples);n.push(o)}return n}predictClassification(e){if(!this.isBuilt)throw new Error("Decision tree must be built with BuildTree method before predictions can be made.");let t=this.getLeafNodes(e),n=[];for(let i=0;i<t.length;i++){let o=t[i];n.push(R2e(this.nodes[o].value))}return n}predictRegression(e){if(!this.isBuilt)throw new Error("Decision tree must be built with BuildTree method before predictions can be made.");let t=this.getLeafNodes(e),n=[];for(let i=0;i<t.length;i++){let o=t[i];n.push(this.nodes[o].value[0])}return n}},ud=class extends qr{constructor({criterion:t="gini",maxDepth:n=Number.POSITIVE_INFINITY,minSamplesSplit:i=2,minSamplesLeaf:o=1,maxFeatures:a=void 0,minImpurityDecrease:s=0}={}){super();this.stack=[];this.X=[];this.y=[];this.criterion=t,this.maxDepth=n===void 0?Number.POSITIVE_INFINITY:Number(n),this.minSamplesSplit=i,this.minSamplesLeaf=o,this.maxFeatures=a,this.minImpurityDecrease=s,this.maxFeaturesNumb=0,this.tree=new N0,this.name="DecisionTreeBase"}calcMaxFeatures(t,n){return n==="log2"?Math.floor(Math.log2(t)):n==="sqrt"||n==="auto"?Math.floor(Math.sqrt(t)):typeof n=="number"?(Ge(n>=1,"maxFeatures must be greater than 1"),Math.min(Math.floor(n),t)):t}fit(t,n,i){this.X=t,this.y=n;let o=i||[];this.maxFeaturesNumb=this.calcMaxFeatures(t[0].length,this.maxFeatures),this.splitter=new sd({X:t,y:n,minSamplesLeaf:this.minSamplesLeaf,impurityMeasure:this.criterion,maxFeatures:this.maxFeaturesNumb,samplesSubset:o});let a={start:0,end:this.splitter.sampleMap.length,depth:0,impurity:0,nSamples:this.splitter.sampleMap.length,parentId:-1,isLeft:!1};this.stack.push(a);let s=!0;for(;this.stack.length!==0;){let u=this.stack.pop();this.splitter.resetSampleRange(u.start,u.end);let c=y0(),l=!(u.depth<this.maxDepth)||u.nSamples<this.minSamplesSplit||u.nSamples<2*this.minSamplesLeaf;s&&(u.impurity=this.splitter.criterion.nodeImpurity(),s=!1),l||(c=this.splitter.splitNode(),l=l||!c.foundSplit||u.impurity<=this.minImpurityDecrease);let f={parentId:u.parentId,impurity:u.impurity,isLeaf:l,isLeft:u.isLeft,nSamples:u.nSamples,splitFeature:c.feature,threshold:c.threshold,value:this.splitter.criterion.nodeValue().slice(),leftChildId:-1,rightChildId:-1};this.tree.nodes.push(f);let p=this.tree.nodes.length-1;if(!l){let m={start:c.pos,end:u.end,nSamples:u.end-c.pos,depth:u.depth+1,parentId:p,isLeft:!1,impurity:c.impurityRight};this.stack.push(m);let d={start:u.start,end:c.pos,nSamples:c.pos-u.start,depth:u.depth+1,parentId:p,isLeft:!0,impurity:c.impurityLeft};this.stack.push(d)}}this.tree.populateChildIds(),this.tree.isBuilt=!0}},fI=class extends ud{constructor({criterion:t="gini",maxDepth:n=void 0,minSamplesSplit:i=2,minSamplesLeaf:o=1,maxFeatures:a=void 0,minImpurityDecrease:s=0}={}){Ge(["gini","entropy"].includes(t),'For classification must pass either the "gini" or "entropy" criterion');super({criterion:t,maxDepth:n,minSamplesSplit:i,minSamplesLeaf:o,maxFeatures:a,minImpurityDecrease:s});this.labelEncoder=new Lu,this.name="DecisionTreeClassifier"}fit(t,n){Ge(Ki(n),"y value is not a 1D container"),Ge(dr(t),"X value is not a 2D container");let i=ya(t),o=gd(n);Ge(i.length===o.length,"X and y must be the same size"),w0(i),Vse(o);let a=this.labelEncoder.fitTransform(o);return super.fit(i,gd(a)),this}getNLeaves(){return this.tree.nodes.filter(t=>t.isLeaf).length}predict(t){Ge(dr(t),"X value is not a 2D container");let n=ya(t);w0(n);let i=this.tree.predictClassification(n);return this.labelEncoder.inverseTransform(i)}predictProba(t){return this.tree.predictProba(t)}score(t,n){let i=this.predict(t);return vu(n,i)}},pI=class extends ud{constructor({criterion:t="squared_error",maxDepth:n=void 0,minSamplesSplit:i=2,minSamplesLeaf:o=1,maxFeatures:a=void 0,minImpurityDecrease:s=0}={}){Ge(["squared_error"].includes(t),'Must pass the regression criterion of "squared_error"');super({criterion:t,maxDepth:n,minSamplesSplit:i,minSamplesLeaf:o,maxFeatures:a,minImpurityDecrease:s});this.name="DecisionTreeRegressor"}fit(t,n){Ge(Ki(n),"y value is not a 1D container"),Ge(dr(t),"X value is not a 2D container");let i=ya(t),o=gd(n);return Ge(i.length===o.length,"X and y must be the same size"),w0(i),super.fit(i,o),this}getNLeaves(){return this.tree.nodes.filter(t=>t.isLeaf).length}predict(t){return this.tree.predictRegression(t)}score(t,n){let i=this.predict(t);return Jf(n,i)}}});var L2e,Hse,Kse=g(()=>{Pt();L2e=({nSamples:r=100,nFeatures:e=100,nInformative:t=10,nTargets:n=1,noise:i=1,bias:o=0,effectiveRank:a=null,tailStrength:s=.5,shuffle:u=!1,coef:c=!1}={})=>{let l=qe();return l.tidy(()=>{let f=Math.min(e,t),p;a===null?p=l.randomNormal([r,e]):p=Hse({nSamples:r,nFeatures:e,effectiveRank:a,tailStrength:s});let m=l.randomNormal([f,n]).mul(100),d=l.zeros([e-f,n]),h=l.concat([m,d]),x=p.dot(h).add(o);if(i>0&&(x=x.add(l.randomNormal(x.shape,void 0,i))),u){let y=l.util.createShuffledIndices(r);p=p.gather(y)}return x=l.squeeze(x),c?[p,x,l.squeeze(h)]:[p,x]})},Hse=({nSamples:r=100,nFeatures:e=100,effectiveRank:t=10,tailStrength:n=.5}={})=>{let i=qe();return i.tidy(()=>{let o=Math.min(r,e),[a]=i.linalg.qr(i.randomNormal([r,o])),[s]=i.linalg.qr(i.randomNormal([e,o])),c=i.range(0,o).div(t),l=i.exp(c.square().neg()).mul(1-n),f=i.exp(c.mul(-.1)).mul(n),p=l.add(f);return a.mul(p).dot(s.transpose())})}});var cd,hI=g(()=>{Dr();d0();Kr();Pt();cd=class{constructor({nSplits:e=5,shuffle:t=!1,randomState:n}={}){e=Number(e),Ge(Number.isInteger(e)&&e>1,"new KFold({nSplits}): nSplits must be an int greater than 1."),this.tf=qe(),this.nSplits=e,this.shuffle=Boolean(t),this.randomState=n,this.name="KFold"}getNumSplits(){return this.nSplits}*split(e,t,n){let{nSplits:i,shuffle:o,randomState:a}=this,s=gu(e);Ge(i<=s,"KFold({nSplits})::split(X): nSplits must not be greater than X.shape[0]."),t!=null&&Ge(s===gu(t),"KFold::split(X,y): X.shape[0] must equal y.shape[0]."),n!=null&&Ge(s===gu(n),"KFold::split(X,y,groups): X.shape[0] must equal groups.shape[0].");let u=new Int32Array(s);for(let p=0;p<u.length;p++)u[p]=p;if(o){let p=dse(a);gse(p)(u)}let c=Math.floor(s/i),l=s%i,f=0;for(;f<s;){let p=l-- >0?c+1:c,m=new Int32Array(s-p);m.set(u.subarray(0,f),0),m.set(u.subarray(f+p),f);let d=u.slice(f,f+p);yield{trainIndex:this.tf.tensor1d(m,"int32"),testIndex:this.tf.tensor1d(d,"int32")},f+=p}}}});function q2e(r,e,t,n=.1){if(Ge(t===void 0||typeof t=="number",`Invalid value for trainSize: ${t}. Must be number or undefined`),Ge(e===void 0||typeof e=="number",`Invalid value for testSize: ${e}. Must be number or undefined`),e===void 0&&t===void 0&&(e=n),typeof e=="number"&&(Number.isInteger(e)&&(e>=r||e<=0)||!Number.isInteger(e)&&(e<=0||e>=1)))throw Error(`testSize=${e} should be either positive and smaller than the number of samples ${r} or a float in the (0, 1) range`);if(typeof t=="number"&&(Number.isInteger(t)&&(t>=r||t<=0)||!Number.isInteger(t)&&(t<=0||t>=1)))throw Error(`trainSize=${t} should be either positive and smaller than the number of samples ${r} or a float in the (0, 1) range`);if(!Number.isInteger(t)&&!Number.isInteger(e)&&t&&e&&t+e>1)throw Error(`The sum of testSize and trainSize = ${t+e}, should be in the (0, 1) range. Reduce testSize and/or trainSize.`);let i,o;if(Number.isInteger(e)?i=e:typeof e=="number"&&(i=Math.ceil(e*r)),Number.isInteger(t)?o=t:typeof t=="number"&&(o=Math.ceil(t*r)),t===void 0&&(o=r-i),e===void 0&&(i=r-o),typeof o!="number"||typeof i!="number")throw Error("nTrain and nTest must be a number");if(o+i>r)throw Error(`The sum of trainSize and testSize = ${o+i}, should be smaller than the number of samples ${r}. Reduce testSize and/or trainSize.`);if(o=Math.floor(o),i=Math.floor(i),o===0)throw Error(`With nSamples=${r}, testSize=${e} and trainSize=${t}, the resulting train set will be empty. Adjust any of the aforementioned parameters.`);return[o,i]}function S0(r,e){let t=qe();return ao(r)?t.gather(r,e):rn(r)?r.iloc({rows:e}):Ja(r)?r.iloc(e):e.map(n=>r[n])}function P2e(r,e,t=.1,n,i){let o=gu(r),a=gu(e);Ge(o===a,"X and y don't have the same number of elements. They are of different size");let[s,u]=q2e(o,t,n),c=vd(o,o,i),l=c.slice(0,s),f=c.slice(s);return[S0(r,l),S0(r,f),S0(e,l),S0(e,f)]}var jse=g(()=>{Dr();Kr();Pt()});function $2e(r,e,t,n){return Qt(this,null,function*(){let i=qe(),o=t==null||n==null&&!Ki(t);o&&(n=n!=null?n:t);let{cv:a=new cd,groups:s,scoring:u}=n!=null?n:{};u==null&&(Ge(typeof r.score=="function","crossValScore(estimator,[X,y],params): Either params.scoring or estimator.score(X,y) must be defined."),u=r.score);let c=[];u=u.bind(r);let l;i.engine().startScope();try{e=Tc(e),o||(t=Go(t));for(let{trainIndex:f,testIndex:p}of a.split(e,t,s)){let m,d=e.gather(f),h=e.gather(p);if(o)yield r.fit(d),m=u(h);else{let x=t.gather(f),y=t.gather(p);yield r.fit(d,x),m=u(h,y),x.dispose(),y.dispose()}c.push(m),f.dispose(),p.dispose(),d.dispose(),h.dispose()}return l=i.stack(c)}finally{i.engine().endScope(l)}})}var Zse=g(()=>{Dr();hI();Dr();Kr();Pt();});var U2e=g(()=>{S3();A3();M3();D3();E3();wd();hj();yZ();NZ();SZ();AZ();DZ();tb();Fg();EZ();TZ();CZ();kZ();_Z();FZ();cse();lse();fse();pse();Sse();Dse();Ese();Tse();Ise();mI();Kse();Pt();hI();jse();Zse();so();cI();b0();mI();});U2e();export{Dc as ClassificationCriterion,cE as ColumnTransformer,N0 as DecisionTree,ud as DecisionTreeBase,fI as DecisionTreeClassifier,pI as DecisionTreeRegressor,eE as DummyClassifier,KD as DummyRegressor,eb as ElasticNet,uI as GaussianNB,cd as KFold,fE as KMeans,ad as KNeighborsClassifier,iI as KNeighborsRegressor,Lu as LabelEncoder,Y0 as LassoRegression,J0 as LinearRegression,aI as LinearSVC,sI as LinearSVR,nb as LogisticRegression,oE as MaxAbsScaler,nE as MinMaxScaler,uE as Normalizer,ep as OneHotEncoder,sE as OrdinalEncoder,Bg as Pipeline,Ec as RegressionCriterion,Q0 as RidgeRegression,lE as RobustScaler,qr as Serialize,aE as SimpleImputer,sd as Splitter,iE as StandardScaler,p0 as VotingClassifier,f0 as VotingRegressor,$2e as crossValScore,h2e as dataUrls,ofe as fromJSON,N3 as fromObject,qe as getBackend,Hse as makeLowRankMatrix,bbe as makePipeline,L2e as makeRegression,g2e as makeVotingClassifier,d2e as makeVotingRegressor,j0 as metrics,rue as setBackend,P2e as trainTestSplit};
